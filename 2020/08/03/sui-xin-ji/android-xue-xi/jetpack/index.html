<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Jetpack - 库金的博客</title><meta description="[toc] Jetpack简介Jetpack是一个开发组件工具集，官网：https:&amp;#x2F;&amp;#x2F;developer.android.google.cn&amp;#x2F;jetpack Jetpack 是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨 Android 版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。 Jetpack 库可以单独使用，也可以组合使用，以满足应用的不同需求。  Wor"><meta property="og:type" content="blog"><meta property="og:title" content="Jetpack"><meta property="og:url" content="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/"><meta property="og:site_name" content="库金的博客"><meta property="og:description" content="[toc] Jetpack简介Jetpack是一个开发组件工具集，官网：https:&amp;#x2F;&amp;#x2F;developer.android.google.cn&amp;#x2F;jetpack Jetpack 是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨 Android 版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。 Jetpack 库可以单独使用，也可以组合使用，以满足应用的不同需求。  Wor"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200721153616389.png"><meta property="og:image" content="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200722131636968.png"><meta property="og:image" content="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200721154242410.png"><meta property="og:image" content="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200722134519104.png"><meta property="og:image" content="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200722181709403.png"><meta property="article:published_time" content="2020-08-02T23:42:42.062Z"><meta property="article:modified_time" content="2020-08-02T23:42:59.741Z"><meta property="article:author" content="Ku Jin"><meta property="article:tag" content="Jetpack"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="images/Jetpack/image-20200721153616389.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/"},"headline":"库金的博客","image":["https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200721153616389.png","https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200722131636968.png","https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200721154242410.png","https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200722134519104.png","https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/images/Jetpack/image-20200722181709403.png"],"datePublished":"2020-08-02T23:42:42.062Z","dateModified":"2020-08-02T23:42:59.741Z","author":{"@type":"Person","name":"Ku Jin"},"description":"[toc] Jetpack简介Jetpack是一个开发组件工具集，官网：https:&#x2F;&#x2F;developer.android.google.cn&#x2F;jetpack Jetpack 是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨 Android 版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。 Jetpack 库可以单独使用，也可以组合使用，以满足应用的不同需求。  Wor"}</script><link rel="canonical" href="https://kujin521.github.io/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/"><link rel="icon" href="/hexo.github.io/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/hexo.github.io/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/hexo.github.io/css/prism-tomorrow.css" type="text/css"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/hexo.github.io/"><img src="/hexo.github.io/img/logo.svg" alt="库金的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/hexo.github.io/">Home</a><a class="navbar-item" href="/hexo.github.io/archives">Archives</a><a class="navbar-item" href="/hexo.github.io/categories">Categories</a><a class="navbar-item" href="/hexo.github.io/tags">Tags</a><a class="navbar-item" href="/hexo.github.io/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.062Z" title="2020-08-02T23:42:42.062Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">21 分钟 读完 (大约 3102 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Jetpack</h1><div class="content"><p>[toc]</p>
<h1 id="Jetpack简介"><a href="#Jetpack简介" class="headerlink" title="Jetpack简介"></a>Jetpack简介</h1><p>Jetpack是一个开发组件工具集，官网：<a href="https://developer.android.google.cn/jetpack">https://developer.android.google.cn/jetpack</a></p>
<p>Jetpack 是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨 Android 版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。</p>
<p>Jetpack 库可以单独使用，也可以组合使用，以满足应用的不同需求。</p>
<ul>
<li><a href="https://developer.android.google.cn/topic/libraries/architecture/workmanager">WorkManager</a> - 满足您的后台调度需求。</li>
<li><a href="https://developer.android.google.cn/topic/libraries/architecture/room">Room</a> - 实现数据存储持久性。</li>
<li><a href="https://developer.android.google.cn/guide/navigation/navigation-getting-started">Navigation</a> - 管理应用导航流程。</li>
<li><a href="https://developer.android.google.cn/training/camerax">CameraX</a> - 满足相机应用需求。</li>
<li>请参阅所有 Jetpack 库的<a href="https://developer.android.google.cn/jetpack/androidx/versions#version-table">概览</a>。</li>
</ul>
<p><img src="images/Jetpack/image-20200721153616389.png" alt="image-20200721153616389"></p>
<p><img src="images/Jetpack/image-20200722131636968.png" alt="image-20200722131636968"></p>
<h2 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>ViewModel是Jetpack组件之一，在传统Activity中需要负责逻辑处理，又要控制UI展示，甚至还得处理网络回调，现在ViewModel将负责Activity的数据部分</p>
<p>当手机旋转时Activity会被重新创建，但ViewModel生命周期是Activtity创建到销毁全过程，所以旋转不会导致数据丢失</p>
<p><img src="images/Jetpack/image-20200721154242410.png" alt="image-20200721154242410"></p>
<h3 id="简单的计时器"><a href="#简单的计时器" class="headerlink" title="简单的计时器"></a>简单的计时器</h3><ol>
<li><h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h4><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> lifecycle_version <span class="token operator">=</span> <span class="token string">"2.2.0"</span>
    implementation <span class="token string">"androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version"</span></code></pre>
<p>​    </p>
</li>
<li><h4 id="创建ViewModel"><a href="#创建ViewModel" class="headerlink" title="创建ViewModel"></a>创建ViewModel</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> MainModel<span class="token operator">:</span><span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> counter<span class="token operator">=</span><span class="token number">0</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
<li><h4 id="编写Activity"><a href="#编写Activity" class="headerlink" title="编写Activity"></a>编写Activity</h4><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

</code></pre>
</li>
</ol>
<pre><code>   &lt;TextView
       android:id="@+id/infoText"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_gravity="center_horizontal"
       android:text="@string/jishi" /&gt;

   &lt;Button
       android:id="@+id/plusOnBtn"
       android:layout_gravity="center_vertical"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="@string/pulus_one" /&gt;</code></pre>
   
   ```

<pre class=" language-kotlin"><code class="language-kotlin">
<span class="token keyword">package</span> com<span class="token punctuation">.</span>kj<span class="token punctuation">.</span>scoreviewmodel

<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProviders
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//定义viewmodel</span>
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> viewModel<span class="token operator">:</span> MainModel

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//初始化viewmodel</span>
        viewModel<span class="token operator">=</span> ViewModelProviders<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MainModel<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//button点击事件</span>
        plusOnBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            viewModel<span class="token punctuation">.</span>counter<span class="token operator">++</span>
            <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//更新视图</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        infoText<span class="token punctuation">.</span>text<span class="token operator">=</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="向ViewModel传递参数"><a href="#向ViewModel传递参数" class="headerlink" title="向ViewModel传递参数"></a>向ViewModel传递参数</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel
<span class="token comment" spellcheck="true">//添加构造参数</span>
<span class="token keyword">class</span> <span class="token function">MainModel2</span><span class="token punctuation">(</span>counter<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> counter<span class="token operator">=</span>counter
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProvider
<span class="token comment" spellcheck="true">//利用ViewModelProvider.Factory 接口 实现构造函数</span>
<span class="token keyword">class</span> <span class="token function">MainViewModelFactory</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">val</span> counter<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> ViewModelProvider<span class="token punctuation">.</span>Factory &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> ViewModel<span class="token operator">?</span><span class="token operator">></span> <span class="token function">create</span><span class="token punctuation">(</span>modelClass<span class="token operator">:</span> Class<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> T &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">MainModel2</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token keyword">as</span> T
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Context
<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>SharedPreferences
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProviders
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>


<span class="token keyword">class</span> MainActivity2 <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> viewModel<span class="token operator">:</span>MainModel2
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> sp<span class="token operator">:</span> SharedPreferences

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        sp<span class="token operator">=</span><span class="token function">getPreferences</span><span class="token punctuation">(</span>Context<span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span>
        <span class="token keyword">val</span> countReserved<span class="token operator">=</span>sp<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"count_reserved"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//初始化viewmodel（修改点）</span>
        viewModel<span class="token operator">=</span> ViewModelProviders<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token function">MainViewModelFactory</span><span class="token punctuation">(</span>countReserved<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MainModel2<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//button点击事件</span>
        plusOnBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            viewModel<span class="token punctuation">.</span>counter<span class="token operator">++</span>
            <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        sp<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span><span class="token string">"count_reserved"</span><span class="token punctuation">,</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//更新视图</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        infoText<span class="token punctuation">.</span>text<span class="token operator">=</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h3 id="更正由于ViewModel-设计理念是不依赖与Activity"><a href="#更正由于ViewModel-设计理念是不依赖与Activity" class="headerlink" title="更正由于ViewModel 设计理念是不依赖与Activity"></a>更正由于ViewModel 设计理念是不依赖与Activity</h3><h3 id="使用google推荐的写法"><a href="#使用google推荐的写法" class="headerlink" title="使用google推荐的写法"></a>使用google推荐的写法</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> UserProfileViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
   <span class="token keyword">val</span> userId <span class="token operator">:</span> String <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">val</span> user <span class="token operator">:</span> User <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">val</span> viewModel<span class="token operator">:</span> UserProfileViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<h3 id="遇到的错误"><a href="#遇到的错误" class="headerlink" title="遇到的错误"></a>遇到的错误</h3><pre><code>Cannot inline bytecode built with JVM target 1.8 into bytecode that is being built with JVM target
//解决
android &amp;#123;
    ...
    compileOptions &amp;#123;
        sourceCompatibility = 1.8
        targetCompatibility = 1.8
    &amp;#125;

    kotlinOptions &amp;#123;
        jvmTarget = "1.8"
    &amp;#125;
&amp;#125;
</code></pre>
<p><img src="images/Jetpack/image-20200722134519104.png" alt="image-20200722134519104"></p>
<h2 id="Lifecycles"><a href="#Lifecycles" class="headerlink" title="Lifecycles"></a>Lifecycles</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>在网络请求中，由于网络响应延迟，页面关闭情况，我们要对activity生命周期进行逻辑处理</p>
<h3 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h3><pre><code>import android.util.Log
import androidx.lifecycle.Lifecycle
import androidx.lifecycle.LifecycleObserver
import androidx.lifecycle.OnLifecycleEvent

class MyObserver(val lifecycle: Lifecycle) : LifecycleObserver &amp;#123;
    @OnLifecycleEvent(Lifecycle.Event.ON_START)
    fun activityStart()&amp;#123;
        Log.d("MyObserver", "activityStart: ")
    &amp;#125;
    @OnLifecycleEvent(Lifecycle.Event.ON_STOP)
    fun activityStop()&amp;#123;
        Log.d("MyObserver", "activityStop: ")
    &amp;#125;
&amp;#125;</code></pre>
<pre><code>//activity监听生命周期
        MyObserver(lifecycle)
        val currentState = lifecycle.currentState
        Toast.makeText(this, ""+currentState, Toast.LENGTH_SHORT).show()</code></pre>
<h2 id="LiveData"><a href="#LiveData" class="headerlink" title="LiveData"></a>LiveData</h2><p><a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData"><code>LiveData</code></a> 是一种可观察的数据存储器类。与常规的可观察类不同，LiveData 具有生命周期感知能力，意指它遵循其他应用组件（如 Activity、Fragment 或 Service）的生命周期。这种感知能力可确保 LiveData 仅更新处于活跃生命周期状态的应用组件观察者。</p>
<p>您可以注册与实现 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner"><code>LifecycleOwner</code></a> 接口的对象配对的观察者。有了这种关系，当相应的 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle"><code>Lifecycle</code></a> 对象的状态变为 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle.State#DESTROYED"><code>DESTROYED</code></a> 时，便可移除此观察者。 这对于 Activity 和 Fragment 特别有用，因为它们可以放心地观察 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData"><code>LiveData</code></a> 对象而不必担心泄露（当 Activity 和 Fragment 的生命周期被销毁时，系统会立即退订它们）。</p>
<ul>
<li>确保界面符合数据状态</li>
<li>不会发生内存泄漏</li>
<li>不会因Activity停止导致崩溃</li>
<li>不需要手动处理生命周期</li>
<li>数据保持最新状态</li>
<li>适当的配置更改</li>
<li>共享资源</li>
</ul>
<h3 id="1-使用LiveData对象"><a href="#1-使用LiveData对象" class="headerlink" title="1.使用LiveData对象"></a>1.使用LiveData对象</h3><ol>
<li><p>创建 <code>LiveData</code> 实例以存储某种类型的数据。这通常在 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel"><code>ViewModel</code></a> 类中完成。</p>
</li>
<li><p>创建可定义 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Observer#onChanged(T)"><code>onChanged()</code></a> 方法的 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Observer"><code>Observer</code></a> 对象，该方法可以控制当 <code>LiveData</code> 对象存储的数据更改时会发生什么。通常情况下，您可以在界面控制器（如 Activity 或 Fragment）中创建 <code>Observer</code> 对象。</p>
</li>
<li><p>使用 [<code>observe()</code>](<a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData#observe">https://developer.android.google.cn/reference/androidx/lifecycle/LiveData#observe</a>(android.arch.lifecycle.LifecycleOwner, android.arch.lifecycle.Observer)) 方法将 <code>Observer</code> 对象附加到 <code>LiveData</code> 对象。<code>observe()</code> 方法会采用 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner"><code>LifecycleOwner</code></a> 对象。这样会使 <code>Observer</code> 对象订阅 <code>LiveData</code> 对象，以使其收到有关更改的通知。通常情况下，您可以在界面控制器（如 Activity 或 Fragment）中附加 <code>Observer</code> 对象。</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>MutableLiveData
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> NameViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 用字符串创建一个LiveData</span>
    <span class="token keyword">val</span> currentName<span class="token operator">:</span> MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token keyword">by</span> lazy &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// ViewModel的其余部分…</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> NameActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 使用'by viewModels()' Kotlin属性委托</span>
    <span class="token comment" spellcheck="true">// 来自activity-ktx工件</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> model<span class="token operator">:</span> NameViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_name<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">// 创建用于更新UI的观察者。</span>
        <span class="token keyword">val</span> nameObserver <span class="token operator">=</span> Observer<span class="token operator">&lt;</span>String<span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span> newName <span class="token operator">-></span>
            <span class="token comment" spellcheck="true">// 更新UI，这里是TextView。</span>
            nameTextView<span class="token punctuation">.</span>text <span class="token operator">=</span> newName
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 观察LiveData，将此活动作为LifecycleOwner和observer传递进来。</span>
        model<span class="token punctuation">.</span>currentName<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> nameObserver<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">// 修改参数</span>
        button<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            model<span class="token punctuation">.</span>currentName<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true">//model.currentName.postValue(edText.text.toString())</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<h3 id="2-map和switchMap的使用"><a href="#2-map和switchMap的使用" class="headerlink" title="2.map和switchMap的使用"></a>2.map和switchMap的使用</h3><ol>
<li><p>定义一个User类</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token keyword">var</span> fistName<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> lastName<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span>Int<span class="token punctuation">)</span></code></pre>
</li>
</ol>
<ol start="2">
<li><p>编写ViewModel</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">MainViewModel</span><span class="token punctuation">(</span>countReserved<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> userLiveData<span class="token operator">=</span>MytableLiveData<span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> userName<span class="token operator">:</span>LiveData<span class="token operator">&lt;</span>String<span class="token operator">>=</span>Transformations<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userLiveData<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>user<span class="token operator">-></span>
        <span class="token string">"$&amp;#123;user.firstName&amp;#125; $&amp;#123;user.lastName&amp;#125;"</span>                                                            
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<ol start="3">
<li><h2 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h2></li>
</ol>
<p><a href="https://developer.android.google.cn/training/data-storage/room">Room</a> 持久性库在 SQLite 的基础上提供了一个抽象层，让用户能够在充分利用 SQLite 的强大功能的同时，获享更强健的数据库访问机制。</p>
<p>Room 包含 3 个主要组件：</p>
<ul>
<li><p><a href="https://developer.android.google.cn/reference/androidx/room/Database"><strong>数据库</strong></a>：包含数据库持有者，并作为应用已保留的持久关系型数据的底层连接的主要接入点。</p>
<p>使用 <a href="https://developer.android.google.cn/reference/androidx/room/Database"><code>@Database</code></a> 注释的类应满足以下条件：</p>
<ul>
<li>是扩展 <a href="https://developer.android.google.cn/reference/androidx/room/RoomDatabase"><code>RoomDatabase</code></a> 的抽象类。</li>
<li>在注释中添加与数据库关联的实体列表。</li>
<li>包含具有 0 个参数且返回使用 <a href="https://developer.android.google.cn/reference/androidx/room/Dao"><code>@Dao</code></a> 注释的类的抽象方法。</li>
</ul>
<p>在运行时，您可以通过调用 [<code>Room.databaseBuilder()</code>](<a href="https://developer.android.google.cn/reference/androidx/room/Room#databaseBuilder">https://developer.android.google.cn/reference/androidx/room/Room#databaseBuilder</a>(android.content.Context, java.lang.Class, java.lang.String)) 或 [<code>Room.inMemoryDatabaseBuilder()</code>](<a href="https://developer.android.google.cn/reference/androidx/room/Room#inMemoryDatabaseBuilder">https://developer.android.google.cn/reference/androidx/room/Room#inMemoryDatabaseBuilder</a>(android.content.Context, java.lang.Class)) 获取 <a href="https://developer.android.google.cn/reference/androidx/room/Database"><code>Database</code></a> 的实例。</p>
</li>
</ul>
<ul>
<li><p><a href="https://developer.android.google.cn/training/data-storage/room/defining-data"><strong>Entity</strong></a>：表示数据库中的表。</p>
</li>
<li><p><a href="https://developer.android.google.cn/training/data-storage/room/accessing-data"><strong>DAO</strong></a>：包含用于访问数据库的方法。</p>
</li>
</ul>
<p>应用使用 Room 数据库来获取与该数据库关联的数据访问对象 (DAO)。然后，应用使用每个 DAO 从数据库中获取实体，然后再将对这些实体的所有更改保存回数据库中。 最后，应用使用实体来获取和设置与数据库中的表列相对应的值。</p>
<p><img src="images/Jetpack/image-20200722181709403.png" alt="image-20200722181709403"></p>
<h3 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h3><p>导入依赖</p>
<pre class=" language-kotlin"><code class="language-kotlin">def room_version <span class="token operator">=</span> <span class="token string">"2.2.5"</span>

    implementation <span class="token string">"androidx.room:room-runtime:<span class="token interpolation variable">$room_version</span>"</span>
    <span class="token comment" spellcheck="true">//annotationProcessor "androidx.room:room-compiler:$room_version" // 对于Kotlin来说，使用kapt而不是annotationProcessor</span>
    kapt <span class="token string">"androidx.room:room-compiler:<span class="token interpolation variable">$room_version</span>"</span> <span class="token comment" spellcheck="true">// 对于Kotlin来说，使用kapt而不是annotationProcessor</span>

<span class="token comment" spellcheck="true">// 可选- Kotlin扩展和协同程序支持空间</span>
implementation <span class="token string">"androidx.room:room-ktx:<span class="token interpolation variable">$room_version</span>"</span>

<span class="token comment" spellcheck="true">// 可选- RxJava支持房间</span>
implementation <span class="token string">"androidx.room:room-rxjava2:<span class="token interpolation variable">$room_version</span>"</span>

<span class="token comment" spellcheck="true">// 可选-番石榴支持房间，包括可选和ListenableFuture</span>
implementation <span class="token string">"androidx.room:room-guava:<span class="token interpolation variable">$room_version</span>"</span>

<span class="token comment" spellcheck="true">// 测试助手</span>
testImplementation <span class="token string">"androidx.room:room-testing:<span class="token interpolation variable">$room_version</span>"</span></code></pre>
<p>User</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//数据库的表</span>
<span class="token annotation builtin">@Entity</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">User</span><span class="token punctuation">(</span>
    <span class="token annotation builtin">@ColumnInfo</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"first_name"</span><span class="token punctuation">)</span> <span class="token keyword">val</span> firstName<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token annotation builtin">@ColumnInfo</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"last_name"</span><span class="token punctuation">)</span> <span class="token keyword">val</span> lastName<span class="token operator">:</span> String<span class="token operator">?</span>
<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> uid<span class="token operator">:</span> Long<span class="token operator">=</span><span class="token number">0</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>   </code></pre>
<p>UserDao</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//数据访问对象</span>
<span class="token annotation builtin">@Dao</span>
<span class="token keyword">interface</span> UserDao &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span>

    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user WHERE uid IN (:userIds)"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">loadAllByIds</span><span class="token punctuation">(</span>userIds<span class="token operator">:</span> IntArray<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span>

    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user WHERE first_name LIKE :first AND "</span> <span class="token operator">+</span>
            <span class="token string">"last_name LIKE :last LIMIT 1"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">findByName</span><span class="token punctuation">(</span>first<span class="token operator">:</span> String<span class="token punctuation">,</span> last<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> User

    <span class="token annotation builtin">@Insert</span>
    <span class="token keyword">fun</span> <span class="token function">insertUser</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span><span class="token operator">:</span>Long

    <span class="token annotation builtin">@Delete</span>
    <span class="token keyword">fun</span> <span class="token function">delete</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>AppDatabase</p>
<pre class=" language-kotlin"><code class="language-kotlin">    <span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>创建上述文件后，您可以使用以下代码获取已创建的数据库的实例：</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//定义数据库对象，数据库版本，包含的实体类</span>
<span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token punctuation">[</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao

    <span class="token keyword">companion</span> <span class="token keyword">object</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">var</span> instance<span class="token operator">:</span> AppDatabase<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>

        <span class="token annotation builtin">@Synchronized</span>
        <span class="token keyword">fun</span> <span class="token function">getDatabase</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> AppDatabase &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            instance<span class="token operator">?</span><span class="token punctuation">.</span>let &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> it
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Room<span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span>
                AppDatabase<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">,</span><span class="token string">"app_database"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//Room默认不容许在主线程中进行数据库操作，加入这个方法可以在主线程进行数据库操作</span>

                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    instance <span class="token operator">=</span><span class="token keyword">this</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span> </code></pre>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.room.RoomActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/edText<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name 用空格隔开<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>autofillHints</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/addBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/add<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/queryBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/query_data<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/updateBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/update<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/deleteBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/delete<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>fontFamily</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@font/aldrich<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">></span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> RoomActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//获取数据库实例</span>
    <span class="token keyword">val</span> userDao<span class="token operator">=</span> AppDatabase<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_room<span class="token punctuation">)</span>

        addBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            userDao<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token function">User</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        updateBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            userDao<span class="token punctuation">.</span><span class="token function">upDateUser</span><span class="token punctuation">(</span><span class="token function">User</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        deleteBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            userDao<span class="token punctuation">.</span><span class="token function">deleteUserByLastName</span><span class="token punctuation">(</span>textView<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        queryBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">""</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>user <span class="token keyword">in</span> userDao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                str<span class="token operator">+=</span>user<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            textView<span class="token punctuation">.</span>text<span class="token operator">=</span>str
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h3 id="Room的数据库升级"><a href="#Room的数据库升级" class="headerlink" title="Room的数据库升级"></a>Room的数据库升级</h3><p>添加数据库表Book</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Entity</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Book</span><span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> pages<span class="token operator">:</span> Int<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> id<span class="token operator">:</span>Long<span class="token operator">=</span><span class="token number">0</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>BookDao</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Dao</span>
<span class="token keyword">interface</span> BookDao &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@Insert</span>
    <span class="token keyword">fun</span> <span class="token function">insertBook</span><span class="token punctuation">(</span>book<span class="token operator">:</span> Book<span class="token punctuation">)</span><span class="token operator">:</span>Long

    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"select * from Book"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">loadAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//定义数据库对象，数据库版本，包含的实体类</span>
<span class="token comment" spellcheck="true">//版本变成2 添加Book class</span>
<span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>version <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> entities <span class="token operator">=</span> <span class="token punctuation">[</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>Book<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">bookDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> BookDao

    <span class="token keyword">companion</span> <span class="token keyword">object</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">var</span> instance<span class="token operator">:</span> AppDatabase<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>

        <span class="token keyword">val</span> MIGRATION_1_2<span class="token operator">=</span><span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">Migration</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">migrate</span><span class="token punctuation">(</span>database<span class="token operator">:</span> SupportSQLiteDatabase<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                database<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span><span class="token string">"create table Book ("</span> <span class="token operator">+</span>
                        <span class="token string">"id integer primary key autoincrement not null,"</span> <span class="token operator">+</span>
                        <span class="token string">"name text not null,"</span> <span class="token operator">+</span>
                        <span class="token string">"pages integer not null)"</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token annotation builtin">@Synchronized</span>
        <span class="token keyword">fun</span> <span class="token function">getDatabase</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> AppDatabase &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            instance<span class="token operator">?</span><span class="token punctuation">.</span>let &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> it
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Room<span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span>
                AppDatabase<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">,</span><span class="token string">"app_database"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//Room默认不容许在主线程中进行数据库操作，加入这个方法可以在主线程进行数据库操作</span>
                <span class="token punctuation">.</span><span class="token function">addMigrations</span><span class="token punctuation">(</span>MIGRATION_1_2<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//添加数据表</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    instance <span class="token operator">=</span><span class="token keyword">this</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h2 id="WorkManager-调度任务"><a href="#WorkManager-调度任务" class="headerlink" title="WorkManager 调度任务"></a>WorkManager 调度任务</h2><p>使用 WorkManager API 可以轻松地调度即使在应用退出或设备重启时仍应运行的可延迟异步任务。</p>
<p><strong>主要功能</strong>：</p>
<ul>
<li>最高向后兼容到 API 14<ul>
<li>在运行 API 23 及以上级别的设备上使用 JobScheduler</li>
<li>在运行 API 14-22 的设备上结合使用 BroadcastReceiver 和 AlarmManager</li>
</ul>
</li>
<li>添加网络可用性或充电状态等工作约束</li>
<li>调度一次性或周期性异步任务</li>
<li>监控和管理计划任务</li>
<li>将任务链接起来</li>
<li>确保任务执行，即使应用或设备重启也同样执行任务</li>
<li>遵循低电耗模式等省电功能</li>
</ul>
<p>WorkManager 旨在用于<strong>可延迟</strong>运行（即不需要立即运行）并且在应用退出或设备重启时必须能够<strong>可靠运行</strong>的任务。例如：</p>
<ul>
<li>向后端服务发送日志或分析数据</li>
<li>定期将应用数据与服务器同步</li>
</ul>
<p>WorkManager 不适用于应用进程结束时能够安全终止的运行中后台工作，也不适用于需要立即执行的任务。请查看<a href="https://developer.android.google.cn/guide/background">后台处理指南</a>，了解哪种解决方案符合您的需求。</p>
<h3 id="WorkManger基本用法"><a href="#WorkManger基本用法" class="headerlink" title="WorkManger基本用法"></a>WorkManger基本用法</h3><h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> work_version <span class="token operator">=</span> <span class="token string">"2.3.4"</span>

        <span class="token comment" spellcheck="true">// (Java only)</span>
        implementation <span class="token string">"androidx.work:work-runtime:$work_version"</span>

        <span class="token comment" spellcheck="true">// Kotlin + coroutines</span>
        implementation <span class="token string">"androidx.work:work-runtime-ktx:$work_version"</span>

        <span class="token comment" spellcheck="true">// optional - RxJava2 support</span>
        implementation <span class="token string">"androidx.work:work-rxjava2:$work_version"</span>

        <span class="token comment" spellcheck="true">// optional - GCMNetworkManager support</span>
        implementation <span class="token string">"androidx.work:work-gcm:$work_version"</span>

        <span class="token comment" spellcheck="true">// optional - Test helpers</span>
        androidTestImplementation <span class="token string">"androidx.work:work-testing:$work_version"</span></code></pre>
<h4 id="创建后台任务"><a href="#创建后台任务" class="headerlink" title="创建后台任务"></a>创建后台任务</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">SimpleWorker</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">,</span>params<span class="token operator">:</span> WorkerParameters<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">Worker</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>params<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Result &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//耗时操作</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"SimpleWorker"</span><span class="token punctuation">,</span> <span class="token string">"doWork: do work in SimpleWorker"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin">button<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">val</span> request<span class="token operator">=</span>OneTimeWorkRequest<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span>SimpleWorker<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setInitialDelay</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//设置5分钟后运行</span>
                <span class="token punctuation">.</span><span class="token function">addTag</span><span class="token punctuation">(</span><span class="token string">"simple"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//添加请求标签，</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            WorkManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/hexo.github.io/tags/Jetpack/">Jetpack</a></div><div class="notification is-danger">You need to set <code>install_url</code> to use ShareThis. Please set it in <code>_config.yml</code>.</div></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/hexo.github.io/" alt="支付宝"></span></a><a class="button donate" href="/hexo.github.io/" style="background-color:rgba(255,128,62,.87);border-color:transparent;color:white;" target="_blank" rel="noopener"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button is-danger donate" href="/hexo.github.io/" target="_blank" rel="noopener"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a><div class="notification is-danger">You forgot to set the <code>business</code> or <code>currency_code</code> for Paypal. Please set it in <code>_config.yml</code>.</div><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/hexo.github.io/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/shi-yong-viewmodel-chu-li-pei-zhi-geng-gai/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">使用 ViewModel 处理配置更改</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/bottomnavigationview-kong-jian-xue-xi-md/"><span class="level-item">BottomNavigationView控件学习md</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="notification is-danger">You forgot to set the <code>shortname</code> for Disqus. Please set it in <code>_config.yml</code>.</div></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/hexo.github.io/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block line-height-inherit">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/hexo.github.io/archives"><p class="title">98</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/hexo.github.io/categories"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/hexo.github.io/tags"><p class="title">91</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/hexo.github.io/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Android学习</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/"><span class="level-start"><span class="level-item">Bitnami虚拟机</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Docker%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Docker学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/GitBook%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">GitBook学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/GitHub%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">GitHub学习</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Git%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Git学习</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/IDEA/"><span class="level-start"><span class="level-item">IDEA</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Junit/"><span class="level-start"><span class="level-item">Junit</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Kotlin%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Kotlin学习</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Linux%E5%85%A5%E9%97%A8/"><span class="level-start"><span class="level-item">Linux入门</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Maven%E5%92%8CGradle/"><span class="level-start"><span class="level-item">Maven和Gradle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/MySQL8-0/"><span class="level-start"><span class="level-item">MySQL8.0</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Redis%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Redis学习</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/java-web/"><span class="level-start"><span class="level-item">java_web</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"><span class="level-start"><span class="level-item">企业级权限管理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">企业级电商项目</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><span class="level-start"><span class="level-item">项目实战</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.222Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/bian-xie-kai-yuan-ku/permissionx-quan-xian-guan-li-ku/">PermissionX权限管理库</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.215Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/xiang-mu-qian-qi-gou-jian/">项目前期构建</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.213Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/1-1-an-zhuang-huan-jing/">1-1-安装环境</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.209Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xiang-mu-zhi-shi-dian/">项目知识点</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.208Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xu-qiu-wen-dang/">需求文档</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/hexo.github.io/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">98</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/01-Spring-Boot%E5%85%A5%E9%97%A8/"><span class="tag">01 Spring Boot入门</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-Git-%E8%AE%BE%E7%BD%AE%E5%92%8C%E9%85%8D%E7%BD%AE/"><span class="tag">1-1 Git 设置和配置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/"><span class="tag">1-1 入门学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/"><span class="tag">1-1 安装bitnami虚拟机</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E7%AE%80%E4%BB%8B/"><span class="tag">1-1 简介</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"><span class="tag">1-1 简单使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%AE%89%E8%A3%85/"><span class="tag">1-1-安装</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83/"><span class="tag">1-1-安装环境</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1%E7%AE%80%E4%BB%8B/"><span class="tag">1-1简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-CentOS%E9%95%9C%E5%83%8F%E4%BD%BF%E7%94%A8%E5%B8%AE%E5%8A%A9/"><span class="tag">1-2 CentOS镜像使用帮助</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"><span class="tag">1-2 使用教程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-%E8%BF%9E%E6%8E%A5SSH/"><span class="tag">1-2 连接SSH</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-Redis%E5%90%AF%E5%8A%A8/"><span class="tag">1-2-Redis启动</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"><span class="tag">1-2-常用操作</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-3-%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2/"><span class="tag">1-3 安装桌面</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-%E5%AD%A6%E4%B9%A0%E7%BD%91%E5%9D%80/"><span class="tag">1.学习网址</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1-Git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"><span class="tag">2-1 Git忽略文件</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1-%E9%85%8D%E7%BD%AE%E4%B8%BB%E9%A2%98/"><span class="tag">2-1 配置主题</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">2-1-数据结构</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1android-moudle%E4%B8%8Elibery%E5%88%87%E6%8D%A2/"><span class="tag">2-1android moudle与libery切换</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1%E6%96%87%E6%A1%A3%E5%AD%A6%E4%B9%A0/"><span class="tag">2-1文档学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/"><span class="tag">2-1阿里云服务器远程登录密码</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-2-Git%E8%8E%B7%E5%8F%96%E5%92%8C%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/"><span class="tag">2-2 Git获取和创建项目</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-2-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><span class="tag">2-2 数据结构的常用命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1-hexo%E4%B8%8Emd%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%86%B2%E7%AA%81/"><span class="tag">3-1 hexo与md文件格式的冲突</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1-%E5%85%B3%E9%94%AE%E5%91%BD%E4%BB%A4/"><span class="tag">3-1 关键命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"><span class="tag">3-1分布式锁</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE/"><span class="tag">3-1网络访问</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2-Lua%E8%84%9A%E6%9C%AC/"><span class="tag">3-2 Lua脚本</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2-%E6%B7%BB%E5%8A%A0/"><span class="tag">3-2 添加</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2-1%E5%AE%89%E8%A3%85Apache%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="tag">3-2-1安装Apache服务器</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/"><span class="tag">3-2网络访问-数据格式</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-3-%E5%B0%81%E8%A3%85%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/"><span class="tag">3-3 封装网络请求</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-3-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"><span class="tag">3-3 消息队列</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-4-%E5%BC%80%E6%BA%90%E7%BD%91%E7%BB%9C%E5%B0%81%E8%A3%85%E5%BA%93Retofit/"><span class="tag">3-4 开源网络封装库Retofit</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Android-Studio%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"><span class="tag">Android Studio使用技巧</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/BottomNavigationView%E6%8E%A7%E4%BB%B6%E5%AD%A6%E4%B9%A0md/"><span class="tag">BottomNavigationView控件学习md</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Centos%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98/"><span class="tag">Centos虚拟机网络连接问题</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Filter/"><span class="tag">Filter</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/IDEA%E4%B8%ADTomcat%E6%97%A5%E5%BF%97%E4%B9%B1%E7%A0%81/"><span class="tag">IDEA中Tomcat日志乱码</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Java%E5%AE%A2%E6%88%B7%E7%AB%AF/"><span class="tag">Java客户端</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Jetpack/"><span class="tag">Jetpack</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/LINUX%E8%AE%BE%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99/"><span class="tag">LINUX设置防火墙</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Linux%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/"><span class="tag">Linux准备工作</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/MyBatis%E6%A1%86%E6%9E%B6/"><span class="tag">MyBatis框架</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Nat%E8%BF%9E%E6%8E%A5%E7%BD%91%E7%BB%9C/"><span class="tag">Nat连接网络</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Nginx%E7%AE%80%E4%BB%8B/"><span class="tag">Nginx简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/PermissionX%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%BA%93/"><span class="tag">PermissionX权限管理库</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Readis%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/"><span class="tag">Readis安装及配置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Spring-Framework%E7%AE%80%E4%BB%8B/"><span class="tag">Spring Framework简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Spring%E5%85%A5%E9%97%A8/"><span class="tag">Spring入门</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Untitled/"><span class="tag">Untitled</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/idea%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/"><span class="tag">idea工具的使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/idea%E6%8A%A5java%E7%89%88%E6%9C%AC%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"><span class="tag">idea报java版本错误解决方法</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/index/"><span class="tag">index</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/iptables%E7%9A%84%E5%AD%A6%E4%B9%A0/"><span class="tag">iptables的学习</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/junit%E7%AE%80%E4%BB%8B/"><span class="tag">junit简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><span class="tag">linux常用命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/mysql%E5%AE%89%E8%A3%85/"><span class="tag">mysql安装</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"><span class="tag">mysql数据库的安装与配置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/spring%E6%B3%A8%E8%A7%A3/"><span class="tag">spring注解</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/vsftpd/"><span class="tag">vsftpd</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E5%8D%B8%E8%BD%BD/"><span class="tag">从安装到卸载</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E4%BD%BF%E7%94%A8-ViewModel-%E5%A4%84%E7%90%86%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/"><span class="tag">使用 ViewModel 处理配置更改</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"><span class="tag">入门基础学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%85%A5%E9%97%A8%E7%AE%80%E4%BB%8B/"><span class="tag">入门简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%A0%81%E5%9D%97%E6%A8%A1%E6%9D%BF/"><span class="tag">创建代码块模板</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%86%E7%A0%81/"><span class="tag">初始化密码</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%A9%E7%94%A8IDEA%E5%AD%A6%E4%B9%A0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"><span class="tag">利用IDEA学习编程语言</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%A9%E7%94%A8IDEA%E6%98%8E%E6%98%8E%E5%AF%BC%E5%85%A5%E4%BA%86%E5%8C%85%E5%8D%B4%E6%98%BE%E7%A4%BA%E7%BC%BA%E5%B0%91%E4%BF%9D%E7%95%99%E7%9B%B8%E5%85%B3%E7%B1%BB/"><span class="tag">利用IDEA明明导入了包却显示缺少保留相关类</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/"><span class="tag">前期准备</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82%E4%B8%8E%E6%8A%80%E6%9C%AF%E5%8F%AF%E8%A1%8C%E6%80%A7%E5%88%86%E6%9E%90/"><span class="tag">功能需求与技术可行性分析</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"><span class="tag">基础学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"><span class="tag">多线程编程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%AD%97%E8%8A%82%E6%B5%81%E4%B8%8E%E5%AD%97%E7%AC%A6%E6%B5%81/"><span class="tag">字节流与字符流</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/"><span class="tag">学习记录（一）</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/"><span class="tag">快捷键</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/"><span class="tag">插件使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"><span class="tag">数据类型</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%96%87%E4%BB%B6%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9Cmd/"><span class="tag">文件命令操作md</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/"><span class="tag">框架搭建</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C/"><span class="tag">用户操作</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E7%AE%80%E4%BB%8B/"><span class="tag">简介</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/"><span class="tag">视图导航</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98/"><span class="tag">错误问题</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"><span class="tag">问题总结</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E8%AE%BE%E7%BD%AE/"><span class="tag">防火墙的设置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3/"><span class="tag">需求文档</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%A1%B9%E7%9B%AE%E5%89%8D%E6%9C%9F%E6%9E%84%E5%BB%BA/"><span class="tag">项目前期构建</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%A1%B9%E7%9B%AE%E7%9F%A5%E8%AF%86%E7%82%B9/"><span class="tag">项目知识点</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/hexo.github.io/"><img src="/hexo.github.io/img/logo.svg" alt="库金的博客" height="28"></a><p class="size-small"><span>&copy; 2020 Ku Jin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://kujin521.github.io/hexo.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/hexo.github.io/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/hexo.github.io/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/hexo.github.io/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/hexo.github.io/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/hexo.github.io/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>