<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>库金的博客</title><meta description="学习笔记"><meta property="og:type" content="blog"><meta property="og:title" content="库金的博客"><meta property="og:url" content="https://kujin521.github.io/hexo.github.io"><meta property="og:site_name" content="库金的博客"><meta property="og:description" content="学习笔记"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://kujin521.github.io/hexo.github.io/img/og_image.png"><meta property="article:author" content="Ku Jin"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/hexo.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kujin521.github.io/hexo.github.io"},"headline":"库金的博客","image":["https://kujin521.github.io/hexo.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Ku Jin"},"description":"学习笔记"}</script><link rel="icon" href="/hexo.github.io/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/hexo.github.io/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/hexo.github.io/css/prism-tomorrow.css" type="text/css"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/hexo.github.io/"><img src="/hexo.github.io/img/logo.svg" alt="库金的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/hexo.github.io/">Home</a><a class="navbar-item" href="/hexo.github.io/archives">Archives</a><a class="navbar-item" href="/hexo.github.io/categories">Categories</a><a class="navbar-item" href="/hexo.github.io/tags">Tags</a><a class="navbar-item" href="/hexo.github.io/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.553Z" title="2020-08-02T23:42:42.553Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/">Bitnami虚拟机</a></span><span class="level-item">1 分钟 读完 (大约 211 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/bitnami-xu-ni-ji/1-3-an-zhuang-zhuo-mian/">1-3 安装桌面</a></h1><div class="content"><p>[toc]</p>
<h1 id="启用桌面访问"><a href="#启用桌面访问" class="headerlink" title="启用桌面访问"></a>启用桌面访问</h1><p>文件下载很慢,(不推荐)</p>
<p>若要允许位纳米用户的<em>桌面访问，</em>请按照以下步骤操作：</p>
<h3 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h3><ul>
<li><p>安装<em>侏儒核心</em>包：</p>
<pre><code>sudo apt-get update
sudo apt-get install gnome-core</code></pre>
</li>
<li><p>重新启动计算机。</p>
</li>
<li><p>现在，您应该能够以<em>bitnami 用户位登录到桌面</em>。</p>
</li>
</ul>
<h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><ul>
<li><p>安装<em>ubuntu 桌面</em>包：</p>
<pre><code>sudo apt-get update
sudo apt-get install ubuntu-desktop</code></pre>
</li>
<li><p>创建一个名为*/usr/共享/光德姆/光德姆.conf.d/60-bitnami.conf 的新文件*，并添加如下行：</p>
<pre><code>[SeatDefaults]
default-user=bitnami
greeter-show-manual-login=true</code></pre>
</li>
</ul>
<p>您可以通过执行以下命令来创建该文件：</p>
<pre><code>sudo sh -c 'echo "[SeatDefaults]\ndefault-user=bitnami\ngreeter-show-manual-login=true" &gt; /usr/share/lightdm/lightdm.conf.d/50-bitnami.conf'</code></pre>
<ul>
<li>重新启动虚拟机。</li>
<li>现在，您应该能够以<em>bitnami 用户位登录到桌面</em>。</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.544Z" title="2020-08-02T23:42:42.544Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/">Bitnami虚拟机</a></span><span class="level-item">2 分钟 读完 (大约 299 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/bitnami-xu-ni-ji/1-2-lian-jie-ssh/">1-2 连接SSH</a></h1><div class="content"><p>[toc]</p>
<h1 id="1-首先修改密码"><a href="#1-首先修改密码" class="headerlink" title="1.首先修改密码"></a>1.首先修改密码</h1><p><strong>修改虚拟机的默认登录密码</strong></p>
<p>虚拟机控制台的默认登录密码在启动时显示，如下所示：</p>
<p><a href="https://docs.bitnami.com/images/img/platforms/virtual-machine/server-credentials.png"><img src="https://docs.bitnami.com/images/img/platforms/virtual-machine/server-credentials.png" alt="Server credentials"></a></p>
<p>首次登录时，系统会自动提示您更改此更改。若要以后更改它，请执行下面的命令在控制台：</p>
<pre><code>passwd</code></pre>
<h1 id="2-启用-SSH-服务器"><a href="#2-启用-SSH-服务器" class="headerlink" title="2.启用 SSH 服务器"></a>2.启用 SSH 服务器</h1><blockquote>
<p>默认情况下，在 Bitnami 虚拟机中禁用 SSH 服务器。但是，某些应用程序（如 GitLab）需要 SSH 访问导入代码存储库。</p>
</blockquote>
<h4 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h4><pre><code>sudo rm -f /etc/ssh/sshd_not_to_be_run
sudo systemctl enable ssh
sudo systemctl start ssh</code></pre>
<h4 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><pre><code>sudo mv /etc/init/ssh.conf.back /etc/init/ssh.conf
sudo start ssh</code></pre>
<h3 id="禁用-SSH-服务器"><a href="#禁用-SSH-服务器" class="headerlink" title="禁用 SSH 服务器"></a>禁用 SSH 服务器</h3><p>默认情况下，在 Bitnami 虚拟机中禁用 SSH 服务器。如果已<a href="https://docs.bitnami.com/virtual-machine/faq/get-started/enable-ssh/">按照此处所述启用它</a>，则可以按照相反的步骤禁用它：</p>
<h4 id="Debian-1"><a href="#Debian-1" class="headerlink" title="Debian"></a>Debian</h4><pre><code>sudo systemctl stop ssh
sudo systemctl disable ssh</code></pre>
<h4 id="Ubuntu-1"><a href="#Ubuntu-1" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><pre><code>sudo stop ssh
sudo mv /etc/init/ssh.conf /etc/init/ssh.conf.back</code></pre>
<h1 id="3-连接成功"><a href="#3-连接成功" class="headerlink" title="3.连接成功"></a>3.连接成功</h1><p><img src="images/1-2%20%E8%BF%9E%E6%8E%A5SSH/image-20200731114408221.png" alt="image-20200731114408221"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.533Z" title="2020-08-02T23:42:42.533Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/">Bitnami虚拟机</a></span><span class="level-item">1 分钟 读完 (大约 223 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/bitnami-xu-ni-ji/1-1-an-zhuang-bitnami-xu-ni-ji/">1-1 安装bitnami虚拟机</a></h1><div class="content"><p>[toc]</p>
<h1 id="第-1-步：启动-Bitnami-WordPress-虚拟机"><a href="#第-1-步：启动-Bitnami-WordPress-虚拟机" class="headerlink" title="第 1 步：启动 Bitnami WordPress 虚拟机"></a>第 1 步：启动 Bitnami WordPress 虚拟机</h1><ul>
<li><p>下载连接:<a href="https://bitnami.com/stack/wordpress/virtual-machine">https://bitnami.com/stack/wordpress/virtual-machine</a></p>
</li>
<li><p>使用虚拟机打开连接</p>
</li>
</ul>
<p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730114146505.png" alt="image-20200730114146505"></p>
<p>现在，您可以通过启动 Web 浏览器并浏览虚拟机的 IP 地址来访问 WordPress。您应该会看到博客的头版，并包含一个示例帖子，如下所示：</p>
<p><a href="http://192.168.2.139/">http://192.168.2.139/</a></p>
<p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730114615539.png" alt="image-20200730114615539"></p>
<h1 id="第-2-步：登录并使用-WordPress-开始"><a href="#第-2-步：登录并使用-WordPress-开始" class="headerlink" title="第 2 步：登录并使用 WordPress 开始"></a>第 2 步：登录并使用 WordPress 开始</h1><p>要登录到 WordPress 仪表板，请按照以下步骤操作：</p>
<ul>
<li><p>浏览到 WordPress 仪表板，通常在 URL <em><a href="http://192.168.2.139/wp-admin%E3%80%82">http://192.168.2.139/wp-admin。</a></em></p>
</li>
<li><p>查看用户名和密码</p>
</li>
<li><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cat</span> /home/bitnami/bitnami_credentials</code></pre>
<p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730120745221.png" alt="image-20200730120745221"></p>
</li>
</ul>
<h2 id="设置中文显示"><a href="#设置中文显示" class="headerlink" title="设置中文显示"></a>设置中文显示</h2><p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730120842595.png" alt="image-20200730120842595"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.134Z" title="2020-08-02T23:42:42.134Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">2 分钟 读完 (大约 333 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/shi-tu-dao-hang/">视图导航</a></h1><div class="content"><p>[TOC]</p>
<h1 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h1><p>官方文档：<a href="https://developer.android.com/guide/navigation/">https://developer.android.com/guide/navigation/</a></p>
<p>youtube教程视频：<a href="https://developer.android.com/guide/navigation/">https://developer.android.com/guide/navigation/</a></p>
<p>关键三部分</p>
<table>
<thead>
<tr>
<th>Navigation graph</th>
<th align="left">: 一个 XML 资源，其中包含一个集中位置中的所有与导航相关的信息。这包括应用内的所有单个内容区域（<em>称为目标</em>）以及用户可以通过应用可走的路径。</th>
</tr>
</thead>
<tbody><tr>
<td>NavHost Fragment</td>
<td align="left">显示导航图中的目的地的空容器。导航组件包含一个默认实现，<a href="https://developer.android.com/reference/androidx/navigation/fragment/NavHostFragment"><code>即导航帧，</code></a>显示片段目标。</td>
</tr>
<tr>
<td>NavController</td>
<td align="left">管理中应用导航的对象。当用户在整个应用中移动时，协调中的目标内容的交换</td>
</tr>
</tbody></table>
<h2 id="开始使用Navigation"><a href="#开始使用Navigation" class="headerlink" title="开始使用Navigation"></a>开始使用Navigation</h2><ol>
<li><h3 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h3><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> nav_version <span class="token operator">=</span> <span class="token string">"2.3.0"</span>
<span class="token comment" spellcheck="true">// Kotlin</span>
  implementation <span class="token string">"androidx.navigation:navigation-fragment-ktx:$nav_version"</span>
  implementation <span class="token string">"androidx.navigation:navigation-ui-ktx:$nav_version"</span></code></pre>
<p>创建几个BlankFragment 用于页面跳转</p>
</li>
<li><h3 id="创建导航图-activity-main-xml"><a href="#创建导航图-activity-main-xml" class="headerlink" title="创建导航图 activity_main.xml"></a>创建导航图 activity_main.xml</h3><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    &lt;fragment
        android:id="@+id/nav_host_fragment"
              <span class="token comment" spellcheck="true">&lt;!-- 关键代码 start--></span>
        android:name="androidx.navigation.fragment.NavHostFragment"
        app:defaultNavHost="true"
        app:navGraph="@navigation/nav_graph"
     <span class="token comment" spellcheck="true">&lt;!-- 关键代码 end--></span>
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent" />

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre>
</li>
<li><h3 id="导航编辑器"><a href="#导航编辑器" class="headerlink" title="导航编辑器"></a>导航编辑器</h3><p><img src="images/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/image-20200721082952691.png" alt="image-20200721082952691"></p>
<p><img src="images/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/image-20200721082851327.png" alt="image-20200721082851327"></p>
<p><img src="images/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/image-20200721083022645.png" alt="image-20200721083022645"></p>
</li>
<li></li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.120Z" title="2020-08-02T23:42:42.120Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">29 分钟 读完 (大约 4332 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/ji-chu-xue-xi/">基础学习</a></h1><div class="content"><p>安卓科特林基础知识包括以下课程：</p>
<h2 id="第-1-课：构建第一个应用"><a href="#第-1-课：构建第一个应用" class="headerlink" title="第 1 课：构建第一个应用"></a>第 1 课：构建第一个应用</h2><ul>
<li>官方Android开发者文档<a href="http://developer.android.com/index.html">developer.android.com。</a></li>
<li><em>材料设计</em>是一种概念设计理念，它概述了应用在移动设备上的外观和功能。材料设计不仅仅适用于 Android 应用程序。材料设计指南<a href="https://material.io/">material.io。</a></li>
<li>Android Studio 为常见和推荐的应用程序和活动设计提供模板。这些模板为常见用例提供工作代码。</li>
<li>创建项目时，可以为第一个活动选择模板。</li>
<li>在开发应用时，可以从内置模板创建活动和其他应用组件。</li>
<li><a href="https://github.com/googlesamples">Google 示例</a>包含您可以学习、复制和合并到项目中的代码示例。</li>
</ul>
<h3 id="活动"><a href="#活动" class="headerlink" title="活动"></a><strong>活动</strong></h3><ul>
<li><code>MainActivity</code>是 的子类，而子类又是 。是负责绘制 Android 应用 UI 和接收输入事件的核心 Android 类。<code>AppCompatActivity``Activity``Activity</code></li>
<li>所有活动都有一个关联的布局文件，该文件是应用资源中的 XML 文件。布局文件为活动命名，例如 。<code>activity_main.xml</code></li>
<li>中的 方法将布局与活动关联，并在创建活动时膨胀该布局。<code>setContentView()``MainActivity</code></li>
<li>布局膨胀是将 XML 布局文件中定义的视图转换为（或”膨胀”成）Kotlin 在内存中的视图的过程。一旦布局膨胀发生，可以绘制这些对象到屏幕上，并动态修改它们。<code>Activity</code></li>
</ul>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a><strong>视图</strong></h3><ul>
<li>应用布局中的所有 UI 元素都是 View 类的子<a href="http://developer.android.com/reference/android/view/View.html"><code>类</code></a>，称为<em>视图</em>。 和意见的例子。<code>TextView``Button</code></li>
<li><code>View</code>元素可以分组在视图<a href="https://developer.android.com/reference/android/view/ViewGroup.html"><code>组中</code></a>。视图组充当视图或其他视图组的容器。 是线性排列其视图的视图组的示例。<code>LinearLayout</code></li>
</ul>
<h3 id="查看属性"><a href="#查看属性" class="headerlink" title="查看属性"></a><strong>查看属性</strong></h3><ul>
<li>和 属性指示视图的宽度和高度。该值将视图拉伸到其父视图的宽度或高度。该值将缩小视图以适合视图的内容。<code>android:layout_width``android:layout_height``match_parent``wrap_content</code></li>
<li>属性指示视图应显示的文本（如果该视图显示文本）。对于按钮，是按钮标签。<code>android:text``android:text</code></li>
<li>视图组中的属性排列它包含的视图元素。从左到右排列视图的值。从上到下排列视图的值。<code>android:orientation``LinearLayout``horizontal``vertical</code></li>
<li>属性确定视图的位置以及该视图的所有子元素。<code>android:layout_gravity</code></li>
<li>该属性定义文本视图中文本的大小。文本大小以 sp 单位（可伸<em>缩像素）指定</em>。通过使用 sp 单位，您可以独立于设备的显示质量调整文本的大小。<code>android:textSize</code></li>
</ul>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a><strong>字符串</strong></h3><ul>
<li>在布局中硬编码字符串，最好使用字符串资源。</li>
<li>文件中包含字符串资源。<code>values/res/string.xml</code></li>
<li>要提取字符串，请使用 （在 Mac 上）。选择<strong>从弹出式菜单</strong>中提取字符串资源。<code>Alt+Enter``Option+Enter</code></li>
</ul>
<h3 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a><strong>使用视图</strong></h3><ul>
<li>若要将 Kotlin 代码连接到布局中定义的视图，需要在视图膨胀后获取对视图对象的引用。将 ID （） 分配给布局中的视图，然后使用<a href="https://developer.android.com/reference/android/view/View#findViewById(int)"><code>findViewById（）</code></a>方法获取关联的视图对象。<code>android:id</code></li>
<li>当您在 XML 布局文件中为视图创建 ID 时，Android Studio 会在生成的类中使用该 ID 的名称创建整数常量。然后可以在 方法中使用该引用。<code>R``R.id``findViewById()</code></li>
<li>您可以直接按属性名称在 Kotlin 代码中设置视图对象的属性。例如，文本视图中的文本由 XML 中的属性定义，并且由 Kotlin 中的属性定义。<code>android:text``text</code></li>
<li><em>单击处理程序</em>是当用户单击或点击 UI 元素时调用的方法。若要将单击处理程序方法附加到视图（如按钮），请使用 方法。<code>setOnClickListener()</code></li>
</ul>
<h3 id="使用烤面包"><a href="#使用烤面包" class="headerlink" title="使用烤面包"></a><strong>使用烤面包</strong></h3><p>Toast 是一种视图，在一个小的弹出窗口中向用户显示一条简单的消息。</p>
<p>若要创建 Toast，请使用[<code>三个参数在</code>](<a href="https://developer.android.com/reference/android/widget/Toast.html#makeText">https://developer.android.com/reference/android/widget/Toast.html#makeText</a>(android.content.Context, int, int))Toast 类上调用<a href="https://developer.android.com/reference/android/widget/Toast.html"><code>makeText（）</code></a>工厂方法：</p>
<ul>
<li><a href="https://developer.android.com/reference/android/content/Context.html">应用</a>的上下文<code>Activity</code></li>
<li>要显示的消息，例如字符串资源</li>
<li>持续时间，例如<a href="https://developer.android.com/reference/android/widget/Toast.html#LENGTH_SHORT"><code>Toast.LENGTH_SHORT</code></a></li>
</ul>
<p>要显示 Toast，请调用 。<code>show()</code></p>
<h2 id="第-2-课：布局"><a href="#第-2-课：布局" class="headerlink" title="第 2 课：布局"></a>第 2 课：布局</h2><p>Android 开发人员文档：</p>
<ul>
<li><a href="https://developer.android.com/guide/topics/ui/declaring-layout">布局</a></li>
<li><a href="https://developer.android.com/reference/android/view/ViewGroup"><code>ViewGroup</code></a></li>
<li><a href="https://developer.android.com/reference/android/view/View"><code>View</code></a></li>
<li><a href="https://developer.android.com/guide/topics/ui/layout/linear">线性布局</a></li>
<li><a href="https://developer.android.com/reference/android/widget/ScrollView"><code>ScrollView</code></a></li>
<li><a href="https://developer.android.com/training/multiscreen/screendensities">支持不同的像素密度</a>（dp）</li>
<li><a href="https://developer.android.com/studio/write/layout-editor.html">使用布局编辑器构建 UI</a></li>
<li><a href="http://developer.android.com/tools/studio/index.html">安卓工作室文档</a></li>
<li><a href="https://developer.android.com/guide/topics/ui/look-and-feel/themes">样式和主题</a></li>
</ul>
<h3 id="1-输入框及事件监听"><a href="#1-输入框及事件监听" class="headerlink" title="1. 输入框及事件监听"></a>1. 输入框及事件监听</h3><ul>
<li>Android<a href="https://developer.android.com/studio/write/layout-editor">工作室中的</a>布局编辑器工具是一个可视化设计编辑器。您可以使用布局编辑器通过将 UI 元素拖动到布局中来构建应用的布局。</li>
<li><a href="https://developer.android.com/reference/android/widget/EditText"><code>EditText</code></a>是允许用户输入和修改文本的 UI 元素。</li>
<li><a href="https://developer.android.com/reference/android/widget/Button"><code>按钮</code></a>是用户可以点击执行操作的 UI 元素。按钮可以由文本、图标或文本和图标组成。</li>
</ul>
<p>单击侦听器</p>
<ul>
<li>您可以通过向点击侦听器添加单击侦听器来对被点击做出任何响应。<code>View</code></li>
<li>定义单击侦听器的函数接收被单击的 。<code>View</code></li>
</ul>
<p>可以通过两种方式之一将单击侦听器函数附加到 ：<code>View</code></p>
<ul>
<li>在 XML 布局中，将<a href="https://developer.android.com/reference/android/R.attr.html#onClick"><code>android：onClick</code></a>属性添加到*<code>View</code>*元素。<code>&lt;``&gt;</code></li>
<li>以编程方式，在相应的 中使用<a href="https://developer.android.com/reference/android/view/View.html#setOnClickListener(android.view.View.OnClickListener)"><code>setOnClickListener（View.OnClickListener）</code></a>函数。<code>Activity</code></li>
</ul>
<h3 id="2-使用布局编辑器约束布局-ConstraintLayout"><a href="#2-使用布局编辑器约束布局-ConstraintLayout" class="headerlink" title="2. 使用布局编辑器约束布局 ConstraintLayout"></a>2. 使用布局编辑器约束布局 ConstraintLayout</h3><p>官方教程：<a href="https://codelabs.developers.google.com/codelabs/kotlin-android-training-constraint-layout/index.html#3">https://codelabs.developers.google.com/codelabs/kotlin-android-training-constraint-layout/index.html#3</a></p>
<h3 id="3-数据绑定基础知识"><a href="#3-数据绑定基础知识" class="headerlink" title="3. 数据绑定基础知识"></a>3. 数据绑定基础知识</h3><h3 id="Android-studio-4-0实现了自动绑定-id-可以直接使用id"><a href="#Android-studio-4-0实现了自动绑定-id-可以直接使用id" class="headerlink" title="Android studio 4.0实现了自动绑定 id 可以直接使用id"></a>Android studio 4.0实现了自动绑定 id 可以直接使用id</h3><pre><code>apply plugin: 'kotlin-android-extensions'</code></pre>
<p>使用数据绑定替换对 的调用的步骤：<code>findViewById()</code></p>
<ol>
<li><p>在文件的 Android 部分启用数据绑定：<code>build.gradle</code><br><code>dataBinding { enabled = true }</code></p>
</li>
<li><p>用作 XML 布局中的根视图。<code>&lt;layout&gt;</code></p>
</li>
<li><p>定义绑定变量：<br><code>private lateinit var binding: ActivityMainBinding</code></p>
</li>
<li><p>在 中创建绑定对象，替换 ：<code>MainActivity``setContentView</code><br><code>binding = DataBindingUtil.setContentView(this, R.layout.activity_main)</code></p>
</li>
<li><h1 id="将-的调用替换为对绑定对象中视图的引用。例如："><a href="#将-的调用替换为对绑定对象中视图的引用。例如：" class="headerlink" title="将 的调用替换为对绑定对象中视图的引用。例如："></a>将 的调用替换为对绑定对象中视图的引用。例如：</h1><p>（在示例中，视图的名称从 XML 中的视图生成骆驼大小写。<code>findViewById()``findViewById&lt;Button&gt;(R.id.done_button)``binding.doneButton``id</code></p>
</li>
</ol>
<p>将视图绑定到数据的步骤：</p>
<ol>
<li>为数据创建数据类。</li>
<li>在标记内添加块。<code>&lt;data&gt;``&lt;layout&gt;</code></li>
<li>定义 具有名称的类型，以及作为数据类的类型。<code>&lt;variable&gt;</code></li>
</ol>
<pre><code>&lt;data&gt;
   &lt;variable
       name="myName"
       type="com.example.android.aboutme.MyName" /&gt;
&lt;/data&gt;</code></pre>
<ol>
<li><p>在 中，使用数据类的实例创建一个变量。例如：<code>MainActivity</code><br><code>private val myName: MyName = MyName("Aleks Haecky")</code></p>
</li>
<li><p>在绑定对象中，将变量设置为刚刚创建的变量：<br><code>binding.myName = myName</code></p>
</li>
<li><p>在 XML 中，将视图的内容设置为在块中定义的变量。使用点符号访问数据类内的数据。<code>&lt;data&gt;</code><br><code>android:text="@={myName.name}"</code></p>
</li>
</ol>
<h2 id="第-3-课：导航"><a href="#第-3-课：导航" class="headerlink" title="第 3 课：导航"></a>第 3 课：导航</h2><h3 id="1-创建片段-Fragment"><a href="#1-创建片段-Fragment" class="headerlink" title="1. 创建片段(Fragment)"></a>1. 创建片段(Fragment)</h3><p><img src="https://developer.android.com/images/fragment_lifecycle.png" alt="img">fragment生命周期</p>
<h3 id="2-定义导航路径"><a href="#2-定义导航路径" class="headerlink" title="2. 定义导航路径"></a>2. 定义导航路径</h3><h3 id="3-启动外部活动"><a href="#3-启动外部活动" class="headerlink" title="3. 启动外部活动"></a>3. 启动外部活动</h3><h2 id="第-4-课：活动和片段生命周期"><a href="#第-4-课：活动和片段生命周期" class="headerlink" title="第 4 课：活动和片段生命周期"></a>第 4 课：活动和片段生命周期</h2><h3 id="4-1生命周期和日志记录"><a href="#4-1生命周期和日志记录" class="headerlink" title="4.1生命周期和日志记录"></a>4.1生命周期和日志记录</h3><p><img src="images/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image-20200721131037492.png" alt="image-20200721131037492"></p>
<p><img src="images/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image-20200721131000138.png" alt="image-20200721130945421"></p>
<p>AS快捷键ctrl+o（选择方法，重写）</p>
<table>
<thead>
<tr>
<th>生命周期函数</th>
<th>说明</th>
<th>注意</th>
</tr>
</thead>
<tbody><tr>
<td>onCreate()</td>
<td>活动执行任何一次初始化</td>
<td>该方法是重写，因此在它里面，必须立即调用 。其他生命周期方法也是如此。<code>onCreate()``super.onCreate()</code></td>
</tr>
<tr>
<td>onStart（）</td>
<td>生命周期方法在 刚刚调用。运行后，您的活动在屏幕上可见。与 不同，在活动的生命周期中，可以多次调用（仅调用一次以初始化活动）</td>
<td>注意，它与相应的生命周期方法配对。如果用户启动应用，然后返回到设备主屏幕，则活动将停止，并且不再在屏幕上可见。<code>onStart()``onStop()</code></td>
</tr>
<tr>
<td>onResume()</td>
<td>为活动提供焦点，并准备好让用户与其进行交互。</td>
<td></td>
</tr>
<tr>
<td>onPause()</td>
<td>应用不再在屏幕上可见</td>
<td></td>
</tr>
<tr>
<td>onRestart()</td>
<td>活动返回到前台</td>
<td></td>
</tr>
<tr>
<td>onStop()</td>
<td>停止活动</td>
<td></td>
</tr>
<tr>
<td>onDestroy()</td>
<td>应用销毁</td>
<td></td>
</tr>
</tbody></table>
<h4 id="片段的整个启动生命周期，包括这些回调："><a href="#片段的整个启动生命周期，包括这些回调：" class="headerlink" title="片段的整个启动生命周期，包括这些回调："></a>片段的整个启动生命周期，包括这些回调：</h4><ul>
<li><code>onAttach()</code>：当片段与其所有者活动关联时调用。</li>
<li><code>onCreate()</code>：与活动类似，对于片段，调用执行初始片段创建（布局除外）。<code>onCreate()``onCreate()</code></li>
<li><code>onCreateView()</code>：调用以膨胀片段的布局。</li>
<li><code>onActivityCreated()</code>：当所有者活动完成时调用。在调用此方法之前，您的片段将无法访问该活动。<code>onCreate()</code></li>
<li><code>onStart()</code>：当片段变为可见时调用;与活动的平行。<code>onStart()</code></li>
<li><code>onResume()</code>：当片段获得用户焦点时调用;与活动的平行。<code>onResume()</code></li>
</ul>
<h4 id="Log-类将消息写入日志猫。"><a href="#Log-类将消息写入日志猫。" class="headerlink" title="Log 类将消息写入日志猫。"></a><a href="https://developer.android.com/reference/kotlin/android/util/Log"><code>Log 类</code></a>将消息写入日志猫。</h4><p>此命令有三个部分：</p>
<ul>
<li><em>日志消息</em>的严重性，即消息的重要程度。在这种情况下[<code>，Log.i（） 方法</code>](<a href="https://developer.android.com/reference/kotlin/android/util/Log#i">https://developer.android.com/reference/kotlin/android/util/Log#i</a>(kotlin.String, kotlin.String))写入信息消息。类中的其他方法包括[<code>用于错误的 Log.e（）</code>](<a href="https://developer.android.com/reference/kotlin/android/util/Log#e">https://developer.android.com/reference/kotlin/android/util/Log#e</a>(kotlin.String, kotlin.String))或用于[<code>警告的 Log.w（）。</code> ](<a href="https://developer.android.com/reference/kotlin/android/util/Log#w">https://developer.android.com/reference/kotlin/android/util/Log#w</a>(kotlin.String, kotlin.String))<code>Log</code></li>
<li>日志<em>标记</em>，在这种情况下。标记是一个字符串，可让您更轻松地在 Logcat 中查找日志消息。标记通常是类的名称。<code>"MainActivity"</code></li>
<li>实际日志<em>消息，</em>一个短字符串，在这种情况下是 。<code>"onCreate called"</code></li>
</ul>
<ol>
<li><p>编译并运行甜品点击器应用程序。点击甜点时，不会看到应用程序中的任何行为差异。在 Android 工作室中， 在屏幕底部， 单击<strong>Logcat</strong>选项卡</p>
<p><img src="https://codelabs.developers.google.com/codelabs/kotlin-android-training-lifecycles-logging/img/ff9c50376701877f.png" alt="img"></p>
<p>。日志猫是记录消息的控制台。此处将显示来自 Android 的有关应用的消息，包括您用方法或其他类方法显式发送到日志的消息。<code>Log.i()``Log</code></p>
</li>
<li><p>在**”日志猫**”窗格中，键入搜索字段。</p>
<p><img src="https://codelabs.developers.google.com/codelabs/kotlin-android-training-lifecycles-logging/img/f5c091e2b480edf8.png" alt="img">Logcat<br>可以包含许多消息，其中大多数对您没有用。</p>
<p>您可以通过多种方式筛选 Logcat 条目，但搜索是最容易的。由于您将用作代码中的日志标记，因此可以使用该标记筛选日志。在开始添加意味着这是一个信息性消息，由 创建。<br>日志消息包括日期和时间、包 （）、日志标记（在开始时使用）和实际<br>消息。由于此消息出现在日志中，因此您知道已执行。<code>I/MainActivity``MainActivity``I/``Log.i()``com.example.android.dessertclicker``I/``onCreate()</code></p>
<h4 id="使用第三方库，显示时间日志"><a href="#使用第三方库，显示时间日志" class="headerlink" title="使用第三方库，显示时间日志"></a>使用第三方库，显示时间日志</h4><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'com.jakewharton.timber:timber:4.7.1'</span></code></pre>
<p>简介：Timber<code>使用 类，因为整个应用将使用此日志记录库，并且在设置其他所有内容之前，需要先初始化一次库。在这种情况下，您可以对类进行子类，并使用您自己的自定义实现重写默认值。</code>Application``Application</p>
<h5 id="在全局类里初始化"><a href="#在全局类里初始化" class="headerlink" title="在全局类里初始化"></a>在全局类里初始化</h5><pre class=" language-kotlin"><code class="language-kotlin">Timber<span class="token punctuation">.</span><span class="token function">plant</span><span class="token punctuation">(</span>Timber<span class="token punctuation">.</span><span class="token function">DebugTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><pre class=" language-kotlin"><code class="language-kotlin">Timber<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"onCreate called"</span><span class="token punctuation">)</span></code></pre>
</li>
</ol>
<h3 id="4-2复杂的生命周期情况"><a href="#4-2复杂的生命周期情况" class="headerlink" title="4.2复杂的生命周期情况"></a>4.2复杂的生命周期情况</h3><h4 id="生命周期提示"><a href="#生命周期提示" class="headerlink" title="生命周期提示"></a><strong>生命周期提示</strong></h4><ul>
<li>如果在生命周期回调中设置或启动某项内容，请停止或删除相应回调中的东西。通过停止它，你确保它不会继续运行时，它不再需要。例如，如果在 中设置计时器，则需要在 中暂停或停止计时器。<code>onStart()``onStop()</code></li>
<li>仅用于初始化应用首次启动时运行一次的应用部分。用于启动应用在应用启动时和每次应用返回前台时运行的应用部分。<code>onCreate()``onStart()</code></li>
</ul>
<h4 id="生命周期库"><a href="#生命周期库" class="headerlink" title="生命周期库"></a><strong>生命周期库</strong></h4><ul>
<li>使用 Android 生命周期库将生命周期控制从活动或片段转移到需要生命周期感知的实际组件。</li>
<li>生命周期<em>所有者</em>是具有（因此具有”拥有”）生命周期（包括 和 ）的组件。生命周期所有者实现接口。<code>Activity``Fragment``LifecycleOwner</code></li>
<li>生命周期<em>观察者</em>会关注当前生命周期状态，并在生命周期更改时执行任务。生命周期观察者实现接口。<code>LifecycleObserver</code></li>
<li><code>Lifecycle</code>对象包含实际的生命周期状态，并在生命周期更改时触发事件。</li>
</ul>
<p>要创建生命周期感知类，请：</p>
<ul>
<li><p>在需要生命周期感知的类中实现接口。<code>LifecycleObserver</code></p>
</li>
<li><p>使用活动或片段中的生命周期对象初始化生命周期观察者类。</p>
</li>
<li><p>在生命周期观察者类中，注释生命周期感知方法，并注明它们感兴趣的生命周期状态更改。</p>
<p>例如，注释指示该方法正在监视生命周期事件。<code>@OnLifecycleEvent(Lifecycle.Event.ON_START)``onStart</code></p>
</li>
</ul>
<h4 id="进程关闭和保存活动状态"><a href="#进程关闭和保存活动状态" class="headerlink" title="进程关闭和保存活动状态"></a><strong>进程关闭和保存活动状态</strong></h4><ul>
<li>Android 可调节在后台运行的应用，以便前台应用可以毫无问题地运行。此法规包括限制后台应用可以执行的处理量，有时甚至会关闭整个应用过程。</li>
<li>用户无法判断系统是否在后台关闭了应用。应用仍显示在”最近”屏幕中，并且应以用户离开时的状态重新启动。</li>
<li>Android 调试桥 （） 是一个命令行工具，允许您向连接到计算机的模拟器和设备发送指令。您可以使用 模拟应用中的进程关闭。<code>adb``adb</code></li>
<li>当 Android 关闭应用进程时，不会调用生命周期方法。应用程序刚刚停止。<code>onDestroy()</code></li>
</ul>
<h4 id="保留活动和片段状态"><a href="#保留活动和片段状态" class="headerlink" title="保留活动和片段状态"></a><strong>保留活动和片段状态</strong></h4><ul>
<li>当你的应用进入后台时，在调用后，应用数据将保存到捆绑包中。某些应用数据（如 的内容）会自动保存。<code>onStop()``EditText</code></li>
<li>捆绑包是 的实例，它是键和值的集合。键始终为字符串。<code>Bundle</code></li>
<li>使用回调将其他数据保存到要保留的捆绑包，即使应用已自动关闭。若要将数据放入捆绑包中，请使用 以 开始的捆绑方法，例如 。<code>onSaveInstanceState()``put``putInt()</code></li>
<li>可以从方法中的捆绑包中恢复数据，或者更常见地在 中获取数据。该方法具有保存捆绑包的参数。<code>onRestoreInstanceState()``onCreate()``onCreate()``savedInstanceState</code></li>
<li>如果变量包含 ，则活动在没有状态包的情况下启动，并且没有要检索的状态数据。<code>savedInstanceState``null</code></li>
<li>若要使用键从捆绑包中检索数据，请使用 以 开始的方法，如 。<code>Bundle``get``getInt()</code></li>
</ul>
<h4 id="配置更改"><a href="#配置更改" class="headerlink" title="配置更改"></a><strong>配置更改</strong></h4><ul>
<li><em>当设备</em>的状态发生如此急剧的变化，系统解决更改的最简单方法是关闭和重建活动时，就会发生配置更改。</li>
<li>配置更改的最常见示例是当用户将设备从纵向旋转到横向模式或从横向模式旋转到纵向模式时。当设备语言更改或插入硬件键盘时，也可能发生配置更改。</li>
<li>当发生配置更改时，Android 会调用所有活动生命周期的关闭回调。然后 Android 从头开始重新启动活动，运行所有生命周期启动回调。</li>
<li>当 Android 由于配置更改而关闭应用时，它将使用 可用的状态捆绑包重新启动活动。<code>onCreate()</code></li>
<li>与进程关闭一样，将应用的状态保存到 中的捆绑包。<code>onSaveInstanceState()</code></li>
</ul>
<h2 id="第-5-课：体系结构组件"><a href="#第-5-课：体系结构组件" class="headerlink" title="第 5 课：体系结构组件"></a>第 5 课：体系结构组件</h2><h2 id="第-6-课：房间数据库和密码"><a href="#第-6-课：房间数据库和密码" class="headerlink" title="第 6 课：房间数据库和密码"></a>第 6 课：房间数据库和密码</h2><h2 id="第-7-课：回收器视图"><a href="#第-7-课：回收器视图" class="headerlink" title="第 7 课：回收器视图"></a>第 7 课：回收器视图</h2><h2 id="第8课：连接到互联网"><a href="#第8课：连接到互联网" class="headerlink" title="第8课：连接到互联网"></a>第8课：连接到互联网</h2><h2 id="第-9-课：存储库"><a href="#第-9-课：存储库" class="headerlink" title="第 9 课：存储库"></a>第 9 课：存储库</h2><h2 id="第-10-课：为每个人设计"><a href="#第-10-课：为每个人设计" class="headerlink" title="第 10 课：为每个人设计"></a>第 10 课：为每个人设计</h2><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.105Z" title="2020-08-02T23:42:42.105Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">3 分钟 读完 (大约 490 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/shi-yong-viewmodel-chu-li-pei-zhi-geng-gai/">使用 ViewModel 处理配置更改</a></h1><div class="content"><h2 id="使用-ViewModel-处理配置更改"><a href="#使用-ViewModel-处理配置更改" class="headerlink" title="使用 ViewModel 处理配置更改"></a>使用 ViewModel 处理配置更改</h2><p>ViewModel 非常适合在用户积极使用应用程序时存储和管理与 UI 相关的数据。它允许快速访问 UI 数据，并帮助您避免通过旋转、窗口调整和其他常见发生的配置更改从网络或磁盘重新提取数据。若要了解如何实现视图模型，请参阅<a href="https://developer.android.com/topic/libraries/architecture/viewmodel.html">视图模型指南</a>。</p>
<p>ViewModel 将数据保留在内存中，这意味着检索比从磁盘或网络中检索数据更便宜。ViewModel 与活动（或其他一些生命周期所有者）关联 - 它在配置更改期间保留在内存中，系统会自动将 ViewModel 与配置更改导致的新活动实例关联。</p>
<p>当用户退出活动或片段时，或者当您调用 finish（）时，ViewModels 会自动被系统销毁，这意味着状态将按用户在这些方案中的期望进行清除。</p>
<p>与保存的实例状态不同，ViewModels 在系统启动的进程死亡期间被销毁。这就是为什么您应该将 ViewModel 对象与 onSaveInstanceState（或其他一些磁盘持久性）结合使用，将标识符隐藏到保存的 InstanceState 中，以帮助查看模型在系统死亡后重新加载数据。</p>
<p>如果您已经拥有用于跨配置更改存储 UI 状态的内存中解决方案，则可能不需要使用 ViewModel。</p>
<h3 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h3><ul>
<li><a href="https://medium.com/androiddevelopers/viewmodels-a-simple-example-ed5ac416317e">视图模型 ：一个简单的示例</a></li>
<li><a href="https://medium.com/androiddevelopers/viewmodels-persistence-onsaveinstancestate-restoring-ui-state-and-loaders-fc7cc4a6c090">视图模型：持久性、在保存状态（）、还原 UI 状态和加载器</a></li>
<li><a href="https://codelabs.developers.google.com/codelabs/android-lifecycles/">Android 生命周期感知组件代码实验室</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.062Z" title="2020-08-02T23:42:42.062Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">21 分钟 读完 (大约 3102 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/jetpack/">Jetpack</a></h1><div class="content"><p>[toc]</p>
<h1 id="Jetpack简介"><a href="#Jetpack简介" class="headerlink" title="Jetpack简介"></a>Jetpack简介</h1><p>Jetpack是一个开发组件工具集，官网：<a href="https://developer.android.google.cn/jetpack">https://developer.android.google.cn/jetpack</a></p>
<p>Jetpack 是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨 Android 版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。</p>
<p>Jetpack 库可以单独使用，也可以组合使用，以满足应用的不同需求。</p>
<ul>
<li><a href="https://developer.android.google.cn/topic/libraries/architecture/workmanager">WorkManager</a> - 满足您的后台调度需求。</li>
<li><a href="https://developer.android.google.cn/topic/libraries/architecture/room">Room</a> - 实现数据存储持久性。</li>
<li><a href="https://developer.android.google.cn/guide/navigation/navigation-getting-started">Navigation</a> - 管理应用导航流程。</li>
<li><a href="https://developer.android.google.cn/training/camerax">CameraX</a> - 满足相机应用需求。</li>
<li>请参阅所有 Jetpack 库的<a href="https://developer.android.google.cn/jetpack/androidx/versions#version-table">概览</a>。</li>
</ul>
<p><img src="images/Jetpack/image-20200721153616389.png" alt="image-20200721153616389"></p>
<p><img src="images/Jetpack/image-20200722131636968.png" alt="image-20200722131636968"></p>
<h2 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>ViewModel是Jetpack组件之一，在传统Activity中需要负责逻辑处理，又要控制UI展示，甚至还得处理网络回调，现在ViewModel将负责Activity的数据部分</p>
<p>当手机旋转时Activity会被重新创建，但ViewModel生命周期是Activtity创建到销毁全过程，所以旋转不会导致数据丢失</p>
<p><img src="images/Jetpack/image-20200721154242410.png" alt="image-20200721154242410"></p>
<h3 id="简单的计时器"><a href="#简单的计时器" class="headerlink" title="简单的计时器"></a>简单的计时器</h3><ol>
<li><h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h4><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> lifecycle_version <span class="token operator">=</span> <span class="token string">"2.2.0"</span>
    implementation <span class="token string">"androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version"</span></code></pre>
<p>​    </p>
</li>
<li><h4 id="创建ViewModel"><a href="#创建ViewModel" class="headerlink" title="创建ViewModel"></a>创建ViewModel</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> MainModel<span class="token operator">:</span><span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> counter<span class="token operator">=</span><span class="token number">0</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
<li><h4 id="编写Activity"><a href="#编写Activity" class="headerlink" title="编写Activity"></a>编写Activity</h4><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

</code></pre>
</li>
</ol>
<pre><code>   &lt;TextView
       android:id="@+id/infoText"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_gravity="center_horizontal"
       android:text="@string/jishi" /&gt;

   &lt;Button
       android:id="@+id/plusOnBtn"
       android:layout_gravity="center_vertical"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:text="@string/pulus_one" /&gt;</code></pre>
   
   ```

<pre class=" language-kotlin"><code class="language-kotlin">
<span class="token keyword">package</span> com<span class="token punctuation">.</span>kj<span class="token punctuation">.</span>scoreviewmodel

<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProviders
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//定义viewmodel</span>
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> viewModel<span class="token operator">:</span> MainModel

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//初始化viewmodel</span>
        viewModel<span class="token operator">=</span> ViewModelProviders<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MainModel<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//button点击事件</span>
        plusOnBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            viewModel<span class="token punctuation">.</span>counter<span class="token operator">++</span>
            <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//更新视图</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        infoText<span class="token punctuation">.</span>text<span class="token operator">=</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="向ViewModel传递参数"><a href="#向ViewModel传递参数" class="headerlink" title="向ViewModel传递参数"></a>向ViewModel传递参数</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel
<span class="token comment" spellcheck="true">//添加构造参数</span>
<span class="token keyword">class</span> <span class="token function">MainModel2</span><span class="token punctuation">(</span>counter<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> counter<span class="token operator">=</span>counter
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProvider
<span class="token comment" spellcheck="true">//利用ViewModelProvider.Factory 接口 实现构造函数</span>
<span class="token keyword">class</span> <span class="token function">MainViewModelFactory</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">val</span> counter<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> ViewModelProvider<span class="token punctuation">.</span>Factory &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> ViewModel<span class="token operator">?</span><span class="token operator">></span> <span class="token function">create</span><span class="token punctuation">(</span>modelClass<span class="token operator">:</span> Class<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> T &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">MainModel2</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token keyword">as</span> T
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Context
<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>SharedPreferences
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProviders
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>


<span class="token keyword">class</span> MainActivity2 <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> viewModel<span class="token operator">:</span>MainModel2
    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> sp<span class="token operator">:</span> SharedPreferences

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        sp<span class="token operator">=</span><span class="token function">getPreferences</span><span class="token punctuation">(</span>Context<span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span>
        <span class="token keyword">val</span> countReserved<span class="token operator">=</span>sp<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"count_reserved"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//初始化viewmodel（修改点）</span>
        viewModel<span class="token operator">=</span> ViewModelProviders<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token function">MainViewModelFactory</span><span class="token punctuation">(</span>countReserved<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MainModel2<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">//button点击事件</span>
        plusOnBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            viewModel<span class="token punctuation">.</span>counter<span class="token operator">++</span>
            <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        sp<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span><span class="token string">"count_reserved"</span><span class="token punctuation">,</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//更新视图</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        infoText<span class="token punctuation">.</span>text<span class="token operator">=</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h3 id="更正由于ViewModel-设计理念是不依赖与Activity"><a href="#更正由于ViewModel-设计理念是不依赖与Activity" class="headerlink" title="更正由于ViewModel 设计理念是不依赖与Activity"></a>更正由于ViewModel 设计理念是不依赖与Activity</h3><h3 id="使用google推荐的写法"><a href="#使用google推荐的写法" class="headerlink" title="使用google推荐的写法"></a>使用google推荐的写法</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> UserProfileViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
   <span class="token keyword">val</span> userId <span class="token operator">:</span> String <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token keyword">val</span> user <span class="token operator">:</span> User <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">val</span> viewModel<span class="token operator">:</span> UserProfileViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<h3 id="遇到的错误"><a href="#遇到的错误" class="headerlink" title="遇到的错误"></a>遇到的错误</h3><pre><code>Cannot inline bytecode built with JVM target 1.8 into bytecode that is being built with JVM target
//解决
android &amp;#123;
    ...
    compileOptions &amp;#123;
        sourceCompatibility = 1.8
        targetCompatibility = 1.8
    &amp;#125;

    kotlinOptions &amp;#123;
        jvmTarget = "1.8"
    &amp;#125;
&amp;#125;
</code></pre>
<p><img src="images/Jetpack/image-20200722134519104.png" alt="image-20200722134519104"></p>
<h2 id="Lifecycles"><a href="#Lifecycles" class="headerlink" title="Lifecycles"></a>Lifecycles</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>在网络请求中，由于网络响应延迟，页面关闭情况，我们要对activity生命周期进行逻辑处理</p>
<h3 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h3><pre><code>import android.util.Log
import androidx.lifecycle.Lifecycle
import androidx.lifecycle.LifecycleObserver
import androidx.lifecycle.OnLifecycleEvent

class MyObserver(val lifecycle: Lifecycle) : LifecycleObserver &amp;#123;
    @OnLifecycleEvent(Lifecycle.Event.ON_START)
    fun activityStart()&amp;#123;
        Log.d("MyObserver", "activityStart: ")
    &amp;#125;
    @OnLifecycleEvent(Lifecycle.Event.ON_STOP)
    fun activityStop()&amp;#123;
        Log.d("MyObserver", "activityStop: ")
    &amp;#125;
&amp;#125;</code></pre>
<pre><code>//activity监听生命周期
        MyObserver(lifecycle)
        val currentState = lifecycle.currentState
        Toast.makeText(this, ""+currentState, Toast.LENGTH_SHORT).show()</code></pre>
<h2 id="LiveData"><a href="#LiveData" class="headerlink" title="LiveData"></a>LiveData</h2><p><a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData"><code>LiveData</code></a> 是一种可观察的数据存储器类。与常规的可观察类不同，LiveData 具有生命周期感知能力，意指它遵循其他应用组件（如 Activity、Fragment 或 Service）的生命周期。这种感知能力可确保 LiveData 仅更新处于活跃生命周期状态的应用组件观察者。</p>
<p>您可以注册与实现 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner"><code>LifecycleOwner</code></a> 接口的对象配对的观察者。有了这种关系，当相应的 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle"><code>Lifecycle</code></a> 对象的状态变为 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle.State#DESTROYED"><code>DESTROYED</code></a> 时，便可移除此观察者。 这对于 Activity 和 Fragment 特别有用，因为它们可以放心地观察 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData"><code>LiveData</code></a> 对象而不必担心泄露（当 Activity 和 Fragment 的生命周期被销毁时，系统会立即退订它们）。</p>
<ul>
<li>确保界面符合数据状态</li>
<li>不会发生内存泄漏</li>
<li>不会因Activity停止导致崩溃</li>
<li>不需要手动处理生命周期</li>
<li>数据保持最新状态</li>
<li>适当的配置更改</li>
<li>共享资源</li>
</ul>
<h3 id="1-使用LiveData对象"><a href="#1-使用LiveData对象" class="headerlink" title="1.使用LiveData对象"></a>1.使用LiveData对象</h3><ol>
<li><p>创建 <code>LiveData</code> 实例以存储某种类型的数据。这通常在 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel"><code>ViewModel</code></a> 类中完成。</p>
</li>
<li><p>创建可定义 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Observer#onChanged(T)"><code>onChanged()</code></a> 方法的 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Observer"><code>Observer</code></a> 对象，该方法可以控制当 <code>LiveData</code> 对象存储的数据更改时会发生什么。通常情况下，您可以在界面控制器（如 Activity 或 Fragment）中创建 <code>Observer</code> 对象。</p>
</li>
<li><p>使用 [<code>observe()</code>](<a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData#observe">https://developer.android.google.cn/reference/androidx/lifecycle/LiveData#observe</a>(android.arch.lifecycle.LifecycleOwner, android.arch.lifecycle.Observer)) 方法将 <code>Observer</code> 对象附加到 <code>LiveData</code> 对象。<code>observe()</code> 方法会采用 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner"><code>LifecycleOwner</code></a> 对象。这样会使 <code>Observer</code> 对象订阅 <code>LiveData</code> 对象，以使其收到有关更改的通知。通常情况下，您可以在界面控制器（如 Activity 或 Fragment）中附加 <code>Observer</code> 对象。</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>MutableLiveData
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel

<span class="token keyword">class</span> NameViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 用字符串创建一个LiveData</span>
    <span class="token keyword">val</span> currentName<span class="token operator">:</span> MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token keyword">by</span> lazy &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// ViewModel的其余部分…</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> NameActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// 使用'by viewModels()' Kotlin属性委托</span>
    <span class="token comment" spellcheck="true">// 来自activity-ktx工件</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> model<span class="token operator">:</span> NameViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_name<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">// 创建用于更新UI的观察者。</span>
        <span class="token keyword">val</span> nameObserver <span class="token operator">=</span> Observer<span class="token operator">&lt;</span>String<span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span> newName <span class="token operator">-></span>
            <span class="token comment" spellcheck="true">// 更新UI，这里是TextView。</span>
            nameTextView<span class="token punctuation">.</span>text <span class="token operator">=</span> newName
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// 观察LiveData，将此活动作为LifecycleOwner和observer传递进来。</span>
        model<span class="token punctuation">.</span>currentName<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> nameObserver<span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">// 修改参数</span>
        button<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            model<span class="token punctuation">.</span>currentName<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true">//model.currentName.postValue(edText.text.toString())</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<h3 id="2-map和switchMap的使用"><a href="#2-map和switchMap的使用" class="headerlink" title="2.map和switchMap的使用"></a>2.map和switchMap的使用</h3><ol>
<li><p>定义一个User类</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token keyword">var</span> fistName<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> lastName<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span>Int<span class="token punctuation">)</span></code></pre>
</li>
</ol>
<ol start="2">
<li><p>编写ViewModel</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">MainViewModel</span><span class="token punctuation">(</span>countReserved<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">val</span> userLiveData<span class="token operator">=</span>MytableLiveData<span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">val</span> userName<span class="token operator">:</span>LiveData<span class="token operator">&lt;</span>String<span class="token operator">>=</span>Transformations<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userLiveData<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>user<span class="token operator">-></span>
        <span class="token string">"$&amp;#123;user.firstName&amp;#125; $&amp;#123;user.lastName&amp;#125;"</span>                                                            
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<ol start="3">
<li><h2 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h2></li>
</ol>
<p><a href="https://developer.android.google.cn/training/data-storage/room">Room</a> 持久性库在 SQLite 的基础上提供了一个抽象层，让用户能够在充分利用 SQLite 的强大功能的同时，获享更强健的数据库访问机制。</p>
<p>Room 包含 3 个主要组件：</p>
<ul>
<li><p><a href="https://developer.android.google.cn/reference/androidx/room/Database"><strong>数据库</strong></a>：包含数据库持有者，并作为应用已保留的持久关系型数据的底层连接的主要接入点。</p>
<p>使用 <a href="https://developer.android.google.cn/reference/androidx/room/Database"><code>@Database</code></a> 注释的类应满足以下条件：</p>
<ul>
<li>是扩展 <a href="https://developer.android.google.cn/reference/androidx/room/RoomDatabase"><code>RoomDatabase</code></a> 的抽象类。</li>
<li>在注释中添加与数据库关联的实体列表。</li>
<li>包含具有 0 个参数且返回使用 <a href="https://developer.android.google.cn/reference/androidx/room/Dao"><code>@Dao</code></a> 注释的类的抽象方法。</li>
</ul>
<p>在运行时，您可以通过调用 [<code>Room.databaseBuilder()</code>](<a href="https://developer.android.google.cn/reference/androidx/room/Room#databaseBuilder">https://developer.android.google.cn/reference/androidx/room/Room#databaseBuilder</a>(android.content.Context, java.lang.Class, java.lang.String)) 或 [<code>Room.inMemoryDatabaseBuilder()</code>](<a href="https://developer.android.google.cn/reference/androidx/room/Room#inMemoryDatabaseBuilder">https://developer.android.google.cn/reference/androidx/room/Room#inMemoryDatabaseBuilder</a>(android.content.Context, java.lang.Class)) 获取 <a href="https://developer.android.google.cn/reference/androidx/room/Database"><code>Database</code></a> 的实例。</p>
</li>
</ul>
<ul>
<li><p><a href="https://developer.android.google.cn/training/data-storage/room/defining-data"><strong>Entity</strong></a>：表示数据库中的表。</p>
</li>
<li><p><a href="https://developer.android.google.cn/training/data-storage/room/accessing-data"><strong>DAO</strong></a>：包含用于访问数据库的方法。</p>
</li>
</ul>
<p>应用使用 Room 数据库来获取与该数据库关联的数据访问对象 (DAO)。然后，应用使用每个 DAO 从数据库中获取实体，然后再将对这些实体的所有更改保存回数据库中。 最后，应用使用实体来获取和设置与数据库中的表列相对应的值。</p>
<p><img src="images/Jetpack/image-20200722181709403.png" alt="image-20200722181709403"></p>
<h3 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h3><p>导入依赖</p>
<pre class=" language-kotlin"><code class="language-kotlin">def room_version <span class="token operator">=</span> <span class="token string">"2.2.5"</span>

    implementation <span class="token string">"androidx.room:room-runtime:<span class="token interpolation variable">$room_version</span>"</span>
    <span class="token comment" spellcheck="true">//annotationProcessor "androidx.room:room-compiler:$room_version" // 对于Kotlin来说，使用kapt而不是annotationProcessor</span>
    kapt <span class="token string">"androidx.room:room-compiler:<span class="token interpolation variable">$room_version</span>"</span> <span class="token comment" spellcheck="true">// 对于Kotlin来说，使用kapt而不是annotationProcessor</span>

<span class="token comment" spellcheck="true">// 可选- Kotlin扩展和协同程序支持空间</span>
implementation <span class="token string">"androidx.room:room-ktx:<span class="token interpolation variable">$room_version</span>"</span>

<span class="token comment" spellcheck="true">// 可选- RxJava支持房间</span>
implementation <span class="token string">"androidx.room:room-rxjava2:<span class="token interpolation variable">$room_version</span>"</span>

<span class="token comment" spellcheck="true">// 可选-番石榴支持房间，包括可选和ListenableFuture</span>
implementation <span class="token string">"androidx.room:room-guava:<span class="token interpolation variable">$room_version</span>"</span>

<span class="token comment" spellcheck="true">// 测试助手</span>
testImplementation <span class="token string">"androidx.room:room-testing:<span class="token interpolation variable">$room_version</span>"</span></code></pre>
<p>User</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//数据库的表</span>
<span class="token annotation builtin">@Entity</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">User</span><span class="token punctuation">(</span>
    <span class="token annotation builtin">@ColumnInfo</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"first_name"</span><span class="token punctuation">)</span> <span class="token keyword">val</span> firstName<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>
    <span class="token annotation builtin">@ColumnInfo</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"last_name"</span><span class="token punctuation">)</span> <span class="token keyword">val</span> lastName<span class="token operator">:</span> String<span class="token operator">?</span>
<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> uid<span class="token operator">:</span> Long<span class="token operator">=</span><span class="token number">0</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>   </code></pre>
<p>UserDao</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//数据访问对象</span>
<span class="token annotation builtin">@Dao</span>
<span class="token keyword">interface</span> UserDao &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span>

    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user WHERE uid IN (:userIds)"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">loadAllByIds</span><span class="token punctuation">(</span>userIds<span class="token operator">:</span> IntArray<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span>

    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user WHERE first_name LIKE :first AND "</span> <span class="token operator">+</span>
            <span class="token string">"last_name LIKE :last LIMIT 1"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">findByName</span><span class="token punctuation">(</span>first<span class="token operator">:</span> String<span class="token punctuation">,</span> last<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> User

    <span class="token annotation builtin">@Insert</span>
    <span class="token keyword">fun</span> <span class="token function">insertUser</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span><span class="token operator">:</span>Long

    <span class="token annotation builtin">@Delete</span>
    <span class="token keyword">fun</span> <span class="token function">delete</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>AppDatabase</p>
<pre class=" language-kotlin"><code class="language-kotlin">    <span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>创建上述文件后，您可以使用以下代码获取已创建的数据库的实例：</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//定义数据库对象，数据库版本，包含的实体类</span>
<span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token punctuation">[</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao

    <span class="token keyword">companion</span> <span class="token keyword">object</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">var</span> instance<span class="token operator">:</span> AppDatabase<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>

        <span class="token annotation builtin">@Synchronized</span>
        <span class="token keyword">fun</span> <span class="token function">getDatabase</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> AppDatabase &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            instance<span class="token operator">?</span><span class="token punctuation">.</span>let &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> it
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Room<span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span>
                AppDatabase<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">,</span><span class="token string">"app_database"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//Room默认不容许在主线程中进行数据库操作，加入这个方法可以在主线程进行数据库操作</span>

                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    instance <span class="token operator">=</span><span class="token keyword">this</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span> </code></pre>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.room.RoomActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/edText<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name 用空格隔开<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>autofillHints</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/addBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/add<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/queryBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/query_data<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/updateBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/update<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/deleteBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/delete<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>fontFamily</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@font/aldrich<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">></span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> RoomActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//获取数据库实例</span>
    <span class="token keyword">val</span> userDao<span class="token operator">=</span> AppDatabase<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_room<span class="token punctuation">)</span>

        addBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            userDao<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token function">User</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        updateBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            userDao<span class="token punctuation">.</span><span class="token function">upDateUser</span><span class="token punctuation">(</span><span class="token function">User</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        deleteBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            userDao<span class="token punctuation">.</span><span class="token function">deleteUserByLastName</span><span class="token punctuation">(</span>textView<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        queryBtn<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">""</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>user <span class="token keyword">in</span> userDao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                str<span class="token operator">+=</span>user<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            textView<span class="token punctuation">.</span>text<span class="token operator">=</span>str
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h3 id="Room的数据库升级"><a href="#Room的数据库升级" class="headerlink" title="Room的数据库升级"></a>Room的数据库升级</h3><p>添加数据库表Book</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Entity</span>
<span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Book</span><span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> pages<span class="token operator">:</span> Int<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> id<span class="token operator">:</span>Long<span class="token operator">=</span><span class="token number">0</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<p>BookDao</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Dao</span>
<span class="token keyword">interface</span> BookDao &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token annotation builtin">@Insert</span>
    <span class="token keyword">fun</span> <span class="token function">insertBook</span><span class="token punctuation">(</span>book<span class="token operator">:</span> Book<span class="token punctuation">)</span><span class="token operator">:</span>Long

    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"select * from Book"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">loadAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//定义数据库对象，数据库版本，包含的实体类</span>
<span class="token comment" spellcheck="true">//版本变成2 添加Book class</span>
<span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>version <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> entities <span class="token operator">=</span> <span class="token punctuation">[</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>Book<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao
    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">bookDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> BookDao

    <span class="token keyword">companion</span> <span class="token keyword">object</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">var</span> instance<span class="token operator">:</span> AppDatabase<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>

        <span class="token keyword">val</span> MIGRATION_1_2<span class="token operator">=</span><span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">Migration</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">migrate</span><span class="token punctuation">(</span>database<span class="token operator">:</span> SupportSQLiteDatabase<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                database<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span><span class="token string">"create table Book ("</span> <span class="token operator">+</span>
                        <span class="token string">"id integer primary key autoincrement not null,"</span> <span class="token operator">+</span>
                        <span class="token string">"name text not null,"</span> <span class="token operator">+</span>
                        <span class="token string">"pages integer not null)"</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token annotation builtin">@Synchronized</span>
        <span class="token keyword">fun</span> <span class="token function">getDatabase</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> AppDatabase &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            instance<span class="token operator">?</span><span class="token punctuation">.</span>let &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> it
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Room<span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span>
                AppDatabase<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">,</span><span class="token string">"app_database"</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//Room默认不容许在主线程中进行数据库操作，加入这个方法可以在主线程进行数据库操作</span>
                <span class="token punctuation">.</span><span class="token function">addMigrations</span><span class="token punctuation">(</span>MIGRATION_1_2<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//添加数据表</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>apply &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    instance <span class="token operator">=</span><span class="token keyword">this</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h2 id="WorkManager-调度任务"><a href="#WorkManager-调度任务" class="headerlink" title="WorkManager 调度任务"></a>WorkManager 调度任务</h2><p>使用 WorkManager API 可以轻松地调度即使在应用退出或设备重启时仍应运行的可延迟异步任务。</p>
<p><strong>主要功能</strong>：</p>
<ul>
<li>最高向后兼容到 API 14<ul>
<li>在运行 API 23 及以上级别的设备上使用 JobScheduler</li>
<li>在运行 API 14-22 的设备上结合使用 BroadcastReceiver 和 AlarmManager</li>
</ul>
</li>
<li>添加网络可用性或充电状态等工作约束</li>
<li>调度一次性或周期性异步任务</li>
<li>监控和管理计划任务</li>
<li>将任务链接起来</li>
<li>确保任务执行，即使应用或设备重启也同样执行任务</li>
<li>遵循低电耗模式等省电功能</li>
</ul>
<p>WorkManager 旨在用于<strong>可延迟</strong>运行（即不需要立即运行）并且在应用退出或设备重启时必须能够<strong>可靠运行</strong>的任务。例如：</p>
<ul>
<li>向后端服务发送日志或分析数据</li>
<li>定期将应用数据与服务器同步</li>
</ul>
<p>WorkManager 不适用于应用进程结束时能够安全终止的运行中后台工作，也不适用于需要立即执行的任务。请查看<a href="https://developer.android.google.cn/guide/background">后台处理指南</a>，了解哪种解决方案符合您的需求。</p>
<h3 id="WorkManger基本用法"><a href="#WorkManger基本用法" class="headerlink" title="WorkManger基本用法"></a>WorkManger基本用法</h3><h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> work_version <span class="token operator">=</span> <span class="token string">"2.3.4"</span>

        <span class="token comment" spellcheck="true">// (Java only)</span>
        implementation <span class="token string">"androidx.work:work-runtime:$work_version"</span>

        <span class="token comment" spellcheck="true">// Kotlin + coroutines</span>
        implementation <span class="token string">"androidx.work:work-runtime-ktx:$work_version"</span>

        <span class="token comment" spellcheck="true">// optional - RxJava2 support</span>
        implementation <span class="token string">"androidx.work:work-rxjava2:$work_version"</span>

        <span class="token comment" spellcheck="true">// optional - GCMNetworkManager support</span>
        implementation <span class="token string">"androidx.work:work-gcm:$work_version"</span>

        <span class="token comment" spellcheck="true">// optional - Test helpers</span>
        androidTestImplementation <span class="token string">"androidx.work:work-testing:$work_version"</span></code></pre>
<h4 id="创建后台任务"><a href="#创建后台任务" class="headerlink" title="创建后台任务"></a>创建后台任务</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">SimpleWorker</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">,</span>params<span class="token operator">:</span> WorkerParameters<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">Worker</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>params<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Result &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//耗时操作</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"SimpleWorker"</span><span class="token punctuation">,</span> <span class="token string">"doWork: do work in SimpleWorker"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin">button<span class="token punctuation">.</span>setOnClickListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">val</span> request<span class="token operator">=</span>OneTimeWorkRequest<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span>SimpleWorker<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setInitialDelay</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//设置5分钟后运行</span>
                <span class="token punctuation">.</span><span class="token function">addTag</span><span class="token punctuation">(</span><span class="token string">"simple"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//添加请求标签，</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            WorkManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.048Z" title="2020-08-02T23:42:42.048Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">1 分钟 读完 (大约 130 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/bottomnavigationview-kong-jian-xue-xi-md/">BottomNavigationView控件学习md</a></h1><div class="content"><h1 id="as可直接生成底部导航"><a href="#as可直接生成底部导航" class="headerlink" title="as可直接生成底部导航"></a>as可直接生成底部导航</h1><p><img src="/imgs/1.png"></p>
<h1 id="相关文件"><a href="#相关文件" class="headerlink" title="相关文件"></a>相关文件</h1><p><img src="/imgs/2.png"><br><img src="/imgs/2_1.png"></p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><pre><code>menu-&gt;item-&gt;id 要和 navigation-&gt;fragment-&gt;id 保持一致&lt;br&gt;
startDestination:启动页面</code></pre>
<p><img src="/imgs/3.png"><br><img src="/imgs/4.png"></p>
<h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><pre><code> private void setNav() {
    states = new int[][] {
            new int[] { android.R.attr.state_selected}, // 选中状态
            new int[] { android.R.attr.state_enabled}  // 未选中状态
    };

    colors = new int[] {
            Color.BLUE,
            Color.GRAY
    };
    ColorStateList myList = new ColorStateList(states, colors);
    BottomNavigationView navView = findViewById(R.id.nav_view);
    navView.setItemTextColor(myList);//设置item文字颜色
    navView.setItemIconTintList(myList);//设置item图片颜色
    NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);
    NavigationUI.setupWithNavController(navView, navController);
}</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.042Z" title="2020-08-02T23:42:42.042Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">几秒 读完 (大约 40 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/android-studio-shi-yong-ji-qiao/">Android Studio使用技巧</a></h1><div class="content"><p>[toc]</p>
<h1 id="IDE技巧"><a href="#IDE技巧" class="headerlink" title="IDE技巧"></a>IDE技巧</h1><h2 id="1-提取样式"><a href="#1-提取样式" class="headerlink" title="1. 提取样式"></a>1. 提取样式</h2><p><img src="images/Android%20Studio%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20200718112705738.png" alt="image-20200718112705738"></p>
<p><img src="images/Android%20Studio%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20200718112818773.png" alt="image-20200718112818773"></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.036Z" title="2020-08-02T23:42:42.036Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">几秒 读完 (大约 90 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/3-4-kai-yuan-wang-luo-feng-zhuang-ku-retofit/">3-4 开源网络封装库Retofit</a></h1><div class="content"><h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><h1 id="2-Retrofit基本用法"><a href="#2-Retrofit基本用法" class="headerlink" title="2.Retrofit基本用法"></a>2.Retrofit基本用法</h1><h3 id="2-1添加依赖"><a href="#2-1添加依赖" class="headerlink" title="2.1添加依赖"></a>2.1添加依赖</h3><pre class=" language-groovy"><code class="language-groovy">    implementation <span class="token string">'com.squareup.retrofit2:retrofit:2.6.1'</span>
    implementation <span class="token string">'com.squareup.retrofit2:converter-gson:2.6.1'</span></code></pre>
<h2 id="2-2-编写gson实体类"><a href="#2-2-编写gson实体类" class="headerlink" title="2.2.编写gson实体类"></a>2.2.编写gson实体类</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> version<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre>
<h2 id="2-3创建接口"><a href="#2-3创建接口" class="headerlink" title="2.3创建接口"></a>2.3创建接口</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> AppService &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">/**
     * 使用get请求,参数是请求相对地址
     * 返回类型是 对应的实体类
     */</span>
    <span class="token annotation builtin">@GET</span><span class="token punctuation">(</span><span class="token string">"get_data.json"</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">getAppData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Call<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span>

&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h2 id="2-4Activity界面编辑"><a href="#2-4Activity界面编辑" class="headerlink" title="2.4Activity界面编辑"></a>2.4Activity界面编辑</h2><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/getAppDataBtn<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Get App Data<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.024Z" title="2020-08-02T23:42:42.024Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">2 分钟 读完 (大约 289 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/3-3-feng-zhuang-wang-luo-qing-qiu/">3-3 封装网络请求</a></h1><div class="content"><h1 id="1-HttpURLConnection网络封装"><a href="#1-HttpURLConnection网络封装" class="headerlink" title="1.HttpURLConnection网络封装"></a>1.HttpURLConnection网络封装</h1><ol>
<li><p>定义接口</p>
</li>
<li><p>编写工具类</p>
</li>
<li><p>测试应用</p>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**
 * 创建http回调接口
 */</span>
<span class="token keyword">interface</span> HttpCallbackListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//服务器成功响应</span>
    <span class="token keyword">fun</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">//服务器响应失败</span>
    <span class="token keyword">fun</span> <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> HttpUtil &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">fun</span> <span class="token function">sendHttpRequest</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">,</span> listener<span class="token operator">:</span> HttpCallbackListener<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        thread &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> connection<span class="token operator">:</span> HttpURLConnection<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
            <span class="token keyword">try</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span>
                connection <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HttpURLConnection
                connection<span class="token punctuation">.</span>connectTimeout <span class="token operator">=</span> <span class="token number">8000</span>
                connection<span class="token punctuation">.</span>readTimeout <span class="token operator">=</span> <span class="token number">8000</span>
                <span class="token keyword">val</span> input <span class="token operator">=</span> connection<span class="token punctuation">.</span>inputStream
                <span class="token keyword">val</span> reader <span class="token operator">=</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span><span class="token function">InputStreamReader</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span>
                reader<span class="token punctuation">.</span>use &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    reader<span class="token punctuation">.</span>forEachLine &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                        response<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
                    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">// 回调onFinish()方法</span>
                listener<span class="token punctuation">.</span><span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment" spellcheck="true">// 回调onError()方法</span>
                listener<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">finally</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                connection<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
</li>
</ol>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//创建一个新的协程运行</span>
    runBlocking &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">getBaiduResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>

suspend <span class="token keyword">fun</span> <span class="token function">getBaiduResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com/"</span><span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">// 得到服务器返回的具体内容</span>
        <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// 在这里对异常情况进行处理</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>

suspend <span class="token keyword">fun</span> <span class="token function">request</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> String &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> suspendCoroutine &amp;#<span class="token number">123</span><span class="token punctuation">;</span> continuation <span class="token operator">-></span>
        HttpUtil<span class="token punctuation">.</span><span class="token function">sendHttpRequest</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span>
            HttpCallbackListener &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                continuation<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                continuation<span class="token punctuation">.</span><span class="token function">resumeWithException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h1 id="2-Okhttp网络封装"><a href="#2-Okhttp网络封装" class="headerlink" title="2.Okhttp网络封装"></a>2.Okhttp网络封装</h1><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**
     * callback: okhttp3.Callback: okhttp自带的回调接口
     */</span>
    <span class="token keyword">fun</span> <span class="token function">sendOkHttpRequest</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">,</span> callback<span class="token operator">:</span> okhttp3<span class="token punctuation">.</span>Callback<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin">HttpUtil<span class="token punctuation">.</span><span class="token function">sendOkHttpRequest</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span><span class="token keyword">object</span> <span class="token operator">:</span>Callback&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>call<span class="token operator">:</span> Call<span class="token punctuation">,</span> e<span class="token operator">:</span> IOException<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//处理异常数据</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResponse</span><span class="token punctuation">(</span>call<span class="token operator">:</span> Call<span class="token punctuation">,</span> response<span class="token operator">:</span> Response<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//得到服务器返回的具体内容</span>
            <span class="token keyword">val</span> reponseData<span class="token operator">=</span>response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span></code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-02T23:42:42.013Z" title="2020-08-02T23:42:42.013Z">2020-08-03</time><span class="level-item"><a class="link-muted" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/">Android学习</a></span><span class="level-item">5 分钟 读完 (大约 732 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/android-xue-xi/3-2-wang-luo-fang-wen-shu-ju-ge-shi/">3-2网络访问-数据格式</a></h1><div class="content"><p>[toc]</p>
<h1 id="1-创建一个本地简单的服务器"><a href="#1-创建一个本地简单的服务器" class="headerlink" title="1.创建一个本地简单的服务器"></a>1.创建一个本地简单的服务器</h1><p>apache服务器: <a href="https://www.apachehaus.com/cgi-bin/download.plx#APACHELEVC14">https://www.apachehaus.com/cgi-bin/download.plx#APACHELEVC14</a></p>
<h1 id="2-解析XML格式数据"><a href="#2-解析XML格式数据" class="headerlink" title="2.解析XML格式数据"></a>2.解析XML格式数据</h1><ol>
<li>在桌面编写一个get_data.xml文件</li>
<li>请求网络代码</li>
<li>解析xml</li>
<li>由于android9开始不支持http请求,默认是https,需要配置,创建res/xml/network_config.xml</li>
<li>声明权限</li>
</ol>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apps</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Maps<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Chrom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Play<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apps</span><span class="token punctuation">></span></span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithOkHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        thread &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token comment" spellcheck="true">//1. 获取okhttp实例</span>
                <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

                <span class="token comment" spellcheck="true">//2. 设置请求参数</span>
                <span class="token comment" spellcheck="true">//post请求(可选)</span>
                <span class="token keyword">val</span> requestBody<span class="token operator">=</span>FormBody<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment" spellcheck="true">//.url("https://www.baidu.com")</span>
                        <span class="token comment" spellcheck="true">//读取本地服务器文件</span>
                    <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://192.168.2.228/get_data.xml"</span><span class="token punctuation">)</span>
                    <span class="token comment" spellcheck="true">//.post(requestBody)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

                <span class="token comment" spellcheck="true">//3. 获取服务器返回的数据</span>
                <span class="token keyword">val</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> responseData <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>responseData <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//showResponse(responseData)</span>
                    <span class="token comment" spellcheck="true">//解析xml数据</span>
                    <span class="token function">parseXMLWithPull</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**
     * 解析xml数据格式
     * Pull方式
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseXMLWithPull</span><span class="token punctuation">(</span>xmlData<span class="token operator">:</span> String<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//1. 创建XmlPullParserFactory实例,获取XmlPullParser对象</span>
            <span class="token keyword">val</span> factory <span class="token operator">=</span> XmlPullParserFactory<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">val</span> xmlPullParser <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newPullParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment" spellcheck="true">//2. 将服务器返回的XML设置进去,开始解析</span>
            xmlPullParser<span class="token punctuation">.</span><span class="token function">setInput</span><span class="token punctuation">(</span><span class="token function">StringReader</span><span class="token punctuation">(</span>xmlData<span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token comment" spellcheck="true">//3. 得到当前解析事件</span>
            <span class="token keyword">var</span> eventType <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span>eventType
            <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token string">""</span>
            <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">""</span>
            <span class="token keyword">var</span> version <span class="token operator">=</span> <span class="token string">""</span>

            <span class="token comment" spellcheck="true">//4. 遍历解析事件</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>eventType <span class="token operator">!=</span> XmlPullParser<span class="token punctuation">.</span>END_DOCUMENT<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                <span class="token keyword">val</span> nodeName <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span>name
                <span class="token keyword">when</span> <span class="token punctuation">(</span>eventType<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//4.1 开始解析某个节点</span>
                    XmlPullParser<span class="token punctuation">.</span>START_TAG <span class="token operator">-></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                        <span class="token keyword">when</span> <span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                            <span class="token comment" spellcheck="true">//如果节点名等于id name version 就调用nextText()获取节点内容</span>
                            <span class="token string">"id"</span> <span class="token operator">-></span> id <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token string">"name"</span> <span class="token operator">-></span> name <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token string">"version"</span> <span class="token operator">-></span> version <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//4.2 完成解析某个节点,打印节点内容</span>
                    XmlPullParser<span class="token punctuation">.</span>END_TAG <span class="token operator">-></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"app"</span> <span class="token operator">==</span> nodeName<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation variable">$id</span>"</span><span class="token punctuation">)</span>
                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation variable">$name</span>"</span><span class="token punctuation">)</span>
                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation variable">$version</span>"</span><span class="token punctuation">)</span>
                        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
                eventType <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>network-security-config</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-config</span> <span class="token attr-name">cleartextTrafficPermitted</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trust-anchors</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificates</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>system<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trust-anchors</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-config</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>network-security-config</span><span class="token punctuation">></span></span></code></pre>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.networktest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token comment" spellcheck="true">&lt;!--    声明网络权限--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
        <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>roundIcon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher_round<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>supportsRtl</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@style/AppTheme<span class="token punctuation">"</span></span>

        <span class="token attr-name"><span class="token namespace">android:</span>networkSecurityConfig</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@xml/network_config<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token comment" spellcheck="true">&lt;!--        设置http请求--></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span></code></pre>
<p><img src="images/3-2%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/image-20200729223542261.png" alt="image-20200729223542261"></p>
<h1 id="3-解析JSON格式数据"><a href="#3-解析JSON格式数据" class="headerlink" title="3.解析JSON格式数据"></a>3.解析JSON格式数据</h1><ol>
<li>在htdocs目录下创建一个get_data.json文件</li>
<li>编写解析代码</li>
</ol>
<pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>
    &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"5.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash of Clans"</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"7.0"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Boom Beach"</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"3.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash Royale"</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**
     * 使用官方提供的JsonObject
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseJSONWithJSONObject</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> String<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token comment" spellcheck="true">//1. 获取jsonarray,进行循环解析</span>
            <span class="token keyword">val</span> jsonArray <span class="token operator">=</span> <span class="token function">JSONArray</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span>

            <span class="token comment" spellcheck="true">//2. 如果循环中不要最后一个范围区间的值可以使用 until 函数:</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until jsonArray<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

                <span class="token keyword">val</span> jsonObject <span class="token operator">=</span> jsonArray<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

                <span class="token keyword">val</span> id <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> name <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
                <span class="token keyword">val</span> version <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"version"</span><span class="token punctuation">)</span>

                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation variable">$id</span>"</span><span class="token punctuation">)</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation variable">$name</span>"</span><span class="token punctuation">)</span>
                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation variable">$version</span>"</span><span class="token punctuation">)</span>
            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<h1 id="4-优化解析-使用GSON开源库"><a href="#4-优化解析-使用GSON开源库" class="headerlink" title="4.优化解析,使用GSON开源库"></a>4.优化解析,使用GSON开源库</h1><h2 id="1-导入gson依赖"><a href="#1-导入gson依赖" class="headerlink" title="1.导入gson依赖"></a>1.导入gson依赖</h2><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'com.google.code.gson:gson:2.8.5'</span></code></pre>
<p>一段json数据</p>
<pre class=" language-json"><code class="language-json">&amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token property">"age"</span><span class="token operator">:</span><span class="token number">20</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> gson<span class="token operator">=</span><span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> person<span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span>Person<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span></code></pre>
<p>解析json数组</p>
<pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>
    &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"5.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash of Clans"</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"7.0"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Boom Beach"</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"3.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash Royale"</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> typeOf <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> TypeToken<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">.</span>type
        <span class="token keyword">val</span> appList <span class="token operator">=</span> gson<span class="token punctuation">.</span>fromJson<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> typeOf<span class="token punctuation">)</span></code></pre>
<h2 id="2-根据gson格式-编写实体类"><a href="#2-根据gson格式-编写实体类" class="headerlink" title="2.根据gson格式,编写实体类,"></a>2.根据gson格式,编写实体类,</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> version<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**
     * 利用Gson解析json数据
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseJSONWithGSON</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> String<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//1. 获取gson实例</span>
        <span class="token keyword">val</span> gson <span class="token operator">=</span> <span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">//2. 设置gson数据格式</span>
        <span class="token keyword">val</span> typeOf <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> TypeToken<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">.</span>type
        <span class="token keyword">val</span> appList <span class="token operator">=</span> gson<span class="token punctuation">.</span>fromJson<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> typeOf<span class="token punctuation">)</span>
        <span class="token comment" spellcheck="true">//3. 循环遍历jsonarray数据</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>app <span class="token keyword">in</span> appList<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is $&amp;#123;app.id&amp;#125;"</span><span class="token punctuation">)</span>
            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is $&amp;#123;app.name&amp;#125;"</span><span class="token punctuation">)</span>
            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is $&amp;#123;app.version&amp;#125;"</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/hexo.github.io/page/7/">上一页</a></div><div class="pagination-next"><a href="/hexo.github.io/page/9/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/hexo.github.io/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/hexo.github.io/page/7/">7</a></li><li><a class="pagination-link is-current" href="/hexo.github.io/page/8/">8</a></li><li><a class="pagination-link" href="/hexo.github.io/page/9/">9</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/hexo.github.io/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block line-height-inherit">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/hexo.github.io/archives"><p class="title">98</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/hexo.github.io/categories"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/hexo.github.io/tags"><p class="title">91</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/hexo.github.io/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Android%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Android学习</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/"><span class="level-start"><span class="level-item">Bitnami虚拟机</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Docker%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Docker学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/GitBook%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">GitBook学习</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/GitHub%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">GitHub学习</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Git%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Git学习</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/IDEA/"><span class="level-start"><span class="level-item">IDEA</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Junit/"><span class="level-start"><span class="level-item">Junit</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Kotlin%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Kotlin学习</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Linux%E5%85%A5%E9%97%A8/"><span class="level-start"><span class="level-item">Linux入门</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Maven%E5%92%8CGradle/"><span class="level-start"><span class="level-item">Maven和Gradle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/MySQL8-0/"><span class="level-start"><span class="level-item">MySQL8.0</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Redis%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">Redis学习</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/java-web/"><span class="level-start"><span class="level-item">java_web</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"><span class="level-start"><span class="level-item">企业级权限管理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%94%B5%E5%95%86%E9%A1%B9%E7%9B%AE/"><span class="level-start"><span class="level-item">企业级电商项目</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"><span class="level-start"><span class="level-item">项目实战</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.222Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/bian-xie-kai-yuan-ku/permissionx-quan-xian-guan-li-ku/">PermissionX权限管理库</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.215Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/xiang-mu-qian-qi-gou-jian/">项目前期构建</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.213Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/1-1-an-zhuang-huan-jing/">1-1-安装环境</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.209Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xiang-mu-zhi-shi-dian/">项目知识点</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-02T23:42:44.208Z">2020-08-03</time></p><p class="title is-6"><a class="link-muted" href="/hexo.github.io/2020/08/03/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xu-qiu-wen-dang/">需求文档</a></p><p class="is-uppercase"><a class="link-muted" href="/hexo.github.io/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/hexo.github.io/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">98</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/01-Spring-Boot%E5%85%A5%E9%97%A8/"><span class="tag">01 Spring Boot入门</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-Git-%E8%AE%BE%E7%BD%AE%E5%92%8C%E9%85%8D%E7%BD%AE/"><span class="tag">1-1 Git 设置和配置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/"><span class="tag">1-1 入门学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/"><span class="tag">1-1 安装bitnami虚拟机</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E7%AE%80%E4%BB%8B/"><span class="tag">1-1 简介</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"><span class="tag">1-1 简单使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%AE%89%E8%A3%85/"><span class="tag">1-1-安装</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1-%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83/"><span class="tag">1-1-安装环境</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-1%E7%AE%80%E4%BB%8B/"><span class="tag">1-1简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-CentOS%E9%95%9C%E5%83%8F%E4%BD%BF%E7%94%A8%E5%B8%AE%E5%8A%A9/"><span class="tag">1-2 CentOS镜像使用帮助</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/"><span class="tag">1-2 使用教程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-%E8%BF%9E%E6%8E%A5SSH/"><span class="tag">1-2 连接SSH</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-Redis%E5%90%AF%E5%8A%A8/"><span class="tag">1-2-Redis启动</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-2-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"><span class="tag">1-2-常用操作</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-3-%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2/"><span class="tag">1-3 安装桌面</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/1-%E5%AD%A6%E4%B9%A0%E7%BD%91%E5%9D%80/"><span class="tag">1.学习网址</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1-Git%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6/"><span class="tag">2-1 Git忽略文件</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1-%E9%85%8D%E7%BD%AE%E4%B8%BB%E9%A2%98/"><span class="tag">2-1 配置主题</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">2-1-数据结构</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1android-moudle%E4%B8%8Elibery%E5%88%87%E6%8D%A2/"><span class="tag">2-1android moudle与libery切换</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1%E6%96%87%E6%A1%A3%E5%AD%A6%E4%B9%A0/"><span class="tag">2-1文档学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-1%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81/"><span class="tag">2-1阿里云服务器远程登录密码</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-2-Git%E8%8E%B7%E5%8F%96%E5%92%8C%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/"><span class="tag">2-2 Git获取和创建项目</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/2-2-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><span class="tag">2-2 数据结构的常用命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1-hexo%E4%B8%8Emd%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%86%B2%E7%AA%81/"><span class="tag">3-1 hexo与md文件格式的冲突</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1-%E5%85%B3%E9%94%AE%E5%91%BD%E4%BB%A4/"><span class="tag">3-1 关键命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"><span class="tag">3-1分布式锁</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-1%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE/"><span class="tag">3-1网络访问</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2-Lua%E8%84%9A%E6%9C%AC/"><span class="tag">3-2 Lua脚本</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2-%E6%B7%BB%E5%8A%A0/"><span class="tag">3-2 添加</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2-1%E5%AE%89%E8%A3%85Apache%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="tag">3-2-1安装Apache服务器</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-2%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/"><span class="tag">3-2网络访问-数据格式</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-3-%E5%B0%81%E8%A3%85%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/"><span class="tag">3-3 封装网络请求</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-3-%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"><span class="tag">3-3 消息队列</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/3-4-%E5%BC%80%E6%BA%90%E7%BD%91%E7%BB%9C%E5%B0%81%E8%A3%85%E5%BA%93Retofit/"><span class="tag">3-4 开源网络封装库Retofit</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Android-Studio%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"><span class="tag">Android Studio使用技巧</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/BottomNavigationView%E6%8E%A7%E4%BB%B6%E5%AD%A6%E4%B9%A0md/"><span class="tag">BottomNavigationView控件学习md</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Centos%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E9%97%AE%E9%A2%98/"><span class="tag">Centos虚拟机网络连接问题</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Filter/"><span class="tag">Filter</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/IDEA%E4%B8%ADTomcat%E6%97%A5%E5%BF%97%E4%B9%B1%E7%A0%81/"><span class="tag">IDEA中Tomcat日志乱码</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Java%E5%AE%A2%E6%88%B7%E7%AB%AF/"><span class="tag">Java客户端</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Jetpack/"><span class="tag">Jetpack</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/LINUX%E8%AE%BE%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99/"><span class="tag">LINUX设置防火墙</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Linux%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C/"><span class="tag">Linux准备工作</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/MyBatis%E6%A1%86%E6%9E%B6/"><span class="tag">MyBatis框架</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Nat%E8%BF%9E%E6%8E%A5%E7%BD%91%E7%BB%9C/"><span class="tag">Nat连接网络</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Nginx%E7%AE%80%E4%BB%8B/"><span class="tag">Nginx简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/PermissionX%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E5%BA%93/"><span class="tag">PermissionX权限管理库</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Readis%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/"><span class="tag">Readis安装及配置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Spring-Framework%E7%AE%80%E4%BB%8B/"><span class="tag">Spring Framework简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Spring%E5%85%A5%E9%97%A8/"><span class="tag">Spring入门</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/Untitled/"><span class="tag">Untitled</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/idea%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/"><span class="tag">idea工具的使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/idea%E6%8A%A5java%E7%89%88%E6%9C%AC%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"><span class="tag">idea报java版本错误解决方法</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/index/"><span class="tag">index</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/iptables%E7%9A%84%E5%AD%A6%E4%B9%A0/"><span class="tag">iptables的学习</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/junit%E7%AE%80%E4%BB%8B/"><span class="tag">junit简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"><span class="tag">linux常用命令</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/mysql%E5%AE%89%E8%A3%85/"><span class="tag">mysql安装</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"><span class="tag">mysql数据库的安装与配置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/spring%E6%B3%A8%E8%A7%A3/"><span class="tag">spring注解</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/vsftpd/"><span class="tag">vsftpd</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E4%BB%8E%E5%AE%89%E8%A3%85%E5%88%B0%E5%8D%B8%E8%BD%BD/"><span class="tag">从安装到卸载</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E4%BD%BF%E7%94%A8-ViewModel-%E5%A4%84%E7%90%86%E9%85%8D%E7%BD%AE%E6%9B%B4%E6%94%B9/"><span class="tag">使用 ViewModel 处理配置更改</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%85%A5%E9%97%A8%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"><span class="tag">入门基础学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%85%A5%E9%97%A8%E7%AE%80%E4%BB%8B/"><span class="tag">入门简介</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%9B%E5%BB%BA%E4%BB%A3%E7%A0%81%E5%9D%97%E6%A8%A1%E6%9D%BF/"><span class="tag">创建代码块模板</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%86%E7%A0%81/"><span class="tag">初始化密码</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%A9%E7%94%A8IDEA%E5%AD%A6%E4%B9%A0%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"><span class="tag">利用IDEA学习编程语言</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%88%A9%E7%94%A8IDEA%E6%98%8E%E6%98%8E%E5%AF%BC%E5%85%A5%E4%BA%86%E5%8C%85%E5%8D%B4%E6%98%BE%E7%A4%BA%E7%BC%BA%E5%B0%91%E4%BF%9D%E7%95%99%E7%9B%B8%E5%85%B3%E7%B1%BB/"><span class="tag">利用IDEA明明导入了包却显示缺少保留相关类</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87/"><span class="tag">前期准备</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%8A%9F%E8%83%BD%E9%9C%80%E6%B1%82%E4%B8%8E%E6%8A%80%E6%9C%AF%E5%8F%AF%E8%A1%8C%E6%80%A7%E5%88%86%E6%9E%90/"><span class="tag">功能需求与技术可行性分析</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"><span class="tag">基础学习</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"><span class="tag">多线程编程</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%AD%97%E8%8A%82%E6%B5%81%E4%B8%8E%E5%AD%97%E7%AC%A6%E6%B5%81/"><span class="tag">字节流与字符流</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%88%E4%B8%80%EF%BC%89/"><span class="tag">学习记录（一）</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/"><span class="tag">快捷键</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/"><span class="tag">插件使用</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"><span class="tag">数据类型</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%96%87%E4%BB%B6%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9Cmd/"><span class="tag">文件命令操作md</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA/"><span class="tag">框架搭建</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E7%94%A8%E6%88%B7%E6%93%8D%E4%BD%9C/"><span class="tag">用户操作</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E7%AE%80%E4%BB%8B/"><span class="tag">简介</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/"><span class="tag">视图导航</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%94%99%E8%AF%AF%E9%97%AE%E9%A2%98/"><span class="tag">错误问题</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/"><span class="tag">问题总结</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E8%AE%BE%E7%BD%AE/"><span class="tag">防火墙的设置</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3/"><span class="tag">需求文档</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%A1%B9%E7%9B%AE%E5%89%8D%E6%9C%9F%E6%9E%84%E5%BB%BA/"><span class="tag">项目前期构建</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/hexo.github.io/tags/%E9%A1%B9%E7%9B%AE%E7%9F%A5%E8%AF%86%E7%82%B9/"><span class="tag">项目知识点</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/hexo.github.io/"><img src="/hexo.github.io/img/logo.svg" alt="库金的博客" height="28"></a><p class="size-small"><span>&copy; 2020 Ku Jin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://kujin521.github.io/hexo.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/hexo.github.io/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/hexo.github.io/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/hexo.github.io/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/hexo.github.io/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/hexo.github.io/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>