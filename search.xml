<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>PermissionX权限管理库</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/bian-xie-kai-yuan-ku/permissionx-quan-xian-guan-li-ku/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/bian-xie-kai-yuan-ku/permissionx-quan-xian-guan-li-ku/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目前期构建</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/xiang-mu-qian-qi-gou-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/xiang-mu-qian-qi-gou-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="人员配置"><a href="#人员配置" class="headerlink" title="人员配置"></a>人员配置</h1><p>产品经理：3人，确定需求及给出产品原型</p><p>项目经理：1人，项目管理</p><p>前端团队：5人，根据产品经理给出原型制作静态页面</p><p>后端团队：20人，实现产品功能</p><p>测试团队：5人，测试所有功能</p><p>运维团队：3人，项目的发布和维护</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1-安装环境</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/1-1-an-zhuang-huan-jing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tao-tao-shang-cheng-xiang-mu-shi-zhan/1-1-an-zhuang-huan-jing/</url>
      
        <content type="html"><![CDATA[<h1 id="开发工具和环境"><a href="#开发工具和环境" class="headerlink" title="开发工具和环境"></a>开发工具和环境</h1><table><thead><tr><th>工具</th><th align="left">版本</th></tr></thead><tbody><tr><td>idea（ide）</td><td align="left">2020.1</td></tr><tr><td>git（版本控制）github</td><td align="left">2.26</td></tr><tr><td>maven（项目构建）</td><td align="left">3.6</td></tr><tr><td>tomcat（web容器）</td><td align="left">9</td></tr><tr><td>Java jdk</td><td align="left">1.8</td></tr><tr><td>mysql</td><td align="left">8</td></tr><tr><td>本地系统</td><td align="left">win10</td></tr><tr><td>服务器</td><td align="left">Centos7</td></tr><tr><td></td><td align="left"></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目知识点</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xiang-mu-zhi-shi-dian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xiang-mu-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h4 id="后端技术"><a href="#后端技术" class="headerlink" title="后端技术"></a>后端技术</h4><ol><li><p>Spring boot (SSM)</p></li><li><p>spring Secunity</p></li><li><p>Redis</p></li><li><p>POI/邮件发送/消息中间件</p></li><li><p>Mysql</p><h4 id="前端技术"><a href="#前端技术" class="headerlink" title="前端技术"></a>前端技术</h4></li><li><p>Vue</p></li><li><p>axios</p></li><li><p>ElemnetUI</p></li><li><p>Vuex</p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>需求文档</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xu-qiu-wen-dang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/xu-qiu-wen-dang/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>01 Spring Boot入门</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/01-spring-boot-ru-men/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/wei-ren-shi-xiang-mu-guan-li/01-spring-boot-ru-men/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>功能需求与技术可行性分析</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tian-qi-yu-bao-app/gong-neng-xu-qiu-yu-ji-zhu-ke-xing-xing-fen-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tian-qi-yu-bao-app/gong-neng-xu-qiu-yu-ji-zhu-ke-xing-xing-fen-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="功能分析"><a href="#功能分析" class="headerlink" title="功能分析"></a>功能分析</h2><ul><li>可以搜索各个国家的城市数据</li><li>可以查看全球大多数城市的天气信息</li><li>可以自由的切换城市，查看其他城市的天气信息</li><li>可以手动刷新实时的天气</li></ul><h2 id="技术分析"><a href="#技术分析" class="headerlink" title="技术分析"></a>技术分析</h2><ul><li>UI</li><li>网络</li><li>数据存储</li><li>异步处理</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>前期准备</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tian-qi-yu-bao-app/qian-qi-zhun-bei/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/tian-qi-yu-bao-app/qian-qi-zhun-bei/</url>
      
        <content type="html"><![CDATA[<h2 id="天气数据API-接口获取"><a href="#天气数据API-接口获取" class="headerlink" title="天气数据API 接口获取"></a>天气数据API 接口获取</h2><p>彩云天气 <a href="https://dashboard.caiyunapp.com/" target="_blank" rel="noopener">https://dashboard.caiyunapp.com/</a></p><p>api文档阅读 <a href="https://open.caiyunapp.com/%E5%BD%A9%E4%BA%91%E5%A4%A9%E6%B0%94_API_%E4%B8%80%E8%A7%88%E8%A1%A8" target="_blank" rel="noopener">https://open.caiyunapp.com/%E5%BD%A9%E4%BA%91%E5%A4%A9%E6%B0%94_API_%E4%B8%80%E8%A7%88%E8%A1%A8</a></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-%E5%A4%A9%E6%B0%A3app.png" alt="image-20200714172407951"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1通用组件封装和资源文件的引入</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/3-1-tong-yong-zu-jian-feng-zhuang-he-zi-yuan-wen-jian-de-yin-ru/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/3-1-tong-yong-zu-jian-feng-zhuang-he-zi-yuan-wen-jian-de-yin-ru/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-3 MVP设计配置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/2-3-mvp-she-ji-pei-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/2-3-mvp-she-ji-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-202009051948219471.png" alt="image-20200905194821947"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-2 kotlin 自动查找id插件</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/2-2-kotlin-zi-dong-cha-zhao-id-cha-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/2-2-kotlin-zi-dong-cha-zhao-id-cha-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="kotlin-android-extensions"><a href="#kotlin-android-extensions" class="headerlink" title="kotlin-android-extensions"></a>kotlin-android-extensions</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200905190055297.png" alt="image-20200905190055297"></p><h2 id="现在AS以默认支持使用-不需要配置-即可使用"><a href="#现在AS以默认支持使用-不需要配置-即可使用" class="headerlink" title="现在AS以默认支持使用,不需要配置,即可使用"></a>现在AS以默认支持使用,不需要配置,即可使用</h2><pre class=" language-groovy"><code class="language-groovy">apply plugin<span class="token punctuation">:</span> <span class="token string">'kotlin-android-extensions'</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1android moudle与libery切换</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/2-1android-moudle-yu-libery-qie-huan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/xiang-mu-shi-zhan/kotlin-kai-fa-dian-shang-app/2-1android-moudle-yu-libery-qie-huan/</url>
      
        <content type="html"><![CDATA[<p>一、为何要进行Application与Library切换</p><p>​    组件化优势是无需编译整个project，就是因为功能模块在开发过程中以Application的形式存在。当业务功能整合时，才以Library的形式存在。</p><p>二、实现方法</p><p>1、在项目根目录的gradle.properties文件创建变量</p><pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true">#控制moudle library 转换 参数</span><span class="token attr-name">isUserMoudle</span><span class="token punctuation">=</span><span class="token attr-value">true</span></code></pre><p>2、配置build.gradle</p><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">if</span> <span class="token punctuation">(</span>isUserMoudle<span class="token operator">.</span><span class="token function">toBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    apply plugin<span class="token punctuation">:</span> <span class="token string">'com.android.application'</span><span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>    apply plugin<span class="token punctuation">:</span> <span class="token string">'com.android.library'</span><span class="token punctuation">}</span>android <span class="token punctuation">{</span>    <span class="token punctuation">...</span>    sourceSets<span class="token punctuation">{</span>        main<span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>isUserMoudle<span class="token operator">.</span><span class="token function">toBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                manifest<span class="token operator">.</span>srcFile <span class="token string">'src/main/debug/AndroidManifest.xml'</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                manifest<span class="token operator">.</span>srcFile <span class="token string">'src/main/release/AndroidManifest.xml'</span>                java<span class="token punctuation">{</span>                    exclude <span class="token string">'debug/**'</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 项目实战 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 项目实战 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>例题</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/mian-shi-ti/jian-zhi-offer/li-ti/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/mian-shi-ti/jian-zhi-offer/li-ti/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 面试题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/suan-fa/jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/suan-fa/jian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是算法"><a href="#什么是算法" class="headerlink" title="什么是算法?"></a>什么是算法?</h1><p>算法（Algorithm）是指用来操作数据、解决程序问题的一组方法。对于同一个问题，使用不同的算法，也许最终得到的结果是一样的，但在过程中消耗的资源和时间却会有很大的区别。那么我们应该如何去衡量不同算法之间的优劣呢？</p><p>主要还是从算法所占用的「时间」和「空间」两个维度去考量。</p><ul><li>时间维度：是指执行当前算法所消耗的时间，我们通常用「时间复杂度」来描述。</li><li>空间维度：是指执行当前算法需要占用多少内存空间，我们通常用「空间复杂度」来描述。</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 程序基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二分搜索</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/suan-fa/er-fen-sou-suo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/suan-fa/er-fen-sou-suo/</url>
      
        <content type="html"><![CDATA[<h1 id="二分搜索"><a href="#二分搜索" class="headerlink" title="二分搜索"></a>二分搜索</h1><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p> 从数组的中间元素开始，如果中间元素正好是x，而查找成功</p><ul><li><p>否则我们利用中间位置将数组分为前、后两个子数组</p><ul><li><p>如果x小于中间位置的元素，则进一步查找前一个子数组</p></li><li><p>否则进一步查找后一个子数组</p><h5 id="重复以上步骤，直到找到满足条件的元素，或直到子数组不存在为止，代表查找不成功。"><a href="#重复以上步骤，直到找到满足条件的元素，或直到子数组不存在为止，代表查找不成功。" class="headerlink" title="重复以上步骤，直到找到满足条件的元素，或直到子数组不存在为止，代表查找不成功。"></a>重复以上步骤，直到找到满足条件的元素，或直到子数组不存在为止，代表查找不成功。</h5></li></ul><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> v1ch01<span class="token punctuation">.</span>binarysearch<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** 类：二分查找x* 从数组的中间元素查找,*  如果中间元素正好是x 查找成功 结束*  否则利用中间位置将数组分为前后两个子数组*      如果 x 小于中间位置, 则数组进一步查找前一个数组*      否正 进一步查找后一个数组* 重复以上步骤, 直到子数组不存在为止, 代表查找不成功* 编写人：kujin* 创建时间：2020/6/7* 修改时间：2020/6/7*/</span><span class="token keyword">import</span> edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4<span class="token punctuation">.</span>In<span class="token punctuation">;</span><span class="token keyword">import</span> edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4<span class="token punctuation">.</span>StdIn<span class="token punctuation">;</span><span class="token keyword">import</span> edu<span class="token punctuation">.</span>princeton<span class="token punctuation">.</span>cs<span class="token punctuation">.</span>algs4<span class="token punctuation">.</span>StdOut<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Random<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinarySearch</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">/**    * 二分查找    * @param array 目标数组    * @param target 目标值    * @return 目标下标 -1表示没找到    */</span>   <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token keyword">int</span> array<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token keyword">int</span> left<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">int</span> right<span class="token operator">=</span>array<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>       <span class="token keyword">while</span> <span class="token punctuation">(</span>left<span class="token operator">&lt;=</span>right<span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token keyword">int</span> mid<span class="token operator">=</span>left<span class="token operator">+</span><span class="token punctuation">(</span>right<span class="token operator">-</span>left<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>           <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token operator">==</span>target<span class="token punctuation">)</span> <span class="token keyword">return</span> mid<span class="token punctuation">;</span>           <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token operator">&lt;</span>array<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span> right<span class="token operator">=</span>mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>           <span class="token keyword">else</span> left<span class="token operator">=</span>mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token annotation punctuation">@Test</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">t2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">int</span> search <span class="token operator">=</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 程序基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二叉树</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/shu-ju-jie-gou/er-cha-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/shu-ju-jie-gou/er-cha-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h1><p>时间复杂度为O(logn)</p><p>在二叉树结构中, 所有数据都保存在节点 Node 中 , 每一个节点又会分为左右两个子节点</p><p>在储存时 比根节点 数据小的 保存在 左子节点</p><p>比 根节点 数据大 的 保存至右子节点</p><p>没有子节点的节点 称为 叶子节点</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> base<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>w3c<span class="token punctuation">.</span>dom<span class="token punctuation">.</span>Node<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：二叉树 * 编写人：kujin * 创建时间：2020/9/21 * 修改时间：2020/9/21 */</span><span class="token keyword">class</span> <span class="token class-name">BinaryTree</span><span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token operator">&lt;</span>T<span class="token operator">>></span><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//二叉树结构</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> Comparable<span class="token operator">&lt;</span>Comparable<span class="token operator">&lt;</span>T<span class="token operator">>></span> data<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//保存数据为Comparable</span>        <span class="token keyword">private</span> Node parent<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//父节点</span>        <span class="token keyword">private</span> Node left<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//左子节点</span>        <span class="token keyword">private</span> Node right<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//右子节点</span>        <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>Comparable<span class="token operator">&lt;</span>Comparable<span class="token operator">&lt;</span>T<span class="token operator">>></span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//保存数据</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/**         * 实现节点数据的适当位置的存储         *         * @param newNode         */</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addNode</span><span class="token punctuation">(</span>Node newNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>newNode<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//比当前节点数据小</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//没有左子节点</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> newNode<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//保存左子节点</span>                    newNode<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//保存父节点</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//存在左子节点</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//递归判断</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//比当前节点数据大</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//没有左子节点</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> newNode<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//保存右子节点</span>                    newNode<span class="token punctuation">.</span>parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//保存父节点</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//存在右子节点</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//递归判断</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">/**         * 实现所有数据的获取处理 按照中序遍历完成         */</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">toArrayNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//左子节点存在</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">toArrayNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//递归调用</span>            <span class="token punctuation">}</span>            BinaryTree<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>returnData<span class="token punctuation">[</span>BinaryTree<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>foot<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">toArrayNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//------------------------二叉树功能实现------------------------</span>    <span class="token keyword">private</span> Node root<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>    <span class="token keyword">private</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> returnData<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> foot<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Comparable data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">"保存的数据不能为空"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//所有数据本身不具备有节点关系的匹配, 将其包装在Node类中</span>        Node newNode<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token operator">=</span>newNode<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">addNode</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>returnData<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>foot<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">toArrayNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>returnData<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token operator">&lt;</span>Member<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Member</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Member</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span>Member o<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">-</span>o<span class="token punctuation">.</span>age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Member{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinaryTreeDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        BinaryTree<span class="token operator">&lt;</span>Member<span class="token operator">></span> tree<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BinaryTree</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token string">"李思思"</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        tree<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Member</span><span class="token punctuation">(</span><span class="token string">"汪芜"</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>tree<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 程序基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/cheng-xu-ji-chu/jian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="程序-数据结构-算法"><a href="#程序-数据结构-算法" class="headerlink" title="程序=数据结构+算法"></a>程序=数据结构+算法</h1><p>数据结构:用来存储数据的数组</p><p>算法:暴力搜索,二分搜索</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 程序基础 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 程序基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库设计概述</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/shu-ju-ku-she-ji/shu-ju-ku-she-ji-gai-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/shu-ju-ku-she-ji/shu-ju-ku-she-ji-gai-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="数据库设计方案"><a href="#数据库设计方案" class="headerlink" title="数据库设计方案"></a>数据库设计方案</h2><p>​        在数据库设计报告中，我们需要明确给出数据库任务目标、数据库设计思路、数据库设计约束、数据库命名规则、数据库应用架构、数据库应用访问方式、数据库设计模型等。数据库设计方案的核心内容就是各种设计模型，如数据库系统架构模型、系统概念数据模型、系统逻辑数据模型、系统物理数据模型等</p><h2 id="1-概念数据模型概念数据模型（Conceptual-Data-Mode-CDM）"><a href="#1-概念数据模型概念数据模型（Conceptual-Data-Mode-CDM）" class="headerlink" title="1.概念数据模型概念数据模型（Conceptual Data Mode,CDM）"></a>1.概念数据模型概念数据模型（Conceptual Data Mode,CDM）</h2><p>是一种将业务系统的内在数据关系映射到信息系统数据实体联系的顶层抽象，同时也是数据库设计人员与用户之间进行交流的数据模型载体。它使数据库设计者的注意力能够从复杂业务系统的内在数据关系细节中解脱出来，关注业务系统最重要的信息数据结构及其处理模式。</p><h2 id="2-逻辑数据模型逻辑数据模型（Logic-Data-Mode-LDM）"><a href="#2-逻辑数据模型逻辑数据模型（Logic-Data-Mode-LDM）" class="headerlink" title="2.逻辑数据模型逻辑数据模型（Logic Data Mode,LDM）"></a>2.逻辑数据模型逻辑数据模型（Logic Data Mode,LDM）</h2><p>是概念数据模型在系统设计角度的延伸，它使整个系统的实体联系更加完善及规范，以便于在特定类型数据库中实现，同时又不依赖于具体的DBMS产品。</p><h2 id="3-物理数据模型物理数据模型（Physical-Data-Model-PDM）"><a href="#3-物理数据模型物理数据模型（Physical-Data-Model-PDM）" class="headerlink" title="3.物理数据模型物理数据模型（Physical Data Model,PDM）"></a>3.物理数据模型物理数据模型（Physical Data Model,PDM）</h2><p>是从系统设计实现角度描述数据模型在特定DBMS中的具体设计实现方案。</p><h2 id="数据库设计策略"><a href="#数据库设计策略" class="headerlink" title="数据库设计策略"></a>数据库设计策略</h2><p>（1）自底向上策略</p><p>（2）自顶向下策略</p><p>（3）由内至外策略</p><p>（4）混合设计策略</p><h2 id="数据库建模设计工具"><a href="#数据库建模设计工具" class="headerlink" title="数据库建模设计工具"></a>数据库建模设计工具</h2><h2 id="1-PowerDesigner建模工具"><a href="#1-PowerDesigner建模工具" class="headerlink" title="1.PowerDesigner建模工具"></a>1.PowerDesigner建模工具</h2><p>利用 PowerDesigner 进行数据库开发，可以构建系统数据流程图、概念数据模型、逻辑数据模型、物理数据模型，并可将设计模型转化为各类典型的DBMS数据库对象，创建SQL脚本程序，还可为数据仓库设计结构模型，也能对团队设计模型进行版本控制。</p><h3 id="2-ERwin建模工具"><a href="#2-ERwin建模工具" class="headerlink" title="2.ERwin建模工具"></a>2.ERwin建模工具</h3><p>ERwin是数据库设计工具，同时也是一个功能强大的数据库开发工具，能为所有主流的数据库自动生成数据库表、视图、存储过程和触发器等对象创建代码。</p><h2 id="E-R模型"><a href="#E-R模型" class="headerlink" title="E-R模型"></a>E-R模型</h2><p>E-R模型是“实体-联系模型（Entity-RelationshipModel）”的简称。它是一种描述现实世界概念数据模型、逻辑数据模型的有效方法。</p><p>E-R 模型主要定义了实体、属性、联系3种基本元素，并使用这些元素符号建模系统的数据对象组成及其数据关系。</p><h3 id="1-实体"><a href="#1-实体" class="headerlink" title="1.实体"></a>1.实体</h3><p>实体（Entity）是对现实世界中描述事物数据对象的抽象概念。实体可以是人，如“客户”“读者”“经理”等；也可以是物品，如“图书”“商品”“设备”等；还可以是机构单位，如销售部门、配送部门、仓储部门等。总之，凡是包含数据特征的对象均可被定义为实体。</p><h3 id="2-属性"><a href="#2-属性" class="headerlink" title="2.属性"></a>2.属性</h3><p>每个实体都有自己的一组数据特征，这些描述实体的数据特征被称为实体的属性（Attribute）。例如，“客户”实体具有客户编号、客户姓名、性别、手机等属性。不同实体的属性是不同的。</p><h3 id="3-实体间的联系"><a href="#3-实体间的联系" class="headerlink" title="3.实体间的联系"></a>3.实体间的联系</h3><p>可以使用联系（Relationship）表示一个或多个实体之间的关联关系。现实世界的事物总是存在着这样或那样的联系，这种联系必然要在信息世界中得到反映。联系是实体之间的一种行为，一般用动词来命名关系，如“管理”“查看”“订购”等。</p><p><img src="../../../../AppData/Roaming/Typora/typora-user-images/image-20200929152759491.png" alt="image-20200929152759491"></p><h2 id="多重性分类"><a href="#多重性分类" class="headerlink" title="多重性分类"></a>多重性分类</h2><p>（1）一对一联系</p><p>（2）一对多联系</p><p>（3）多对多联系</p><h2 id="E-R模型图"><a href="#E-R模型图" class="headerlink" title="E-R模型图"></a>E-R模型图</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面试总结</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/mian-shi-zong-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/mian-shi-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库语言-DQL"><a href="#数据库语言-DQL" class="headerlink" title="数据库语言 DQL"></a>数据库语言 DQL</h1><p>是由Select 子句,from子句,where子句 组成的查询块</p><h1 id="数据操作语言DML"><a href="#数据操作语言DML" class="headerlink" title="数据操作语言DML"></a>数据操作语言DML</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>索引</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/suo-yin/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/suo-yin/</url>
      
        <content type="html"><![CDATA[<blockquote><p>索引（Index）是帮助 MySQL 高效获取数据的数据结构。</p></blockquote><p><strong>常见索引原则有</strong></p><p><strong>1.**选择唯一性索引</strong></p><p>1．唯一性索引的值是唯一的，可以更快速的通过该索引来确定某条记录。</p><p><strong>2.**为经常需要排序、分组和联合操作的字段建立索引：</strong> </p><p><strong>3</strong>．为常作为查询条件的字段建立索引。** </p><p><strong>4</strong>．限制索引的数目：**</p><p>越多的索引，会使更新表变得很浪费时间。</p><p><strong>尽量使用数据量少的索引</strong></p><p>6．如果索引的值很长，那么查询的速度会受到影响。</p><p><strong>尽量使用前缀来索引</strong></p><p>7．如果索引字段的值很长，最好使用值的前缀来索引。</p><p><strong>7</strong>．删除不再使用或者很少使用的索引**</p><p><strong>8 .</strong> <strong>最左前缀匹配原则，非常重要的原则。</strong></p><p><strong>10 .</strong> <strong>尽量选择区分度高的列作为索引</strong></p><p>区分度的公式是表示字段不重复的比例</p><p>**11 .**索引列不能参与计算，保持列“干净”：带函数的查询不参与索引。</p><p>**12 .**尽量的扩展索引，不要新建索引</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查询数据</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/cha-xun-shu-ju/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/cha-xun-shu-ju/</url>
      
        <content type="html"><![CDATA[<h1 id="select-查询语句"><a href="#select-查询语句" class="headerlink" title="select 查询语句"></a>select 查询语句</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name <span class="token keyword">FROM</span>    products<span class="token punctuation">;</span><span class="token keyword">SELECT</span>    <span class="token operator">*</span> <span class="token keyword">FROM</span>    products<span class="token punctuation">;</span></code></pre><h1 id="distinct-数据库只返回不同的值"><a href="#distinct-数据库只返回不同的值" class="headerlink" title="distinct 数据库只返回不同的值"></a>distinct 数据库只返回不同的值</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>    vend_id <span class="token keyword">FROM</span>    products<span class="token punctuation">;</span></code></pre><h1 id="限制结果-limit-5-读取五条数据-offset-5-从第五条开始读取"><a href="#限制结果-limit-5-读取五条数据-offset-5-从第五条开始读取" class="headerlink" title="限制结果 limit 5 读取五条数据 offset 5 从第五条开始读取"></a>限制结果 limit 5 读取五条数据 offset 5 从第五条开始读取</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name <span class="token keyword">FROM</span>    products     <span class="token keyword">LIMIT</span> <span class="token number">5</span> <span class="token keyword">OFFSET</span> <span class="token number">5</span><span class="token punctuation">;</span></code></pre><h1 id="排序数据-语句放在最后-order-by-默认asc-升序排列-desc-降序排列"><a href="#排序数据-语句放在最后-order-by-默认asc-升序排列-desc-降序排列" class="headerlink" title="排序数据 语句放在最后 order by 默认asc 升序排列 desc 降序排列"></a>排序数据 语句放在最后 order by 默认asc 升序排列 desc 降序排列</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name <span class="token keyword">FROM</span>    products <span class="token keyword">ORDER</span> <span class="token keyword">BY</span>    prod_name<span class="token punctuation">;</span></code></pre><h1 id="按多个排序"><a href="#按多个排序" class="headerlink" title="按多个排序"></a>按多个排序</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_id<span class="token punctuation">,</span>    prod_price<span class="token punctuation">,</span>    prod_name <span class="token keyword">FROM</span>    products <span class="token keyword">ORDER</span> <span class="token keyword">BY</span>    prod_price<span class="token punctuation">,</span>    prod_name<span class="token punctuation">;</span></code></pre><h1 id="过滤数据-where"><a href="#过滤数据-where" class="headerlink" title="过滤数据 where"></a>过滤数据 where</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name<span class="token punctuation">,</span>    prod_price <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    prod_price <span class="token operator">=</span> <span class="token number">3.49</span><span class="token punctuation">;</span></code></pre><h1 id="范围值检查-between-开始值-and-结束值0"><a href="#范围值检查-between-开始值-and-结束值0" class="headerlink" title="范围值检查 between 开始值 and 结束值0"></a>范围值检查 between 开始值 and 结束值0</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name<span class="token punctuation">,</span>    prod_price <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    prod_price <span class="token operator">BETWEEN</span> <span class="token number">5</span>     <span class="token operator">AND</span> <span class="token number">10</span><span class="token punctuation">;</span></code></pre><h1 id="空值检查-where-xx-is-null"><a href="#空值检查-where-xx-is-null" class="headerlink" title="空值检查 where xx is null"></a>空值检查 where xx is null</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    prod_price <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span>    cust_name <span class="token keyword">FROM</span>    customers <span class="token keyword">WHERE</span>    cust_email <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></code></pre><h1 id="高级数据检查"><a href="#高级数据检查" class="headerlink" title="高级数据检查"></a>高级数据检查</h1><h1 id="组合where-and"><a href="#组合where-and" class="headerlink" title="组合where and"></a>组合where and</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_id<span class="token punctuation">,</span>    prod_price<span class="token punctuation">,</span>    prod_name <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span>     <span class="token operator">AND</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># 为避免条件组合错误 使用() 对操作符进行分组</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price <span class="token keyword">FROM</span> products <span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token string">"BRS01"</span> <span class="token operator">AND</span> prod_price <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span>    prod_name<span class="token punctuation">,</span>    prod_price <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    <span class="token punctuation">(</span> vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token string">"BRS01"</span> <span class="token punctuation">)</span>     <span class="token operator">AND</span> prod_price <span class="token operator">>=</span> <span class="token number">10</span><span class="token punctuation">;</span></code></pre><h1 id="IN-操作符-指定条件范围"><a href="#IN-操作符-指定条件范围" class="headerlink" title="IN 操作符 指定条件范围"></a>IN 操作符 指定条件范围</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    vend_id<span class="token punctuation">,</span>    prod_name<span class="token punctuation">,</span>    prod_price <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    vend_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'DLL01'</span><span class="token punctuation">,</span> <span class="token string">'BRS01'</span> <span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span>    prod_name<span class="token punctuation">;</span></code></pre><h1 id="not-where语句中用来否定其后条件的关键字"><a href="#not-where语句中用来否定其后条件的关键字" class="headerlink" title="not where语句中用来否定其后条件的关键字"></a>not where语句中用来否定其后条件的关键字</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    vend_id<span class="token punctuation">,</span>    prod_name <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    <span class="token operator">NOT</span> vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span>    prod_name<span class="token punctuation">;</span></code></pre><h1 id="用通配符进行过滤"><a href="#用通配符进行过滤" class="headerlink" title="用通配符进行过滤"></a>用通配符进行过滤</h1><h1 id="LIKE-区分大小写"><a href="#LIKE-区分大小写" class="headerlink" title="LIKE % 区分大小写"></a>LIKE % 区分大小写</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_id<span class="token punctuation">,</span>    prod_name <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    prod_name <span class="token operator">LIKE</span> <span class="token string">'Fish%'</span><span class="token punctuation">;</span></code></pre><h1 id="创建计算字段-as-创建别名"><a href="#创建计算字段-as-创建别名" class="headerlink" title="创建计算字段 as 创建别名"></a>创建计算字段 as 创建别名</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    CONCAT<span class="token punctuation">(</span> vend_name<span class="token punctuation">,</span> <span class="token string">'(,'</span><span class="token punctuation">,</span> vend_country<span class="token punctuation">,</span> <span class="token string">')'</span> <span class="token punctuation">)</span> <span class="token keyword">FROM</span>    vendors <span class="token keyword">ORDER</span> <span class="token keyword">BY</span>    vend_name<span class="token punctuation">;</span><span class="token keyword">SELECT</span>    CONCAT<span class="token punctuation">(</span> vend_name<span class="token punctuation">,</span> <span class="token string">'(,'</span><span class="token punctuation">,</span> vend_country<span class="token punctuation">,</span> <span class="token string">')'</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> vend_title <span class="token keyword">FROM</span>    vendors <span class="token keyword">ORDER</span> <span class="token keyword">BY</span>    vend_name<span class="token punctuation">;</span><span class="token keyword">SELECT</span>    prod_id<span class="token punctuation">,</span>    quantity<span class="token punctuation">,</span>    item_price <span class="token keyword">FROM</span>    orderitems <span class="token keyword">WHERE</span>    order_num <span class="token operator">=</span> <span class="token number">20008</span><span class="token punctuation">;</span></code></pre><h1 id="使用函数处理数据"><a href="#使用函数处理数据" class="headerlink" title="使用函数处理数据"></a>使用函数处理数据</h1><h1 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    order_num<span class="token punctuation">,</span>    order_date <span class="token keyword">FROM</span>    orders <span class="token keyword">WHERE</span>    YEAR <span class="token punctuation">(</span> order_date <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2012</span><span class="token punctuation">;</span></code></pre><h1 id="数值处理函数"><a href="#数值处理函数" class="headerlink" title="数值处理函数"></a>数值处理函数</h1><h1 id="汇总数据"><a href="#汇总数据" class="headerlink" title="汇总数据"></a>汇总数据</h1><h1 id="聚集函数"><a href="#聚集函数" class="headerlink" title="聚集函数"></a>聚集函数</h1><h1 id="AVG-求平均值"><a href="#AVG-求平均值" class="headerlink" title="AVG() 求平均值"></a>AVG() 求平均值</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    <span class="token function">AVG</span><span class="token punctuation">(</span> prod_price <span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_price <span class="token keyword">FROM</span>    products<span class="token punctuation">;</span><span class="token keyword">SELECT</span>    <span class="token function">AVG</span><span class="token punctuation">(</span> prod_price <span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_price <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span><span class="token punctuation">;</span></code></pre><h1 id="COUNT-DISTINCT-expr-expr…-计数-符合条件的数目"><a href="#COUNT-DISTINCT-expr-expr…-计数-符合条件的数目" class="headerlink" title="COUNT(DISTINCT expr,[expr…]) 计数 符合条件的数目"></a>COUNT(DISTINCT expr,[expr…]) 计数 符合条件的数目</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    <span class="token function">COUNT</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> num_cust <span class="token keyword">FROM</span>    customers<span class="token punctuation">;</span></code></pre><h1 id="max-函数-最大值-min-最小值"><a href="#max-函数-最大值-min-最小值" class="headerlink" title="max() 函数 最大值 min() 最小值"></a>max() 函数 最大值 min() 最小值</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    <span class="token function">max</span><span class="token punctuation">(</span> prod_price <span class="token punctuation">)</span> <span class="token keyword">AS</span> max_price <span class="token keyword">FROM</span>    products<span class="token punctuation">;</span><span class="token keyword">SELECT</span>    <span class="token function">min</span><span class="token punctuation">(</span> prod_price <span class="token punctuation">)</span> <span class="token keyword">AS</span> max_price <span class="token keyword">FROM</span>    products<span class="token punctuation">;</span></code></pre><h1 id="sum-求和"><a href="#sum-求和" class="headerlink" title="sum() 求和"></a>sum() 求和</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    <span class="token function">sum</span><span class="token punctuation">(</span> quantity <span class="token punctuation">)</span> <span class="token keyword">AS</span> items_ordered <span class="token keyword">FROM</span>    orderitems <span class="token keyword">WHERE</span>    order_num <span class="token operator">=</span> <span class="token number">20005</span><span class="token punctuation">;</span></code></pre><h1 id="分组数据"><a href="#分组数据" class="headerlink" title="分组数据"></a>分组数据</h1><h1 id="创建分组-GROUP-BY"><a href="#创建分组-GROUP-BY" class="headerlink" title="创建分组 GROUP BY"></a>创建分组 GROUP BY</h1><pre><code>SELECT    count( * ) AS num FROM    products WHERE    vend_id = 'DLL01';SELECT    vend_id,    count( * ) AS num FROM    products GROUP BY    vend_id;</code></pre><h1 id="过滤分组-HAVING-在分组后进行过滤-where-在分组前对数据进行过滤"><a href="#过滤分组-HAVING-在分组后进行过滤-where-在分组前对数据进行过滤" class="headerlink" title="过滤分组 HAVING 在分组后进行过滤 where 在分组前对数据进行过滤"></a>过滤分组 HAVING 在分组后进行过滤 where 在分组前对数据进行过滤</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    cust_id<span class="token punctuation">,</span>    <span class="token function">count</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> orders <span class="token keyword">FROM</span>    orders <span class="token keyword">GROUP</span> <span class="token keyword">BY</span>    cust_id <span class="token keyword">HAVING</span>    <span class="token function">count</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">2</span> <span class="token keyword">SELECT</span>    vend_id<span class="token punctuation">,</span>    <span class="token function">count</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> num <span class="token keyword">FROM</span>    products <span class="token keyword">WHERE</span>    prod_price <span class="token operator">>=</span> <span class="token number">4</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span>    vend_id <span class="token keyword">HAVING</span>    <span class="token function">count</span><span class="token punctuation">(</span> <span class="token operator">*</span> <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">2</span> <span class="token comment" spellcheck="true"># 分组(group by)和排序(order by)</span><span class="token comment" spellcheck="true"># 子查询</span></code></pre><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    order_num <span class="token keyword">FROM</span>    orderitems <span class="token keyword">WHERE</span>    prod_id <span class="token operator">=</span> <span class="token string">'RGAN01'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span>    cust_id <span class="token keyword">FROM</span>    orders <span class="token keyword">WHERE</span>    order_num <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token number">20007</span><span class="token punctuation">,</span> <span class="token number">20008</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span>    cust_id <span class="token keyword">FROM</span>    orders <span class="token keyword">WHERE</span>    order_num <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> order_num <span class="token keyword">FROM</span> orderitems <span class="token keyword">WHERE</span> prod_id <span class="token operator">=</span> <span class="token string">'RGAN01'</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span></code></pre><h1 id="联结表"><a href="#联结表" class="headerlink" title="联结表"></a>联结表</h1><h1 id="join-联结"><a href="#join-联结" class="headerlink" title="join 联结"></a>join 联结</h1><h1 id="创建联结"><a href="#创建联结" class="headerlink" title="创建联结"></a>创建联结</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    vend_name<span class="token punctuation">,</span>    prod_name<span class="token punctuation">,</span>    prod_price <span class="token keyword">FROM</span>    vendors<span class="token punctuation">,</span>    products <span class="token keyword">WHERE</span>    vendors<span class="token punctuation">.</span>vend_id <span class="token operator">=</span> products<span class="token punctuation">.</span>vend_id<span class="token punctuation">;</span></code></pre><h1 id="错误示范"><a href="#错误示范" class="headerlink" title="错误示范"></a>错误示范</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    vend_name<span class="token punctuation">,</span>    prod_name<span class="token punctuation">,</span>    prod_price <span class="token keyword">FROM</span>    vendors<span class="token punctuation">,</span>    products<span class="token punctuation">;</span></code></pre><h1 id="联结多个表"><a href="#联结多个表" class="headerlink" title="联结多个表"></a>联结多个表</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>    prod_name<span class="token punctuation">,</span>    vend_name<span class="token punctuation">,</span>    prod_price<span class="token punctuation">,</span>    quantity <span class="token keyword">FROM</span>    orderitems<span class="token punctuation">,</span>    products<span class="token punctuation">,</span>    vendors <span class="token keyword">WHERE</span>    products<span class="token punctuation">.</span>vend_id <span class="token operator">=</span> vendors<span class="token punctuation">.</span>vend_id     <span class="token operator">AND</span> orderitems<span class="token punctuation">.</span>prod_id <span class="token operator">=</span> products_id     <span class="token operator">AND</span> order_num <span class="token operator">=</span> <span class="token number">20007</span><span class="token punctuation">;</span></code></pre><h1 id="联结-join"><a href="#联结-join" class="headerlink" title="联结 join"></a>联结 join</h1><h1 id="将数据分解为对多个表-能更有效的存储-更方便的处理-如何使用一条sql语句-检索多个表的数据"><a href="#将数据分解为对多个表-能更有效的存储-更方便的处理-如何使用一条sql语句-检索多个表的数据" class="headerlink" title="将数据分解为对多个表 能更有效的存储 更方便的处理,如何使用一条sql语句 检索多个表的数据"></a>将数据分解为对多个表 能更有效的存储 更方便的处理,如何使用一条sql语句 检索多个表的数据</h1><h1 id="关键是使用-where-联结连个表id"><a href="#关键是使用-where-联结连个表id" class="headerlink" title="关键是使用 where 联结连个表id"></a>关键是使用 where 联结连个表id</h1><p>select vend_name,prod_name,prod_price from vendors,products where vendors.vend_id=products.vend_id;</p><h1 id="自联结"><a href="#自联结" class="headerlink" title="自联结"></a>自联结</h1><h1 id="自然联结"><a href="#自然联结" class="headerlink" title="自然联结"></a>自然联结</h1><h1 id="外联结"><a href="#外联结" class="headerlink" title="外联结"></a>外联结</h1><h1 id="创建组合查询"><a href="#创建组合查询" class="headerlink" title="创建组合查询"></a>创建组合查询</h1><h1 id="使用UNION"><a href="#使用UNION" class="headerlink" title="使用UNION"></a>使用UNION</h1><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span>cust_contact<span class="token punctuation">,</span>cust_email <span class="token keyword">from</span> customers <span class="token keyword">where</span> cust_state <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'IL'</span><span class="token punctuation">,</span><span class="token string">'IN'</span><span class="token punctuation">,</span><span class="token string">'MI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span>cust_contact<span class="token punctuation">,</span>cust_email <span class="token keyword">from</span> customers <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">'Fun4All'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span>cust_contact<span class="token punctuation">,</span>cust_email <span class="token keyword">from</span> customers <span class="token keyword">where</span> cust_state <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'IL'</span><span class="token punctuation">,</span><span class="token string">'IN'</span><span class="token punctuation">,</span><span class="token string">'MI'</span><span class="token punctuation">)</span><span class="token keyword">UNION</span><span class="token keyword">select</span> cust_name<span class="token punctuation">,</span>cust_contact<span class="token punctuation">,</span>cust_email <span class="token keyword">from</span> customers <span class="token keyword">where</span> cust_name<span class="token operator">=</span><span class="token string">'Fun4All'</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库引擎</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/shu-ju-ku-yin-qing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/shu-ju-ku-yin-qing/</url>
      
        <content type="html"><![CDATA[<h3 id="存储引擎的选用"><a href="#存储引擎的选用" class="headerlink" title="存储引擎的选用"></a>存储引擎的选用</h3><p> <strong>MyISAM</strong>：默认的 MySQL 插件式存储引擎。如果应用是<strong>以读操作和插入操作为主， 只有很少的更新和删除操作</strong>，并且对<strong>事务的完整性、并发性要求不是很高</strong>MyISAM 是在 Web、数据仓储和其他应用环境下最常使用的存储引擎之一。</p><p> <strong>InnoDB</strong>：用于<strong>事务处理应用程序</strong>，支持外键。如果应用对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询以外，还包括很多的更新、 删除操作，那么 InnoDB 存储引擎应该是比较合适的选择。InnoDB 存储引擎除了有效地降低 由于删除和更新导致的锁定，还可以确保事务的完整提交（Commit）和回滚（Rollback）,对于类似计费系统或者财务系统等对数据准确性要求比较高的系统，InnoDB 都是合适的选择。 </p><p> <strong>MEMORY</strong>：将所有数据保存在 RAM 中，在需要快速定位记录和其他类似数据的环境下，可提供极快的访问。MEMORY 的缺陷是对表的大小有限制，太大的表无法 CACHE 在内存中，其次是要确保表的数据可以恢复，数据库异常终止后表中的数据是可以恢复的。<strong>MEMORY 表通常用于更新不太频繁的小表，用以快速得到访问结果</strong>。 </p><p> <strong>MERGE</strong>：用于将一系列等同的 MyISAM 表以逻辑方式组合在一起，并作为一个对象 引用它们。MERGE 表的优点在于可以突破对单个 MyISAM 表大小的限制，并且通过将不同 的表分布在多个磁盘上，可以有效地改善 MERGE 表的访问效率。这对于诸如<strong>数据仓储</strong>等 VLDB 环境十分适合。</p><p><strong>一、MyISAM引擎</strong><br>MyIASM是MySQL默认的引擎，但是它没有提供对数据库事务的支持，也不支持行级锁和外键，因此当INSERT(插入)或UPDATE(更新)数据时即写操作需要锁定整个表，效率便会低一些。不过和Innodb不同，MyIASM中存储了表的行数，于是SELECT COUNT(<em>) FROM TABLE时只需要直接读取已经保存好的值而不需要进行全表扫描。如果表的读操作远远多于写操作且不需要数据库事务的支持，那么MyIASM也是很好的选择。<br><strong>二、Innodb引擎</strong><br>Innodb引擎提供了对数据库ACID事务的支持，并且实现了SQL标准的四种隔离级别，MySQL运行时Innodb会在内存中建立缓冲池，用于缓冲数据和索引。但是该引擎不支持FULLTEXT类型的索引，而且它没有保存表的行数，当SELECT COUNT(</em>) FROM TABLE时需要扫描全表。当需要使用数据库事务时，该引擎当然是首选。由于锁的粒度更小，写操作不会锁定全表，所以在并发较高时，使用Innodb引擎会提升效率。但是使用行级锁也不是绝对的，如果在执行一个SQL语句时MySQL不能确定要扫描的范围，InnoDB表同样会锁全表。<br><strong>三、使用场景</strong><br>大尺寸的数据集趋向于选择InnoDB引擎，因为它支持事务处理和故障恢复。数据库的大小决定了故障恢复的时间长短，InnoDB可以利用事务日志进行数据恢复，这会比较快。主键查询在InnoDB引擎下也会相当快，不过需要注意的是如果主键太长也会导致性能问题。大批的INSERT语句(在每个INSERT语句中写入多行，批量插入)在MyISAM下会快一些，但是UPDATE语句在InnoDB下则会更快一些，尤其是在并发量大的时候。<br>引用：<a href="http://blog.csdn.net/lulei1217/article/details/50954232" target="_blank" rel="noopener">http://blog.csdn.net/lulei1217/article/details/50954232</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库事务</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/shu-ju-ku-shi-wu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/shu-ju-ku-shi-wu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>事务(TRANSACTION)是作为单个逻辑工作单元执行的一系列操作，这些操作作为一个整体一起向</p><p>系统提交，要么都执行、要么都不执行 。事务是一个不可分割的工作逻辑单元</p></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920200021291.png" alt="image-20200920200021291"></p><p>事务必须具备以下四个属性，简称 ACID 属性：</p><h2 id="原子性（Atomicity）"><a href="#原子性（Atomicity）" class="headerlink" title="原子性（Atomicity）"></a>原子性（Atomicity）</h2><ol><li>事务是一个完整的操作。事务的各步操作是不可分的（原子的）；要么都执行，要么都不执行。</li></ol><h2 id="一致性（Consistency）"><a href="#一致性（Consistency）" class="headerlink" title="一致性（Consistency）"></a>一致性（Consistency）</h2><ol start="2"><li>当事务完成时，数据必须处于一致状态。</li></ol><h2 id="隔离性（Isolation）"><a href="#隔离性（Isolation）" class="headerlink" title="隔离性（Isolation）"></a>隔离性（Isolation）</h2><ol start="3"><li>对数据进行修改的所有并发事务是彼此隔离的，这表明事务必须是独立的，它不应以任何方式依赖于或影响其他事务。</li></ol><h2 id="永久性（Durability）"><a href="#永久性（Durability）" class="headerlink" title="永久性（Durability）"></a>永久性（Durability）</h2><ol start="4"><li>事务完成后，它对数据库的修改被永久保持，事务日志能够保持事务的永久性</li></ol><p>实现?</p><ul><li><p>ACD实现方式</p><p>重执行日志,记录DB操作的动作,根据日志进行回复</p></li><li><p>I 实现方式</p><p>资源的抢占, 锁</p></li></ul><h2 id="并发读的问题"><a href="#并发读的问题" class="headerlink" title="并发读的问题"></a>并发读的问题</h2><ul><li><p>脏读</p><p>A事务读取到了B事务还有提交的数据,在数据基础上,进行一个操作</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920200106089.png" alt="image-20200920200106089"></p></li><li><p>不可重复读</p><p>在一个A的事务内, A读取B事务提交的数据,导致读取两次数据不一致</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920200136362.png" alt="image-20200920200136362"></p></li><li><p>幻像读</p><p>在A事务里读到B事务提交的新增数据,这时A事务就出现了幻想读,只要出现在计算统计事务中</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920200719065.png" alt="image-20200920200719065"></p></li></ul><h2 id="并发写的问题"><a href="#并发写的问题" class="headerlink" title="并发写的问题"></a>并发写的问题</h2><ul><li><p>第一类丢失更新</p><p>B事务撤销时,把已将提交的A事务的更新数据覆盖了,造成A事务的操作丢失</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920200924595.png" alt="image-20200920200924595"></p></li><li><p>第二类丢失更新</p><p>A事务提交时把B事务已经提交的数据覆盖掉了,造成B事务操作丢失</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920201105434.png" alt="image-20200920201105434"></p></li></ul><h2 id="数据库锁机制"><a href="#数据库锁机制" class="headerlink" title="数据库锁机制"></a>数据库锁机制</h2><p>资源!</p><ul><li>按照锁定范围不同: 表锁定 行锁定</li><li>按照资源范围不同: 共享锁 独占锁</li></ul><p>隔离级别</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920201832477.png" alt="image-20200920201832477"></p><p>用户指定隔离级别 数据库按照隔离规则 分析事务的SQL语句 适当的加锁操作</p><p>InnDB采用REPEATABLE READ mysql进行了优化 使用Next-key Lock 锁 避免了幻读产生 达到了SERIALIZABLE 级别</p><p>查看数据库隔离级别</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">select</span> @<span class="token variable">@TRANSACTION_isolation</span></code></pre><p>该别数据库隔离级别</p><pre class=" language-sql"><code class="language-sql"></code></pre><h2 id="InnDB存储引擎-B-树索引"><a href="#InnDB存储引擎-B-树索引" class="headerlink" title="InnDB存储引擎 B+树索引"></a>InnDB存储引擎 B+树索引</h2><p>B+树 ?</p><p>为磁盘或其他辅助设备设计的平衡查找树 叶子节点上的node 都是按照顺序排列</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920203246635.png" alt="image-20200920203246635"></p><ul><li>插入操作</li></ul><p>- </p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库三范式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/shu-ju-ku-san-fan-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/shu-ju-ku-san-fan-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库设计范式的理解"><a href="#数据库设计范式的理解" class="headerlink" title="数据库设计范式的理解"></a>数据库设计范式的理解</h1><h2 id="数据库三范式"><a href="#数据库三范式" class="headerlink" title="数据库三范式"></a><strong>数据库三范式</strong></h2><p>范式是具有最小冗余的表结构。3 范式具体如下：</p><p> <strong>第一范式**</strong>(1st NF** －列都是不可再分)</p><p> <strong>第二范式**</strong>(2nd NF** －每个表只描述一个事情)</p><p> <strong>第三范式**</strong>(3rd NF** －不存在对非主键列的传递依赖)</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>插入数据</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/cha-ru-shu-ju/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/cha-ru-shu-ju/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>了解数据库</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/liao-jie-shu-ju-ku/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/ji-chu-gai-nian/liao-jie-shu-ju-ku/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="数据库-database"><a href="#数据库-database" class="headerlink" title="数据库(database)"></a>数据库(database)</h2><blockquote><p>保存有组织的数据库容器</p></blockquote><h2 id="表-table"><a href="#表-table" class="headerlink" title="表(table)"></a>表(table)</h2><blockquote><p>某种特定类型的数据结构化清单</p></blockquote><h2 id="列-column"><a href="#列-column" class="headerlink" title="列(column)"></a>列(column)</h2><blockquote><p>表中的一个字段,所有表都是有一个或多个列组成的</p></blockquote><h2 id="行-row"><a href="#行-row" class="headerlink" title="行(row)"></a>行(row)</h2><blockquote><p>表中的一个记录</p></blockquote><h2 id="主键-primary-key"><a href="#主键-primary-key" class="headerlink" title="主键 (primary key)"></a>主键 (primary key)</h2><blockquote><p>一列或一组列, 其值能够唯一标识表中每一行</p></blockquote><p>满足条件</p><ul><li>任意两行都不具有相同的主键值</li><li>每一行都必须具有一个主键值(主键值不允许NULL值)</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>错误问题</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/cuo-wu-wen-ti/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/cuo-wu-wen-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis-error-NOAUTH-Authentication-required-解决方法"><a href="#Redis-error-NOAUTH-Authentication-required-解决方法" class="headerlink" title="Redis (error) NOAUTH Authentication required.解决方法"></a>Redis (error) NOAUTH Authentication required.解决方法</h1><p>认证错误，没有设置密码</p><pre><code>auth "密码"</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/jian-jie/</url>
      
        <content type="html"><![CDATA[<p>Redis（Remote Dictionary Service）是一个NoSql数据库，基于c开发，键值对存储数据，运行在缓存内存中，高速缓存数据</p><p>特点：</p><ul><li>支持数据持久化</li><li>支持多种不同的数据结构</li><li>支持从模式的数据备份</li><li>自带发布订阅系统</li><li>定时器，计数器</li></ul><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:数据库/Redis学习/简介.md<br><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/redis-20200723112107089.png" alt="image-20200723112107089"><br>=======<br><img src="images/%E7%AE%80%E4%BB%8B/image-20200723112107089.png" alt="image-20200723112107089"></p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>4a54e0bb7a2fa4b9efd486de9e7623ed98e692bd:Redis学习/简介.md</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis开启远程连接</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/redis-kai-qi-yuan-cheng-lian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/redis-kai-qi-yuan-cheng-lian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis启动配置"><a href="#Redis启动配置" class="headerlink" title="Redis启动配置"></a>Redis启动配置</h1><h2 id="修改redis-conf-配置文件"><a href="#修改redis-conf-配置文件" class="headerlink" title="修改redis.conf 配置文件"></a>修改redis.conf 配置文件</h2><pre><code># linux 命令vi redis.conf/dae 找到目标字符i:修改wq:保存退出</code></pre><p>daemonize  yes ：表示以守护进程的方式启动，后台启动</p><h2 id="开启远程连接"><a href="#开启远程连接" class="headerlink" title="开启远程连接"></a>开启远程连接</h2><h3 id="开放端口6379"><a href="#开放端口6379" class="headerlink" title="开放端口6379"></a>开放端口6379</h3><pre><code>firewall-cmd --zone=public --list-ports #查看防火墙开放的端口firewall-cmd --zone=public --add-port=6379/tcp --permanent   # 开放6379端口firewall-cmd --reload   # 配置立即生效firewall-cmd --zone=public --list-ports</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200912151748877.png" alt="image-20200912151748877"></p><p>Redis默认不支持远程连接，需要手动开启</p><h3 id="修改redis-conf文件"><a href="#修改redis-conf文件" class="headerlink" title="修改redis.conf文件"></a>修改redis.conf文件</h3><ol><li><p>注释bind 127.0.0.1</p></li><li><p>开启密码校验 </p><pre><code>requirepass kujin</code></pre><p><img src="https://gitee.com/ku521/Typora_images/raw/master/image/image-20200723140632512.png" alt="image-20200723140632512"></p></li><li><p>保存退出，重启redis </p><pre class=" language-shell"><code class="language-shell">redis-server redis.conf</code></pre></li></ol><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200912151606183.png" alt="image-20200912151606183"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java客户端</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/java-ke-hu-duan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/java-ke-hu-duan/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h2 id="开启远程连接"><a href="#开启远程连接" class="headerlink" title="开启远程连接"></a>开启远程连接</h2><h3 id="开放端口6379"><a href="#开放端口6379" class="headerlink" title="开放端口6379"></a>开放端口6379</h3><pre><code>firewall-cmd --zone=public --list-ports #查看防火墙开放的端口firewall-cmd --zone=public --add-port=6379/tcp --permanent   # 开放6379端口firewall-cmd --reload   # 配置立即生效firewall-cmd --zone=public --list-ports</code></pre><p><img src="images/Java%E5%AE%A2%E6%88%B7%E7%AB%AF/image-20200723141553131.png" alt="image-20200723141553131"></p><p>Redis默认不支持远程连接，需要手动开启</p><h3 id="修改redis-conf文件"><a href="#修改redis-conf文件" class="headerlink" title="修改redis.conf文件"></a>修改redis.conf文件</h3><ol><li><p>注释bind 127.0.0.1</p></li><li><p>开启密码校验 </p><pre><code>requirepass kujin</code></pre><p><img src="images/Java%E5%AE%A2%E6%88%B7%E7%AB%AF/image-20200723140632512.png" alt="image-20200723140632512"></p></li><li><p>保存退出，重启redis </p><pre class=" language-shell"><code class="language-shell">redis-server redis.conf</code></pre></li></ol><p><img src="images/Java%E5%AE%A2%E6%88%B7%E7%AB%AF/image-20200723141850375.png" alt="image-20200723141850375"></p><h2 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h2><p>maven仓库：<a href="https://mvnrepository.com/artifact/redis.clients/jedis" target="_blank" rel="noopener">https://mvnrepository.com/artifact/redis.clients/jedis</a></p><h3 id="1-添加依赖"><a href="#1-添加依赖" class="headerlink" title="1. 添加依赖"></a>1. 添加依赖</h3><pre class=" language-groovy"><code class="language-groovy">compile group<span class="token punctuation">:</span> <span class="token string">'redis.clients'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'jedis'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'3.3.0'</span></code></pre><h3 id="2-java代码测试"><a href="#2-java代码测试" class="headerlink" title="2. java代码测试"></a>2. java代码测试</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>springredis<span class="token punctuation">;</span><span class="token keyword">import</span> redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span>Jedis<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：在java中使用Redis * 编写人：kujin * 创建时间：2020/7/23 * 修改时间：2020/7/23 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Java_Redis_Text</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Jedis jedis<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">"192.168.2.168"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//连接redis</span>        jedis<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//输入密码</span>        <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//记录操作次数</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">long</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//开始时间</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">long</span> end <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//结束时间</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>end<span class="token operator">-</span>start<span class="token operator">>=</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//时间大于1秒，退出</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                i<span class="token operator">++</span><span class="token punctuation">;</span>                jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token operator">+</span>i<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//关闭连接</span>            jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"redis每秒操作 "</span><span class="token operator">+</span> i<span class="token operator">+</span> <span class="token string">"次"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="images/Java%E5%AE%A2%E6%88%B7%E7%AB%AF/image-20200723143421382.png" alt="image-20200723143421382"></p><h3 id="3-连接池"><a href="#3-连接池" class="headerlink" title="3. 连接池"></a>3. 连接池</h3><h4 id="1-定义接口约束"><a href="#1-定义接口约束" class="headerlink" title="1. 定义接口约束"></a>1. 定义接口约束</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CllWithJedis</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span>Jedis jedis<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="2-规范redis连接创建"><a href="#2-规范redis连接创建" class="headerlink" title="2. 规范redis连接创建"></a>2. 规范redis连接创建</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Redis</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//定义redis连接池</span>    <span class="token keyword">private</span> JedisPool pool<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//配置连接参数</span>        GenericObjectPoolConfig config<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">GenericObjectPoolConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">setMaxIdle</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最大空闲数</span>        config<span class="token punctuation">.</span><span class="token function">setMaxTotal</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最大连接数</span>        config<span class="token punctuation">.</span><span class="token function">setTestOnBorrow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//在空闲时检查有效性</span>        <span class="token comment" spellcheck="true">//配置参数，地址，端口，超时时间，密码</span>        pool<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">JedisPool</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span><span class="token string">"192.168.2.168"</span><span class="token punctuation">,</span><span class="token number">6379</span><span class="token punctuation">,</span><span class="token number">20000</span><span class="token punctuation">,</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span>CllWithJedis cllWithJedis<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//在try里获取单个连接</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span>Jedis jedis<span class="token operator">=</span>pool<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            cllWithJedis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>jedis<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="3-使用redis"><a href="#3-使用redis" class="headerlink" title="3. 使用redis"></a>3. 使用redis</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Redis redis<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        redis<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>jedis1 <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis1<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="Lettuce（简单了解）"><a href="#Lettuce（简单了解）" class="headerlink" title="Lettuce（简单了解）"></a>Lettuce（简单了解）</h2><p>Github<a href="https://github.com/lettuce-io/lettuce-core" target="_blank" rel="noopener">官方地址</a></p><h3 id="1-添加依赖-1"><a href="#1-添加依赖-1" class="headerlink" title="1. 添加依赖"></a>1. 添加依赖</h3><pre class=" language-groovy"><code class="language-groovy">compile group<span class="token punctuation">:</span> <span class="token string">'io.lettuce'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'lettuce-core'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'6.0.0.M1'</span></code></pre><h3 id="2-简单测试案例"><a href="#2-简单测试案例" class="headerlink" title="2. 简单测试案例"></a>2. 简单测试案例</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LettuceTest</span> <span class="token punctuation">{</span>    <span class="token keyword">static</span> RedisClient client <span class="token operator">=</span> RedisClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"redis://kujin@192.168.2.168"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取redis实例</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">baseUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//基本用法</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">baseUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        StatefulRedisConnection<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> String<span class="token operator">></span> connection <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        RedisStringCommands sync <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//同步对象</span>        sync<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"ku"</span><span class="token punctuation">,</span><span class="token string">"jin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//设置值</span>        String ku <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> sync<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"ku"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取值</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ku<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="Jedis和Lettuce比较"><a href="#Jedis和Lettuce比较" class="headerlink" title="Jedis和Lettuce比较"></a>Jedis和Lettuce比较</h2><ol><li>Jedis在实现过程中是直接连接Redis的，在多个线程之间共享一个Jedis实例，这是线程不安全的，如果在多线程创建下使用需要创建连接池，这样每个jedis都有redis实例</li><li>Lettuce基于Netty NIO框架构建，所以克服了jedis中线程不安全的问题，Lettuce支持同步，异步，以及响应调用，多个线程可以共享一个实例</li></ol><h2 id="Spring中使用Redis"><a href="#Spring中使用Redis" class="headerlink" title="Spring中使用Redis"></a>Spring中使用Redis</h2><h3 id="1-添加依赖-2"><a href="#1-添加依赖-2" class="headerlink" title="1.添加依赖"></a>1.添加依赖</h3><pre class=" language-groovy"><code class="language-groovy">compile group<span class="token punctuation">:</span> <span class="token string">'org.springframework.data'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'spring-data-redis'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'2.3.2.RELEASE'</span></code></pre><h3 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2.配置文件"></a>2.配置文件</h3><p>appcationContext.xml</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--    Spring配置JedisPoolConfig对象--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>poolConfig<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>redis.clients.jedis.JedisPoolConfig<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--最大空闲数 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxIdle<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--最大连接数 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxTotal<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment" spellcheck="true">&lt;!--最大等待时间 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxWaitMillis<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--spring配置JedisConnectionFactory--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>connectionFactory<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.data.redis.connection.jedis.JedisConnectionFactory<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hostName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>192.168.2.168<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>port<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>6379<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>kujin<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>poolConfig<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>poolConfig<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--Spring配置RedisTemplate--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdkSerializationRedisSerializer<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.data.redis.serializer.JdkSerializationRedisSerializer<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stringRedisSerializer<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.data.redis.serializer.StringRedisSerializer<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>redisTemplate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.data.redis.core.RedisTemplate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>connectionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>connectionFactory<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>keySerializer<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stringRedisSerializer<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>valueSerializer<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdkSerializationRedisSerializer<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><h3 id="3-关键代码"><a href="#3-关键代码" class="headerlink" title="3.关键代码"></a>3.关键代码</h3><p>pojo</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Role</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> 6977402643848374753L<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String roleName<span class="token punctuation">;</span>    <span class="token keyword">private</span> String note<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getRoleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> roleName<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleName</span><span class="token punctuation">(</span>String roleName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>roleName <span class="token operator">=</span> roleName<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> note<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNote</span><span class="token punctuation">(</span>String note<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>note <span class="token operator">=</span> note<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>main.java</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testSpring</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//spring配置</span>        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//获取redis</span>        RedisTemplate redisTemplate <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>RedisTemplate<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//角色实体</span>        Role role <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Role</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>1L<span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setRoleName</span><span class="token punctuation">(</span><span class="token string">"role_name_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setNote</span><span class="token punctuation">(</span><span class="token string">"note_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//redsi操作</span>        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"role_1"</span><span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">;</span>        Role role1 <span class="token operator">=</span> <span class="token punctuation">(</span>Role<span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"role_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>role1<span class="token punctuation">.</span><span class="token function">getRoleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h3 id="4-优化"><a href="#4-优化" class="headerlink" title="4. 优化"></a>4. 优化</h3><p>SessionCallback接口对redis连接进行了封装，可以把多个命令放入到同一个Redis连接中执行</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testSessionCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        RedisTemplate redisTemplate <span class="token operator">=</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>RedisTemplate<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Role role <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Role</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setRoleName</span><span class="token punctuation">(</span><span class="token string">"role_name_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setNote</span><span class="token punctuation">(</span><span class="token string">"role_note_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//SessionCallback接口对redis连接进行了封装，可以把多个命令放入到同一个Redis连接中执行</span>        SessionCallback callBack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionCallback</span><span class="token operator">&lt;</span>Role<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> Role <span class="token function">execute</span><span class="token punctuation">(</span>RedisOperations ops<span class="token punctuation">)</span> <span class="token keyword">throws</span> DataAccessException <span class="token punctuation">{</span>                ops<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">"role_1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token punctuation">(</span>Role<span class="token punctuation">)</span> ops<span class="token punctuation">.</span><span class="token function">boundValueOps</span><span class="token punctuation">(</span><span class="token string">"role_1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        Role savedRole <span class="token operator">=</span> <span class="token punctuation">(</span>Role<span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>callBack<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>savedRole<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-2通信协议</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/5-2-tong-xin-xie-yi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/5-2-tong-xin-xie-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis通信使用文本协议"><a href="#Redis通信使用文本协议" class="headerlink" title="Redis通信使用文本协议"></a>Redis通信使用文本协议</h1><p><img src="https://gitee.com/ku521/Typora_images/raw/master/image/image-20200803185100728.png" alt="image-20200803185100728"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-1Redis单线程处理高并发</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/5-1redis-dan-xian-cheng-chu-li-gao-bing-fa/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/5-1redis-dan-xian-cheng-chu-li-gao-bing-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="1-阻塞io与非阻塞io"><a href="#1-阻塞io与非阻塞io" class="headerlink" title="1.阻塞io与非阻塞io"></a>1.阻塞io与非阻塞io</h2><ul><li>java1.4引入NIO    两种io有什么区别?</li></ul><h2 id="2-Redis的线程模型"><a href="#2-Redis的线程模型" class="headerlink" title="2.Redis的线程模型"></a>2.Redis的线程模型</h2><ul><li><p>Redis是单线程,单线程是如何处理高并发的?</p><ol><li>数据基于内存,计算都是内存级别</li><li>时间复杂度高的指令,可能卡顿</li><li>使用非阻塞io</li><li>通过队列处理客户端指令</li></ol><ul><li>多路复用,事件轮询api</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-3 消息队列</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/3-3-xiao-xi-dui-lie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/3-3-xiao-xi-dui-lie/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>平时说的消息队列，一般是指RbbitMQ, RocketMQ,ActiveMQ 以及大数据里边的Kafka，这些都是一些比较专业的消息中间件</p><p>Redis中也有自己的消息队列</p><h2 id="1-消息队列"><a href="#1-消息队列" class="headerlink" title="1.消息队列"></a>1.消息队列</h2><p>Redis中做消息队列，使用他里边的List数据结构可以实现，我们可以 </p><ul><li>lpush/rpush 操作来实现入队</li><li>lpop/rpop 实现出列</li></ul><p>详细操作</p><p><img src="images/3-3%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/image-20200727184633610.png" alt="image-20200727184633610"></p><h3 id="java端"><a href="#java端" class="headerlink" title="java端"></a>java端</h3><p>在客户端（java端）我们会维护一个死循环不停地从队列中读取数据，并处理，如果队列中有消息，则直接获取，如果没有消息，就会陷入死循环，直到下一次有消息进入，这种死循环会造成大量资源浪费，使用blpop/brpopo</p><h2 id="2-延迟消息队列"><a href="#2-延迟消息队列" class="headerlink" title="2.延迟消息队列"></a>2.延迟消息队列</h2><blockquote><p>延迟队列可以通过zset来实现，因为zset中有一个score，我们可以把时间作为score，将value存到redis中，然后通过循环的方式不断地通过轮询的方式，去不断的读取出来</p></blockquote><ul><li><strong>如果消息是一个字符串，直接发送即可，如果是一个对象，则需要进行对象序列化，这里我们使用JSON来实现序列化与反序列化</strong></li></ul><ol><li>首先在项目中吗，添加Json依赖</li></ol><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.10.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 类：消息实体 * 编写人：kujin * 创建时间：2020/7/28 * 修改时间：2020/7/28 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> Object data<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Message{"</span> <span class="token operator">+</span>                <span class="token string">"id='"</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", data="</span> <span class="token operator">+</span> data <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Object <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setData</span><span class="token punctuation">(</span>Object data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>springredistest<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>redis_queue<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>core<span class="token punctuation">.</span>JsonProcessingException<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>ObjectMapper<span class="token punctuation">;</span><span class="token keyword">import</span> redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span>Jedis<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Set<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>UUID<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：延迟消息队列 * 编写人：kujin * 创建时间：2020/7/28 * 修改时间：2020/7/28 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DelayMsgQueue</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Jedis jedis<span class="token punctuation">;</span>    <span class="token keyword">private</span> String queue<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">DelayMsgQueue</span><span class="token punctuation">(</span>Jedis jedis<span class="token punctuation">,</span> String queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jedis <span class="token operator">=</span> jedis<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> queue<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 消息入列     * @param data 要发送的消息     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queue</span><span class="token punctuation">(</span>Object data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//构造一个消息</span>        Message message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//序列化</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            String json <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//消息发送,延迟5秒</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"msg publish: "</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">50000</span><span class="token punctuation">,</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 消息发送     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>Thread<span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//读取score 到当前时间戳的消息</span>            Set<span class="token operator">&lt;</span>String<span class="token operator">></span> zrange <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">zrangeByScore</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//如果消息为空,则休息500毫秒</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>zrange<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//如果读取到消息,则将消息读取出来</span>            String next <span class="token operator">=</span> zrange<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">zrem</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span>next<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//消息取到,处理业务</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Message message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>next<span class="token punctuation">,</span> Message<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"receive msg: "</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>springredistest<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>redis_queue<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>core<span class="token punctuation">.</span>JsonProcessingException<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>ObjectMapper<span class="token punctuation">;</span><span class="token keyword">import</span> redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span>Jedis<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Set<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>UUID<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：延迟消息队列 * 编写人：kujin * 创建时间：2020/7/28 * 修改时间：2020/7/28 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DelayMsgQueue</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Jedis jedis<span class="token punctuation">;</span>    <span class="token keyword">private</span> String queue<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">DelayMsgQueue</span><span class="token punctuation">(</span>Jedis jedis<span class="token punctuation">,</span> String queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jedis <span class="token operator">=</span> jedis<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> queue<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 消息入列     * @param data 要发送的消息     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queue</span><span class="token punctuation">(</span>Object data<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//构造一个消息</span>        Message message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//序列化</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            String json <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//消息发送,延迟5秒</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"msg publish: "</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            jedis<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">5000</span><span class="token punctuation">,</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 消息发送     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>Thread<span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//读取score 到当前时间戳的消息</span>            Set<span class="token operator">&lt;</span>String<span class="token operator">></span> zrange <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">zrangeByScore</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//如果消息为空,则休息500毫秒</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>zrange<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment" spellcheck="true">//如果读取到消息,则将消息读取出来</span>            String next <span class="token operator">=</span> zrange<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">zrem</span><span class="token punctuation">(</span>queue<span class="token punctuation">,</span>next<span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//消息取到,处理业务</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Message message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>next<span class="token punctuation">,</span> Message<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"receive msg: "</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">">>>>>"</span><span class="token operator">+</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JsonProcessingException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><img src="images/3-3%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/image-20200728194536819.png" alt="image-20200728194536819"></p><p><a href="https://github.com/kujin521/SpringRedisTest/tree/master/src/main/java/com/kujin/springredistest/redis/redis_queue" target="_blank" rel="noopener">github</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2 Lua脚本</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/3-2-lua-jiao-ben/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/3-2-lua-jiao-ben/</url>
      
        <content type="html"><![CDATA[<h1 id="Lua脚本"><a href="#Lua脚本" class="headerlink" title="Lua脚本"></a>Lua脚本</h1><blockquote><p>在Redis的2.6以上版本中，可以使用Lua语言操作Redis</p><p>Redis语言具有原子性，操作过程不会中断，有助于Redis对并发操作数据的一致性</p></blockquote><h2 id="1-Redis支持两种方法运行脚本"><a href="#1-Redis支持两种方法运行脚本" class="headerlink" title="1.Redis支持两种方法运行脚本"></a>1.Redis支持两种方法运行脚本</h2><ol><li>直接输入Lua语言程序代码</li><li>将Lua语言编写成文件</li></ol><blockquote><p>Redis支持缓存脚本，它会使用SHA-1算法对脚本进行签名，然后通过把SHA-1标识返回回来，通过标识运行</p></blockquote><p><strong>命令格式</strong></p><pre class=" language-shell"><code class="language-shell">eval Lua-script key-num [key1 key2 ...][value1 value2 ...]</code></pre><ul><li>eval 代表Lua语言命令</li><li>Lua-script 代表Lua语言脚本</li><li>key-num 代表有多少的key ，Redis中的key是从1开始的，如果key没有参数 那么写0</li><li>[key1 key2 …]作为参数传递给Lua语言 需要和key-num对应起来</li><li>[value1 value2 …]参数传递给Lua语言</li></ul><h2 id="2-举个栗子"><a href="#2-举个栗子" class="headerlink" title="2.举个栗子"></a>2.举个栗子</h2><p>这个脚本只是返回一个字符串，不需要任何参数</p><pre class=" language-shell"><code class="language-shell">eval "return 'hello Lua'" 0</code></pre><p><img src="images/3-2%20Lua%E8%84%9A%E6%9C%AC/image-20200725105545715.png" alt="image-20200725105545715"></p><p>设置一个键值对，可以在Lua语言中采用redis.call(command,key[parm1,parm2 …])</p><ul><li>command是命令 set get del 等</li><li>Key是被操作的键</li><li>parm1，parm2 代表key的参数</li></ul><pre class=" language-shell"><code class="language-shell">eval "redis.call('set',KEYS[1],ARGV[1])" 1 lua-key lua-value</code></pre><p><img src="images/3-2%20Lua%E8%84%9A%E6%9C%AC/image-20200725110256564.png" alt="image-20200725110256564"></p><blockquote><p>脚本中的KEY[1]代表读取传递给Lua脚本的第一个key参数，</p><p>而ARGV[1]代表第一个非key参数。</p></blockquote><h2 id="3-使用加密算法"><a href="#3-使用加密算法" class="headerlink" title="3.使用加密算法"></a>3.使用加密算法</h2><p><strong>有时候需要多次执行同样一段代码脚本，这时候可以使用Redis缓存脚本的功能，在Redis中脚本会通过SHA-1签名算法加密脚本，然后返回一个标识字符串</strong></p><p><strong>通过这个字符串执行加密脚本，好处是如果脚本很长，客户端传输需要很长时间，使用标识符，则需要传递32位字符即可，从而提高传输效率，提高性能</strong></p><pre class=" language-shell"><code class="language-shell">script load script</code></pre><pre><code>evalsha shastring keynum [key1 key2 ..] [parm1 parm2 ...]</code></pre><h3 id="1-举个栗子"><a href="#1-举个栗子" class="headerlink" title="1.举个栗子"></a>1.举个栗子</h3><pre class=" language-shell"><code class="language-shell">script load "redis.call('set',KEYS[1],ARGV[1])"evalsha 7cfb4342127e7ab3d63ac05e0d3615fd50b45b06 1 sha-key valget sha-key</code></pre><p><img src="images/3-2%20Lua%E8%84%9A%E6%9C%AC/image-20200725113303421.png" alt="image-20200725113303421"></p><h2 id="4-java代码使用Lua脚本"><a href="#4-java代码使用Lua脚本" class="headerlink" title="4.java代码使用Lua脚本"></a>4.java代码使用Lua脚本</h2><pre class=" language-java"><code class="language-java">        <span class="token comment" spellcheck="true">//执行简单的脚本</span>        String helloJava <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> jedis<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"return 'hello java'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>helloJava<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//执行带参数的脚本</span>        jedis<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">"redis.call('set',KEYS[1],ARGV[1])"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"lua-key"</span><span class="token punctuation">,</span><span class="token string">"lua-value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String luaKey <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"lua-key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>luaKey<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//缓存脚本，返回sha1签名标识</span>        String sha1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">scriptLoad</span><span class="token punctuation">(</span><span class="token string">"redis.call('set',KEYS[1],ARGV[1])"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//通过标识执行脚本</span>        jedis<span class="token punctuation">.</span><span class="token function">evalsha</span><span class="token punctuation">(</span>sha1<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"sha-key"</span><span class="token punctuation">,</span><span class="token string">"sha-val"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//获取执行脚本后的数据</span>        String shaVal <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"sha-key"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>shaVal<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="5-使用RedisScript接口对象通过Lua脚本操作对象"><a href="#5-使用RedisScript接口对象通过Lua脚本操作对象" class="headerlink" title="5.使用RedisScript接口对象通过Lua脚本操作对象"></a>5.使用RedisScript接口对象通过Lua脚本操作对象</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * 使用RedisScript接口对象通过Lua脚本操作对象     */</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">redisScript_Lua</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//1.定义默认脚本封装类</span>        DefaultRedisScript<span class="token operator">&lt;</span>Role<span class="token operator">></span> redisScript <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultRedisScript</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2. 设置脚本</span>        redisScript<span class="token punctuation">.</span><span class="token function">setScriptText</span><span class="token punctuation">(</span><span class="token string">"redis.call('set',KEYS[1],ARGV[1]) return redis.call('get',KEYS[1])"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3. 定义操作key的列表</span>        ArrayList<span class="token operator">&lt;</span>String<span class="token operator">></span> keyList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        keyList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"role1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4. 需要序列化保存和读取的对象</span>        Role role <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Role</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>1L<span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setRoleName</span><span class="token punctuation">(</span><span class="token string">"role_name_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        role<span class="token punctuation">.</span><span class="token function">setNote</span><span class="token punctuation">(</span><span class="token string">"note_1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//5. 获取标识字符串</span>        String sha1 <span class="token operator">=</span> redisScript<span class="token punctuation">.</span><span class="token function">getSha1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sha1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//6. 设置返回结果类型，如果没有这句话，返回结果为空</span>        redisScript<span class="token punctuation">.</span><span class="token function">setResultType</span><span class="token punctuation">(</span>Role<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//7. 定义序列化器</span>        JdkSerializationRedisSerializer serializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdkSerializationRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//8. 执行脚本</span>        RedisTemplate jedisTemlate <span class="token operator">=</span> Utils<span class="token punctuation">.</span><span class="token function">getJedisTemlate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//第一个是redisScript接口对象，第二个是参数序列化器</span>        <span class="token comment" spellcheck="true">//第三个是结果序列化器，第四个是Redis的key列表，最后是参数列表</span>        Role obj <span class="token operator">=</span> <span class="token punctuation">(</span>Role<span class="token punctuation">)</span> jedisTemlate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>redisScript<span class="token punctuation">,</span> serializer<span class="token punctuation">,</span> serializer<span class="token punctuation">,</span> keyList<span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h2 id="6-执行Lua文件"><a href="#6-执行Lua文件" class="headerlink" title="6.执行Lua文件"></a>6.执行Lua文件</h2><h3 id="6-1-在服务端编写Lua文件代码"><a href="#6-1-在服务端编写Lua文件代码" class="headerlink" title="6.1 在服务端编写Lua文件代码"></a>6.1 在服务端编写Lua文件代码</h3><p><img src="images/3-2%20Lua%E8%84%9A%E6%9C%AC/image-20200727174113640.png" alt="image-20200727174113640"></p><p>test.lua</p><pre class=" language-lua"><code class="language-lua"><span class="token keyword">if</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"get"</span><span class="token punctuation">,</span>KEYS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">==</span>ARGV<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">then</span>    <span class="token keyword">return</span> redis<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"del"</span><span class="token punctuation">,</span>KEY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">else</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token keyword">end</span></code></pre><p>执行如下命令</p><pre class=" language-shell"><code class="language-shell">cat lua/test.lua | redis-cli -a kujin script load --pipe</code></pre><blockquote><p>script load 这个命令会在redis服务器缓存lua脚本，并返回脚本内容的SHA1校验和</p><p>java端调用时，传入CHA1校验和作为参数，redis服务端会知道调用哪个lua脚本</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * 执行Lua文件     */</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">excuLuaFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Redis redis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            redis<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>jedis <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//1.获取一个随机字符串</span>                String value <span class="token operator">=</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//2. 获取锁</span>                String k1 <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SetParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ex</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//3. 判断是否成功拿到锁</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>k1<span class="token operator">!=</span>null<span class="token operator">&amp;&amp;</span><span class="token string">"ok"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>k1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//4具体的业务操作</span>                    jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"site"</span><span class="token punctuation">,</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"site"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment" spellcheck="true">//5 释放锁</span>                    jedis<span class="token punctuation">.</span><span class="token function">evalsha</span><span class="token punctuation">(</span><span class="token string">"b8059ba43af6ffe8bed3db65bac35d452f8115d8"</span><span class="token punctuation">,</span> Collections<span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Collections<span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"没拿到锁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p><img src="images/3-2%20Lua%E8%84%9A%E6%9C%AC/image-20200727181837205.png" alt="image-20200727181837205"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1分布式锁</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/3-1-fen-bu-shi-suo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/3-1-fen-bu-shi-suo/</url>
      
        <content type="html"><![CDATA[<h1 id="分布式锁场景"><a href="#分布式锁场景" class="headerlink" title="分布式锁场景"></a>分布式锁场景</h1><h2 id="1-问题场景"><a href="#1-问题场景" class="headerlink" title="1. 问题场景"></a><strong>1. 问题场景</strong></h2><blockquote><p>例如一个简单的用户操作，</p><p>一个线程去修改用户状态，首先从数据库读出用户状态，然后再内存中修改，修改完成后再存储</p><p>在多线程中，由于读取，修改，存储，是三个操作，不是原子操作，可能会线程操作冲突</p></blockquote><p>可以使用分布式锁限制程序的并发操作</p><p><strong>原理</strong></p><blockquote><p>分布式锁，通过进入线程占位，当别的线程操作时，发现已经有人占位了，就会放弃或稍后再试</p></blockquote><p>在Redis中，占位一般用setnx 指令，先进来的线程先占位，线程的操作执行完成后，再del指令释放位子</p><pre class=" language-java"><code class="language-java">Redis redis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        redis<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>jedis <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            Long setnx <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">setnx</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">,</span> <span class="token string">"v1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>setnx<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//没人占位</span>                jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//删除k1，释放位置</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//有人占位,停止</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>上述代码存在问题，如果jedis在set get中出现异常导致del 指令没有运行，这样key1无法释放，后面的请求全部阻塞，形成死锁</strong></p><blockquote><p>解决方法，给锁一个过期时间，确保一定时间之后，能够得到释放</p></blockquote><pre class=" language-java"><code class="language-java">Redis redis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        redis<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>jedis <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            Long setnx <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">setnx</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">,</span> <span class="token string">"v1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>setnx<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                jedis<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//设置5秒的过期时间，防止执行过程中异常导致锁无法释放的问题</span>                <span class="token comment" spellcheck="true">//没人占位</span>                jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//删除k1，释放位置</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//有人占位,停止</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>这样改造之后还存在一个问题，就是在获取锁和设置过期时间服务器挂掉了，这个时候形成死锁</strong></p><blockquote><p>为了解决这个问题，Redis2.8开始，setnx和expire可以通过一个命令一起执行</p></blockquote><pre class=" language-java"><code class="language-java">Redis redis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Redis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>redis<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>jedis <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/*     Long setnx = jedis.setnx("k1", "v1");    jedis.expire("k1",5);//设置5秒的过期时间，防止执行过程中异常导致锁无法释放的问题     */</span>    <span class="token comment" spellcheck="true">//两个指令合成一个</span>    String set <span class="token operator">=</span> jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">,</span> <span class="token string">"v1"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SetParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ex</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"OK"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//没人占位</span>        jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        jedis<span class="token punctuation">.</span><span class="token function">del</span><span class="token punctuation">(</span><span class="token string">"k1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//删除k1，释放位置</span>    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//有人占位,停止</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="2-解决超时时间"><a href="#2-解决超时时间" class="headerlink" title="2.解决超时时间"></a>2.解决超时时间</h2><blockquote><p>为了防止业务代码，在执行的过程中抛出异常，我们给每一个锁添加一个超时时间，超时过后自动释放，</p><p>新的问题，如果执行业务非常耗时，可能会导致紊乱</p></blockquote><p><strong>举个栗子</strong></p><blockquote><p>第一个线程获取到锁，开始执行业务，业务执行8秒，这样会在第一个线程的任务还未执行成功，锁5秒以过期， 导致第二个线程会获取到锁执行，在第二了线程执行了3秒，第一个线程执行完成释放资源，第三个线程进来</p></blockquote><blockquote><p>对于这个问题解决方式</p><ol><li>避免执行耗时操作</li><li>将锁的value设置为一个随机字符串，每次释放时检查字符串是否一致，一致释放，否则 不释放</li></ol></blockquote><p><strong>第二种方式不具有原子性，为了解决这个问题，引入Lua脚本</strong></p><p>[Lua脚本](3-2 Lua脚本.md)</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-2 数据结构的常用命令</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/2-2-shu-ju-jie-gou-de-chang-yong-ming-ling/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/2-2-shu-ju-jie-gou-de-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Redis清空命令—flushdb</p><h1 id="1-字符串数据结构命令"><a href="#1-字符串数据结构命令" class="headerlink" title="1.字符串数据结构命令"></a>1.字符串数据结构命令</h1><h1 id="2-链表数据结构命令"><a href="#2-链表数据结构命令" class="headerlink" title="2.链表数据结构命令"></a>2.链表数据结构命令</h1><h1 id="3-哈希数据结构命令"><a href="#3-哈希数据结构命令" class="headerlink" title="3.哈希数据结构命令"></a>3.哈希数据结构命令</h1><h1 id="4-集合数据结构命令"><a href="#4-集合数据结构命令" class="headerlink" title="4.集合数据结构命令"></a>4.集合数据结构命令</h1><h1 id="5-有序集合串数据结构命令"><a href="#5-有序集合串数据结构命令" class="headerlink" title="5.有序集合串数据结构命令"></a>5.有序集合串数据结构命令</h1><h1 id="6-基数的含义和命令"><a href="#6-基数的含义和命令" class="headerlink" title="6.基数的含义和命令"></a>6.基数的含义和命令</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1-数据结构表格</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/2-1-shu-ju-jie-gou-biao-ge/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/2-1-shu-ju-jie-gou-biao-ge/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="六种基本类型"><a href="#六种基本类型" class="headerlink" title="六种基本类型"></a>六种基本类型</h1><table><thead><tr><th>数据类型</th><th>数据类型存储的值</th><th>说明</th></tr></thead><tbody><tr><td>String 字符串</td><td>保存字符串.整数, 浮点数</td><td>可以对字符串进行操作,增加字符串或求子串,如果时整数或者浮点数,可以计算,比如自增</td></tr><tr><td>List 列表</td><td>它是一个链表,每一个节点都包含字符串</td><td>Redis支持从链表的两端插入</td></tr><tr><td>set 集合</td><td>它是一个收集器, 但是是无序的,它里面每一个元素都是字符串,而且是独一无二的,各不相同</td><td>可以新增,读取,删除删除单个元素,检测一个元素是否在集合中,计算和其他集合的交集,并集,和差集等;随机从集合中读取元素</td></tr><tr><td>Hash 哈希散列表</td><td>它类似于java语言中map 是一个键值对应的无序列表</td><td>可以增删改查单个键值对,也可以获取所有的键值对</td></tr><tr><td>Zset 有序集合</td><td>可以包含字符串,整数,浮点数,分值(score),元素的排列是依据分值的大小决定的</td><td>可以增删改查元素,根据分值的范围或成员来获取键值对</td></tr><tr><td>HyperLogLog 基数</td><td>计算重复的值,以确定存储的数量</td><td>只提供基数的运算,不提供返回的功能</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-2-Redis启动</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/1-2-redis-qi-dong/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/1-2-redis-qi-dong/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="启动-Redis"><a href="#启动-Redis" class="headerlink" title="启动 Redis"></a>启动 Redis</h1><pre><code>$ redis-server</code></pre><h2 id="后台启动Redis"><a href="#后台启动Redis" class="headerlink" title="后台启动Redis"></a>后台启动Redis</h2><ol><li><p>配置文件</p><pre><code>vi redis-confdaemonize no 改为 daemonize yes:wq 退出</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200912161551897.png" alt="image-20200912161551897"></p></li><li><p>后台启动成功</p><pre><code>redis-server redis.conf</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200912161954239.png" alt="image-20200912161954239"></p></li><li></li></ol><h3 id="查看-redis-是否启动？"><a href="#查看-redis-是否启动？" class="headerlink" title="查看 redis 是否启动？"></a>查看 redis 是否启动？</h3><pre><code>$ redis-cli</code></pre><p>以上命令将打开以下终端：</p><pre><code>redis 127.0.0.1:6379&gt;</code></pre><p>127.0.0.1 是本机 IP ，6379 是 redis 服务端口。现在我们输入 PING 命令。</p><pre><code>redis 127.0.0.1:6379&gt; pingPONG</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1-Redis安装</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/1-1-redis-an-zhuang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/redis-xue-xi/1-1-redis-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="Redis安装方式"><a href="#Redis安装方式" class="headerlink" title="Redis安装方式"></a>Redis安装方式</h1><p>官网：<a href="https://redis.io/" target="_blank" rel="noopener">https://redis.io/</a></p><p>官方文档：<a href="https://redis.io/documentation" target="_blank" rel="noopener">https://redis.io/documentation</a></p><h2 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h2><p>(直接，不过gcc环境太麻烦，还容易出错)</p><h3 id="准备好gcc环境"><a href="#准备好gcc环境" class="headerlink" title="准备好gcc环境"></a>准备好gcc环境</h3><pre><code>yum install -y cppyum install -y binutilsyum install -y glibcyum install -y glibc-kernheadersyum install -y glibc-commonyum install -y glibc-develyum install -y gccyum install -y make# 升级gccyum -y install centos-release-sclyum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutilsscl enable devtoolset-9 bash</code></pre><h3 id="下载，-解压，编译，安装"><a href="#下载，-解压，编译，安装" class="headerlink" title="下载， 解压，编译，安装"></a>下载， 解压，编译，安装</h3><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200708114704238.png" alt="image-20200708114704238" style="zoom:50%;"><pre class=" language-shell"><code class="language-shell">wget http://download.redis.io/releases/redis-6.0.5.tar.gztar xzf redis-6.0.5.tar.gzcd redis-6.0.5make# 注意 如果提示错误 In file included from adlist.c:34:0: zmalloc.h:50:31: fatal error: jemalloc/# 执行 make MALLOC=libcmake install</code></pre><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><pre class=" language-shell"><code class="language-shell">redis-server redis.conf</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200708121651755.png" alt="image-20200708121651755"></p><h2 id="使用Docker安装"><a href="#使用Docker安装" class="headerlink" title="使用Docker安装"></a>使用Docker安装</h2><p>（提前安装运行docker）</p><pre class=" language-shell"><code class="language-shell">docker pull redis</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200708113748295.png" alt="image-20200708113748295"></p><h2 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h2><p>当前目录下创建redis文件夹,redis目录下创建 redis.conf </p><p> redis.conf 设置配置信息</p><pre class=" language-groovy"><code class="language-groovy">#修改为守护模式daemonize yes#设置进程锁文件pidfile redis<span class="token operator">/</span>redis<span class="token operator">.</span>pid#端口port <span class="token number">6379</span>#客户端超时时间timeout <span class="token number">300</span>#日志级别loglevel debug#日志文件位置logfile redis<span class="token operator">/</span>log<span class="token operator">-</span>redis<span class="token operator">.</span>log#设置数据库的数量，默认数据库为<span class="token number">0</span>，可以使用SELECT <span class="token operator">&lt;</span>dbid<span class="token operator">></span>命令在连接上指定数据库iddatabases <span class="token number">8</span>##指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合#save <span class="token operator">&lt;</span>seconds<span class="token operator">></span> <span class="token operator">&lt;</span>changes<span class="token operator">></span>#Redis默认配置文件中提供了三个条件：save <span class="token number">900</span> <span class="token number">1</span>save <span class="token number">300</span> <span class="token number">10</span>save <span class="token number">60</span> <span class="token number">10000</span>#指定存储至本地数据库时是否压缩数据，默认为yes，Redis采用LZF压缩，如果为了节省CPU时间，#可以关闭该#选项，但会导致数据库文件变的巨大rdbcompression yes#指定本地数据库文件名dbfilename dump<span class="token operator">.</span>rdb#指定本地数据库路径dir redis<span class="token string">/db/</span>#指定是否在每次更新操作后进行日志记录，Redis在默认情况下是异步的把数据写入磁盘，如果不开启，可能#会在断电时导致一段时间内的数据丢失。因为 redis本身同步数据文件是按上面save条件来同步的，所以有#的数据会在一段时间内只存在于内存中appendonly no#指定更新日志条件，共有<span class="token number">3</span>个可选值：#no：表示等操作系统进行数据缓存同步到磁盘（快）#always：表示每次更新操作后手动调用<span class="token function">fsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>将数据写到磁盘（慢，安全）#everysec：表示每秒同步一次（折衷，默认值）appendfsync everysec#redis配置外网访问：<span class="token keyword">protected</span><span class="token operator">-</span>mode no#配置密码requirepass root</code></pre><h2 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h2><pre class=" language-shell"><code class="language-shell">docker run -p 6379:6379 --name redis -v $PWD/redis.conf:/root/redis/redis.conf -v $PWD/data:/root/redis/data -d redis redis-server</code></pre><h2 id="进入容器并开启客户端查看redis信息"><a href="#进入容器并开启客户端查看redis信息" class="headerlink" title="进入容器并开启客户端查看redis信息"></a>进入容器并开启客户端查看redis信息</h2><pre class=" language-shell"><code class="language-shell">docker exec -it myredis redis-cli</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据表的基本操作</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/jing-dian-an-li/shu-ju-biao-de-ji-ben-cao-zuo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/jing-dian-an-li/shu-ju-biao-de-ji-ben-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><pre class=" language-plsql"><code class="language-plsql">-- 创建数据表,并创建主键create table customers(    c_num number(11) primary key,    c_name varchar2(50),    c_contact varchar2(50),    c_city varchar2(50),    c_birth date not null);-- 删除数据drop table customers;-- 修改列类型alter table customers modify c_name varchar2(70);-- 修改列名alter table customers rename column c_contact to c_phone;-- 查询数据表select * from customers;-- 添加列alter table customers add c_gender varchar2(1);-- 修改表名rename customers to customers_info;-- 查询表select * from customers_info;-- 删除某列alter table customers_info drop column c_city;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>创建数据表</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/zhi-shi-dian-gai-gua/chuang-jian-shu-ju-biao/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/zhi-shi-dian-gai-gua/chuang-jian-shu-ju-biao/</url>
      
        <content type="html"><![CDATA[<h2 id="主键-外键-约束"><a href="#主键-外键-约束" class="headerlink" title="主键 外键 约束"></a>主键 外键 约束</h2><ol><li><p>创建数据库 dbca</p><ol><li>删除数据库 dbca</li><li>创建数据表 create table</li></ol></li><li><p>使用主键约束 primary key</p><ol><li><p>多字段联合主键 primary key {字段1,字段2,…}</p></li><li><p>使用alter table 为表添加主键约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 数据表名 add constraints 约束名称 primary key (字段名称)</code></pre></li><li><p>移除主键约束 </p><pre class=" language-plsql"><code class="language-plsql">alter table 数据表名 drop constraints 约束名称</code></pre></li></ol></li><li><p>使用外键约束</p><blockquote><p>外键用来连接两个表的数据之间键列连接</p><p>一个表可以有一个或多个外键</p><p>外键是表中的一个字段 可以不是本表的主键,但必须对应另一个表的主键</p><p>外键允许为空</p><p>插入有数据的值 外键的值必须可以在父表中找到</p><p>主表(父表) 相关联字段中主键所在的表</p><p>从表 (子表) 相关联字段中外键所在的表即从表</p></blockquote><ol><li><p>创建外键 </p><pre class=" language-plsql"><code class="language-plsql">constraint 自定义外键名 foreign key(外键列名) references 父表(主键)</code></pre><pre class=" language-plsql"><code class="language-plsql">alter table 表名 add constraint 自定义外键名 foreign key (外键列名) references 父表(主键)</code></pre></li><li><p>移除外键约束 </p><pre class=" language-plsql"><code class="language-plsql">alter table 数据表名称 drop constraints 约束名称 ;</code></pre></li></ol></li><li><p>使用非空约束</p><p>字段的值不能为空</p><ol><li><p>创建非空约束</p><pre class=" language-plsql"><code class="language-plsql">字段名 数据类型 not null;</code></pre></li><li><p>修改表时添加非空约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 数据名称 modify 字段名称 not null;</code></pre></li><li><p>移除非空约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 字段名称 modify 字段名称 null;</code></pre></li></ol></li><li><p>使用唯一性约束,可以为空</p><ol><li><p>创建非空约束</p><pre class=" language-plsql"><code class="language-plsql">字段名 数据类型 unique;# 定义完唯一约束 语法constraint 自定义约束名 unique(约束字段) </code></pre></li><li><p>修改表时添加唯一约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 数据名称 add constraint 约束名称 unique(字段名称);</code></pre></li><li><p>移除唯一型约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 数据表名 drop constraint 约束条件</code></pre></li></ol></li><li><p>使用默认约束</p><p>指定某列的默认值</p><pre class=" language-plsql"><code class="language-plsql">字段名 数据类型 default 默认值</code></pre></li><li><p>检查约束</p><p>check约束 规定每一列能够输入的值</p><ol><li><p>创建检查约束</p><pre class=" language-plsql"><code class="language-plsql">constraint 检查约束名称 check (检查条件)</code></pre></li><li><p>在修改表示添加检查约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 数据名 add constraint 约束名称 check(检查条件)</code></pre></li><li><p>移除检查约束</p><pre class=" language-plsql"><code class="language-plsql">alter table 数据表名 drop constraint 约束名称</code></pre></li></ol></li><li><p>设置表的属性值自动增加</p><p>系统自动增加字段的主键值,初始值为1</p><pre class=" language-plsql"><code class="language-plsql">字段名 数据类型 generated by default as identity</code></pre></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改数据表</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/zhi-shi-dian-gai-gua/xiu-gai-shu-ju-biao/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/zhi-shi-dian-gai-gua/xiu-gai-shu-ju-biao/</url>
      
        <content type="html"><![CDATA[<h2 id="修改数据表"><a href="#修改数据表" class="headerlink" title="修改数据表"></a>修改数据表</h2><h3 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h3><h2 id="修改字段数据类型"><a href="#修改字段数据类型" class="headerlink" title="修改字段数据类型"></a>修改字段数据类型</h2><h2 id="修改字段名"><a href="#修改字段名" class="headerlink" title="修改字段名"></a>修改字段名</h2><h2 id="添加字段"><a href="#添加字段" class="headerlink" title="添加字段"></a>添加字段</h2><h3 id="添加无完整性约束条件字段"><a href="#添加无完整性约束条件字段" class="headerlink" title="添加无完整性约束条件字段"></a>添加无完整性约束条件字段</h3><h3 id="添加有完整性的约束条件字段"><a href="#添加有完整性的约束条件字段" class="headerlink" title="添加有完整性的约束条件字段"></a>添加有完整性的约束条件字段</h3><pre class=" language-plsql"><code class="language-plsql">alter table </code></pre><h2 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h2><pre class=" language-plsql"><code class="language-plsql">alter table 表名 drop column 字段名</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle表的管理</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/wan-zhuan-oracle/oracle-biao-de-guan-li/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/wan-zhuan-oracle/oracle-biao-de-guan-li/</url>
      
        <content type="html"><![CDATA[<h2 id="Oracle表的管理"><a href="#Oracle表的管理" class="headerlink" title="Oracle表的管理"></a>Oracle表的管理</h2><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><h4 id="表名和列"><a href="#表名和列" class="headerlink" title="表名和列"></a>表名和列</h4><ul><li>必须以字母开头</li><li>长度不能超过30字符</li><li>不能使用oracle的保留字</li><li>只能使用A-Z a-z 0-9 $#等</li></ul><h4 id="oracle支持的数据类型"><a href="#oracle支持的数据类型" class="headerlink" title="oracle支持的数据类型"></a>oracle支持的数据类型</h4><ul><li><p>字符型</p><ul><li><p>char 定长 最大2000字符</p><p>查询速度快  但占用固定空间</p></li><li><p>varchar2(20) 变长 最大400字符</p><p>查询速度慢 节省空间</p></li><li><p>clob 字符型的大数据 最大4G</p></li></ul></li><li><p>数字类型</p><ul><li>number 范围10的+-38次方</li><li>number(5,2) 表示小数 五位有效数 2位小数</li><li>number(5) 表示一个五位整数</li></ul></li><li><p>图片(一般对于数据保密性高的文件才使用)</p><ul><li>blob 二进制 可以存放图片/声音 4G</li></ul></li></ul><h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><h2 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h2><h2 id="复杂查询"><a href="#复杂查询" class="headerlink" title="复杂查询"></a>复杂查询</h2><h2 id="Oracle-数据库的创建"><a href="#Oracle-数据库的创建" class="headerlink" title="Oracle 数据库的创建"></a>Oracle 数据库的创建</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle用户管理-用户权限</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/wan-zhuan-oracle/oracle-yong-hu-guan-li-yong-hu-quan-xian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/wan-zhuan-oracle/oracle-yong-hu-guan-li-yong-hu-quan-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle用户权限"><a href="#Oracle用户权限" class="headerlink" title="Oracle用户权限"></a>Oracle用户权限</h1><blockquote><p>oracle安装完成后会生成一些用户</p><p>sys用户 :超级管理员</p><p>system用户: </p><p>自己创建的普通用户</p></blockquote><h2 id="操作普通用户"><a href="#操作普通用户" class="headerlink" title="操作普通用户"></a>操作普通用户</h2><blockquote><ol><li>登录管理员用户</li><li>创建普通用户</li><li>给普通用户授予权限</li><li>修改用户密码(可选)</li><li>删除用户 (管理员权限)(不可自杀)  </li></ol></blockquote><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 1 连接到管理员用户 用户名/密码</span>conn system<span class="token operator">/</span>oracle123<span class="token comment" spellcheck="true"># 2 创建普通用户</span><span class="token keyword">create</span> <span class="token keyword">user</span> kujin identified <span class="token keyword">by</span> oracle123<span class="token comment" spellcheck="true"># 3 给普通用户赋权限</span><span class="token keyword">grant</span> <span class="token keyword">connect</span> <span class="token keyword">to</span> kujin<span class="token comment" spellcheck="true"># 4 修改密码 管理员>普通用户</span>password 用户名<span class="token comment" spellcheck="true"># 5 删除用户 如果用户有表 添加cascade</span><span class="token keyword">drop</span> <span class="token keyword">user</span> 用户名 <span class="token punctuation">[</span><span class="token keyword">cascade</span><span class="token punctuation">]</span></code></pre><h3 id="Oracle权限"><a href="#Oracle权限" class="headerlink" title="Oracle权限"></a>Oracle权限</h3><p>权限分类</p><ul><li><p>系统权限：系统规定用户使用数据库的权限。（系统权限是对用户而言*)*。</p></li><li><p>实体(对象)权限：某种权限用户对其它用户的表或视图的存取权限。（是针对表或视图而言的）。</p><p>select    inset    update    delete    all(对以上的统称) create index ….</p></li></ul><h3 id="角色"><a href="#角色" class="headerlink" title="角色"></a>角色</h3><p>预定义角色,以下是一些主要的</p><ul><li>connect</li><li>dba (权限最大)</li><li>resource</li></ul><h2 id="用户关于权限使用场景"><a href="#用户关于权限使用场景" class="headerlink" title="用户关于权限使用场景"></a>用户关于权限使用场景</h2><ul><li><p>用户 y1 创建 表 tmp</p><ul><li><p>用户需要在表空间system 权限</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">grant</span> resource <span class="token keyword">to</span> y1</code></pre></li></ul></li><li><p>希望 y1 使用 y2 中的tmp表</p><ul><li><p>y2 授权 y1 可以查询tmp表</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">grant</span> <span class="token keyword">select</span> <span class="token keyword">on</span> tmp <span class="token keyword">to</span> y1</code></pre></li><li><p>同理 select 可以更换为 其他对象权限</p></li></ul></li><li><p>收回 y1 对y2表操作的权限 (切换到y2用户下)</p><pre><code>revoke select on tmp from y1</code></pre></li><li><p>希望 y2 可以查询 y1中tmp表  还希望y2 可以把这个权限 给被人</p><ul><li>with grant option </li></ul><pre class=" language-oracle"><code class="language-oracle">grant select on tmp to y2 with grant option</code></pre><ul><li>如果y1 收回了y2 可以查询tmp表的权限 那么 y2 赋予其他人查询该表的权限 失效</li></ul></li></ul><h2 id="使用profile管理用户口令"><a href="#使用profile管理用户口令" class="headerlink" title="使用profile管理用户口令"></a>使用profile管理用户口令</h2><blockquote><p>profile是口令限制, 资源限制的命令集合</p><p>当建立数据库时 oracle 会自动建立名称为default的profile</p><p>当建立用户没有指定prifile 选项时 那么 oracle 就会 将default分配给用户</p></blockquote><h3 id="1-账户锁定"><a href="#1-账户锁定" class="headerlink" title="1. 账户锁定"></a>1. 账户锁定</h3><blockquote><p>指定该账户 登录时 最多可以输入密码次数</p><p>可以指定用户锁定的时间 一般用dba 的身份 去执行该命令</p></blockquote><pre class=" language-plsql"><code class="language-plsql"># 创建profile文件# create profile 规则名称# limit faile_login_attempts 3 限制登录失败的次数为3次# password_lock_time 2 锁定时间为2天create profile lock_account limit faild_login_attempts 3 password_lock_time 2;# 更改用户配置文件alter user y1 profile lock_account</code></pre><ul><li><p>给用户解锁 (管理员权限)</p><pre><code>alter user y1 account unlock</code></pre></li><li><p>终止口令</p><p>为了让用户定期修改密码 可以使用终止口令的指令 来完成</p><p>统一这个命令也需要dba身份来操作</p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 要求用户每隔0天修改 密码 宽限期2天</span><span class="token keyword">create</span> profile myprofile <span class="token keyword">limit</span> password_life_time <span class="token number">10</span> password_grace_time <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 修改配置</span><span class="token keyword">alter</span> <span class="token keyword">user</span> y2 profile lock_account</code></pre></li><li><p>口令历史</p><p>如果希望用户在修改密码时, 不能使用以前的密码 可使用口令历史</p><p>当用户修改密码时 Oracle就会对新旧密码进行比较 当发现密码一样时</p><p>提示用户重新输入密码</p><pre><code># 建立profile# password_reuse_time 指定口令可以重用的时间create profile password_history limit password_ilfe_itme 10 password_grace_time 2 password_reuse_time 10</code></pre></li><li><p>删除profile</p><blockquote><p>当不需要某个profile文件 可以删除该文件 [cascade] 文件被使用强行删除</p></blockquote><pre><code>drop profile password_history [cascade]</code></pre></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLPlus学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/guan-fang-wen-dang-xue-xi/sqlplus-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/guan-fang-wen-dang-xue-xi/sqlplus-xue-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="启动-SQL-Plus-并连接到默认数据库"><a href="#启动-SQL-Plus-并连接到默认数据库" class="headerlink" title="启动 SQL*Plus 并连接到默认数据库"></a><strong>启动 SQL*Plus 并连接到默认数据库</strong></h2><pre><code># 启动sql*plus 按提示输入用户名和密码sqlplus# 启动sql*plus 按提示输入密码sqlplus username# 启动 并连接到指定数据库 按提示输入密码sqlplus username@connect_identifier</code></pre><p>查看是否有demo 文件脚本</p><pre><code>$ORACLE_HOME/demo/schema/human_resources/hr_main.sql</code></pre><h2 id="连接到其他数据库"><a href="#连接到其他数据库" class="headerlink" title="连接到其他数据库"></a>连接到其他数据库</h2><pre><code>SQL&gt; connect username@connect_identifier</code></pre><p>运行hr脚本</p><pre class=" language-plsql"><code class="language-plsql">#默认回车 即可@?/demo/schema/human_resources/hr_main.sql</code></pre><p>运行第一个查询</p><pre class=" language-plsql"><code class="language-plsql">DESCRIBE EMP_DETAILS_VIEW</code></pre><pre class=" language-plsql"><code class="language-plsql">#解锁 HR 帐户ALTER USER HR IDENTIFIED BY oracle23 ACCOUNT UNLOCK;</code></pre><pre class=" language-plsql"><code class="language-plsql">COLUMN FIRST_NAME HEADING "First Name"COLUMN LAST_NAME HEADING "Family Name"SELECT FIRST_NAME, LAST_NAMEFROM EMP_DETAILS_VIEWWHERE LAST_NAME LIKE 'K%';</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7用户管理和安全</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/guan-fang-wen-dang-xue-xi/7-yong-hu-guan-li-he-an-quan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/guan-fang-wen-dang-xue-xi/7-yong-hu-guan-li-he-an-quan/</url>
      
        <content type="html"><![CDATA[<h1 id="管理用户账号和安全"><a href="#管理用户账号和安全" class="headerlink" title="管理用户账号和安全"></a>管理用户账号和安全</h1><h2 id="用户账号"><a href="#用户账号" class="headerlink" title="用户账号"></a>用户账号</h2><blockquote><p>用户要访问您的数据库，您必须创建用户帐户，并授予这些帐户适当的数据库访问权限。用户帐户由用户名标识，并定义用户的属性，包括以下内容：</p></blockquote><ul><li>身份验证方法</li><li>数据库身份验证的密码</li><li>永久和临时数据存储的默认表空间</li><li>表空间配额</li><li>帐户状态（锁定或解锁）</li><li>密码状态（过期与否）</li></ul><blockquote><p>创建用户帐户时，不仅必须为该帐户分配用户名、密码和默认表空间，还必须执行以下操作：</p></blockquote><ul><li>向帐户授予适当的系统权限、对象权限和角色。</li><li>如果用户将创建数据库对象，则为用户帐户在将创建对象的每个表空间上分配空间使用配额。</li></ul><h3 id="预定义用户账户"><a href="#预定义用户账户" class="headerlink" title="预定义用户账户"></a>预定义用户账户</h3><ol><li>数据库会自动创建多个用户账户</li><li>除了sys system 账号 其他账号都是锁定且密码过期的</li><li><strong>锁定帐户</strong>是禁用登录的帐户。您不能删除内部帐户，也不得使用它们登录到数据库。</li></ol><h3 id="普通用户"><a href="#普通用户" class="headerlink" title="普通用户"></a>普通用户</h3><blockquote><p>公共用户是数据库用户，该用户在根数据库以及每个现有和未来可插入数据库 （PDB） 中具有相同的标识。每个公共用户可以连接到根目录内以及在公共用户具有权限的任何 PDB 内执行操作。</p></blockquote><p><strong>特征</strong></p><ul><li><p>普通用户可以登录到具有权限的任何容器（包括 ）。<code>CDB$ROOT``CREATE SESSION</code></p><p>普通用户不必在每个容器中具有相同的权限。例如，用户可能具有在根目录和一个 PDB 中创建会话的权限，但不必在不同 PDB 中创建会话。由于具有适当权限的通用用户可以在容器之间切换，因此根中的普通用户可以管理 PD。<code>c##dba</code></p></li><li><p>创建普通用户需要以<code>c##/C##</code>开头 。（Oracle 提供的通用用户名没有此限制。</p><p>本地用户名不得以字符或 开始。<code>c##``C##</code></p></li><li><p>普通用户的名称必须仅包含 ASCII 或 EBCDIC 字符。</p></li><li><p>每个公共用户在所有容器中都有唯一的命名。</p><p>公共用户驻留在根中，但必须能够连接到具有相同标识的每个 PDB。</p></li><li><p>每个容器中，普通用户的架构可能不同。</p><p>例如，如果是对多个容器具有权限的通用用户，则每个容器中的架构可能包含不同的对象。<code>c##dba``c##dba</code></p></li></ul><h2 id="用户权限和角色"><a href="#用户权限和角色" class="headerlink" title="用户权限和角色"></a>用户权限和角色</h2><blockquote><p>用户权限提供基本的数据库安全性级别。它们旨在控制用户对数据的访问并限制用户可以执行的 SQL 语句类型。创建用户时，应授予权限以使用户能够连接到数据库、运行查询和进行更新、创建架构对象等。</p></blockquote><p>用户权限的主要类型如下：</p><ul><li><strong>系统权限</strong>– system 特权使用户可以执行特定操作，或对特定类型的任何架构对象执行操作。例如，系统特权允许用户在与该用户关联的架构中创建表，并且系统特权允许用户创建数据库用户。<code>CREATE TABLE``CREATE USER</code></li><li><strong>对象权限</strong>-对象特权使用户可以对特定架构对象执行特定操作。不同类型的架构对象具有不同的对象权限。从表中选择行或从表中删除行的权限是对象权限的示例。<code>EMPLOYEES``DEPARTMENTS</code></li></ul><table><thead><tr><th align="left">角色名称</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>CONNECT</code></td><td align="left">使用户能够连接到数据库。将此角色授予任何需要数据库访问的用户或应用程序。</td></tr><tr><td align="left"><code>RESOURCE</code></td><td align="left">使用户能够创建、修改和删除与该用户关联的架构中某些类型的架构对象。仅向开发人员和必须创建架构对象的其他用户授予此角色。此角色授予创建对象系统权限的子集。例如，它授予系统特权，但不授予系统特权。它只授予以下特权： ， ， ， ， ， ， ， ，<code>CREATE TABLE``CREATE VIEW``CREATE CLUSTER``CREATE INDEXTYPE``CREATE OPERATOR``CREATE PROCEDURE``CREATE SEQUENCE``CREATE TABLE``CREATE TRIGGER``CREATE TYPE</code></td></tr><tr><td align="left"><code>DBA</code></td><td align="left">使用户能够执行大多数管理功能，包括创建用户和授予权限;创建和授予角色;在任何架构中创建、修改和删除架构对象;和更多。它授予所有系统权限，但不包括启动或关闭数据库实例的权限。默认情况下，它授予用户 和 。<code>SYS``SYSTEM</code></td></tr></tbody></table><h3 id="公共角色"><a href="#公共角色" class="headerlink" title="公共角色"></a>公共角色</h3><blockquote><p>一个公共角色是存在于根目录以及每个现有和未来可插拔数据库 （PDB） 中的数据库角色。公共角色对于跨容器操作很有用，可确保公共用户在每个容器中都有角色。</p></blockquote><p>用户只能对公共角色执行常见操作，例如，在满足以下条件时通常授予该角色的权限：</p><ul><li>用户是当前容器为 root 的通用用户。</li><li>用户通常具有授予的权限，这意味着该权限适用于所有容器。<code>SET CONTAINER</code></li><li>用户具有控制执行指定操作的能力的权限，并且通常已授予此权限。</li></ul><h3 id="本地用户"><a href="#本地用户" class="headerlink" title="本地用户"></a>本地用户</h3><blockquote><p>本地角色仅存在于单个可插入数据库 （PDB） 中，就像非 CDB 中的角色仅存在于非 CDB 中一样。本地角色只能包含应用于角色存在的容器中的角色和特权。</p><p>同一多租户容器数据库 （CDB） 中的 PD 可以包含具有相同名称的本地角色。例如，用户创建的角色可能同时存在于 和 PD 中。这些角色是完全独立的，就像它们在单独的非 CB 中一样。<code>pdbadmin``hrpdb``salespdb</code></p></blockquote><h3 id="特权和角色授予"><a href="#特权和角色授予" class="headerlink" title="特权和角色授予"></a>特权和角色授予</h3><ol><li>多租户容器CDB 中的用户可以授予角色和特权</li><li>本地用户通常不能授予角色和特权</li></ol><h2 id="管理账户和特权"><a href="#管理账户和特权" class="headerlink" title="管理账户和特权"></a>管理账户和特权</h2><h3 id="SYS和系统用户"><a href="#SYS和系统用户" class="headerlink" title="SYS和系统用户"></a>SYS和系统用户</h3><blockquote><p>安装 Oracle 数据库时，将自动创建 和管理用户帐户。它们都是使用安装时提供的密码创建的，并且它们都自动授予该角色。<code>SYS``SYSTEM``DBA</code></p></blockquote><ul><li><p><code>SYS</code></p><p>此帐户可以执行所有管理功能。数据库数据字典的所有基本（基础）表和视图都存储在架构中。这些基表和视图对于 Oracle 数据库的操作至关重要。为了保持数据字典的完整性，架构中的表仅由数据库操作。任何用户或数据库管理员都不应修改它们。不得在架构中创建任何表。</p><p>向用户授予该权限，使用户能够执行高级管理任务，如备份和恢复。<code>SYS``SYSDBA</code></p></li><li><p><code>SYSTEM</code></p><p>此帐户可以执行除以下功能之外的所有管理功能：</p><ul><li>备份和恢复</li><li>数据库升级</li></ul></li></ul><blockquote><p>注意</p><p><code>：SYSBACKUP</code>是另一个自动创建的帐户，用于执行备份和恢复。有关详细信息<a href="https://docs.oracle.com/en/database/oracle/oracle-database/18/admqs/performing-backup-and-recovery.html#GUID-517EDF8B-C2C7-4658-BB4B-2E808A5D1015" target="_blank" rel="noopener">，请参阅”配置用户以执行备份</a>和恢复”。</p></blockquote><h3 id="SYSDBA和SYSOPER系统特权"><a href="#SYSDBA和SYSOPER系统特权" class="headerlink" title="SYSDBA和SYSOPER系统特权"></a>SYSDBA和SYSOPER系统特权</h3><ol><li><code>SYSDBA</code> <code>和 SYSOPER</code>是执行高级管理操作（如创建、启动、关闭、备份或恢复数据库）所需的管理权限。</li><li>系统权限用于完全授权的数据库管理员，系统特权允许用户执行基本操作任务，但无法查看用户数据。<code>SYSDBA``SYSOPER</code></li></ol><blockquote><p>注意：当您以用户<code>SYS 方式连接</code>时，对数据字典表具有无限的权限。确保不修改任何数据字典表。</p></blockquote><h2 id="管理角色"><a href="#管理角色" class="headerlink" title="管理角色"></a>管理角色</h2><blockquote><p><strong>角色</strong>被命名为相关系统和对象权限的组。创建角色，然后将它们分配给用户和其他角色。</p></blockquote><h3 id="查看角色"><a href="#查看角色" class="headerlink" title="查看角色"></a>查看角色</h3><ol><li>使用管理员权限的用户登录</li><li>从”<strong>安全”**菜单中选择</strong>“角色”。**</li></ol><h3 id="创建角色"><a href="#创建角色" class="headerlink" title="创建角色"></a>创建角色</h3><table><thead><tr><th align="left">特权</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>CREATE</code> <code>TABLE</code></td><td align="left">使用户能够创建、修改和删除其架构中的表。</td></tr><tr><td align="left"><code>CREATE</code> <code>VIEW</code></td><td align="left">允许用户创建、修改和删除其架构中的视图。</td></tr><tr><td align="left"><code>CREATE</code> <code>PROCEDURE</code></td><td align="left">允许用户创建、修改和删除其架构中的过程。</td></tr><tr><td align="left"><code>CREATE</code> <code>TRIGGER</code></td><td align="left">允许用户创建、修改和删除其架构中的触发器。</td></tr><tr><td align="left"><code>CREATE</code> <code>SEQUENCE</code></td><td align="left">使用户能够创建、修改和删除其架构中的序列。</td></tr><tr><td align="left"><code>CREATE</code> <code>SYNONYM</code></td><td align="left">允许用户创建、修改和删除其架构中的同义词。</td></tr></tbody></table><h3 id="修改角色"><a href="#修改角色" class="headerlink" title="修改角色"></a>修改角色</h3><blockquote><p>您可以使用 Oracle 企业管理器数据库快递 （EM Express） 修改角色。例如，假设您的应用程序使用 Oracle 流高级队列，并且您确定必须授予开发人员角色并开发和测试其应用程序。您可以编辑角色以授予它这两个高级队列角色。<code>AQ_ADMINISTRATOR_ROLE``AQ_USER_ROLE``APPDEV</code></p></blockquote><p>要修改 APPDEV 角色：</p><ol><li><p>在 EM Express 中，转到角色页面，如”查看角色<a href="https://docs.oracle.com/en/database/oracle/oracle-database/18/admqs/administering-user-accounts-and-security.html#GUID-621A1160-A4AE-4093-83B5-C05CD1CC82C9" target="_blank" rel="noopener">“中</a>所述。</p></li><li><p>选择角色，从”操作”<strong>菜单中选择**</strong>“更改权限”。**<code>APPDEV</code></p><p>将显示”更改权限”页。</p></li><li><p>将 和 角色从左侧的可用系统权限和角色表移动到右侧选定的系统权限和角色表，以授予角色这两个角色。<code>AQ_ADMINISTRATOR_ROLE``AQ_USER_ROLE``APPDEV</code></p></li><li><p>单击**”确定”。**</p><p>将显示确认语句。</p></li></ol><h3 id="删除角色"><a href="#删除角色" class="headerlink" title="删除角色"></a>删除角色</h3><blockquote><p>您可以使用 Oracle 企业管理器数据库快递 （EM Express） 删除角色。删除角色时要小心，因为 EM Express 会删除角色，即使该角色当前已授予一个或多个用户。删除（删除）角色会自动从已授予该角色的所有用户中删除与该角色关联的权限。</p></blockquote><p>要删除角色：</p><ol><li><p>在 EM Express 中，转到角色页面，如”查看角色<a href="https://docs.oracle.com/en/database/oracle/oracle-database/18/admqs/administering-user-accounts-and-security.html#GUID-621A1160-A4AE-4093-83B5-C05CD1CC82C9" target="_blank" rel="noopener">“中</a>所述。</p></li><li><p>选择要删除的角色，然后单击”删除<strong>角色”。</strong></p><p>将显示一个确认页。</p></li><li><p>单击**”确定”。**</p><p>确认消息指示已成功删除该角色。</p></li></ol><h2 id="管理数据库用户账户"><a href="#管理数据库用户账户" class="headerlink" title="管理数据库用户账户"></a>管理数据库用户账户</h2><h2 id="设置数据库密码策略"><a href="#设置数据库密码策略" class="headerlink" title="设置数据库密码策略"></a>设置数据库密码策略</h2><h3 id="关于密码策略"><a href="#关于密码策略" class="headerlink" title="关于密码策略"></a>关于密码策略</h3><p>创建用户帐户时，默认密码策略将分配给该用户帐户。新安装的数据库的默认密码策略包括以下指令：</p><ul><li>用户帐户的密码将在 180 天后自动过期。</li><li>用户帐户在密码过期 7 天后被锁定。</li><li>在 10 次登录尝试失败后，用户帐户将被锁定 1 天。</li></ul><p>另请参阅：</p><ul><li><a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/admqs&amp;id=DBSEG443" target="_blank" rel="noopener">创建密码配置文件</a>的示例的 Oracle 数据库安全指南</li><li><a href="https://docs.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/18/admqs&amp;id=SQLRF01310" target="_blank" rel="noopener">有关 SQL 语句的</a>有关详细信息，请参阅 Oracle 数据库 SQL 语言参考<code>CREATE PROFILE</code></li></ul><h3 id="修改密码策略"><a href="#修改密码策略" class="headerlink" title="修改密码策略"></a>修改密码策略</h3><h2 id="管理用户账户和安全"><a href="#管理用户账户和安全" class="headerlink" title="管理用户账户和安全"></a>管理用户账户和安全</h2><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-4 unique约束</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-4-unique-yue-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-4-unique-yue-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="UNiQUE约束"><a href="#UNiQUE约束" class="headerlink" title="UNiQUE约束"></a>UNiQUE约束</h1><h2 id="什么是unique约束"><a href="#什么是unique约束" class="headerlink" title="什么是unique约束?"></a>什么是unique约束?</h2><ul><li>unique约束, 也称唯一键约束, 用于限定数据表中字段值的唯一性</li></ul><h2 id="添加unique约束"><a href="#添加unique约束" class="headerlink" title="添加unique约束"></a>添加unique约束</h2><ul><li><p>在创建数据表时添加unique约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> table_name<span class="token punctuation">(</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>    <span class="token keyword">constraint</span> constraint_name <span class="token keyword">unique</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li><li><p>在修改数据表时添加unique约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> table_name <span class="token keyword">add</span> constraints constraints constraint_name <span class="token keyword">unique</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span></code></pre></li></ul><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">--在建表时添加唯一约束</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">CONSTRAINT</span> uq_student_tel <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>stu_tel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--删除表</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">;</span><span class="token comment" spellcheck="true">--创建表示添加唯一约束</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--创建表</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--通过修改表，创建唯一约束</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> uq_student_tel <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>stu_tel<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--删除字段的唯一约束</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">drop</span> <span class="token keyword">CONSTRAINT</span> uq_student_tel<span class="token punctuation">;</span> </code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-3 check约束</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-3-check-yue-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-3-check-yue-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="check约束"><a href="#check约束" class="headerlink" title="check约束"></a>check约束</h1><h2 id="什么是check约束"><a href="#什么是check约束" class="headerlink" title="什么是check约束?"></a>什么是check约束?</h2><ul><li>check约束是检查约束,用于限定每一列能够输入的值,以确保数据的正确性</li></ul><h2 id="怎样添加check约束"><a href="#怎样添加check约束" class="headerlink" title="怎样添加check约束?"></a>怎样添加check约束?</h2><ul><li><p>在创建数据表时添加check约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> table_name<span class="token punctuation">(</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>    constrant constranint_name <span class="token keyword">check</span><span class="token punctuation">(</span>约束条件<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">CONSTRAINT</span> ck_student_sex <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stu_sex<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">OR</span> stu_sex<span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">CONSTRAINT</span> ck_student_age <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stu_age <span class="token operator">BETWEEN</span> <span class="token number">6</span> <span class="token operator">AND</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>通过修改表的方式 添加check约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">ADD</span> <span class="token keyword">constraint</span> ck_student_sex <span class="token keyword">check</span><span class="token punctuation">(</span>stu_sex<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">OR</span> stu_sex<span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul><h2 id="删除check约束"><a href="#删除check约束" class="headerlink" title="删除check约束"></a>删除check约束</h2><ul><li><p>删除check约束</p><pre><code>ALTER TABLE TB_STUDENTS DROP CONSTRAINTS ck_student_sex;</code></pre></li></ul><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">--创建学生信息表,并添加check约束</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">CONSTRAINT</span> ck_student_sex <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stu_sex<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">OR</span> stu_sex<span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">CONSTRAINT</span> ck_student_age <span class="token keyword">CHECK</span><span class="token punctuation">(</span>stu_age <span class="token operator">BETWEEN</span> <span class="token number">6</span> <span class="token operator">AND</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--删除学生信息表</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">;</span><span class="token comment" spellcheck="true">--创建学生信息表</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--通过修改表,添加check约束</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">ADD</span> <span class="token keyword">constraint</span> ck_student_sex <span class="token keyword">check</span><span class="token punctuation">(</span>stu_sex<span class="token operator">=</span><span class="token string">'男'</span> <span class="token operator">OR</span> stu_sex<span class="token operator">=</span><span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">DROP</span> CONSTRAINTS ck_student_sex<span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-2 联合主键</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-2-lian-he-zhu-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-2-lian-he-zhu-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="联合主键"><a href="#联合主键" class="headerlink" title="联合主键"></a>联合主键</h1><ul><li><p>联合主键 使用2个或2个以上的字段作为主键</p><p><img src="../../../../AppData/Roaming/Typora/typora-user-images/image-20200927113100354.png" alt="image-20200927113100354"></p></li><li><p>添加联合主键</p><ul><li><p>创建表时 添加联合主键</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">(</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span><span class="token keyword">column</span> name1<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>column_namen<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-1 主键约束</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-1-zhu-jian-yue-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/5-1-zhu-jian-yue-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h2><p><strong>什么是主键</strong>?</p><p>​    主键(primary key)是 就是数据表中一个或多个字段 用于唯一标识</p><p><strong>添加主键约束</strong></p><p>在创建数据表时添加主键约束</p><pre class=" language-sql"><code class="language-sql"> <span class="token comment" spellcheck="true">--主键约束</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_students<span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>第二种语法</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_students<span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>    stu_name varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>stu_num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>创建数据表之后添加主键约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">ADD</span> CONSTRAINTS pk_students <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>stu_num<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4-3 数据库定义语言</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/4-3-shu-ju-ku-ding-yi-yu-yan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/4-3-shu-ju-ku-ding-yi-yu-yan/</url>
      
        <content type="html"><![CDATA[<p>常见Oracle数据库对象</p><ul><li>用户</li><li>角色</li><li>表空间</li><li>数据表</li><li>索引</li><li>视图</li><li>序列</li><li>同义词</li><li>存储过程</li><li>函数</li><li>触发器</li><li>程序包</li></ul><p>数据库定于语言 DDL 主要包括数据库对象的创建 删除及修改操作</p><p>创建<strong>create</strong> 删除<strong>drop</strong> 修改<strong>alter</strong></p><h2 id="create创建数据表"><a href="#create创建数据表" class="headerlink" title="create创建数据表"></a>create创建数据表</h2><pre class=" language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">(</span>    column_name column_type<span class="token punctuation">[</span><span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">[</span><span class="token keyword">constraint</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><ul><li>语法说明<ul><li>table_name 数据表名, 在一个数据库中数据表名不能重复</li><li>column_type 数据类型 设置当前列中允许存放的数据类型</li><li>[not null] 设置该列插入数据时不能为空 如果不指定则默认标识该列为空</li><li>[constraint] 为表中的列设置约束(主键外键 检查)</li></ul></li></ul><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200924210102.png" alt="image-20200924210046023"></p><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">--创建学生信息表</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_students<span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    stu_age NUMBER<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><h3 id="增加列"><a href="#增加列" class="headerlink" title="增加列"></a>增加列</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> column_name column_type</code></pre><ul><li>语法说明<ul><li>table_name :要修改的表名</li><li>column_name 新增的列名</li><li>column_type 新增允许的数据类型</li></ul></li></ul><h3 id="修改列"><a href="#修改列" class="headerlink" title="修改列"></a>修改列</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">MODIFY</span> column_name column_type</code></pre><ul><li>语法说明<ul><li>table_name 要修改的表明</li><li>column_name 要修改的列名</li><li>column_type 要修改的列的目标数据类型</li></ul></li></ul><h3 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h3><pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> table_name <span class="token keyword">drop</span> <span class="token keyword">column</span> column_name</code></pre><ul><li>语法说明<ul><li>table_name 要修改的表明</li><li>column_name 要删除的列名</li><li></li></ul></li></ul><h3 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h3><p>向学生信息表新增“邮箱列”</p><p>将学生表 “邮箱” 列 修改为varchar2类型</p><p>删除学生信息表中“邮箱” 列</p><pre><code>--修改数据表 新增列ALTER TABLE TB_STUDENTS ADD stu_email char(50);--修改数据表 修改列ALTER TABLE TB_STUDENTS MODIFY stu_email varchar2(60);--修改数据表 删除列ALTER TABLE TB_STUDENTS DROP COLUMN stu_email;</code></pre><h2 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h2><pre class=" language-sql"><code class="language-sql">DRIO <span class="token keyword">TABLE</span> table_name</code></pre><ul><li>语法说明<ul><li>table_name 要删除的数据表名</li></ul></li></ul><h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h4><pre><code>--删除数据表DROP TABLE TB_STUDENTS; </code></pre><h2 id="删除表数据与删除数据表"><a href="#删除表数据与删除数据表" class="headerlink" title="删除表数据与删除数据表"></a>删除表数据与删除数据表</h2><ul><li>删除表数据 删除数据表中存储的数据 保留数据表的结构<ul><li>truncate table table_name</li><li>delete [from] table_name</li></ul></li><li>删除数据表 删除表结构 (表中的数据也会被同时删除)<ul><li>drop table table_name</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4-2 Oracle数据类型</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/4-2-oracle-shu-ju-lei-xing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/4-2-oracle-shu-ju-lei-xing/</url>
      
        <content type="html"><![CDATA[<p>数据类型, 即Oracle 数据库中支持的存储数据类型</p><p>通过管理工具PL/SQL Developer 查看Oracle数据类型</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4-1 SQL概述</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/4-1-sql-gai-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/4-1-sql-gai-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是SQL"><a href="#什么是SQL" class="headerlink" title="什么是SQL"></a>什么是SQL</h2><p>SQL(Structured Query Language) 结构化查询语言 用于存取 查询更新数据和管理关系数据系统</p><h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><p>根据SQL指令完成的数据库操作不同, 可以分为四类</p><ol><li>DDL( Data Definfinon Language)  数据定义语言<ul><li>用于完成对数据库对象 (数据库 数据表 视图 索引) 创建 修改及删除操作</li></ul></li><li>DML(Date Maipulation Language) 数据操纵语言<ul><li>用于完成对数据库表中数据的插入 修改 删除操作</li></ul></li><li>DCL (Data Control Language) 数据控制语言<ul><li>用于完成对数据库中用户创建 删除 用户锁定 权限授予 取消 系统管理员权限的操作</li></ul></li><li>DQL(Data Query Language) 数据查询语言<ul><li>用于完成对数据表的查询操作</li></ul></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-3 PLSQL Developer</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/3-3-plsql-developer/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/3-3-plsql-developer/</url>
      
        <content type="html"><![CDATA[<h1 id="PL-SQL-Developer"><a href="#PL-SQL-Developer" class="headerlink" title="PL/SQL Developer"></a>PL/SQL Developer</h1><blockquote><p>商业性工具,需要付费 使用人多</p><p>相对于PL/SQL Developer 更容易上手</p><p>是一种集成开发环境 用于开发 测试 调试 优化Oracle PL/SQL存储序单元</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2 使用sqlplus管理工具</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/3-2-shi-yong-sqlplus-guan-li-gong-ju/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/3-2-shi-yong-sqlplus-guan-li-gong-ju/</url>
      
        <content type="html"><![CDATA[<h1 id="SQL-Plus"><a href="#SQL-Plus" class="headerlink" title="SQL * Plus"></a>SQL * Plus</h1><p>Oracle自带管理工具</p><ol><li>对数据增删改查 操作</li><li>对查询数据的结果进行格式化显示</li><li>对数据库( 用户 角色 表空间 数据表) 进行管理</li></ol><h2 id="启动sqlplus"><a href="#启动sqlplus" class="headerlink" title="启动sqlplus"></a>启动sqlplus</h2><pre class=" language-bash"><code class="language-bash">sqlplus</code></pre><h2 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h2><ul><li>本地管理员登录(sys用户) sys/pwd as sysdba</li><li>网络用户登录(system用户) system/pwd</li></ul><h2 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h2><ul><li>默认连接orcl 数据库</li><li>连接指定数据库 用户名/密码 @SID</li></ul><p>执行SQL指令</p><ul><li>SQL指令 结构化查询数据语言 用于完成对数据库对象及数据表中的数据操作</li></ul><h2 id="SQL-plus-连接问题"><a href="#SQL-plus-连接问题" class="headerlink" title="SQL*plus 连接问题"></a>SQL*plus 连接问题</h2><ul><li>ora-12560 :<strong>协议适配器错误</strong><ol><li>监听程序正常启动</li><li>Oracle数据库实例正常运行</li><li>修改注册表默认SID为Oracle数据库</li></ol></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1 Oracle管理工具</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/3-1-oracle-guan-li-gong-ju/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/3-1-oracle-guan-li-gong-ju/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle管理工具"><a href="#Oracle管理工具" class="headerlink" title="Oracle管理工具"></a>Oracle管理工具</h1><p>管理工具, 介于用户与Oracle数据库之间, 运行于Oracle客户端, 为用户操作与管理Oracle数据库提供入口</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922200243.png" alt="image-20200922200125079"></p><h1 id="sqlplus"><a href="#sqlplus" class="headerlink" title="sqlplus *"></a>sqlplus *</h1><p>是一个DOS界面下操作数据库的管理工具, 它与oracle一起安装 是数据库管理员经常使用的数据库管理工具</p><pre class=" language-bash"><code class="language-bash">sqlplus / as sysdba</code></pre><h2 id="iSql-plus"><a href="#iSql-plus" class="headerlink" title="iSql plus"></a>iSql plus</h2><p>Oracle提供一个基于web页面的管理工具 通过浏览器访问</p><h2 id="Navcat-for-oracle"><a href="#Navcat-for-oracle" class="headerlink" title="Navcat for oracle"></a>Navcat for oracle</h2><p>第三方oralce 管理工具 功能较全面 界面美观  收费</p><h2 id="PL-SQL-Developer"><a href="#PL-SQL-Developer" class="headerlink" title="PL/SQL Developer *"></a>PL/SQL Developer *</h2><p>第三方oralce 管理工具 集成开发环境 专门用于开发 测试 调试和优化Oracle PL/SQL存储程序单元 功能强大 使用人数多</p><h1 id="OEM"><a href="#OEM" class="headerlink" title="OEM *"></a>OEM *</h1><p>Oracle企业管理器 提供Oracle 数据库底层管理功能</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-3 oralce监听程序</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/2-3-oralce-jian-ting-cheng-xu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/2-3-oralce-jian-ting-cheng-xu/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle监听程序"><a href="#Oracle监听程序" class="headerlink" title="Oracle监听程序"></a>Oracle监听程序</h1><blockquote><p> <strong>运行在Oracle服务器端用于侦听客户端请求的程序</strong></p></blockquote><p> <img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922101526.png" alt="image-20200922101447445"></p><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ul><li>Oracle 数据库软件安装监听器之后没有监听程序(服务)</li><li>Oracle原有监听程序无法正常的监听客户端请求</li></ul><h2 id="添加-删除监听程序"><a href="#添加-删除监听程序" class="headerlink" title="添加/删除监听程序"></a>添加/删除监听程序</h2><blockquote><p>Oracle net configuration assistant</p></blockquote><p>官方文档: <a href="https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sscli/using-oracle-net-configuration-assistant.html#GUID-A81F5CBC-AA46-43E4-BF6F-30A4988689D9" target="_blank" rel="noopener">https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sscli/using-oracle-net-configuration-assistant.html#GUID-A81F5CBC-AA46-43E4-BF6F-30A4988689D9</a></p><p><strong>翻译如下</strong></p><h3 id="使用-Oracle-网络配置助手"><a href="#使用-Oracle-网络配置助手" class="headerlink" title="使用 Oracle 网络配置助手"></a>使用 Oracle 网络配置助手</h3><p>在自定义 Oracle 数据库客户端安装中，如果选择 Oracle 网络侦听器，则 Oracle 通用安装程序 （OUI） 将启动 Oracle 网络配置助手。</p><p>Oracle 建议您准备好有关安装 Oracle 数据库的计算机的主机名的信息。</p><p>执行以下步骤以使用 Oracle 网络配置助手配置侦听器和命名方法：</p><ol><li><p>在”欢迎”屏幕中，单击”下一<strong>步”。</strong></p><p>您还可以选择为<strong>默认网络配置执行</strong>典型配置。</p></li><li><p>根据需要响应配置提示和屏幕。屏幕因所选选项而异。在安装过程中的任何时间，如果您对被要求做什么有问题，请单击”帮助**”。**</p></li><li><p>您还可以在数据库客户端安装完成后以独立模式运行 Oracle 网络配置助手，以配置侦听器、命名方法、网络服务名称和目录服务器使用情况。要在独立模式下启动 Oracle 网络配置助手<code>，从"ORACLE_HOME/bin</code> <code>目录运行 netca。</code></p></li></ol><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922103020.png" alt="image-20200922103019978"></p><p>  <img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922103203.png" alt="image-20200922103203685"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922103221.png"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922103540.png" alt="image-20200922103445055"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922103601.png" alt="image-20200922103601657"></p><p>我出现的错误</p><p>如果出现监听端口 被占用,我修改了端口还是显示端口被占用</p><p> 有可能是 hosts文件没配好</p><pre class=" language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/hosts<span class="token comment" spellcheck="true"># 你的IP地址</span>192.168.21.129 testlab.com.bd testlab</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-2 创建删除Oracle数据库</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/2-2-chuang-jian-shan-chu-oracle-shu-ju-ku/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/2-2-chuang-jian-shan-chu-oracle-shu-ju-ku/</url>
      
        <content type="html"><![CDATA[<h1 id="创建-删除Oracle实例"><a href="#创建-删除Oracle实例" class="headerlink" title="创建/删除Oracle实例"></a>创建/删除Oracle实例</h1><h2 id="创建Oracle实例"><a href="#创建Oracle实例" class="headerlink" title="创建Oracle实例"></a>创建Oracle实例</h2><blockquote><p>Linux:切换到oralce用户, 使用 <strong>dbca</strong> 命令调出创建数据库界面</p><p>windos: 直接点击Database Configuration Assistant</p></blockquote><p> <img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922081757.png" alt="image-20200922081757273"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922095844.png" alt="image-20200922095844244"></p><p>默认SUSTEM(网络管理员权限) SYS(本地管理员权限) 没被锁定 设置口令</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922095242.png" alt="image-20200922095110940"></p><h2 id="删除Oracle实例"><a href="#删除Oracle实例" class="headerlink" title="删除Oracle实例"></a>删除Oracle实例</h2><p>oracle用户: 运行dbca<img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922100509.png" alt="image-20200922100509813"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922100536.png" alt="image-20200922100536377"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1 Oracle实例</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/2-1-oracle-shi-li/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/2-1-oracle-shi-li/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle实例"><a href="#Oracle实例" class="headerlink" title="Oracle实例"></a>Oracle实例</h1><p>回顾Oracle数据库实例 (客户端与服务端) </p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922075526.png" alt="image-20200922075526055"></p><ul><li>Oracle数据库实例, 运行在Oracle服务端为接收用户请求 并提供响应的独立进程(服务)</li><li>单例数据库 一个Oracle数据库通常对应一个Oracle实例</li><li>在并行数据库系统中, 一个人Oracle数据库可以对应多个Oracle实例</li><li>在安装oracle时可以选择<ul><li>创建和配置数据库</li><li>仅安装数据库软件</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-4 Oracle访问机制</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-4-oracle-fang-wen-ji-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-4-oracle-fang-wen-ji-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle访问机制"><a href="#Oracle访问机制" class="headerlink" title="Oracle访问机制"></a>Oracle访问机制</h1><p>Oracle 数据库访问基于客户端/服务端 模式实现</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200921230040.png" alt="image-20200921230003858"></p><p>oracle数据库软件: oracle服务器</p><p>oralce实例 : 运行在服务器中的服务 接受响应客户端请求</p><p>oracle数据库 运行在Oracle数据库实例中为客户端提供数据存储服务</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-3 Oracle历史</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-3-oracle-li-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-3-oracle-li-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle历史"><a href="#Oracle历史" class="headerlink" title="Oracle历史"></a>Oracle历史</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200921224823421.png" alt="image-20200921224823421"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200921225054.png" alt="image-20200921224914614"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-2 数据库相关术语</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-2-shu-ju-ku-xiang-guan-zhu-yu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-2-shu-ju-ku-xiang-guan-zhu-yu/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库术语"><a href="#数据库术语" class="headerlink" title="数据库术语"></a>数据库术语</h1><p>数据 Data</p><p>数据库 Database DB</p><p>数据库管理系统 DBMS :数据库管理系统 位于用户与操作系统之间的管理软件</p><p>数据库管理系统 Database System DBS </p><p>数据库管理员 DBA</p><p>数据结构化: 数据纯文本的,有数据类型 以及各种类型数据规范</p><p>数据共享性: 面向整个系统</p><p>数据冗余度: 多余的相同的数据</p><p>数据的一致性: 一条数据 在多个表中保持同步更新</p><p>物理独立性: </p><p>逻辑独立性: 当数据逻辑结构改变时,用户程序可以不变</p><p>数据安全性: 物理安全 数据保密性 网络安全</p><p>数据完整性: </p><p>并发控制: 多用户并发操作数据库时,对他们加以控制 保证并发操作 保持数据库一致性</p><p>数据库恢复: 通过技术手段 将数据丢失抢救 恢复</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1安装oracle</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-1-an-zhuang-oracle/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/1-1-an-zhuang-oracle/</url>
      
        <content type="html"><![CDATA[<h2 id="一、安装Oracle-12c"><a href="#一、安装Oracle-12c" class="headerlink" title="一、安装Oracle 12c"></a>一、安装Oracle 12c</h2><h3 id="1、安装CentOS-7操作系统的注意事项"><a href="#1、安装CentOS-7操作系统的注意事项" class="headerlink" title="1、安装CentOS 7操作系统的注意事项"></a>1、安装CentOS 7操作系统的注意事项</h3><p>由于本次安装Oracle 12c软件是在CentOS 7系统上实现的，那么首先安装CentOS 7操作系统，安装要求如下：</p><blockquote><ul><li>防火墙的配置选项设置为禁用；</li><li>SELinux设置为禁用；</li><li>默认安装设置为软件开发；</li><li>内核选择3.10.0-862.el7.x86_64及以上版本；</li></ul></blockquote><h3 id="2、前置条件的准备"><a href="#2、前置条件的准备" class="headerlink" title="2、前置条件的准备"></a>2、前置条件的准备</h3><p>Oracle数据库是一个相对庞大的应用软件，对<a href="https://www.yisu.com/" target="_blank" rel="noopener">服务器</a>的系统类型、内存和交换分区、硬盘空阿金、内核参数、软件环境、用户环境等都有相应的要求。只要满足了这些必备的条件，才能确保Oracle 12c安装成功、稳定运行。</p><h4 id="1）系统及配置要求"><a href="#1）系统及配置要求" class="headerlink" title="1）系统及配置要求"></a>1）系统及配置要求</h4><p>Oracle 12c明确支持的Linux操作系统包括Oracle Linux 7、Oracle Linux 6、Oracle Linux 5、Red Hat Enterprise Linux 7、Red Hat Enterprise Linux 6、Red Hat Enterprise Linux 5等，因为Red Hat Enterprise 和CentOS属于同步并行的操作系统，所以Oracle 12 c同样支持CentOS 7、CentOS 6、CentOS 5操作系统。在其他Linux系统中安装时，个别软件或配置文件可能需要进行适当的调整。通过以下命令查看系统版本：</p><pre><code>[root@Oracle ~]# cat /etc/centos-releaseCentOS Linux release 7.4.1708 (Core) </code></pre><blockquote><p>Linux操作系统要求：</p><ul><li>物理内存：必须高于1GB，对于VMware虚拟机建议不少于2GB；</li><li>交换空间：物理内存为1<del>2GB时，交换分区为物理内存的1.5</del>2倍；物理内存为2~16GB时，交换分区于物理内存大小相同；物理内存超过16GB时，交换分区使用16GB就可以了；<br>如果交换分区空间不足的话，可以使用以下方式扩展交换分区</li></ul></blockquote><p><strong>查看物理内存和交换内存的命令如下：</strong></p><pre><code>[root@Oracle ~]# grep MemTotal /proc/meminfo MemTotal:        4030172 kB[root@Oracle ~]# grep SwapTotal /proc/meminfo SwapTotal:       8388604 kB</code></pre><p>对于Oracle 12c数据库，若程序文件和数据文件安装在同一分区，则该分区硬盘空间的最小要求为企业级为6.4GB，标准版6.1GB；除此之外，还应确保/tmp目录的可用空间不少于1G。总的来说，建议为Oracle 12c准备至少15GB的硬盘空间。通过以下命令查看磁盘空间的使用情况：</p><pre><code>[root@Oracle ~]# df -hT文件系统                类型      容量  已用  可用 已用% 挂载点/dev/mapper/centos-root xfs        72G   21G   51G   30% /devtmpfs                devtmpfs  2.0G     0  2.0G    0% /devtmpfs                   tmpfs     2.0G  960M 1008M   49% /dev/shmtmpfs                   tmpfs     2.0G  9.0M  2.0G    1% /runtmpfs                   tmpfs     2.0G     0  2.0G    0% /sys/fs/cgroup/dev/sda1               xfs       197M  139M   59M   71% /boottmpfs                   tmpfs     394M   12K  394M    1% /run/user/42tmpfs                   tmpfs     394M     0  394M    0% /run/user/0/dev/sr0                iso9660   4.3G  4.3G     0  100% /mnt</code></pre><p>安装Oracle数据库前，要求规划好主机名和IP。服务器的主机名、IP地址应提前确认无误，一旦Oracle数据库安装完成，建议不要再修改主机名，否则会导致数据库启动失败。查看主机名可以通过hostname命令实现，修改主机名通过配置文件/etc/hosts实现，代码如下：</p><pre><code>[root@centos01 ~]# hostnamectl set-hostname Oracle  &lt;!--修改主机名--&gt;[root@centos01 ~]# bash   &lt;!--刷新主机名--&gt;[root@oracle ~]# hostname  &lt;!--查看主机名--&gt;oracle[root@Oracle ~]# vim /etc/hosts   &lt;!--配置主机解析--&gt;192.168.100.10 oracle</code></pre><h4 id="2）软件环境要求"><a href="#2）软件环境要求" class="headerlink" title="2）软件环境要求"></a>2）软件环境要求</h4><p>Oracle 12c的安装过程通常是在图形界面中进行，因此建议使用已安装有GNOME中文桌面环境的CentOS服务器，软件开发工具当然是必不可少的，如gcc、glibc、binutils等软件包，建议使用yum工具来安装以下必要的软件环境。具体操作如下：</p><pre><code>[root@Oracle ~]# yum -y install binutils elfutils-libelf elfutils-libelf-devel gcc gcc-c++ glibc glibc-common glibc-devel glibc-headers kernel-headers ksh libaio libaio-devel libgcc libgomp libstdc++ libstdc++-devel make numactl-devel unixODBC unixODBC-devel</code></pre><p>yum仓库选择使用本地光盘即可，Oracle 12c自身集成了Java运行环境，但安装界面对中文的支持并不完善，因此若希望使用中文的Oracle安装界面，建议提前安装好Java软件包。</p><h4 id="3）内核要求"><a href="#3）内核要求" class="headerlink" title="3）内核要求"></a>3）内核要求</h4><p>为了确保数据库运行稳定，Oracle 12c针对Linux内核参数，进程会话限制提出了一些要求，其中一部分设置可以在安装过程中自动检测并进行修复，但并一定很完整，所以最好的做法是根据安装文档提前进行配置。</p><p>内核参数调整体现在/etc/sysctl.conf文件中，主要包括与内存调度、端口范围、打开文件数、I/O请求等相关的一些设置，相关数值不可低于安装要求。修改完毕后通过执行如下的“sysctl -p”命令使新配置立即生效。</p><pre><code>[root@Oracle ~]# vim /etc/sysctl.conf ............      &lt;!--此处省略部分内容--&gt;fs.file-max = 6815744kernel.sem = 250 32000 100 128kernel.shmmni = 4096kernel.shmall = 1073741824kernel.shmmax = 4398046511104kernel.panic_on_oops = 1net.core.rmem_default = 262144net.core.rmem_max = 4194304net.core.wmem_default = 262144net.core.wmem_max = 1048576net.ipv4.conf.all.rp_filter = 2net.ipv4.conf.default.rp_filter = 2fs.aio-max-nr = 1048576net.ipv4.ip_local_port_range = 9000 65500[root@Oracle ~]# sysctl -p   &lt;!--重新加载配置文件--&gt;</code></pre><h4 id="4）Oracle用户环境要求"><a href="#4）Oracle用户环境要求" class="headerlink" title="4）Oracle用户环境要求"></a>4）Oracle用户环境要求</h4><p>Oracle 12c需要固定的运行用户oracle、安装组oinstall、管理组dba，这些账号应提前创建好。用来存放Oracle程序及数据库文件的基本目录（如/u01/app/oracle）也应提前创建好。具体创建的命令如下：</p><pre><code>[root@Oracle ~]# groupadd -g 54321 oinstall   &lt;!--创建安装组--&gt;[root@Oracle ~]# groupadd -g 54322 dba   &lt;!--创建管理oracle组--&gt;[root@Oracle ~]# useradd -u 54321 -g oinstall -G dba oracle           &lt;!--创建管理oracle的用户，加入到组中 --&gt;[root@Oracle ~]# passwd oracle    &lt;!--设置管理数据库密码--&gt;[root@Oracle ~]# mkdir -p /u01/app/oracle&lt;!--创建数据库根目录--&gt;[root@Oracle ~]# chown -R oracle:oinstall /u01/app/ &lt;!--设置目录所有者--&gt;[root@Oracle ~]# chmod -R 755 /u01/app/   &lt;!--设置目录权限--&gt;</code></pre><p>Oracle 12c的安装任务应以运行用户oracle的身份执行，需适当调整oracle用户的环境配置以满足需求。具体操作如下：</p><pre><code>[root@Oracle ~]# vim /home/oracle/.bash_profile ............&lt;!--此处省略部分内容--&gt;umask 022    &lt;!--反码--&gt;ORACLE_BASE=/u01/app/oracle   &lt;!--定义基本目录--&gt;ORACLE_HOME=/u01/app/oracle/product/12.2.0/dbhome_1/  &lt;!--定义安装家目录--&gt;ORACLE_SID=orcl   &lt;!--定义数据库实例名称--&gt;LANG=zh_CN.UTF-8   &lt;!--确定使用何种语言环境--&gt;NLS_LANG="AMERICAN_AMERICA".ZHS16GBK PATH=$PATH:$ORACLE_HOME/binexport ORACLE_BASE ORACLE_HOME ORACLE_SID LANG NLS_LANG PATH    &lt;!--将变量导出为全局变量--&gt;[root@Oracle ~]# source /home/oracle/.bash_profile   &lt;!--刷新配置--&gt;</code></pre><h4 id="5）oracle用户资源限制要求"><a href="#5）oracle用户资源限制要求" class="headerlink" title="5）oracle用户资源限制要求"></a>5）oracle用户资源限制要求</h4><p>进程会话限制可以采用pam_limits认证模块来实现，通过修改登录程序login的PAM设置以启用该认证，然后修改/etc/security/limits.conf 文件，使用户oracle能够打开的进程数、进程使用的文件数加大。具体操作如下：</p><pre><code>[root@Oracle ~]# vim /etc/pam.d/login   &lt;!--设置pam验证--&gt;session    required     /lib64/security/pam_limits.sosession    required     pam_limits.so............&lt;!--此处省略部分内容--&gt;[root@Oracle ~]# vim /etc/security/limits.conf                     &lt;!--限制oracle数据库存储和进程使用--&gt;............&lt;!--此处省略部分内容--&gt;oracle   soft   nofile    1024           &lt;!--文件数软限制--&gt;oracle   hard   nofile    65536         &lt;!--文件数硬限制--&gt;oracle   soft   nproc    16384           &lt;!--进程数软限制--&gt;oracle   hard   nproc    16384          &lt;!--进程数硬限制--&gt;oracle   soft   stack    10240              &lt;!--Oracle软堆栈限制--&gt;[root@Oracle ~]# vim /etc/profile ............&lt;!--此处省略部分内容--&gt;              &lt;!--添加如下内容--&gt;if [ $USER = "oracle"]; then        if [$SHELLO = "/bin/ksh"]; then        ulimit -p 16384        ulimit n 65536else        ulimit -u 16384 -n 65536fifi</code></pre><p>不配置oracle用户资源限制部分，也不会影响oracle数据库的成功安装，但是，若有糟糕的SQL语句对服务器资源的无限占用，导致长时间对用户请求无响应，建议提前限制oracle用户资源。</p><p>准备工作完成后重新启动系统，重启之后，再次检查之前的配置是否生效。</p><h3 id="3、Oracle-12c安装过程"><a href="#3、Oracle-12c安装过程" class="headerlink" title="3、Oracle 12c安装过程"></a>3、Oracle 12c安装过程</h3><p>Oracle的中文官方网址是<a href="https://www.oracle.com/index.html" target="_blank" rel="noopener">https://www.oracle.com/index.html</a> 可以自行进行下载，也可通过网盘自行提取：[<a href="https://pan.baidu.com/s/1VWFYZH0itXjXN-xt7hlD0A" target="_blank" rel="noopener">https://pan.baidu.com/s/1VWFYZH0itXjXN-xt7hlD0A</a><br>提取码：9n84]进行安装。具体操作如下：</p><pre><code>[root@Oracle oracle]# ls      &lt;!--通过rz命令上传压缩包--&gt;linuxx64_12201_database.zip[root@Oracle oracle]# unzip linuxx64_12201_database.zip                        &lt;!--解压缩oracle包--&gt;[root@Oracle ~]# export DISPLAY=192.168.100.254:0.0                                    &lt;!--配置界面显示到宿主机--&gt;[root@Oracle ~]# xhost +    &lt;!--一定要以root用户的身份在图形环境中操作--&gt;</code></pre><p><img src="https://cache.yisu.com/upload/information/20200214/37/967.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><pre><code>[root@Oracle ~]# su oracle   &lt;!--切换到oracle账户--&gt;[oracle@Oracle root]$ cd[oracle@Oracle ~]$ export DISPLAY=192.168.100.254:0.0  [oracle@Oracle ~]$ xhost +</code></pre><p><img src="https://cache.yisu.com/upload/information/20200214/37/968.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><pre><code>[oracle@Oracle ~]$ /u01/app/oracle/database/runInstaller &lt;!--安装oracle--&gt;正在启动 Oracle Universal Installer...</code></pre><p><img src="https://cache.yisu.com/upload/information/20200214/37/970.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"><br><strong>执行完成后过一会弹出图形化界面，进行以下操作：</strong></p><p>1）配置安全更新，什么也不选下一步即可<br><img src="https://cache.yisu.com/upload/information/20200214/37/971.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"><br><img src="https://cache.yisu.com/upload/information/20200214/37/972.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>2）安装选项选择创建和配置数据库，单击下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/973.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>3）系统类选择服务器类，单击下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/974.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>4）数据库安装选项选择单实例数据库安装，单击下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/975.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>5）安装类型选择典型安装，单击下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/976.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>6）设置数据库口令，单击下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/977.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"><br><img src="https://cache.yisu.com/upload/information/20200214/37/978.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>7）清单保持默认，单击下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/979.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>8）默认下一步<br><img src="https://cache.yisu.com/upload/information/20200214/37/980.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>9）执行脚本<br><img src="https://cache.yisu.com/upload/information/20200214/37/981.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><pre><code>[root@Oracle ~]# /u01/app/oraInventory/orainstRoot.sh[root@Oracle ~]# /u01/app/oracle/product/12.2.0/dbhome_1/root.sh</code></pre><p>10）安装完成，通过浏览器访问<br><img src="https://cache.yisu.com/upload/information/20200214/37/982.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>11）浏览器访问<a href="https://oracle:5500/em" target="_blank" rel="noopener">https://Oracle:5500/em</a> 安装flash player<br><img src="https://cache.yisu.com/upload/information/20200214/37/983.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>12）验证安装结果，浏览器访问<a href="https://oracle:5500/em" target="_blank" rel="noopener">https://Oracle:5500/em</a><br><img src="https://cache.yisu.com/upload/information/20200214/37/984.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p><img src="https://cache.yisu.com/upload/information/20200214/37/985.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p>*<em>接下来使用SQL</em>Plus命令在命令行界面中访问Oracle 12c数据库：**</p><pre><code>[root@Oracle ~]# su oracle  &lt;!--切换到oracle账户--&gt;[oracle@Oracle root]$ cd[oracle@Oracle ~]$ source .bash_profile    &lt;!--运行此项--&gt;[oracle@Oracle ~]$ sqlplus / as sysdba    &lt;!--登录数据库--&gt;SQL&gt; help index       &lt;!--查看支持的指令列表--&gt;SQL&gt; show user;        &lt;!--查看当前用户--&gt;USER is "SYS"</code></pre><p><strong>在SQL&gt;模式下，不区分大小写，但是Linux提示符下区分大小写。</strong></p><h2 id="二、Oracle-12c数据库的创建"><a href="#二、Oracle-12c数据库的创建" class="headerlink" title="二、Oracle 12c数据库的创建"></a>二、Oracle 12c数据库的创建</h2><p>如果在安装oracle产品时不创建数据库，那么要使用oracle系统就必须先创建数据库。如果在安装oracle时选择建立数据库，也可以再创建第二个数据库。<br>创建数据库的方法有两种：通过图形化界面，或者采用“CREATE DATABASE”命令，这里说一下图形化界面创建数据库的方法。</p><p>在Linux环境下，采用运行数据库配置助手（database configuration assistant, DBCA）来实现。Oracle 12c安装完成后，会在$ORACLE_HOME/bin目录下生成Oracle系统可执行程序，创建Oracle数据库所用的DBCA也在该目录下。</p><pre><code>[oracle@Oracle ~]$ export DISPLAY=192.168.100.254:0.0[oracle@Oracle ~]$ xhost +</code></pre><p><img src="https://cache.yisu.com/upload/information/20200214/37/986.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><pre><code>[oracle@Oracle ~]$  dbca   &lt;!--以oracle用户身份运行dbca命令--&gt;</code></pre><p><img src="https://cache.yisu.com/upload/information/20200214/37/987.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p><strong>弹出的图形化界面如下：</strong><br><img src="https://cache.yisu.com/upload/information/20200214/37/988.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p><img src="https://cache.yisu.com/upload/information/20200214/37/989.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"><br><img src="https://cache.yisu.com/upload/information/20200214/37/990.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p><img src="https://cache.yisu.com/upload/information/20200214/37/991.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"></p><p><img src="https://cache.yisu.com/upload/information/20200214/37/992.jpg" alt="CentOS 7部署Oracle 12c企业版数据库"><br><strong>数据库已经创建完成。为了使Oracle系统充分利用系统资源，建议一个服务器上只创建一个数据库。</strong></p><h2 id="三、Oracle-12c数据库的启动与关闭"><a href="#三、Oracle-12c数据库的启动与关闭" class="headerlink" title="三、Oracle 12c数据库的启动与关闭"></a>三、Oracle 12c数据库的启动与关闭</h2><p>oracle数据库的启动与关闭是日常工作之一。对于大多数oracle DBA来说，启动和关闭oracle数据库最常用的方式是在命令行方式下执行。</p><h3 id="1、启动、关闭Oracle数据库"><a href="#1、启动、关闭Oracle数据库" class="headerlink" title="1、启动、关闭Oracle数据库"></a>1、启动、关闭Oracle数据库</h3><p>要启动和关闭数据库，必须具有Oracle管理员权限的用户登录，通常以具有SYSDBA权限的用户登录。</p><h4 id="1）数据库的启动"><a href="#1）数据库的启动" class="headerlink" title="1）数据库的启动"></a>1）数据库的启动</h4><p>启动（STARTUP）一个数据库需要三个步骤：①启动oracle实例（非装载阶段）；②由实例装载数据库（装载阶段）；③打开数据库（打开阶段）。<br>在STARTUP命令中，可以使用不同的选项来控制数据库的不同启动步骤。</p><h5 id="①STARTUP-NOMOUNT"><a href="#①STARTUP-NOMOUNT" class="headerlink" title="①STARTUP NOMOUNT"></a>①STARTUP NOMOUNT</h5><p>NOMOUNT选项仅仅启动一个oracle实例，读取init.ora初始化参数文件、启动后台进程、初始化SGA。当实例启动后，系统将显示一个SGA内存结构和大小的列表，具体操作如下：</p><pre><code>SQL&gt; startup nomount;       &lt;!--启动数据库--&gt;ORACLE instance started.Total System Global Area 1660944384 bytesFixed Size          8793448 bytesVariable Size        1056965272 bytesDatabase Buffers      587202560 bytesRedo Buffers            7983104 bytesSQL&gt; alter database mount;      &lt;!--装载数据库--&gt;Database altered.SQL&gt; alter database open;      &lt;!--打开数据库--&gt;Database altered.</code></pre><h5 id="②STARTUP-MOUNT"><a href="#②STARTUP-MOUNT" class="headerlink" title="②STARTUP MOUNT"></a>②STARTUP MOUNT</h5><p>STARTUP MOUNT命令启动实例并且装载数据库，但是没有打开数据库。Oracle系统读取控制文件中关于数据文件和重做日志文件的内容，但并不打开该文件。这种打开方式常在数据库维护操作中使用，如对数据文件的更名、改变重做日志及打开归档模式等。在这种打开方式下，除了可以看到SGA系统列表以外，系统还会给出“数据库装载完毕”的提示。具体操作如下：</p><pre><code>SQL&gt; startup mount;       &lt;!--启动实例并且装载数据库--&gt;ORACLE instance started.Total System Global Area 1660944384 bytesFixed Size          8793448 bytesVariable Size        1056965272 bytesDatabase Buffers      587202560 bytesRedo Buffers            7983104 bytesDatabase mounted.SQL&gt; alter database open;     &lt;!--打开数据库--&gt;Database altered.</code></pre><h5 id="③STARTUP"><a href="#③STARTUP" class="headerlink" title="③STARTUP"></a>③STARTUP</h5><p>STARTUP命令完成启动实例，装载数据库和打开数据库三个步骤。此时，数据库使数据文件和重做日志文件在线，通常还会请求一个或者多个回滚段；系统除了可以看到前面STARTUP MOUNT方式下的所有提示外，还会给出一个“数据库已经打开”的提示；数据库系统处于正常的工作状态，可以接收用户的请求。</p><pre><code>SQL&gt; startup;   &lt;!--startup命令实现了启动实例，装载数据库，打开数据库，一条命令搞定--&gt;ORACLE instance started.Total System Global Area 1660944384 bytesFixed Size          8793448 bytesVariable Size        1056965272 bytesDatabase Buffers      587202560 bytesRedo Buffers            7983104 bytesDatabase mounted.Database opened.</code></pre><p>如果采用STARTUP NOMOUNT或者STARTUP MOUNT的数据库打开方式，必须采用alter database命令来执行装载或打开数据库的操作。例如，如果以STARTUP NOMOUNT方式打开数据库，也就是说实例已经启动，但是数据库没有装载和打开。这时必须运行下面的两条命令，数据库才能正确启动。命令如下：</p><pre><code>SQL&gt; alter database mount;      &lt;!--装载数据库--&gt;SQL&gt; alter database open;      &lt;!--打开数据库--&gt;</code></pre><p>如果以STARTUP MOUNT方式启动数据库，只需要运行下面一条命令即可以打开数据库：</p><pre><code>SQL&gt; alter database open;      &lt;!--打开数据库--&gt;</code></pre><h4 id="2）数据库的关闭"><a href="#2）数据库的关闭" class="headerlink" title="2）数据库的关闭"></a>2）数据库的关闭</h4><p>对于数据库的关闭，有四种不同的关闭选项。</p><h5 id="①SHUTDOWN-NORMAL"><a href="#①SHUTDOWN-NORMAL" class="headerlink" title="①SHUTDOWN NORMAL"></a>①SHUTDOWN NORMAL</h5><p>SHUTDOWN NORMAL是SHUTDOWN命令的默认选项。也就是说，如果用户发出SHUTDOWN命令，即执行SHUTDOWN NORMAL命令。<br>发出该命令后，任何新的连接都将不再允许连接到数据库。在数据库关闭之前，Oracle将等待目前连接的所有用户都从数据库中退出后才开始关闭数据库。采用这种方式关闭数据库，在下一次启动时不需要进行任何的实例恢复。但需要注意的是，采用这种方式时，也许关闭一个数据库需要几天或更长的时间。</p><pre><code>SQL&gt; shutdown;Database closed.Database dismounted.ORACLE instance shut down.SQL&gt; shutdown normal;Database closed.Database dismounted.ORACLE instance shut down.</code></pre><h5 id="②SHUTDOWN-IMMEDIATE"><a href="#②SHUTDOWN-IMMEDIATE" class="headerlink" title="②SHUTDOWN IMMEDIATE"></a>②SHUTDOWN IMMEDIATE</h5><p>SHUTDOWN IMMEDIATE是常用的一种关闭数据库的方式。若即想很快地关闭数据库，又想让数据库“干净”的关闭，则常采用这种方式。<br>发出该命令后，当前正在被Oracle处理的SQL语句立即中断，系统中任何没有提交的事务全部回滚。如果系统中存在一个很长的未提交的事务，那么采用这种方式关闭数据库也需要一段时间（该事务回滚时间）。系统不会等待连接到数据库的所有用户退出系统，而会强行回滚当前所有的活动事务，然后断开所有的连接用户。</p><pre><code>SQL&gt; shutdown immediate;Database closed.Database dismounted.ORACLE instance shut down.</code></pre><h5 id="③SHUTDOWN-TRANSACTIONAL"><a href="#③SHUTDOWN-TRANSACTIONAL" class="headerlink" title="③SHUTDOWN TRANSACTIONAL"></a>③SHUTDOWN TRANSACTIONAL</h5><p>SHUTDOWN TRANSACTIONAL命令常用来计划关闭数据库，它会等待当前连接到系统且正在活动的事务执行完毕，运行该命令后，任何新的连接和事务都是不允许的。它所有活动的事务执行完成后，数据库将以和SHUTDOWN IMMEDIATE同样的方式关闭数据库。</p><pre><code>SQL&gt; shutdown transactional;Database closed.Database dismounted.ORACLE instance shut down.</code></pre><h5 id="④SHUTDOWN-ABORT"><a href="#④SHUTDOWN-ABORT" class="headerlink" title="④SHUTDOWN ABORT"></a>④SHUTDOWN ABORT</h5><p>SHUTDOWN ABORT是关闭数据库方式的最后选择，是在没有任何办法关闭数据库的情况下不得不采用的方式，一般不要采用。在下列情况出现时可以考虑采用这种方式关闭数据库。</p><pre><code>SQL&gt; shutdown abort;ORACLE instance shut down.</code></pre><blockquote><p>数据库处于一种非正常工作状态，不能用SHUTDOWN NORMAL或SHUTDOWN IMMEDIATE命令关闭数据库；</p><ul><li>需要立即关闭数据库；</li><li>在启动数据库实例时遇到问题。</li></ul><p>发出该命令后，所有正在运行的SQL语句将立即中止，所有未提交的事务将不回滚，oracle也不等待目前连接到数据库的用户退出系统；下一次启动数据库时需要实例恢复，因此，下一次启动可能比平时需要更多的时间。</p><p>在关闭数据库时最好使用SHUTDOWN IMMEDIATE方式，因为这种方式安全且相对较快。不是万不得已不要使用SHUTDOWN ABORT 方式，因为这种方式会造成数据丢失，并且恢复数据库也需要较长时间。</p></blockquote><h3 id="2、启动、关闭Oracle监听进程"><a href="#2、启动、关闭Oracle监听进程" class="headerlink" title="2、启动、关闭Oracle监听进程"></a>2、启动、关闭Oracle监听进程</h3><p>当oracle数据库实例启动完成后，为了使客户端用户能连接到oracle实例，DBA还需要在oracle所在的服务器上使用lsnrctl命令启动监听进程。如果数据库实例关闭，一般也要关闭监听进程。</p><h4 id="1）启动监听"><a href="#1）启动监听" class="headerlink" title="1）启动监听"></a>1）启动监听</h4><p>启动（Start）监听是Oracle用户在操作系统下执行的命令，可以直接在lsnrctl后加参数，也可在该命令提示符后进行操作，具体操作如下：</p><pre><code>[oracle@oracle ~]$ lsnrctl       &lt;!--执行该命令--&gt;LSNRCTL for Linux: Version 12.2.0.1.0 - Production on 06-JAN-2020 19:28:52Copyright (c) 1991, 2016, Oracle.  All rights reserved.Welcome to LSNRCTL, type "help" for information.LSNRCTL&gt; start           &lt;!--启动监听--&gt;Starting /u01/app/oracle/product/12.2.0/dbhome_1//bin/tnslsnr: please wait...TNSLSNR for Linux: Version 12.2.0.1.0 - ProductionSystem parameter file is /u01/app/oracle/product/12.2.0/dbhome_1/network/admin/listener.oraLog messages written to /u01/app/oracle/diag/tnslsnr/oracle/listener/alert/log.xmlListening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=oracle)(PORT=1521)))Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=oracle)(PORT=1521)))STATUS of the LISTENER------------------------Alias                     LISTENERVersion                   TNSLSNR for Linux: Version 12.2.0.1.0 - ProductionStart Date                06-JAN-2020 19:28:54Uptime                    0 days 0 hr. 0 min. 0 secTrace Level               offSecurity                  ON: Local OS AuthenticationSNMP                      OFFListener Parameter File   /u01/app/oracle/product/12.2.0/dbhome_1/network/admin/listener.oraListener Log File         /u01/app/oracle/diag/tnslsnr/oracle/listener/alert/log.xmlListening Endpoints Summary...  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=oracle)(PORT=1521)))  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))The listener supports no servicesThe command completed successfully</code></pre><p><strong>也可以直接使用以下命令“来启动监听：</strong></p><pre><code>[oracle@Oracle ~]$ lsnrctl start</code></pre><h4 id="2）关闭监听"><a href="#2）关闭监听" class="headerlink" title="2）关闭监听"></a>2）关闭监听</h4><pre><code>[oracle@oracle ~]$ lsnrctl stopLSNRCTL for Linux: Version 12.2.0.1.0 - Production on 06-JAN-2020 19:33:04Copyright (c) 1991, 2016, Oracle.  All rights reserved.Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=oracle)(PORT=1521)))The command completed successfully</code></pre><p>———————— 本文至此结束，感谢阅读 ————————</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0-1 管理Oracle</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/0-1-guan-li-oracle/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/ru-men-zhi-shi/0-1-guan-li-oracle/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day1-</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/java-lian-jie-oracle/day1/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/java-lian-jie-oracle/day1/</url>
      
        <content type="html"><![CDATA[<p>官方示例代码:<a href="https://github.com/oracle/oracle-db-examples" target="_blank" rel="noopener">https://github.com/oracle/oracle-db-examples</a></p><h1 id="甲骨文JDBC精简驱动程序"><a href="#甲骨文JDBC精简驱动程序" class="headerlink" title="甲骨文JDBC精简驱动程序"></a><strong>甲骨文JDBC精简驱动程序</strong></h1><p>使用ojdbc8.jar 驱动连接Oracle</p><blockquote><p>修改host地址 端口port 服务名service_name</p><p>username password</p></blockquote><p>官方翻译</p><blockquote><p>Oracle 建议在大多数要求下使用 JDBC 精简驱动程序。JDBC 精简驱动程序将在具有合适 Java 虚拟机的任何系统上工作。（JVM）。Oracle 提供的其他一些客户端驱动程序是 JDBC 精简驱动程序、Oracle 呼叫接口 （OCI） 驱动程序、服务器端精简驱动程序和服务器端内部驱动程序。</p><p>JDBC 精简驱动程序是纯 Java，IV 型驱动程序。JDBC 驱动程序版本 /ojdbc8.jar） 对 JDK 8 的插曲支持。</p><p>JDBC 精简驱动程序使用 SQL*Net 与服务器通信以访问数据库。</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>demo1<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DatabaseMetaData<span class="token punctuation">;</span><span class="token keyword">import</span> oracle<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>pool<span class="token punctuation">.</span>OracleDataSource<span class="token punctuation">;</span><span class="token keyword">import</span> oracle<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>OracleConnection<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataSourceSample</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// The recommended format of a connection URL is the long format with the</span>    <span class="token comment" spellcheck="true">// connection descriptor.</span>    <span class="token comment" spellcheck="true">// final static String DB_URL= "jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(HOST=myhost)(PORT=1521)(PROTOCOL=tcp))(CONNECT_DATA=(SERVICE_NAME=myorcldbservicename)))";</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String DB_URL<span class="token operator">=</span> <span class="token string">"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(HOST=192.168.21.129)(PORT=1521)(PROTOCOL=tcp))(CONNECT_DATA=(SERVICE_NAME=orcl)))"</span><span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String DB_USER <span class="token operator">=</span> <span class="token string">"system"</span><span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String DB_PASSWORD <span class="token operator">=</span> <span class="token string">"oracle123"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span> <span class="token punctuation">(</span>String args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>        OracleDataSource ods <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OracleDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ods<span class="token punctuation">.</span><span class="token function">setURL</span><span class="token punctuation">(</span>DB_URL<span class="token punctuation">)</span><span class="token punctuation">;</span>        ods<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>DB_USER<span class="token punctuation">)</span><span class="token punctuation">;</span>        ods<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>DB_PASSWORD<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// With AutoCloseable, the connection is closed automatically.</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span>OracleConnection connection <span class="token operator">=</span> <span class="token punctuation">(</span>OracleConnection<span class="token punctuation">)</span>                ods<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// Get the JDBC driver name and version</span>            DatabaseMetaData dbmd <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Driver Name: "</span> <span class="token operator">+</span> dbmd<span class="token punctuation">.</span><span class="token function">getDriverName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Driver Version: "</span> <span class="token operator">+</span>                    dbmd<span class="token punctuation">.</span><span class="token function">getDriverVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Database Username is: "</span> <span class="token operator">+</span>                    connection<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="通用连接池"><a href="#通用连接池" class="headerlink" title="通用连接池"></a>通用连接池</h1><h3 id="Universal-Connection-Pool"><a href="#Universal-Connection-Pool" class="headerlink" title="Universal Connection Pool"></a>Universal Connection Pool</h3><p>Connection pools help improve performance by reusing connection objects and reducing the number of times that connection objects are created.</p><p>Oracle Universal Connection Pool (UCP) is a feature rich Java connection pool that provides connection pool functionalities, along with high availability, scalability and load balancing with the help of tighter integration with Oracle Database configurations.</p><p>A Java application or container must have in their classpath, along with the (JDK8), to be able to use UCP. <code>ucp.jar``ojdbc8.jar</code></p><p>翻译:</p><blockquote><h3 id="通用连接池-1"><a href="#通用连接池-1" class="headerlink" title="通用连接池"></a>通用连接池</h3><p>连接池通过重用连接对象和减少创建连接对象的时间来帮助提高性能。</p><p>Oracle 通用连接池 （UCP） 是一个功能丰富的 Java 连接池，提供连接池功能，以及高可用性、可扩展性和负载平衡，并借助于与 Oracle 数据库配置进行更紧密的集成。</p><p>Java 应用程序或容器必须具有其类路径（以及 （JDK8）才能使用 UCP。<code>ucp.jar``ojdbc8.jar</code></p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>demo1<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>ResultSet<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Statement<span class="token punctuation">;</span><span class="token keyword">import</span> oracle<span class="token punctuation">.</span>ucp<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>PoolDataSourceFactory<span class="token punctuation">;</span><span class="token keyword">import</span> oracle<span class="token punctuation">.</span>ucp<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>PoolDataSource<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UCPSample</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// final static String DB_URL=   "jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(HOST=myhost)(PORT=1521)(PROTOCOL=tcp))(CONNECT_DATA=(SERVICE_NAME=myorcldbservicename)))";</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String DB_URL <span class="token operator">=</span> <span class="token string">"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(HOST=192.168.21.129)(PORT=1521)(PROTOCOL=tcp))(CONNECT_DATA=(SERVICE_NAME=orcl)))"</span><span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String DB_USER <span class="token operator">=</span> <span class="token string">"system"</span><span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String DB_PASSWORD <span class="token operator">=</span> <span class="token string">"oracle123"</span><span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token keyword">static</span> String CONN_FACTORY_CLASS_NAME <span class="token operator">=</span> <span class="token string">"oracle.jdbc.pool.OracleDataSource"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/*     * 示例将UCP演示为客户端连接池。     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 获取UCP的PoolDataSource</span>        PoolDataSource pds <span class="token operator">=</span> PoolDataSourceFactory<span class="token punctuation">.</span><span class="token function">getPoolDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 首先在所有其他属性之前设置连接工厂</span>        pds<span class="token punctuation">.</span><span class="token function">setConnectionFactoryClassName</span><span class="token punctuation">(</span>CONN_FACTORY_CLASS_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>        pds<span class="token punctuation">.</span><span class="token function">setURL</span><span class="token punctuation">(</span>DB_URL<span class="token punctuation">)</span><span class="token punctuation">;</span>        pds<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>DB_USER<span class="token punctuation">)</span><span class="token punctuation">;</span>        pds<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>DB_PASSWORD<span class="token punctuation">)</span><span class="token punctuation">;</span>        pds<span class="token punctuation">.</span><span class="token function">setConnectionPoolName</span><span class="token punctuation">(</span><span class="token string">"JDBC_UCP_POOL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 默认值为0。设置启动UCP时要创建的初始连接数。</span>        pds<span class="token punctuation">.</span><span class="token function">setInitialPoolSize</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 默认值为0。设置UCP在运行时维护的最小连接数。</span>        pds<span class="token punctuation">.</span><span class="token function">setMinPoolSize</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 默认是整数。MAX_VALUE(2147483647)。设置连接池上允许的最大连接数。</span>        pds<span class="token punctuation">.</span><span class="token function">setMaxPoolSize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 默认是30秒。设置要执行的频率(以秒为单位)</span>        <span class="token comment" spellcheck="true">//超时属性。适用于</span>        <span class="token comment" spellcheck="true">// inactiveConnectionTimeout (int秒),</span>        <span class="token comment" spellcheck="true">// AbandonedConnectionTimeout &amp;(秒)</span>        <span class="token comment" spellcheck="true">// TimeToLiveConnectionTimeout (int秒)。</span>        <span class="token comment" spellcheck="true">//有效值的范围从0到Integer.MAX_VALUE。</span>        pds<span class="token punctuation">.</span><span class="token function">setTimeoutCheckInterval</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 默认值为0。设置连接池中保持可用连接的最大时间(以秒为单位)。</span>        pds<span class="token punctuation">.</span><span class="token function">setInactiveConnectionTimeout</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"检出前可用的连接: "</span>                <span class="token operator">+</span> pds<span class="token punctuation">.</span><span class="token function">getAvailableConnectionsCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"签出前借用的连接: "</span>                <span class="token operator">+</span> pds<span class="token punctuation">.</span><span class="token function">getBorrowedConnectionsCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Get the database connection from UCP.</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span>Connection conn <span class="token operator">=</span> pds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"检出后可用的连接: "</span>                    <span class="token operator">+</span> pds<span class="token punctuation">.</span><span class="token function">getAvailableConnectionsCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"检出后借用的连接: "</span>                    <span class="token operator">+</span> pds<span class="token punctuation">.</span><span class="token function">getBorrowedConnectionsCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// Perform a database operation</span>            <span class="token function">printEmployees</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"UCPSample - "</span> <span class="token operator">+</span> <span class="token string">"SQLException occurred : "</span>                    <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"签入后可用的连接: "</span>                <span class="token operator">+</span> pds<span class="token punctuation">.</span><span class="token function">getAvailableConnectionsCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在签入后借用连接: "</span>                <span class="token operator">+</span> pds<span class="token punctuation">.</span><span class="token function">getBorrowedConnectionsCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*     * 显示employee表中的first_name和last_name。     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printEmployees</span><span class="token punctuation">(</span>Connection connection<span class="token punctuation">)</span>            <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 语句和结果集是自动关闭的。</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span>Statement statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">(</span>ResultSet resultSet <span class="token operator">=</span> statement                    <span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">"select first_name, last_name from employees"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"FIRST_NAME"</span> <span class="token operator">+</span> <span class="token string">"  "</span> <span class="token operator">+</span> <span class="token string">"LAST_NAME"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"---------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span>                            <span class="token operator">+</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>重启虚拟机连接Oracle失败总结</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/chong-qi-xu-ni-ji-lian-jie-oracle-shi-bai-zong-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/chong-qi-xu-ni-ji-lian-jie-oracle-shi-bai-zong-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="检查IP地址"><a href="#检查IP地址" class="headerlink" title="检查IP地址"></a>检查IP地址</h2><p>是否和 host 文件一致</p><pre class=" language-shell"><code class="language-shell">ifconfigvi /etc/hosts</code></pre><h2 id="启动监听"><a href="#启动监听" class="headerlink" title="启动监听"></a>启动监听</h2><pre class=" language-shell"><code class="language-shell"># 查看监听状态lsnrctl status# 启动监听lsnrctl start# 再次查看监听状态lsnrctl status</code></pre><h2 id="启动数据库"><a href="#启动数据库" class="headerlink" title="启动数据库"></a>启动数据库</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true"># 登录 sys</span>sqlplus <span class="token operator">/</span> <span class="token keyword">as</span> sysdba<span class="token comment" spellcheck="true"># 启动数据库</span>startup<span class="token comment" spellcheck="true"># 登录本地管理员 system</span>conn system输入密码</code></pre><h2 id="开放防火墙端口"><a href="#开放防火墙端口" class="headerlink" title="开放防火墙端口"></a>开放防火墙端口</h2><p>如果远程连接超时</p><pre class=" language-shell"><code class="language-shell"># 切换到管理员su root#查看端口状态firewall-cmd --state#开放端口firewall-cmd --zone=public --add-port=1521/tcp --permanent  # 开放1521端口#firewall-cmd --zone=public --remove-port=1521/tcp --permanent #关闭1521端口firewall-cmd --reload  # 配置立即生效</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库介绍</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/shu-ju-ku-jie-shao/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/shu-ju-ku-jie-shao/</url>
      
        <content type="html"><![CDATA[<h1 id="数据库-Database-DB"><a href="#数据库-Database-DB" class="headerlink" title="数据库(Database DB)"></a>数据库(Database DB)</h1><blockquote><p>长期存储在计算机内有的有结构 大量的 共享的数据集合</p></blockquote><ul><li>长期: 持久存储</li><li>有结构 存储数据量大</li><li>共享 多应用通过数据库共享</li></ul><h1 id="数据库类型"><a href="#数据库类型" class="headerlink" title="数据库类型"></a>数据库类型</h1><ul><li><p>关系数据库</p><ul><li>MySQL<ul><li>MariaDB(MySQL替代品)</li></ul></li><li>PostgerSQL</li><li>SQL Server</li><li>Oracle数据库</li></ul></li><li><p>非关系数据库NoSQL</p><ul><li>面向检索的列式存储Column-Oriented<ul><li>BigTable</li><li>HaBase</li></ul></li><li>面向高并发的缓存存储Key-value<ul><li>Redis</li></ul></li><li>面向海量数据访问的文档存储<ul><li>MongoDB</li><li>CouchDB</li></ul></li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle远程访问问题总结</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/oracle-yuan-cheng-fang-wen-wen-ti-zong-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/oracle-yuan-cheng-fang-wen-wen-ti-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1. 创建数据库"></a>1. 创建数据库</h1><pre class=" language-bash"><code class="language-bash">dbca</code></pre><p><strong>关键点</strong>: 数据库名 口令设置  口令管理 需要有没被锁定的用户 默认sysbda</p><h1 id="2-开启监听"><a href="#2-开启监听" class="headerlink" title="2. 开启监听"></a>2. 开启监听</h1><h2 id="打开端口或关闭防火墙"><a href="#打开端口或关闭防火墙" class="headerlink" title="打开端口或关闭防火墙"></a>打开端口或关闭防火墙</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 切换到管理员</span><span class="token function">su</span> root<span class="token comment" spellcheck="true">#查看端口状态</span>firewall-cmd --state<span class="token comment" spellcheck="true">#开放端口</span>firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span>1521/tcp --permanent  <span class="token comment" spellcheck="true"># 开放1521端口</span><span class="token comment" spellcheck="true">#firewall-cmd --zone=public --remove-port=1521/tcp --permanent #关闭1521端口</span>firewall-cmd --reload  <span class="token comment" spellcheck="true"># 配置立即生效</span></code></pre><h2 id="创建监听服务"><a href="#创建监听服务" class="headerlink" title="创建监听服务"></a><strong>创建监听服务</strong></h2><pre class=" language-bash"><code class="language-bash">netca</code></pre><p><strong>创建过程如果出现端口被占用 继续创建完成,检查问题</strong></p><ul><li><p>查看端口,如果没有显示,则证明端口没有被监听</p><pre><code>netstat -tunlp|grep 1521</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200923144448.png" alt="img"></p></li><li><p>hostname 不一致,会导致监听服务启动失败,显示所有端口都被占用</p><ul><li><p>查看本地hostname,首先切换root用户,查看配置的hosts文件</p><pre><code># 切换用户su root# 配置hostsvi /etc/hosts# 添加 ip oralcesu oracle</code></pre><p><img src="../../../../AppData/Roaming/Typora/typora-user-images/image-20200922224721185.png" alt="image-20200922224721185"></p><p><img src="../../../../AppData/Roaming/Typora/typora-user-images/image-20200922224511004.png" alt="image-20200922224511004"></p></li><li><p>配置监听文件(也可单独修改文件)</p><ul><li>TCP ipv4地址(如果不是TCP,可能是ipv6地址,需要修改成tcp)<ul><li><a href="https://www.cnblogs.com/aloneysir/p/12690202.html" target="_blank" rel="noopener">禁用tcp4 介绍</a></li></ul></li><li>HOST 改为oracle 或则 你的ip地址</li></ul></li><li><p>PORT 可以设为指定端口号 默认1521</p><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> <span class="token variable">$ORACLE_HOME</span><span class="token function">vi</span> network/admin/listener.ora </code></pre></li></ul></li></ul><p>  <img src="../../../../AppData/Roaming/Typora/typora-user-images/image-20200922225500062.png" alt="image-20200922225500062"></p><ul><li><p><strong>启动监听服务,启动数据库实例</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 查看服务状态</span>lsnrctl status<span class="token comment" spellcheck="true"># 启动监听</span>lsnrctl start</code></pre><p>先本地登录测试</p><pre><code># 登录sqlplus / as sysdba# 启动数据库实例SQL&gt; startup# 关闭数据库实例# shtutdown......# system用户 登录Oraclesqlplus用户名密码</code></pre></li></ul><h1 id="3-账户设置"><a href="#3-账户设置" class="headerlink" title="3. 账户设置"></a>3. 账户设置</h1><blockquote><p>客户端 我是用的Navcat12 登录, 出现的错误总结</p></blockquote><h2 id="错误码-ORA-28040"><a href="#错误码-ORA-28040" class="headerlink" title="错误码 ORA-28040"></a>错误码 ORA-28040</h2><blockquote><p>ORA-28040: No matching authentication protocol</p></blockquote><p>按照官方说法在服务端sqlnet.ora下需要添加如下参数。</p><p>SQLNET.ALLOWED_LOGON_VERSION_CLIENT</p><p>SQLNET.ALLOWED_LOGON_VERSION_SERVE</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>oracle@host02 admin<span class="token punctuation">]</span>$ <span class="token function">pwd</span>/u01/app/oracle/product/18.3.0/dbhome_1/network/admin<span class="token punctuation">[</span>oracle@host02 admin<span class="token punctuation">]</span>$ <span class="token function">more</span>  sqlnet.ora<span class="token comment" spellcheck="true">#SQLNET.ALLOWED_LOGON_VERSION_SERVER=11</span><span class="token comment" spellcheck="true">#SQLNET.ALLOWED_LOGON_VERSION_CLIENT=10</span>SQLNET.ALLOWED_LOGON_VERSION<span class="token operator">=</span>8SQLNET.ALLOWED_LOGON_VERSION_CLIENT<span class="token operator">=</span>8SQLNET.ALLOWED_LOGON_VERSION_SERVE<span class="token operator">=</span>10</code></pre><h2 id="错误码-ORA-01017"><a href="#错误码-ORA-01017" class="headerlink" title="错误码 ORA-01017"></a>错误码 ORA-01017</h2><blockquote><p>提示错误：ORA-01017: invalid username/password; logon denied 错误(程序中的用户和密码无法登录，登录被拒)。</p></blockquote><ol><li>检查用户名和密码是否正确(上面的本地测试)</li><li>检查监听文件是否配置正确(上面有)</li></ol><p><strong>相关查询语句</strong></p><pre><code>select * from dba_users;# 如果用户被锁定,给账号解锁alter user user1 account unlock;   </code></pre><h2 id="修改账户-密码方式"><a href="#修改账户-密码方式" class="headerlink" title="修改账户 密码方式"></a>修改账户 密码方式</h2><p>todo</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle linux7.6 install oracle database 18c</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/oracle-linux7.6-install-oracle-database-18c/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/oracle-linux7.6-install-oracle-database-18c/</url>
      
        <content type="html"><![CDATA[<p>+Simple demonstration on how to install Oracle database 18c in Oracle Linux 7.6 64-bit OS.</p><p>Steps are given below:</p><h1 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h1><h2 id="Disable-firewall-and-selinux"><a href="#Disable-firewall-and-selinux" class="headerlink" title="Disable firewall and selinux"></a>Disable firewall and selinux</h2><p>Disable or configure the firewall to grant access to the server. use te following commands for OL 7.</p><pre class=" language-bash"><code class="language-bash">systemctl status firewalld<span class="token function">service</span> firewalld stop<span class="token function">service</span> firewalld startsystemctl disable firewalldsystemctl <span class="token function">enable</span> firewalld</code></pre><pre class=" language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/selinux/config</code></pre><pre class=" language-bash"><code class="language-bash">SELINUX<span class="token operator">=</span>disabled</code></pre><p><strong>配置host文件</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/hosts<span class="token comment" spellcheck="true"># 你的IP地址</span>192.168.21.129 testlab.com.bd testlab</code></pre><h1 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h1><h2 id="create-OS-group-and-user"><a href="#create-OS-group-and-user" class="headerlink" title="create OS group and user"></a>create OS group and user</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">groupadd</span> -g 1100 oinstall<span class="token function">groupadd</span> -g 1131 dba<span class="token function">groupadd</span> -g 1132 oper<span class="token function">useradd</span> -u 1101 -g oinstall -G dba,oper oracle<span class="token function">passwd</span> oracle</code></pre><p>=========================<br>create directories</p><hr><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> -p /u01/app/oracle/product/18.3.0/dbhome_1<span class="token function">chown</span> -R oracle:oinstall /u01<span class="token function">chmod</span> -R 775 /u01</code></pre><p>run the following command from anywhere as root</p><pre><code>yum install oracle-database-preinstall-18c.x86_64</code></pre><p>#—————————-</p><h1 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h1><p>#—————————-</p><pre><code>su oracle</code></pre><pre><code>cd ~vi .bash_profile</code></pre><pre><code>TMP=/tmp; export TMPTMPDIR=$TMP; export TMPDIRORACLE_HOSTNAME=testlab.com.bd; export ORACLE_HOSTNAMEORACLE_BASE=/u01/app/oracle; export ORACLE_BASEORACLE_HOME=$ORACLE_BASE/product/18.3.0/dbhome_1; export ORACLE_HOMEORACLE_SID=orcl; export ORACLE_SIDORACLE_UNQNAME=orcl; export ORACLE_UNQNAMEORACLE_TERM=xterm; export ORACLE_TERMBASE_PATH=/usr/sbin:$PATH; export BASE_PATHPATH=$ORACLE_HOME/bin:$GRID_HOME/bin:$BASE_PATH; export PATHLD_LIBRARY_PATH=$ORACLE_HOME/lib:/lib:/usr/lib; export LD_LIBRARY_PATHCLASSPATH=$ORACLE_HOME/JRE:$ORACLE_HOME/jlib:$ORACLE_HOME/rdbms/jlib; export CLASSPATH</code></pre><p><strong>切换到虚拟机页面 打开终端</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token keyword">.</span> .bash_profile<span class="token keyword">echo</span> <span class="token variable">$ORALCE_HOME</span></code></pre><p><strong>下载linux压缩包 unzip 解压</strong></p><p>log in as oracle</p><p>go to ORACLE_HOME directory<br>and run ./runInstaller</p><h1 id="创建创建数据库"><a href="#创建创建数据库" class="headerlink" title="创建创建数据库"></a>创建创建数据库</h1><p><strong>创建数据库实例,如果提示/etc/oratab 没有权限 或没有该文件时 解决方式</strong></p><blockquote><p>这个文件是在创建数据库实例时建立的，需要用root用户运行root.sh，如果忘记运行在自启动和关闭时会失败，错误信息：”/etc/oratab” is not accessible。</p></blockquote><pre><code>su root. .bash_profileecho $ORACLE_HOMEcd $ORACLE_HOMEsh root.sh# 1. 默认回车 2. yes 生成自动</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922095250.png" alt="image-20200922093902998"></p><p>after software is install<br>run </p><pre><code>dbca </code></pre><p>to create database.</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200922095242.png" alt="image-20200922095110940"></p><h1 id="创建监听程序"><a href="#创建监听程序" class="headerlink" title="创建监听程序"></a>创建监听程序</h1><p>命令: netca</p><p>如果出现监听端口 被占用 可能是 hosts文件没配好</p><pre class=" language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/hosts<span class="token comment" spellcheck="true"># 你的IP地址</span>192.168.21.129 testlab.com.bd testlab</code></pre><p><strong>进入sqlplus</strong></p><pre class=" language-bash"><code class="language-bash">sqlplus / as sysdba</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>5-4 unique约束</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/5-4-unique-yue-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/5-4-unique-yue-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="UNiQUE约束"><a href="#UNiQUE约束" class="headerlink" title="UNiQUE约束"></a>UNiQUE约束</h1><h2 id="什么是unique约束"><a href="#什么是unique约束" class="headerlink" title="什么是unique约束?"></a>什么是unique约束?</h2><ul><li>unique约束, 也称唯一键约束, 用于限定数据表中字段值的唯一性</li></ul><h2 id="添加unique约束"><a href="#添加unique约束" class="headerlink" title="添加unique约束"></a>添加unique约束</h2><ul><li><p>在创建数据表时添加unique约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> table_name<span class="token punctuation">(</span>    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>    <span class="token keyword">constraint</span> constraint_name <span class="token keyword">unique</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></li><li><p>在修改数据表时添加unique约束</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> table_name <span class="token keyword">add</span> constraints constraints constraint_name <span class="token keyword">unique</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span></code></pre></li></ul><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">--在建表时添加唯一约束</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">CONSTRAINT</span> uq_student_tel <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>stu_tel<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--删除表</span><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">;</span><span class="token comment" spellcheck="true">--创建表示添加唯一约束</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--创建表</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token punctuation">(</span>    stu_num char<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>    stu_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_sex char<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_age number<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stu_tel char<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--通过修改表，创建唯一约束</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> uq_student_tel <span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>stu_tel<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--删除字段的唯一约束</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> TB_STUDENTS <span class="token keyword">drop</span> <span class="token keyword">CONSTRAINT</span> uq_student_tel<span class="token punctuation">;</span> </code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0 前言</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/0-qian-yan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/oracle-shu-ju-ku/0-qian-yan/</url>
      
        <content type="html"><![CDATA[<p>我学习的是Oracle 18c 版本 系统是Oracle linux7.6版本</p><p>这些笔记都是我在学习过程中的记录,许多内容都来自于网络搜索</p><p>本人推荐查看官方文档进行学习oracle</p><p><a href="http://www.oracle.com/technetwork/indexes/documentation/index.html" target="_blank" rel="noopener">http://docs.oracle.com/en/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决mysql8.0的数据库连接配置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/mysql8.0/jie-jue-mysql8.0-de-shu-ju-ku-lian-jie-pei-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/mysql8.0/jie-jue-mysql8.0-de-shu-ju-ku-lian-jie-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="相关设置"><a href="#相关设置" class="headerlink" title="相关设置"></a>相关设置</h1><blockquote><ol><li><strong>需要将driverClass改为jdbc.driverClass=com.mysql.cj.jdbc.Driver</strong></li><li><strong>需要在jdbcUrl中把&amp;改为&amp;</strong></li><li><strong>需要把mysql-connector的jar包改为8.*版本</strong></li></ol></blockquote><h1 id="数据库存储时间相差一天"><a href="#数据库存储时间相差一天" class="headerlink" title="数据库存储时间相差一天"></a>数据库存储时间相差一天</h1><p>官方：<a href="https://dev.mysql.com/doc/connectors/en/connector-j-usagenotes-known-issues-limitations.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/connectors/en/connector-j-usagenotes-known-issues-limitations.html</a></p><p>基于Linux系统下的解决方法：参考：<a href="https://blog.csdn.net/u013983235/article/details/82884174" target="_blank" rel="noopener">https://blog.csdn.net/u013983235/article/details/82884174</a></p><blockquote><p><strong>serverTimezone=Asia/Shanghai</strong></p></blockquote><h1 id="中文编码"><a href="#中文编码" class="headerlink" title="中文编码"></a>中文编码</h1><pre><code>useUnicode=true&amp;characterEncoding=utf-8</code></pre><h1 id="综上所述，代码-db-properties-为"><a href="#综上所述，代码-db-properties-为" class="headerlink" title="综上所述，代码(db.properties)为"></a>综上所述，代码(db.properties)为</h1><pre class=" language-xml"><code class="language-xml">jdbc.driver=com.mysql.cj.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/database?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8jdbc.username=rootjdbc.password=123456</code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>参考官方参考手册：<a href="https://dev.mysql.com/doc/connectors/en/connector-j-reference-jdbc-url-format.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/connectors/en/connector-j-reference-jdbc-url-format.html</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初始化密码</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/mysql8.0/chu-shi-hua-mi-ma/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/mysql8.0/chu-shi-hua-mi-ma/</url>
      
        <content type="html"><![CDATA[<div id="cnblogs_post_body" class="blogpost-body ">    <p><br>一、问题描述</p><p>1、在安装MySQL8.0时，修改临时密码，因密码过于简单（如：123456），不符合MySQL密码规范，会触发一个报错信息：</p><p> ERROR 1819 (HY000): Your password does not satisfy the current policy requirements。 </p><p><br>二、遇到问题</p><p>1、解决办法调整MySQL密码验证规则，修改 policy 和 length 的值。</p><p>2、MySQL 5.7 进行如下设置，即可解决问题：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>mysql&gt;  set global validate_password_policy=0;<br>mysql&gt; set global validate_password_length=1;<br>3、MySQL 8.0 执行代码：&nbsp;&nbsp;&nbsp;&nbsp;</p><p>mysql&gt;  set global validate_password_policy=0;<br>ERROR 1193 (HY000): Unknown system variable 'validate_password_policy'<br> <br>mysql&gt; set global validate_password_length=1;<br>ERROR 1193 (HY000): Unknown system variable 'validate_password_length'<br>&nbsp;</p><p>三、问题解决</p><p>1、分析： 可以看到，修改 policy 和 length 的值，在MySQL5.7中好使，在MySQL8.0中无效。'validate_password_policy' 变量不存在。</p><p>2、解决： 先修改一个满足的密码 （如：Root_12root）</p><p>3、密码修改后，可用命令查看 validate_password 密码验证插件是否安装。</p><p>mysql&gt; SHOW VARIABLES LIKE 'validate_password%';</p><p><img src="https://img2018.cnblogs.com/blog/1119010/201904/1119010-20190414231708837-350259959.png" alt=""></p><p>&nbsp;</p><p>4、MySQL 8.0 调整密码验证规则：</p><p>mysql&gt; set global validate_password.policy=0;</p><p><em id="__mceDel">mysql&gt; set global validate_password.length=1;</em></p><p>&nbsp;</p><p>5、重新设置密码：&nbsp;ALTER USER 'root'@'localhost' IDENTIFIED BY '你的密码';</p><p>&nbsp;</p><p>四、问题总结</p><p>1、 通过查看 MySQL5.7 和 MySQL8.0 密码验证插件对比，可知两个版本中，变量名不一样。（*_password_policy 和 *_password.policy ） --- 问题原因所在。</p><p><br><br></p></div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从安装到卸载</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/mysql8.0/cong-an-zhuang-dao-xie-zai/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/mysql8.0/cong-an-zhuang-dao-xie-zai/</url>
      
        <content type="html"><![CDATA[<div class="htmledit_views" id="content_views">                                            <p>根据搜集的资料安装测试并在安装测试过程中整理的文档，部分参考文档在相应位置有标记。如有不足希望不吝赐教。</p><hr><p><strong>目录</strong></p><p id="%E4%B8%80%E3%80%81%E9%85%8D%E7%BD%AEyum%E6%BA%90-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E9%85%8D%E7%BD%AEyum%E6%BA%90" rel="nofollow" data-token="d05dd36135c8110a3915b2b41de20705" target="_self">一、配置yum源</a></p><p id="1.%E4%B8%8B%E8%BD%BDmysql%E6%BA%90%E5%AE%89%E8%A3%85%E5%8C%85-toc" style="margin-left:40px;"><a href="#1.%E4%B8%8B%E8%BD%BDmysql%E6%BA%90%E5%AE%89%E8%A3%85%E5%8C%85" rel="nofollow" data-token="417284a06befa9cee1452bdec45f4c0a" target="_self">1.下载mysql源安装包</a></p><p id="2.%E5%AE%89%E8%A3%85mysql%E6%BA%90-toc" style="margin-left:40px;"><a href="#2.%E5%AE%89%E8%A3%85mysql%E6%BA%90" rel="nofollow" data-token="e9d32b2830496abafa4296f459aa7f3d" target="_self">2.安装mysql源</a></p><p id="3.%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F-toc" style="margin-left:40px;"><a href="#3.%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F" rel="nofollow" data-token="1c1ae194bac23d13cc942f2d0d77dae3" target="_self">3.检查是否安装成功</a></p><p id="4.%E4%BF%AE%E6%94%B9%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC%EF%BC%88%E9%9D%9E%E5%BF%85%E9%A1%BB%EF%BC%89-toc" style="margin-left:40px;"><a href="#4.%E4%BF%AE%E6%94%B9%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC%EF%BC%88%E9%9D%9E%E5%BF%85%E9%A1%BB%EF%BC%89" rel="nofollow" data-token="4570ea7ce1108877c41a7f05927bec9d" target="_self">4.修改安装版本（非必须）</a></p><p id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85mysql-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85mysql" rel="nofollow" data-token="c25db65e3c6ac36e7385821f60267da4" target="_self">二、安装mysql</a></p><p id="%E4%B8%89%E3%80%81%E5%90%AF%E5%8A%A8mysql%E6%9C%8D%E5%8A%A1-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%90%AF%E5%8A%A8mysql%E6%9C%8D%E5%8A%A1" rel="nofollow" data-token="75e4e89348d079d41a14d494629e49b3" target="_self">三、启动mysql服务</a></p><p id="1.%E5%90%AF%E5%8A%A8-toc" style="margin-left:40px;"><a href="#1.%E5%90%AF%E5%8A%A8" rel="nofollow" data-token="2906b6ab2ecf17d76553fa1eba572110" target="_self">1.启动</a></p><p id="2.%E6%9F%A5%E7%9C%8B%E5%90%AF%E5%8A%A8%E7%8A%B6%E6%80%81-toc" style="margin-left:40px;"><a href="#2.%E6%9F%A5%E7%9C%8B%E5%90%AF%E5%8A%A8%E7%8A%B6%E6%80%81" rel="nofollow" data-token="1b0021eceb6545bf8afc494304fa610a" target="_self">2.查看启动状态</a></p><p id="3.%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8-toc" style="margin-left:40px;"><a href="#3.%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8" rel="nofollow" data-token="a7d4243e46d226b4b81da270f0b9baa0" target="_self">3.设置开机启动</a></p><p id="%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%83%A8%E5%88%86%E5%91%BD%E4%BB%A4-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%83%A8%E5%88%86%E5%91%BD%E4%BB%A4" rel="nofollow" data-token="e24e079f3438547c7c27b31ee6cbe027" target="_self">四、配置及部分命令</a></p><p id="1.%E4%BF%AE%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81-toc" style="margin-left:40px;"><a href="#1.%E4%BF%AE%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81" rel="nofollow" data-token="c0049e3ef8e6b619a30b66e715f98485" target="_self">1.修改登录密码</a></p><p id="2.%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7-toc" style="margin-left:40px;"><a href="#2.%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7" rel="nofollow" data-token="ab63e91dfe71542d4083e1df7f7209f6" target="_self">2.添加远程登录用户</a></p><p id="3.sqlyog%E9%93%BE%E6%8E%A5%E6%97%B6%E5%87%BA%E7%8E%B02058%E5%BC%82%E5%B8%B8-toc" style="margin-left:40px;"><a href="#3.sqlyog%E9%93%BE%E6%8E%A5%E6%97%B6%E5%87%BA%E7%8E%B02058%E5%BC%82%E5%B8%B8" rel="nofollow" data-token="096dee9405675b85ad261d9c2f1ca8e4" target="_self">3.sqlyog链接时出现2058异常</a></p><p id="4.%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F-toc" style="margin-left:40px;"><a href="#4.%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F" rel="nofollow" data-token="9c4db988b874d3a1e837ba0840a750ea" target="_self">4.修改默认编码方式</a></p><p id="5.%E9%83%A8%E5%88%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4-toc" style="margin-left:40px;"><a href="#5.%E9%83%A8%E5%88%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4" rel="nofollow" data-token="1a9e85638177f3bd4a6535c5531819bb" target="_self">5.部分参数配置查询命令</a></p><p id="%E4%BA%94%E3%80%81%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BDmysql-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BDmysql" rel="nofollow" data-token="f8ea7589ce89f80e362642038fd5d95c" target="_self">五、彻底卸载mysql</a></p><p id="1.%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6-toc" style="margin-left:40px;"><a href="#1.%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6" rel="nofollow" data-token="6d14d118678bee6ab8250f781c543b72" target="_self">1.卸载软件</a></p><p id="2.%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#2.%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6" rel="nofollow" data-token="85f671d566679a24113ce779a10ae758" target="_self">2.删除文件</a></p><hr id="hr-toc"><h1 id="%E4%B8%80%E3%80%81%E9%85%8D%E7%BD%AEyum%E6%BA%90"><a name="t0"></a>一、配置yum源</h1><h2 id="1.%E4%B8%8B%E8%BD%BDmysql%E6%BA%90%E5%AE%89%E8%A3%85%E5%8C%85"><a name="t1"></a>1.下载mysql源安装包</h2><p style="margin-left:0cm;">在MySQL官网中下载YUM源rpm安装包：<a href="http://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="nofollow noopener" data-token="db341c165501c5ffff8e6ed32f64bbbe">http://dev.mysql.com/downloads/repo/yum/</a></p><p style="text-align:center;"><img alt="" class="has" height="238" src="https://img-blog.csdn.net/20181007150611140?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p style="text-align:center;"><img alt="" class="has" height="196" src="https://img-blog.csdn.net/20181007150615107?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p style="margin-left:0cm;">复制下载链接：<a href="https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm" target="_blank" rel="nofollow noopener" data-token="3a11cfb38f198a03eef9b7f7a069db2e">https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm</a></p><p style="margin-left:0cm;">本次下载目录为：/home/目录，因此进入：<span style="color:#ff0000;">cd /home</span></p><p style="margin-left:0cm;">执行下载命令：</p><pre class="has" name="code"><code class="hljs java">wget https:<span class="hljs-comment">//dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm</span></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p>&nbsp;</p><h2 id="2.%E5%AE%89%E8%A3%85mysql%E6%BA%90"><a name="t2"></a>2.安装mysql源</h2><p style="margin-left:0cm;">下载完成后使用下面命令安装源：</p><pre class="has" name="code"><code class="hljs css"><span class="hljs-selector-tag">yum</span> <span class="hljs-selector-tag">localinstall</span> <span class="hljs-selector-tag">mysql80-community-release-el7-1</span><span class="hljs-selector-class">.noarch</span><span class="hljs-selector-class">.rpm</span></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p>&nbsp;</p><h2 id="3.%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F"><a name="t3"></a>3.检查是否安装成功</h2><pre class="has" name="code"><code class="hljs perl">yum repolist enabled | <span class="hljs-keyword">grep</span> <span class="hljs-string">"mysql.*-community.*"</span></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="text-align:center;"><img alt="" class="has" height="65" src="https://img-blog.csdn.net/20181007150748219?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p>&nbsp;</p><h2 id="4.%E4%BF%AE%E6%94%B9%E5%AE%89%E8%A3%85%E7%89%88%E6%9C%AC%EF%BC%88%E9%9D%9E%E5%BF%85%E9%A1%BB%EF%BC%89"><a name="t4"></a>4.修改安装版本（非必须）</h2><p style="margin-left:0cm;">如果需要安装指定版本的mysql，可以修改/etc/yum.repos.d/mysql-community.repo源，改变默认安装的mysql版本。</p><p style="margin-left:0cm;">例如要安装5.7版本，将5.7源的enabled=0改成enabled=1，将8.0的enabled=1改成enabled=0即可，如下（本次未做修改，直接安装最新版8.0.12）：</p><p style="text-align:center;"><img alt="" class="has" height="202" src="https://img-blog.csdn.net/2018100715082168?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="507"></p><p>&nbsp;</p><h1 id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85mysql"><a name="t5"></a>二、安装mysql</h1><p>直接使用命令：<span style="color:#ff0000;">yum install mysql-community-server</span>即可。</p><p>&nbsp;</p><h1 id="%E4%B8%89%E3%80%81%E5%90%AF%E5%8A%A8mysql%E6%9C%8D%E5%8A%A1"><a name="t6"></a>三、启动mysql服务</h1><h2 id="1.%E5%90%AF%E5%8A%A8"><a name="t7"></a>1.启动</h2><pre class="has" name="code"><code class="hljs sql"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">systemctl <span class="hljs-keyword">start</span> mysqld</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">或者</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">service mysqld <span class="hljs-keyword">start</span></div></div></li></ol></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p>&nbsp;</p><h2 id="2.%E6%9F%A5%E7%9C%8B%E5%90%AF%E5%8A%A8%E7%8A%B6%E6%80%81"><a name="t8"></a>2.查看启动状态</h2><pre class="has" name="code"><code class="hljs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">systemctl status mysqld</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">或者</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">service mysqld status</div></div></li></ol></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="text-align:center;"><img alt="" class="has" height="218" src="https://img-blog.csdn.net/20181007150954915?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p>&nbsp;</p><h2 id="3.%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><a name="t9"></a>3.设置开机启动</h2><pre class="has" name="code"><code class="hljs bash"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">systemctl <span class="hljs-built_in">enable</span> mysqld</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">systemctl daemon-reload</div></div></li></ol></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p>&nbsp;</p><h1 id="%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AE%E5%8F%8A%E9%83%A8%E5%88%86%E5%91%BD%E4%BB%A4"><a name="t10"></a>四、配置及部分命令</h1><h2 id="1.%E4%BF%AE%E6%94%B9%E7%99%BB%E5%BD%95%E5%AF%86%E7%A0%81"><a name="t11"></a>1.修改登录密码</h2><p style="margin-left:0cm;">mysql安装完成之后，在/var/log/mysqld.log文件中给root生成了一个默认密码。通过下面的方式找到root默认密码，然后登录mysql进行修改：</p><pre class="has" name="code"><code class="hljs perl"><span class="hljs-keyword">grep</span> <span class="hljs-string">'temporary password'</span> /var/<span class="hljs-keyword">log</span>/mysqld.log</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="text-align:center;"><img alt="" class="has" height="26" src="https://img-blog.csdn.net/2018100715105966?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p style="margin-left:0cm;">本地MySQL客户端登录</p><pre class="has" name="code"><code class="hljs">mysql -uroot -p</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">密码是上一步查询出来的。输入后回车。</p><p style="margin-left:0cm;">然后修改密码：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'root'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">BY</span> <span class="hljs-string">'TestBicon@123'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">或者</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-keyword">password</span> <span class="hljs-keyword">for</span> <span class="hljs-string">'root'</span>@<span class="hljs-string">'localhost'</span>=<span class="hljs-keyword">password</span>(<span class="hljs-string">'TestBicon@123'</span>);</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><blockquote><p><strong>注意</strong>：mysql5.7默认安装了密码安全检查插件（validate_password），默认密码检查策略要求密码必须包含：大小写字母、数字和特殊符号，并且长度不能少于8位。否则会提示ERROR 1819 (HY000): Your password does not satisfy the current policy requirements错误，如下图所示：</p><p style="text-align:center;"><img alt="" class="has" height="34" src="https://img-blog.csdn.net/20181007151159829?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p></blockquote><p style="margin-left:0cm;">通过msyql环境变量可以查看密码策略的相关信息（执行这一步需要先修改默认密码，即执行完上一步修改才可以，否则会报错：ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.）：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">variables</span> <span class="hljs-keyword">like</span> <span class="hljs-string">'%password%'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="text-align:center;"><img alt="" class="has" height="406" src="https://img-blog.csdn.net/20181007151229820?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="488"></p><blockquote><p style="margin-left:0cm;">validate_password_policy：密码策略，默认为MEDIUM策略</p><p style="margin-left:0cm;">validate_password_dictionary_file：密码策略文件，策略为STRONG才需要</p><p style="margin-left:0cm;">validate_password_length：密码最少长度</p><p style="margin-left:0cm;">validate_password_mixed_case_count：大小写字符长度，至少1个</p><p style="margin-left:0cm;">validate_password_number_count ：数字至少1个</p><p style="margin-left:0cm;">validate_password_special_char_count：特殊字符至少1个</p><p style="margin-left:0cm;"><em>上述参数是默认策略</em><em>MEDIUM</em><em>的密码检查规则。</em></p></blockquote><p style="margin-left:0cm;">修改密码策略：</p><p style="margin-left:0cm;">在/etc/my.cnf文件添加validate_password_policy配置，指定密码策略：</p><p style="margin-left:0cm;">选择0（LOW），1（MEDIUM），2（STRONG）其中一种，选择2需要提供密码字典文件。</p><p style="margin-left:0cm;"><span style="color:#4472c4;">validate_password_policy=0</span></p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;">如果不需要密码策略，添加my.cnf文件中添加如下配置禁用即可：</p><p style="margin-left:0cm;"><span style="color:#4472c4;">validate_password = off</span></p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;">重新启动mysql服务使配置生效：<span style="color:#ff0000;">systemctl restart mysqld</span></p><p>&nbsp;</p><h2 id="2.%E6%B7%BB%E5%8A%A0%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7"><a name="t12"></a>2.添加远程登录用户</h2><p style="margin-left:0cm;">默认只允许root帐户在本地登录，如果要在其它机器上连接mysql，必须修改root允许远程连接，或者添加一个允许远程连接的帐户。</p><p style="margin-left:0cm;">修改root用户远程访问权限：</p><p style="margin-left:0cm;">选择 mysql 数据库：<span style="color:#ff0000;">use mysql;</span></p><p style="margin-left:0cm;">在 mysql 数据库的 user 表中查看当前 root 用户的相关信息：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">select</span> host, <span class="hljs-keyword">user</span> <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="text-align:center;"><img alt="" class="has" height="160" src="https://img-blog.csdn.net/20181007151435699?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="269"></p><p style="margin-left:0cm;">查看表格中 root 用户的 host，默认应该显示的 localhost，只支持本地访问，不允许远程访问。</p><p style="margin-left:0cm;">授权 root 用户的所有权限并设置远程访问</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">GRANT</span> ALL <span class="hljs-keyword">ON</span> *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">'root'</span>@<span class="hljs-string">'%'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">如果报错：ERROR 1410 (42000): You are not allowed to create a user with GRANT</p><p style="text-align:center;"><img alt="" class="has" height="41" src="https://img-blog.csdn.net/2018100715151769?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="490"></p><p style="margin-left:0cm;">则使用：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> host=<span class="hljs-string">'%'</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span> =<span class="hljs-string">'root'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">然后使用下面命令使修改生效：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">flush</span> <span class="hljs-keyword">privileges</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><blockquote><p style="margin-left:0cm;"><em>如有需要再执行之前授权报错的命令即可成功，最后同样使用</em><em><span style="color:#ff0000;">flush privileges;</span></em><em>命令刷新。</em></p></blockquote><p>&nbsp;</p><h2 id="3.sqlyog%E9%93%BE%E6%8E%A5%E6%97%B6%E5%87%BA%E7%8E%B02058%E5%BC%82%E5%B8%B8"><a name="t13"></a>3.sqlyog链接时出现2058异常</h2><p style="margin-left:0cm;">完成上面的配置使用sqlyog链接时会出现2058的异常，此时我们需要修改mysql，命令行登录mysql（与修改密码中登录相同，使用修改后的密码），然后执行下面的命令：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'root'</span>@<span class="hljs-string">'localhost'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">'password'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">其中password为自己修改的密码。然后SQLyog中重新连接，则可连接成功，OK。</p><blockquote><p style="margin-left:0cm;">如果报错：ERROR 1396 (HY000): Operation ALTER USER failed for 'root'@'localhost'则使用下面命令：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'root'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">IDENTIFIED</span> <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">'password'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre></blockquote><p>&nbsp;</p><h2 id="4.%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F"><a name="t14"></a>4.修改默认编码方式</h2><p style="margin-left:0cm;">mysql8.0默认编码方式为utf8mb4，因此使用时不需要修改，可使用如下命令查看：</p><pre class="has" name="code"><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">VARIABLES</span> <span class="hljs-keyword">WHERE</span> Variable_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'character_set_%'</span> <span class="hljs-keyword">OR</span> Variable_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'collation%'</span>;</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="text-align:center;"><img alt="" class="has" height="207" src="https://img-blog.csdn.net/20181007151723711?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p>&nbsp;</p><p style="margin-left:0cm;">如果需要修改其他编码方式，方法有很多，以下仅为举例。</p><p style="margin-left:0cm;">比如需要修改为utf8mb4，可以使用如下方式：</p><p style="margin-left:0cm;">修改mysql配置文件my.cnf（windows为my.ini）</p><p style="margin-left:0cm;">my.cnf一般在etc/mysql/my.cnf位置。找到后请在以下三部分里添加如下内容：</p><blockquote><p style="margin-left:0cm;"><span style="color:#4472c4;">[client] </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">default-character-set = utf8mb4 </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">[mysql] </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">default-character-set = utf8mb4 </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">[mysqld] </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">character-set-client-handshake = FALSE </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">character-set-server = utf8mb4 </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">collation-server = utf8mb4_unicode_ci </span></p><p style="margin-left:0cm;"><span style="color:#4472c4;">init_connect='SET NAMES utf8mb4'</span></p></blockquote><p style="margin-left:0cm;">重启mysql即可。</p><p style="margin-left:0cm;">collation_connection 、collation_database 、collation_server是什么没关系。但必须保证以下这几个变量必须是utf8mb4。：</p><blockquote><ul><li>character_set_client&nbsp; (客户端来源数据使用的字符集)</li>    <li>character_set_connection&nbsp;&nbsp;&nbsp;&nbsp; (连接层字符集)</li>    <li>character_set_database&nbsp;&nbsp; (当前选中数据库的默认字符集)</li>    <li>character_set_results (查询结果字符集)</li>    <li>character_set_server (默认的内部操作字符集)</li></ul></blockquote><p>&nbsp;</p><p style="margin-left:0cm;">数据库连接参数中:</p><p style="margin-left:0cm;">characterEncoding=utf8会被自动识别为utf8mb4，也可以不加这个参数，会自动检测。</p><p style="margin-left:0cm;">而autoReconnect=true是必须加上的。</p><p>&nbsp;</p><h2 id="5.%E9%83%A8%E5%88%86%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E6%9F%A5%E8%AF%A2%E5%91%BD%E4%BB%A4"><a name="t15"></a>5.部分参数配置查询命令</h2><blockquote><p style="margin-left:0cm;">#查询mysql最大连接数设置</p><p style="margin-left:0cm;">show global variables like 'max_conn%';</p><p style="margin-left:0cm;">SELECT @@MAX_CONNECTIONS AS 'Max Connections';</p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;"># 查看最大链接数</p><p style="margin-left:0cm;">show global status like 'Max_used_connections';</p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;"># 查看慢查询日志是否开启以及日志位置</p><p style="margin-left:0cm;">show variables like 'slow_query%';</p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;"># 查看慢查询日志超时记录时间</p><p style="margin-left:0cm;">show variables like 'long_query_time';</p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;"># 查看链接创建以及现在正在链接数</p><p style="margin-left:0cm;">show status like 'Threads%';</p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;"># 查看数据库当前链接</p><p style="margin-left:0cm;">show processlist;</p><p style="margin-left:0cm;">&nbsp;</p><p style="margin-left:0cm;"># 查看数据库配置</p><p style="margin-left:0cm;">show variables like '%quer%';</p></blockquote><p>&nbsp;</p><h1 id="%E4%BA%94%E3%80%81%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BDmysql"><a name="t16"></a>五、彻底卸载mysql</h1><h2 id="1.%E5%8D%B8%E8%BD%BD%E8%BD%AF%E4%BB%B6"><a name="t17"></a>1.卸载软件</h2><pre class="has" name="code"><code class="hljs vbscript">yum remove mysql-community-<span class="hljs-built_in">server</span></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">完成后使用<span style="color:#ff0000;">rpm -qa|grep mysql</span>命令查看，如果有查询结果，则使用<span style="color:#ff0000;">yum remove </span><span style="color:#ff0000;">名称</span>清理掉。如图：</p><p style="text-align:center;"><img alt="" class="has" height="119" src="https://img-blog.csdn.net/20181007152057292?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p>&nbsp;</p><p style="margin-left:0cm;">再使用命令<span style="color:#ff0000;">rpm -qa | grep -i mysql</span>查看，如果有结果使用<span style="color:#ff0000;">rpm -e </span><span style="color:#ff0000;">名称</span>卸载。例如：</p><p style="text-align:center;"><img alt="" class="has" height="66" src="https://img-blog.csdn.net/20181007152108839?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4NTkxNzU2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="554"></p><p>&nbsp;</p><h2 id="2.%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6"><a name="t18"></a>2.删除文件</h2><pre class="has" name="code"><code class="hljs go"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">rm -rf /<span class="hljs-keyword">var</span>/lib/mysql</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">rm /etc/my.cnf</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">rm -rf /usr/share/mysql<span class="hljs-number">-8.0</span></div></div></li></ol></code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><p style="margin-left:0cm;">如果需要重新安装，在安装完成启动之前可以先对mysql目录赋予权限防止异常发生：</p><pre class="has" name="code"><code class="hljs go">chmod -R <span class="hljs-number">777</span> /<span class="hljs-keyword">var</span>/lib/mysql</code><div class="hljs-button signin" data-title="登录后复制" onclick="hljs.signin(event)"></div></pre><hr><p>END</p>                                    </div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MonggoDB学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/monggodb-xue-xi/monggodb-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/monggodb-xue-xi/monggodb-xue-xi/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 安装</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/monggodb-xue-xi/1-1-an-zhuang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-ju-ku/monggodb-xue-xi/1-1-an-zhuang/</url>
      
        <content type="html"><![CDATA[<p>安装文档:<a href="https://docs.mongodb.com/manual/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数据库 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数字图像处理概述</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/shu-zi-tu-xiang-chu-li-gai-shu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/shu-zi-tu-xiang-chu-li-gai-shu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>数字图像处理,是指计算机或其他数组计算技术将图像信号转换成数字信号并对其进行处理的过程</p></blockquote><ol><li>可以改变图像信息,以便人们可以对图像进行解释</li><li>为存储 传输和分析而对图像进行处理</li></ol><blockquote><p>一幅图像可以定义为一个二维数组f(x,y) 每一个小方格代表一个像素</p></blockquote><p>图像研究的方向</p><ol><li>图像变换</li><li>图像压缩</li><li>图像增强和复原</li><li>图像分割</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实验2</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/shi-yan-2/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/shi-yan-2/</url>
      
        <content type="html"><![CDATA[<p><img src="../../../AppData/Roaming/Typora/typora-user-images/image-20201003184409313.png" alt="image-20201003184409313"></p><p><img src="../../../AppData/Roaming/Typora/typora-user-images/image-20201003184447469.png" alt="image-20201003184447469"></p><p><img src="../../../AppData/Roaming/Typora/typora-user-images/image-20201003184636455.png" alt="image-20201003184636455"></p><p><img src="../../../AppData/Roaming/Typora/typora-user-images/image-20201003184835535.png" alt="image-20201003184835535"></p><p>错误总结</p><p>错误1 函数找不到 原因 opencv 没导入</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201003223530.png" alt="image-20201003223530440"></p><p>在头部添加</p><pre class=" language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;openCV2/core/core.hpp></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;openCV2/highgui/highgui.hpp></span></span><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui/highgui_c.h></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/imgproc/imgproc.hpp></span></span></code></pre><p>错误2 无法从LPCTSTR 转换成 string 原因 字符集错误</p><blockquote><p>严重性    代码    说明    项目    文件    行    禁止显示状态<br>错误    C2440    “初始化”: 无法从“LPCTSTR”转换为“std::basic_string&lt;char,std::char_traits<char>,std::allocator<char>&gt;”    Demo2    D:\Documents\Visual Studio 2019\opencv_apps\OpenCV_Test\Demo2\Demo2Dlg.cpp    207    </char></char></p></blockquote><p>项目    属性    配置属性    高级(常规)    字符集    选择使用多字节字符集</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201003223938.png" alt="image-20201003223938301"></p><p>创建一个mfc 对于dialog 的项目</p><p>界面</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201004103005.jpg" alt="img"> </p><p>核心代码</p><pre class=" language-c++"><code class="language-c++">void CDemo2Dlg::OnBnClickedButton1(){    // 点击open 打开图片事件    //CFileDialog类封装了Windows常用的文件对话框，提供了文件打开和文件存盘对话框功能。可以用其构造函数创建打开图片或视频的对话框；    CFileDialog dlg(TRUE, _T("*.jpg"), NULL, OFN_FILEMUSTEXIST | OFN_PATHMUSTEXIST, _T("Image files(*.bmp,*.jpg)|*.bmp;*.jpg|All files(*.*)|*.*|"), NULL);    dlg.m_ofn.lpstrTitle = _T("Open Images");    if (dlg.DoModal() != IDOK) {        return;    }    //获取路径    CString filePath = dlg.GetPathName();    //将路径转换字符类型    string sFileName=(LPCTSTR) filePath;    //Imread（）函数用来图像的读取    src = imread(sFileName);    //如果 内容为空    if (src.empty())    {        AfxMessageBox(_T("图像读取错误! "));        return;    }    else {        CRect rect;        //图片控件绑定        GetDlgItem(IDC_PIC)->GetClientRect(&rect);        Mat img;        //图片缩放 到正常大小        resize(src, img, Size(rect.Width(), rect.Height()));        //显示图片        imshow("view", img);    }}void CDemo2Dlg::OnBnClickedVidio(){    // 打开视频事件    /*CFileDialog dlg(TRUE, _T("*.avi"), NULL, OFN_FILEMUSTEXIST | OFN_PATHMUSTEXIST, _T("Vidio files(*.avi)|*.avi|All files(*.*)|*.*|"), NULL);    dlg.m_ofn.lpstrTitle = _T("Open Vido");    if (dlg.DoModal() != IDOK) {        return;    }    CString filePath = dlg.GetPathName();    string sFileName = (LPCTSTR)filePath;*/    VideoCapture capture;    //int re=capture.open(sFileName);    //打开摄像头    //int re = capture.open(0);    //打开网络源 cctv5    int re = capture.open("http://ivi.bupt.edu.cn/hls/hunanhd.m3u8");    if (!re) {        AfxMessageBox("Can not open Video!");        return;    }    CRect rect;    GetDlgItem(IDC_PIC)->GetClientRect(&rect);    Mat img;    Mat frame;    while(1) {        capture >> frame;        if (frame.empty())        {            //AfxMessageBox(_T("视频读取错误! "));            return;        }        else {            resize(frame, img, Size(rect.Width(), rect.Height()));            imshow("view", img);            waitKey(30);        }    }</code></pre><p>一、总结</p><p>在学习过程中遇到了很多错误, 在此做一个总结</p><p>错误1 类,函数认识不清 导致代码写错 不知道出现位置</p><p>错误2 opencv 提示 没有该函数 解决 导入相关的include</p><p>#include&lt;openCV2/core/core.hpp&gt;</p><p>#include&lt;openCV2/highgui/highgui.hpp&gt;</p><p>#include&lt;opencv2/highgui/highgui_c.h&gt;</p><p>#include &lt;opencv2/imgproc/imgproc.hpp&gt;</p><p>出现这个原因 可能是 opencv 没有配置好</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图像清晰化处理</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/tu-xiang-qing-xi-hua-chu-li/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/tu-xiang-qing-xi-hua-chu-li/</url>
      
        <content type="html"><![CDATA[<h2 id="1-图像增强"><a href="#1-图像增强" class="headerlink" title="1.图像增强"></a>1.图像增强</h2><blockquote><p>图像增强是指对图像的某些特征 如边缘 轮廓 对比度等图像信息进行增强或尖锐化 以便显示 观察 或进一步分析处理</p></blockquote><p>图像增强技术有两类方法: <strong>空域法</strong>和<strong>频域法</strong></p><h3 id="直方图均衡化"><a href="#直方图均衡化" class="headerlink" title="直方图均衡化"></a>直方图均衡化</h3><blockquote><p>直方图均衡化是图像处理领域中利用图像对比度进行调整方法</p></blockquote><p><strong>重点来了</strong></p><p>假设 </p><p>​    原始图像灰度级范围为[0—L] </p><p>​    Rk为第K级灰度  该灰度级个的像素个数为Nk</p><p>那么</p><p>​    Rk的直方图就为 H(Rk)=Nk</p><p>在实际应用中 经常使用归一化直方图</p><p>​    Pr(Rk)=Nk/N;</p><p>​    其中n 为图像总像素数(列*行)  k=0….L-1</p><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201005091323.png" alt="image-20201005091323367"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201005091346.png" alt="image-20201005091346404"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201005091501.png" alt="image-20201005091423914"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201005091738.png" alt="image-20201005091657652"></p><p>参考博客</p><p><a href="https://www.cnblogs.com/1625--H/p/11595235.html" target="_blank" rel="noopener">https://www.cnblogs.com/1625--H/p/11595235.html</a></p><p><a href="https://blog.csdn.net/zsc201825/article/details/89645190" target="_blank" rel="noopener">https://blog.csdn.net/zsc201825/article/details/89645190</a></p><p><a href="https://blog.csdn.net/zengshaoqing/article/details/105004573" target="_blank" rel="noopener">https://blog.csdn.net/zengshaoqing/article/details/105004573</a></p><p><a href="https://wenku.baidu.com/view/6b9dabeecbaedd3383c4bb4cf7ec4afe04a1b1f9.html#" target="_blank" rel="noopener">https://wenku.baidu.com/view/6b9dabeecbaedd3383c4bb4cf7ec4afe04a1b1f9.html#</a></p><h2 id="2-图像去噪"><a href="#2-图像去噪" class="headerlink" title="2.图像去噪"></a>2.图像去噪</h2><h2 id="3-图像锐化"><a href="#3-图像锐化" class="headerlink" title="3.图像锐化"></a>3.图像锐化</h2><h2 id="4-OpenVC实现"><a href="#4-OpenVC实现" class="headerlink" title="4.OpenVC实现"></a>4.OpenVC实现</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1 创建VC++应用_学生管理界面</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/2-1-chuang-jian-vc-ying-yong-xue-sheng-guan-li-jie-mian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/2-1-chuang-jian-vc-ying-yong-xue-sheng-guan-li-jie-mian/</url>
      
        <content type="html"><![CDATA[<h1 id="1-创建项目"><a href="#1-创建项目" class="headerlink" title="1. 创建项目"></a>1. 创建项目</h1><p>选择MFC应用 </p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920101749077.png" alt="image-20200920101749077"></p><p> 如果没有该选项 修改安装选项</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920102008589.png" alt="image-20200920102008589"></p><p>应用类型选择基于对话框</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920102133979.png" alt="image-20200920102133979"></p><h2 id="调出资源视图"><a href="#调出资源视图" class="headerlink" title="调出资源视图"></a>调出资源视图</h2><p>如果没有,去其他视图里找</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920102303985.png" alt="image-20200920102303985"></p><p>选择dialog 显示,不要单独修改ID, 否则资源代码找不到视图界面 运行出错</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920102427253.png" alt="image-20200920102427253"></p><p>修改属性, 设置名称 大小化窗口</p><p>​    caption 窗口名称</p><p>​    Maximize Box true 最大化窗口</p><p>​    Minimize Box true 最小化窗口</p><h1 id="2-添加控件"><a href="#2-添加控件" class="headerlink" title="2. 添加控件"></a>2. 添加控件</h1><p>在工具箱 找控件</p><table><thead><tr><th>控件名称</th><th>作用</th><th>修改项,ID看需要</th></tr></thead><tbody><tr><td>List Box</td><td>存放学生列表</td><td>Caption</td></tr><tr><td>static Test</td><td>静态文本</td><td>Caption</td></tr><tr><td>Editor Control</td><td>编辑文本框</td><td></td></tr><tr><td>Radio Button</td><td>单选按钮</td><td>将其中一个Group属性改为true</td></tr><tr><td>Group Box</td><td>将两个单选框包裹成一组</td><td>Caption</td></tr><tr><td>Combo Box</td><td>下拉框</td><td>Data 选项用分号隔开 Sort 受否自动排序</td></tr><tr><td>Check Box</td><td>选择框</td><td></td></tr><tr><td>List Control</td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p>基本界面</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920105038808.png" alt="image-20200920105038808"></p><h2 id="添加变量"><a href="#添加变量" class="headerlink" title="添加变量"></a>添加变量</h2><p>关联代码,通过访问变量,增加功能</p><p>选中List Box 学生列表 右键 添加控件变量</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920105431286.png" alt="image-20200920105431286"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920105819109.png" alt="image-20200920105819109"></p><p>单选按钮添加一个变量即可</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920110059039.png" alt="image-20200920110059039"></p><p>班级<img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920110313846.png" alt="image-20200920110313846"></p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920110357683.png" alt="image-20200920110357683"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920110655437.png" alt="image-20200920110655437"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920110734400.png" alt="image-20200920110734400"></p><p>查看类视图 ,可以看到代码</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920105634918.png" alt="image-20200920105634918"></p><h2 id="添加表头"><a href="#添加表头" class="headerlink" title="添加表头"></a>添加表头</h2><p>类视图–&gt;对话框类 xxxDlg双击 xxx.cpp 文件</p><pre class=" language-c#"><code class="language-c#">// TODO: 在此添加额外的初始化代码//添加表头m_stdView.InsertColumn(0, _T("姓名"), LVCFMT_CENTER, 90);m_stdView.InsertColumn(1, _T("性别"), LVCFMT_CENTER, 90);m_stdView.InsertColumn(2, _T("班级"), LVCFMT_CENTER, 90);m_stdView.InsertColumn(3, _T("手机号"), LVCFMT_CENTER, 150);m_stdView.InsertColumn(4, _T("班干部"), LVCFMT_CENTER, 90);//显示模式 报告模式m_stdView.ModifyStyle(0, LVS_REPORT);</code></pre><h1 id="3-功能设计"><a href="#3-功能设计" class="headerlink" title="3. 功能设计"></a>3. 功能设计</h1><h2 id="添加一个Button"><a href="#添加一个Button" class="headerlink" title="添加一个Button"></a>添加一个Button</h2><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200920113625698.png" alt="image-20200920113625698">    </p><p>双击按钮,添加响应函数</p><p>添加头文件 xx.h 头文件代码</p><pre class=" language-c++"><code class="language-c++">using namespace std;//定义结构体typedef struct tag_Student {    CString m_Name;    CString m_Gender;    CString m_Class;    CString m_Phone;    CString m_IsLeader;    //Student 别名}Student;....其他代码 ...public:    //定义结构体数组    Student m_stStudent[10];    int m_count;</code></pre><p>在xx.cpp 构造函数里初始化</p><pre class=" language-c++"><code class="language-c++">/*    构造函数*/CStdManaerDlg::CStdManaerDlg(CWnd* pParent /*=nullptr*/)    : CDialogEx(IDD_STDMANAER_DIALOG, pParent)    , m_name(_T(""))    , m_gender(0)    , m_class(_T(""))    , m_phone(_T("")){    m_hIcon = AfxGetApp()->LoadIcon(IDR_MAINFRAME);    //手动初始化    m_count = 0;}</code></pre><p>双击添加 ,进入代码页面,编写代码</p><pre class=" language-c++"><code class="language-c++">/*    点击添加 按钮 事件*/void CStdManaerDlg::OnBnClickedAdd(){    // TODO: 在此添加控件通知处理程序代码    UpdateData(true);    m_stStudent[m_count].m_Name = m_name;    if (m_gender == 0) {        m_stStudent[m_count].m_Gender = "男";    }    else {        m_stStudent[m_count].m_Gender = "女";    }    m_stStudent[m_count].m_Class = m_class;    m_stStudent[m_count].m_Phone = m_phone;    if (m_isLeader.GetCheck()) {        m_stStudent[m_count].m_IsLeader = "是";    }    else {        m_stStudent[m_count].m_IsLeader = "否";    }    m_stdList.AddString(m_stStudent[m_count].m_Name);    m_count = (m_count + 1) % 10;}</code></pre><h2 id="点击学生列表-显示学生信息"><a href="#点击学生列表-显示学生信息" class="headerlink" title="点击学生列表 显示学生信息"></a>点击学生列表 显示学生信息</h2><p>选中学生列表框 右键 添加事件处理程序</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920123940573.png" alt="image-20200920123940573"></p><p>具体代码</p><pre class=" language-c++"><code class="language-c++">void CStdManaerDlg::OnLbnSelchangeStudentlist(){    // TODO: 在此添加控件通知处理程序代码    int index = m_stdList.GetCurSel();    m_stdView.DeleteAllItems();    m_stdView.InsertItem(0, m_stStudent[index].m_Name);    m_stdView.SetItemText(0, 1, m_stStudent[index].m_Gender);    m_stdView.SetItemText(0, 2, m_stStudent[index].m_Class);    m_stdView.SetItemText(0, 3, m_stStudent[index].m_Phone);    m_stdView.SetItemText(0, 4, m_stStudent[index].m_IsLeader);}</code></pre><p>效果图</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200920124702454.png" alt="image-20200920124702454"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 安装opencv</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/1-1-an-zhuang-opencv/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/shu-zi-tu-xiang-chu-li/1-1-an-zhuang-opencv/</url>
      
        <content type="html"><![CDATA[<p>官方网站:<a href="https://opencv.org/" target="_blank" rel="noopener">https://opencv.org/</a></p><h2 id="环境"><a href="#环境" class="headerlink" title="环境:"></a>环境:</h2><p><strong>win10</strong>     <strong>opencv4.4.0</strong>     <strong>vs2019</strong></p><ol><li><h3 id="添加系统环境变量-path"><a href="#添加系统环境变量-path" class="headerlink" title="添加系统环境变量:path"></a>添加系统环境变量:path</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/path-20200906192821601.png" alt="image-20200906192821601"></p></li><li><h3 id="安装vs2019-选择c-桌面程序"><a href="#安装vs2019-选择c-桌面程序" class="headerlink" title="安装vs2019 选择c++桌面程序"></a>安装vs2019 选择c++桌面程序</h3><p><img src="https://upload-images.jianshu.io/upload_images/18722523-6e6f654d390d8287.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/715/format/webp" alt="img"></p></li><li><h3 id="创建一个项目"><a href="#创建一个项目" class="headerlink" title="创建一个项目"></a>创建一个项目</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/demo-20200906193100877.png" alt="image-20200906193100877"></p></li></ol><h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p>点击 项目&gt;&gt;&gt;xx属性</p><blockquote><p>包含目录:D:\opencv\build\include</p><p>库目录:D:\opencv\build\x64\vc15\lib</p></blockquote><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200906193820095.png" alt="image-20200906193820095"></p><blockquote><p>附加依赖项: d :debug环境需要的,我这里两个都添加了(其实一个就行了) 经使用发现debug 模式下有错误 具体(元婴)未知–自己境界太低</p><pre><code>opencv_world440.libopencv_world440d.lib</code></pre></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200906194209922.png" alt="image-20200906194209922"></p><p>选择<strong>链接器</strong>    <strong>输入</strong>    <strong>附加依赖项</strong></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200906194316233.png" alt="image-20200906194316233"></p><h3 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h3><blockquote><p>关于图片路径可以是相对路径和绝对路径</p><p>相对路径要将文件放到和项目文件夹同一个目录</p></blockquote><pre class=" language-c++"><code class="language-c++">// OpenCV_Test.cpp : 此文件包含 "main" 函数。程序执行将在此处开始并结束。//#include <iostream>#include<openCV2/core/core.hpp>#include<openCV2/highgui/highgui.hpp>using namespace cv;int main(){    //Mat srcImage = imread("d:/lena.jpg");    // 图片路径,默认是1 >1彩色 <1灰色     Mat srcImage = imread("lena.jpg",0);    namedWindow("show");    imshow("show",srcImage);    waitKey(0);    return 0;}</code></pre><p>效果图</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200906205746716.png" alt="image-20200906205746716"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>了解JavaScript</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/javascript/liao-jie-javascript/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/javascript/liao-jie-javascript/</url>
      
        <content type="html"><![CDATA[<h2 id="官方网站"><a href="#官方网站" class="headerlink" title="官方网站"></a>官方网站</h2><p><a href="https://www.javascript.com/try" target="_blank" rel="noopener">https://www.javascript.com/try</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 前端学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript入门</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/javascript/javascript-ru-men/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/javascript/javascript-ru-men/</url>
      
        <content type="html"><![CDATA[<p>官方网站<a href="https://www.pluralsight.com/paths/javascript-core-language" target="_blank" rel="noopener">https://www.pluralsight.com/paths/javascript-core-language</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 前端学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript学习笔记</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/javascript-xue-xi-bi-ji/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/javascript-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="JavaScript概述"><a href="#JavaScript概述" class="headerlink" title="JavaScript概述"></a>JavaScript概述</h2><ol><li><h3 id="JavaScript是什么？有-什么作用？"><a href="#JavaScript是什么？有-什么作用？" class="headerlink" title="JavaScript是什么？有    什么作用？"></a>JavaScript是什么？有    什么作用？</h3></li></ol><h3 id="JavaScript是web强大的脚本语言"><a href="#JavaScript是web强大的脚本语言" class="headerlink" title="JavaScript是web强大的脚本语言"></a>JavaScript是web强大的脚本语言</h3><blockquote><p>作用：控制页面特效展示</p></blockquote><h3 id="例如："><a href="#例如：" class="headerlink" title="例如："></a>例如：</h3><p>js可以对html元素进行动态控制    </p><p>js可以对表单项进行效验</p><p>js可以控制css样式</p><p>JavaScript入门案例</p><p>JavaScript的语言特征及编程注意事项</p><h3 id="特征："><a href="#特征：" class="headerlink" title="特征："></a>特征：</h3><p>JavaScript无需编译，直接被浏览器解释并执行</p><p>JavaScript无法单独运行 必须嵌入到html代码中</p><p>JavaScript的执行过程由上到下依次执行</p><h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><p>JavaScript没有访问系统文件的权限</p><p>由于JavaScript 无需编译 是由上到下解释执行 所以在保证可读的情况下</p><p>允许链式编程</p><p>JavaScript和java没有直接关系</p><p>JavaScript的组成</p><p><img src="C:/Users/ADMINI~1/AppData/Local/Temp/ksohtml13524/wps3.png" alt="img"> </p><p><a href="https://baike.baidu.com/item/ECMAScript" target="_blank" rel="noopener">ECMAScript</a>（核心）规定了js的语法和基本对象</p><p><a href="https://baike.baidu.com/item/%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener">文档对象模型</a>（DOM），描述处理网页内容的方法和接口</p><p>浏览器对象模型（<a href="https://baike.baidu.com/item/BOM/1801" target="_blank" rel="noopener">BOM</a>），描述与浏览器进行交互的<a href="https://baike.baidu.com/item/%E6%96%B9%E6%B3%95/3009367" target="_blank" rel="noopener">方法</a>和<a href="https://baike.baidu.com/item/%E6%8E%A5%E5%8F%A3" target="_blank" rel="noopener">接口</a></p><h2 id="JavaScript引入方式"><a href="#JavaScript引入方式" class="headerlink" title="JavaScript引入方式"></a>JavaScript引入方式</h2><h3 id="内部脚本"><a href="#内部脚本" class="headerlink" title="内部脚本"></a>内部脚本</h3><p>在当前页面写script标签， script内部即可书写javascript代码</p><p>格式：</p><script type="”text/javascript”">javascript代码</script><p>实例：</p><pre><code>&lt;script&gt;​            //int a=10;​            var a=10;​            //int b=10;​            var b=10;​            //int temp=a+b;​            var temp=a+b;​            //system.out.println(temp);        alert(temp);​        &lt;/script&gt;</code></pre><h3 id="外部脚本"><a href="#外部脚本" class="headerlink" title="外部脚本"></a>外部脚本</h3><p>在HTML文档中通过<script src="””">标签引入.js文件</p><p>格式：</p><script type=”text/javascript” src=”javascript文件路径”></script></p><p>实例：</p><script src="js/德莫.js"></script><p>注：外部引用标签内部不能写javacript代码 即使写了也不会执行</p><p>script标签规范化的位置（了解）</p><p>开发规定 script标签</p><p>为了快快速显示内容 将script放在结束之前</p><h1 id="JavaScript语法及规则"><a href="#JavaScript语法及规则" class="headerlink" title="JavaScript语法及规则"></a>JavaScript语法及规则</h1><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>单行注释    //</p><p>多行注释     /* */</p><p>变量</p><p>变量简述</p><p>变量：标签内存中一块空间，用于存储数据，且数据是可变的</p><p>变量的声明：</p><p>var 变量名</p><p>区分大小写</p><p>数据类型</p><p>数组：数组下标是基于零的，所以第一个项目是 [0]，第二个是 [1]，以此类推。</p><p>var cars=new Array(“Saab”,”Volvo”,”BMW”);</p><p>字符串：字符串中使用引号，只要不匹配包围字符串的引号即可</p><p>var answer=’He is called “Johnny”‘;</p><p>对象：对象由花括号分隔。在括号内部，对象的属性以名称和值对的形式 (name : value) 来定义。属性由逗号分隔：</p><p>var person={firstname:”John”, lastname:”Doe”, id:5566};</p><p>运算符</p><p><img src="C:/Users/ADMINI~1/AppData/Local/Temp/ksohtml13524/wps4.jpg" alt="img"> </p><h2 id="正则对象"><a href="#正则对象" class="headerlink" title="正则对象"></a>正则对象</h2><p>RegExp对象的创建方式</p><p>var reg=new RegExp(“表达式”);</p><p>var reg=/^表达式$/;</p><p>^ 开始符</p><p>$ 结束符</p><p>test方法</p><p>正则对象.test(string); 用来校验字符串是否匹配正则</p><p>全部匹配返回true 否则返回false</p><p>0000000000000000</p><h2 id="JavaScript语法及规则-1"><a href="#JavaScript语法及规则-1" class="headerlink" title="JavaScript语法及规则"></a>JavaScript语法及规则</h2><h2 id="BOM对象"><a href="#BOM对象" class="headerlink" title="BOM对象"></a>BOM对象</h2><h2 id="DOM对象"><a href="#DOM对象" class="headerlink" title="DOM对象"></a>DOM对象</h2><h2 id="JS事件"><a href="#JS事件" class="headerlink" title="JS事件"></a>JS事件</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 前端学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Html学习笔记</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/html-xue-xi-bi-ji/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/html-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><h2 id="css简述"><a href="#css简述" class="headerlink" title="css简述"></a>css简述</h2><h2 id="css是什么？有什么作用？"><a href="#css是什么？有什么作用？" class="headerlink" title="css是什么？有什么作用？"></a>css是什么？有什么作用？</h2><p>CSS 指层叠样式表 (Cascading Style Sheets)</p><p>样式定义如何显示 HTML 元素</p><p>样式通常存储在样式表中</p><p>把样式添加到 HTML 4.0 中，是为了解决内容与表现分离的问题</p><p>外部样式表可以极大提高工作效率</p><p>外部样式表通常存储在 CSS 文件中</p><p>多个样式定义可层叠为一</p><h2 id="css入门案例"><a href="#css入门案例" class="headerlink" title="css入门案例"></a>css入门案例</h2><p>步骤1：创建一个HTML文件</p><p>步骤2：在HTML上创建一个字体标签</p><p>步骤3：字体标签增加一个style属性，并修改style属性值</p><p>为什么使用css代替html属性设置样式</p><p>因为html具有局限性，所以需要配合css样式展示多样化，丰富的效果</p><p>css代码规范</p><p>放置规范：</p><p>在<style>标签内容中书写css样式代码</p><style>标签放置在<head>标签中格式规范：选择器名称｛属性名：属性值；属性名：属性值；。。。。。｝选择器：既指定css样式作用在那些html标签上代码规范：属性名和属性值之间是键值关系属性名和属性值之间用 : 连接，最后 ； 结尾css选择器基本选择器元素选择器html标签又称html元素元素选择器：既html标签名为选择器名称格式:标签名｛/*css样式代码*/｝适用范围：适用于将相同样式 作用在同名标签上    类选择器每个html标签都有一个class属性，class属性值即为类名类选择器：既以html的类名 作为选择器名称作用：选择css样式代码作用于对应类名html标签格式：    .类名,.类名｛/*css样式*/｝适用范围：相同类名上id选择器每个html都有一个id属性，id属性值必须在本页面是惟一的id选择器既以html的ID作为选择器名称作用：选择css样式代码作用于某个规定id值的html标签上格式：\#id值｛/*css样式*/｝适用范围：作用于某个标签注意：为了开发的严谨性 id必须保证唯一性基本选择器的组合方式层级关系标签和标签之间有层级关系我们可以对选择器进行组合，表现出层级关系格式：选择器1 选择器2。。。｛/*css样式代码*/｝选择器1下的选择器2css样式边框属性所有的html标签都有边框 默认边框不可见border设置边框样式格式：宽度 样式 颜色例border：2px solid red ，1像素宽的实线 红色边框线条样式：    solid实线 none 无边 double 双线width设置标签的宽度height设置标签的高度background-color用于设值标签的背景颜色背景颜色设置的两种主流方式1英文单词        例如：red blue yellow2颜色代码        格式:#红绿蓝 每个颜色用两个16制位数表示例如：#ff1100 红色ff 绿色11 蓝色00，红色颜色最重，绿色其次，没有蓝色布局float通常默认排版方式，将页面的元素从上到下一一罗列，而实际开发中需要左右方式进行排版，就需要使用浮动属性格式:选择器｛float：属性值｝常用属性值none 元素不浮动（默认值）left 元素左浮动right 元素右浮动注意：因为元素设置了浮动属性后会脱离原有的文档流，从而影响其他元素样式，所以设置浮动以后，页面需要重新调整转换    ###  displayhtml提供丰富的标签，这些标签被定义为不同的类型 一般分为 块级标签和行内标签块元素：以区域块方式出现。每块标签独自占用一整行或多整行，块结束会自动换行    常见块元素：h1 p div ul等行内元素：根据内容的多少来占用空间 不会自动换行常见行元素：《span》 《a》等display属性 可以使得元素 在行元素和块元素之间相互转换display:inline;//行级元素display: block；//块级元素### 字体font-size用于设置字体大小color设置字体颜色css盒子模型什么是盒子模型所有的HTML元素，都可以看成四边形，即一个盒子用css来设置元素盒子内边距，边框，外边距的样式相当于盒子的样式，所以我们将其称之为盒子模型### 边框边框：HTML元素盒子的框体HTML元素border-topborder-leftborder-rightborder-bottom例：border-top: 1px solid red;内边距 padding内边距：html内容体到html元素边框的距离padding-toppadding-leftpadding-rightpadding-bottom例：            padding-top: 200px;​                padding-bottom: 100px;外边距 margin外边距：html元素边框 到 其他html元素边框的距离margin-topmargin-leftmargin-rightmargin-bottomcss和html结合方式内部样式行内样式行内样式是通过标签的style属性来设置元素样式S格式：<html 标签 style=“css样式代码”/>示例：```css<a style="color: #f00; font-size: 30px;">行内样式</a>```<style></style>标签样式</p><p>当某样样式在页面中被多个标签重复使用， 为了使编码更加灵活，避免书写重复代码</p><p>我们将样式代码代码从标签style属性中抽取出来，统一写入到style标签中</p><p>格式：</p><pre class=" language-css"><code class="language-css">&lt;style>    css样式&lt;/style></code></pre><p>示例：</p><p><img src="C:/Users/ADMINI~1/AppData/Local/Temp/ksohtml13524/wps5.jpg" alt="img"> </p><p><img src="C:/Users/ADMINI~1/AppData/Local/Temp/ksohtml13524/wps6.jpg" alt="img"> </p><p>使用范围：页面复用标签样式</p><h3 id="外部样式"><a href="#外部样式" class="headerlink" title="外部样式"></a>外部样式</h3><link> 标签方式<p>链入式，将所有样式放在一个或多个.css为扩展名的文本样式文件中</p><p>通过<link>标签将样式连接到html文档中</p><p>格式：</p><pre class=" language-css"><code class="language-css">&lt;link rel=<span class="token string">"stylesheet"</span> type=<span class="token string">"text/css"</span> href=<span class="token string">"deno1.css"</span> /></code></pre><p>rel=”stylesheet”固定值 样式表</p><p>type=”text/css” 固定值 标识css类型</p><p>href=”deno1.css” 文件位置</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 前端学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>css学习笔记</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/css-xue-xi-bi-ji/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qian-duan-xue-xi/css-xue-xi-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="CSS"><a href="#CSS" class="headerlink" title="\CSS**"></a><strong><em>\</em>CSS**</strong></h1><h2 id="1-css简述"><a href="#1-css简述" class="headerlink" title="1. \css简述**"></a><strong>1.</strong> <strong><em>\</em>css简述**</strong></h2><h3 id="1-1-css是什么？有什么作用？"><a href="#1-1-css是什么？有什么作用？" class="headerlink" title="1.1. \css是什么？有什么作用？**"></a><strong>1.1.</strong> <strong><em>\</em>css是什么？有什么作用？**</strong></h3><p>· CSS 指层叠样式表 (<strong><em>\</em>C**</strong>ascading <strong><em>\</em>S**</strong>tyle <strong><em>\</em>S**</strong>heets)</p><p>· 样式定义*<strong>*如何显示**</strong> HTML 元素</p><p>· 样式通常存储在*<strong>*样式表**</strong>中</p><p>· 把样式添加到 HTML 4.0 中，是为了*<strong>*解决内容与表现分离的问题**</strong></p><p><strong>·</strong> <strong><em>\</em>外部样式表**</strong>可以极大提高工作效率</p><p>· 外部样式表通常存储在 <strong><em>\</em>CSS 文件**</strong>中</p><p>· 多个样式定义可*<strong>*层叠**</strong>为一</p><h3 id="1-2-css入门案例"><a href="#1-2-css入门案例" class="headerlink" title="1.2. \css入门案例**"></a><strong>1.2.</strong> <strong><em>\</em>css入门案例**</strong></h3><p>l 步骤1：创建一个HTML文件</p><p>l 步骤2：在HTML上创建一个字体标签</p><p>l 步骤3：字体标签增加一个style属性，并修改style属性值</p><h3 id="1-3-为什么使用css代替html属性设置样式"><a href="#1-3-为什么使用css代替html属性设置样式" class="headerlink" title="1.3. \为什么使用css代替html属性设置样式**"></a><strong>1.3.</strong> <strong><em>\</em>为什么使用css代替html属性设置样式**</strong></h3><p>因为html具有局限性，所以需要配合css样式展示多样化，丰富的效果</p><h3 id="1-4-css代码规范"><a href="#1-4-css代码规范" class="headerlink" title="1.4. \css代码规范**"></a><strong>1.4.</strong> <strong><em>\</em>css代码规范**</strong></h3><p>放置规范：</p><p>在<style>标签内容中书写css样式代码</p><style>标签放置在<head>标签中格式规范：选择器名称｛属性名：属性值；属性名：属性值；。。。。。｝选择器：既指定css样式作用在那些html标签上代码规范：l 属性名和属性值之间是键值关系l 属性名和属性值之间用 : 连接，最后 ； 结尾## **2.** ***\*css选择器\****### **2.1.** ***\*基本选择器\****#### **2.1.1.** ***\*元素选择器\****html标签又称html元素元素选择器：既html标签名为选择器名称格式:标签名｛/*css样式代码*/｝适用范围：适用于将相同样式 作用在同名标签上    #### **2.1.2.** ***\*类选择器\****每个html标签都有一个class属性，class属性值即为类名类选择器：既以html的类名 作为选择器名称作用：选择css样式代码作用于对应类名html标签格式：    .类名,.类名｛/*css样式*/｝适用范围：相同类名上#### **2.1.3.** ***\*id选择器\****每个html都有一个id属性，id属性值必须在本页面是惟一的id选择器既以html的ID作为选择器名称作用：选择css样式代码作用于某个规定id值的html标签上格式：\#id值｛/*css样式*/｝适用范围：作用于某个标签注意：为了开发的严谨性 id必须保证唯一性### **2.2.** ***\*基本选择器的组合方式\****#### **2.2.1.** ***\*层级关系\****标签和标签之间有层级关系我们可以对选择器进行组合，表现出层级关系格式：选择器1 选择器2。。。｛/*css样式代码*/｝选择器1下的选择器2## **3.** ***\*css样式\****### **3.1.** ***\*边框属性\****所有的html标签都有边框 默认边框不可见#### **3.1.1.** ***\*border\****设置边框样式l 格式：宽度 样式 颜色例border：2px solid red ，1像素宽的实线 红色边框线条样式：    solid实线 none 无边 double 双线#### **3.1.2.** ***\*width\****设置标签的宽度#### **3.1.3.** ***\*height\****设置标签的高度#### **3.1.4.** ***\*background-color\****用于设值标签的背景颜色背景颜色设置的两种主流方式1英文单词        例如：red blue yellow2颜色代码        格式:#红绿蓝 每个颜色用两个16制位数表示例如：#ff1100 红色ff 绿色11 蓝色00，红色颜色最重，绿色其次，没有蓝色### **3.2.** ***\*布局\****#### **3.2.1.** ***\*float\****通常默认排版方式，将页面的元素从上到下一一罗列，而实际开发中需要左右方式进行排版，就需要使用浮动属性格式:选择器｛float：属性值｝常用属性值none 元素不浮动（默认值）left 元素左浮动right 元素右浮动注意：因为元素设置了浮动属性后会脱离原有的文档流，从而影响其他元素样式，所以设置浮动以后，页面需要重新调整### **3.3.** ***\*转换\****    #### **3.3.1.** ***\*display\****html提供丰富的标签，这些标签被定义为不同的类型 一般分为 块级标签和行内标签l 块元素：以区域块方式出现。每块标签独自占用一整行或多整行，块结束会自动换行    常见块元素：h1 p div ul等l 行内元素：根据内容的多少来占用空间 不会自动换行n 常见行元素：《span》 《a》等display属性 可以使得元素 在行元素和块元素之间相互转换display:inline;//行级元素display: block；//块级元素### **3.4.** ***\*字体\****#### **3.4.1.** ***\*font-size\****用于设置字体大小#### **3.4.2.** ***\*color\****设置字体颜色## **4.** ***\*css盒子模型\****### **4.1.** ***\*什么是盒子模型\****所有的HTML元素，都可以看成四边形，即一个盒子用css来设置元素盒子内边距，边框，外边距的样式相当于盒子的样式，所以我们将其称之为盒子模型### **4.2.** ***\*边框\****边框：HTML元素盒子的框体HTML元素border-topborder-leftborder-rightborder-bottom例：border-top: 1px solid red;### **4.3.** ***\*内边距 padding\****内边距：html内容体到html元素边框的距离padding-toppadding-leftpadding-rightpadding-bottom例：            padding-top: 200px;​                padding-bottom: 100px;### **4.4.** ***\*外边距 margin\****外边距：html元素边框 到 其他html元素边框的距离margin-topmargin-leftmargin-rightmargin-bottom## **5.** ***\*css和html结合方式\****### **5.1.** ***\*内部样式\****#### **5.1.1.** ***\*行内样式\****行内样式是通过标签的style属性来设置元素样式S格式：<html 标签 style=“css样式代码”/>示例：<a style="color: #f00; font-size: 30px;">行内样式</a>#### **5.1.2.** ***\*<style></style>标签样式\****</p><p>当某样样式在页面中被多个标签重复使用， 为了使编码更加灵活，避免书写重复代码</p><p>我们将样式代码代码从标签style属性中抽取出来，统一写入到style标签中</p><p>格式：</p><style>css样式</style><p>示例：</p><p><img src="C:/Users/ADMINI~1/AppData/Local/Temp/ksohtml13524/wps1.jpg" alt="img"> </p><p><img src="C:/Users/ADMINI~1/AppData/Local/Temp/ksohtml13524/wps2.jpg" alt="img"> </p><p>使用范围：页面复用标签样式</p><h3 id="5-2-外部样式"><a href="#5-2-外部样式" class="headerlink" title="5.2. \外部样式**"></a><strong>5.2.</strong> <strong><em>\</em>外部样式**</strong></h3><h4 id="5-2-1-标签方式"><a href="#5-2-1-标签方式" class="headerlink" title="5.2.1. \ 标签方式**"></a><strong>5.2.1.</strong> <strong><em>\</em><link> 标签方式**</strong></h4><p>链入式，将所有样式放在一个或多个.css为扩展名的文本样式文件中</p><p>通过<link>标签将样式连接到html文档中</p><p>格式：</p><link rel="stylesheet" type="text/css" href="deno1.css"><p>l rel=”stylesheet”固定值 样式表</p><p>l type=”text/css” 固定值 标识css类型</p><p>l href=”deno1.css” 文件位置</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 前端学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vsftpd</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/vsftpd/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/vsftpd/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><pre><code>vsftpd是“very secure FTP daemon”的缩写是一个完全免费，开放源代码的ftp服务器软件</code></pre><h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h1><pre><code>vsftpd是一款Linux发行版中最受推崇的ftp服务器程序，小巧轻快，安全易用，支持带宽限制等功能</code></pre><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><pre><code>1. 执行 yum -y install vsftpd    1. 默认配置文件在/etc/vsftpd/vsftpd.conf2. 创建虚拟用户    1. 选择根或者用户目录下创建ftp文件夹：mkdir ftpfile,如：/ftpfile    2. 添加匿名用户：useradd ftpuser -d /ftpfile -s /sbin/nologin    3. 修改ftpfile权限：chown -R ftpuser.ftpuser /ftpfie    4. 重设ftpuser密码：password ftpuser(12346)3. 配置    1. cd /etc/vsftpd    2. sudo vim chroot_list    3. 把刚才新增的虚拟用户添加到此配置文件中，后续要引用    4. :wq 保存退出    5. sudo vim /etc/selinux/config,修改SELINUX=disabled    6. :wq 保存退出        如果遇到550拒绝访问执行sudo setsebool -P ftp_home_dir 1        然后重启linux服务区，执行reboot命令    7. sudo vim /etc/vsftpd/vsftpd.conf    8. 添加配置或更新配置4. 防火墙配置    1. sudo vim /etc/sysconfig/iptables    2.1. -A INPUT -p TCP --dport 61001:62000 -j ACCEPT    2.2. -A OUTPUT -p TCP --sport 61001:62000 -j ACCEPT    2.1. -A INPUT -p TCP --dport 20 -j ACCEPT    2.2. -A OUTPUT -p TCP --sport 20 -j ACCEPT        2.1. -A INPUT -p TCP --dport 21 -j ACCEPT    2.2. -A OUTPUT -p TCP --sport 21 -j ACCEPT        3. :wq 保存退出    4. sudo service iptables restart 执行命令重启防火墙</code></pre><h1 id="vsftpd验证"><a href="#vsftpd验证" class="headerlink" title="vsftpd验证"></a>vsftpd验证</h1><pre><code>1. 执行 sodo service vsftpd restart2. 执行ifconfig 查看运行vsftpd服务器的ip地址3. 打开浏览器访问：ftp://10.211.55.64. 输入之前创建的ftp匿名用户账号和密码5. 通过ftp客户端软件</code></pre><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><pre><code>启动 sudo service vsftpd start关闭 sudo service vsftpd stop重启 sudo service vsftpd restart</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 企业级电商项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 企业级电商项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql数据库的安装与配置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/mysql-shu-ju-ku-de-an-zhuang-yu-pei-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/mysql-shu-ju-ku-de-an-zhuang-yu-pei-zhi/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 企业级电商项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 企业级电商项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LINUX设置防火墙</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/linux-she-zhi-fang-huo-qiang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/linux-she-zhi-fang-huo-qiang/</url>
      
        <content type="html"><![CDATA[<section class="ouvJEz"><h1 class="_1RuRku">Linux设置防火墙</h1><div class="rEsl9f"><div class="s-dsoj"><time datetime="2019-02-25T03:01:08.000Z">2019.02.25 11:01:08</time><span>字数 42</span><span>阅读 189</span></div></div><article class="_2rhmJa"><p>Centos 7之前的防火墙基本都是修改iptables</p><pre class="line-numbers  language-undefined"><code class="  language-undefined">service  iptables  status        查看防火墙状态<p>service  iptables  start          开启防火墙</p><p>service  iptables  stop          关闭防火墙</p><p>service  iptables  restart        重启防火墙</p></code><p><code class="  language-undefined"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></p></pre><p></p><p>Centos 7之后的防火墙升级为Firewall，取代了之前的iptables</p><p>其常用命令为：</p><pre class="line-numbers  language-csharp"><code class="  language-csharp">firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>state                          ##查看防火墙运行状态，是否是running<p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span>reload                        ##重新载入配置，比如添加规则之后，需要执行此命令</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">get</span><span class="token operator">-</span>zones                  ##列出支持的zone</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">get</span><span class="token operator">-</span>services              ##列出支持的服务，在列表中的服务是放行的</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span>list<span class="token operator">-</span>ports                    ##列出开放的端口</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span>query<span class="token operator">-</span>service ftp                          ##查看ftp服务是否支持，返回yes或者no</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">add</span><span class="token operator">-</span>service<span class="token operator">=</span>ftp                            ##临时开放ftp服务</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">add</span><span class="token operator">-</span>service<span class="token operator">=</span>ftp <span class="token operator">–</span>permanent        ##永久开放ftp服务</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">remove</span><span class="token operator">-</span>service<span class="token operator">=</span>ftp <span class="token operator">–</span>permanent  ##永久移除ftp服务</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp <span class="token operator">–</span>permanent      ##永久添加<span class="token number">80</span>端口</p><p>iptables <span class="token operator">-</span>L <span class="token operator">-</span>n                                  ##查看规则，这个命令是和iptables的相同的</p><p>man firewall<span class="token operator">-</span>cmd                            ##查看帮助</p><p>systemctl stop firewalld                  ##关闭防火墙</p><p>systemctl start firewalld                  ##开启防火墙</p><p>systemctl status firewalld              ##查看防火墙状态</p><p>systemctl restart firewalld              ##重启防火墙</p><p>systemctl disable firewalld              ##开机关闭防火墙，即永久关闭</p></code></pre></article></section><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 企业级电商项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 企业级电商项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iptables的学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/iptables-de-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-dian-shang-xiang-mu/iptables-de-xue-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h1><h2 id="什么是iptables"><a href="#什么是iptables" class="headerlink" title="什么是iptables"></a>什么是iptables</h2><pre><code>常见与linux系统的应用层防火墙工具</code></pre><h2 id="什么是Netfilter"><a href="#什么是Netfilter" class="headerlink" title="什么是Netfilter?"></a>什么是Netfilter?</h2><pre><code>Netfilter是Linux操作系统核心层内部的一个数据包处理模块什么是Hook point&gt;    数据包在Netfilter中的挂载点    （PRE_POUTING,INPUT,OUTPUT,FORWARD,POST_ROUTING）</code></pre><h2 id="iptables规则组成"><a href="#iptables规则组成" class="headerlink" title="iptables规则组成"></a>iptables规则组成</h2><pre><code>组成部分：四张表+五条链（Hook point）+规则四张表：    filter表:访问控制，规则匹配    nat表：地址转发    mangle表，    raw表五条链：INPUT,OUTPUT,FORWARD,PREROUTING,POSTROUTING数据包访问控制：ACCEPT,DROP,REJECT数据包改写:SNAT,DNAT信息记录：LOG</code></pre><h2 id="iptables-配置-场景一"><a href="#iptables-配置-场景一" class="headerlink" title="iptables 配置 场景一"></a>iptables 配置 场景一</h2><pre><code>》对所有的地址开放本机的tcp（80，22，10-21）端口的访问》允许对所有的地址开放本机的基于ICMP协议的数据包访问》其他未被允许的端口则禁止访问</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 企业级电商项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 企业级电商项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>框架搭建</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-quan-xian-guan-li/kuang-jia-da-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/qi-ye-ji-quan-xian-guan-li/kuang-jia-da-jian/</url>
      
        <content type="html"><![CDATA[<h2 id="Spring-Boot-Spring-Security"><a href="#Spring-Boot-Spring-Security" class="headerlink" title="Spring Boot +Spring Security"></a>Spring Boot +Spring Security</h2><ol><li><a href="https://start.spring.io/" target="_blank" rel="noopener">快速搭建spring项目官方网址</a></li><li>通过idea快速创建springboot<br><ul><li>file-&gt;new Project-&gt;Spring Intializr<h2 id="常见注解"><a href="#常见注解" class="headerlink" title="常见注解"></a>常见注解</h2>@SpringBootApplication：<br>@RestController:相当于@ResponseBody</li></ul></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 企业级权限管理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 企业级权限管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/spring-framework/spring-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/spring-framework/spring-jian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring简介"><a href="#Spring简介" class="headerlink" title="Spring简介"></a>Spring简介</h1><blockquote><p>我们常说的 Spring 实际上是指 Spring Framework，而 Spring Framework 只是 Spring 家族中的一个分支而已。</p><p>Spring 是为了解决企业级应用开发的复杂性而创建的。</p></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/2-1.png" alt="img"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IOC概念</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/ioc/ioc-gai-nian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/ioc/ioc-gai-nian/</url>
      
        <content type="html"><![CDATA[<h3 id="Ioc-概念"><a href="#Ioc-概念" class="headerlink" title="Ioc 概念"></a>Ioc 概念</h3><p>Ioc （Inversion of Control），中文叫做控制反转。这是一个概念，也是一种思想。控制反转，实际上就是指对一个对象的控制权的反转。例如，如下代码：</p><pre><code>public class Book {    private Integer id;    private String name;    private Double price;//省略getter/setter}public class User {    private Integer id;    private String name;    private Integer age;    public void doSth() {        Book book = new Book();        book.setId(1);        book.setName("故事新编");        book.setPrice((double) 20);    }}</code></pre><p>在这种情况下，Book 对象的控制权在 User 对象里边，这样，Book 和 User 高度耦合，如果在其他对象中需要使用 Book 对象，得重新创建，也就是说，对象的创建、初始化、销毁等操作，统统都要开发者自己来完成。如果能够将这些操作交给容器来管理，开发者就可以极大的从对象的创建中解脱出来。</p><p>使用 Spring 之后，我们可以将对象的创建、初始化、销毁等操作交给 Spring 容器来管理。就是说，在项目启动时，所有的 Bean 都将自己注册到 Spring 容器中去（如果有必要的话），然后如果其他 Bean 需要使用到这个 Bean ，则不需要自己去 new，而是直接去 Spring 容器去要。</p><p>通过一个简单的例子看下这个过程。</p><h3 id="3-2-Ioc-初体验"><a href="#3-2-Ioc-初体验" class="headerlink" title="3.2 Ioc 初体验"></a>3.2 Ioc 初体验</h3><p>首先创建一个普通的 Maven 项目，然后引入 spring-context 依赖，如下：</p><pre><code>&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;        &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;</code></pre><p>接下来，在 resources 目录下创建一个 spring 的配置文件（注意，一定要先添加依赖，后创建配置文件，否则创建配置文件时，没有模板选项）：</p><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;&lt;/beans&gt;</code></pre><p>在这个文件中，我们可以配置所有需要注册到 Spring 容器的 Bean：</p><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans"       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;    &lt;bean class="org.javaboy.Book" id="book"/&gt;&lt;/beans&gt;</code></pre><p>class 属性表示需要注册的 bean 的全路径，id 则表示 bean 的唯一标记，也开可以 name 属性作为 bean 的标记，在超过 99% 的情况下，id 和 name 其实是一样的，特殊情况下不一样。</p><p>接下来，加载这个配置文件：</p><pre><code>public class Main {    public static void main(String[] args) {        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");    }}</code></pre><p>执行 main 方法，配置文件就会被自动加载，进而在 Spring 中初始化一个 Book 实例。此时，我们显式的指定 Book 类的无参构造方法，并在无参构造方法中打印日志，可以看到无参构造方法执行了，进而证明对象已经在 Spring 容器中初始化了。</p><p>最后，通过 getBean 方法，可以从容器中去获取对象：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ClassPathXmlApplicationContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Book book <span class="token operator">=</span> <span class="token punctuation">(</span>Book<span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><blockquote><p>加载方式，除了ClassPathXmlApplicationContext 之外（去 classpath 下查找配置文件），另外也可以使用 FileSystemXmlApplicationContext ，FileSystemXmlApplicationContext 会从操作系统路径下去寻找配置文件。</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        FileSystemXmlApplicationContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSystemXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"F:\\workspace5\\workspace\\spring\\spring-ioc\\src\\main\\resources\\applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Book book <span class="token operator">=</span> <span class="token punctuation">(</span>Book<span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>问题总结</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/wen-ti-zong-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/wen-ti-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="idea下载spring源码编译不通过"><a href="#idea下载spring源码编译不通过" class="headerlink" title="idea下载spring源码编译不通过"></a>idea下载spring源码编译不通过</h1><h2 id="找不到xx-xx-jar"><a href="#找不到xx-xx-jar" class="headerlink" title="找不到xx.xx.jar"></a>找不到xx.xx.jar</h2><blockquote><p>解决方式：查看连接，发现确实没有这个jar，由于sping使用的是最新版本的依赖，尝试使用旧版本，发现旧版本有相应的jar，但版本不一致，缺少很多包。</p><p>怀疑是网络问题，分别加上阿里云maven和使用源代码，分别编译，科学上网，结论：不行！</p><p>怀疑是第三方还没有公开最新jar，果断放弃，果然第二天，再次编译，成功下载jar，查看昨天的网址发现有了jar，<strong>编译通过</strong>！！</p><p><a href="http://nexus.bsdn.org/content/groups/public/io/projectreactor/reactor-core/3.4.0-M1/" target="_blank" rel="noopener">http://nexus.bsdn.org/content/groups/public/io/projectreactor/reactor-core/3.4.0-M1/</a></p><p><img src="D:\OneDrive\随心记\Spring\images\image-20200709140540967.png" alt="image-20200709140540967"></p></blockquote><p>————-更正</p><p><strong style="color:red;">关于spring找不到相关jar 其实在 下载的项目 build/libs 文件夹 已存在,但我的maven 本地仓库里没有 将没有的jar 复制到本地仓库即可编译通过,尽量不要使用最新的spring源码</strong></p><h1 id="删除了自己新建的一个moudle-spring源码编译失败"><a href="#删除了自己新建的一个moudle-spring源码编译失败" class="headerlink" title="删除了自己新建的一个moudle spring源码编译失败"></a>删除了自己新建的一个moudle spring源码编译失败</h1><p>错误提示:</p><p>出错位置: build.gradle文件 systemProperty(“testGroups”, project.properties.get(“testGroups”))</p><blockquote><p>Build file ‘E:\IDEAdaima\spring-framework\build.gradle’ line: 332</p><p>A problem occurred evaluating root project ‘spring’.</p><blockquote><p>Basedir E:\IDEAdaima\spring-framework\MySpringTest does not exist</p></blockquote></blockquote><p>经排查 发现strings.gradle 导入了自己的moudle 没删除 ,删除即可</p><pre class=" language-groovy"><code class="language-groovy">include <span class="token string">'MySpringTest'</span>include <span class="token string">'test_beans'</span></code></pre><h2 id="spring源码-我把git文件删除了-出现问题-但不影响编译-但红红的大字很烦人"><a href="#spring源码-我把git文件删除了-出现问题-但不影响编译-但红红的大字很烦人" class="headerlink" title="spring源码 我把git文件删除了 出现问题 但不影响编译 但红红的大字很烦人"></a>spring源码 我把git文件删除了 出现问题 但不影响编译 但红红的大字很烦人</h2><p>错误提示:</p><pre class=" language-bash"><code class="language-bash">Build scan background action failed.org.gradle.process.internal.ExecException: Process <span class="token string">'command '</span><span class="token function">git</span><span class="token string">''</span> finished with non-zero <span class="token keyword">exit</span> value 128    at org.gradle.process.internal.DefaultExecHandle<span class="token variable">$ExecResultImpl</span>.assertNormalExitValue<span class="token punctuation">(</span>DefaultExecHandle.java:417<span class="token punctuation">)</span>    at org.gradle.process.internal.DefaultExecAction.execute<span class="token punctuation">(</span>DefaultExecAction.java:38<span class="token punctuation">)</span>    at org.gradle.process.internal.DefaultExecActionFactory.exec<span class="token punctuation">(</span>DefaultExecActionFactory.java:168<span class="token punctuation">)</span>    at io.spring.ge.WorkingDirectoryProcessOperations.exec<span class="token punctuation">(</span>WorkingDirectoryProcessOperations.java:45<span class="token punctuation">)</span>    at io.spring.ge.BuildScanConventions.exec<span class="token punctuation">(</span>BuildScanConventions.java:161<span class="token punctuation">)</span>    at io.spring.ge.BuildScanConventions.addGitMetadata<span class="token punctuation">(</span>BuildScanConventions.java:110<span class="token punctuation">)</span>    at com.gradle.scan.plugin.internal.api.j.a<span class="token punctuation">(</span>SourceFile:22<span class="token punctuation">)</span>    at com.gradle.scan.plugin.internal.api.k<span class="token variable">$a</span>.a<span class="token punctuation">(</span>SourceFile:112<span class="token punctuation">)</span>    at com.gradle.scan.plugin.internal.api.h.a<span class="token punctuation">(</span>SourceFile:62<span class="token punctuation">)</span>    at java.util.concurrent.Executors<span class="token variable">$RunnableAdapter</span>.call<span class="token punctuation">(</span>Executors.java:511<span class="token punctuation">)</span>    at java.util.concurrent.FutureTask.run<span class="token punctuation">(</span>FutureTask.java:266<span class="token punctuation">)</span>    at java.util.concurrent.ThreadPoolExecutor.runWorker<span class="token punctuation">(</span>ThreadPoolExecutor.java:1142<span class="token punctuation">)</span>    at java.util.concurrent.ThreadPoolExecutor<span class="token variable">$Worker</span>.run<span class="token punctuation">(</span>ThreadPoolExecutor.java:617<span class="token punctuation">)</span>    at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:745<span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Framework简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/spring-framework-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/spring-framework-jian-jie/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><p>官方网址：<a href="https://spring.io/projects" target="_blank" rel="noopener">https://spring.io/projects</a></p><p>参考网址：<a href="https://spring.io/projects/spring-framework" target="_blank" rel="noopener">https://spring.io/projects/spring-framework</a></p><p>clone 地址：<a href="https://github.com/kujin521/spring" target="_blank" rel="noopener">https://github.com/kujin521/spring</a></p><h1 id="Spring-Framework"><a href="#Spring-Framework" class="headerlink" title="Spring Framework"></a>Spring Framework</h1><blockquote><p>The Spring Framework provides a comprehensive programming and configuration model for modern Java-based enterprise applications - on any kind of deployment platform.</p><p>Spring 框架为现代基于 java 的企业应用程序提供了一个全面的编程和配置模型，适用于任何类型的部署平台。</p><p>A key element of Spring is infrastructural support at the application level: Spring focuses on the “plumbing” of enterprise applications so that teams can focus on application-level business logic, without unnecessary ties to specific deployment environments.</p><p>Spring 的一个关键元素是应用程序级别的基础设施支持: Spring 关注企业应用程序的”管道”，这样团队就可以专注于应用程序级别的业务逻辑，而不必与特定的部署环境建立不必要的联系。</p></blockquote><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul><li><p>核心技术: 依赖注入、事件、资源、 i18n、验证、数据绑定、类型转换、 SpEL、 AOP。</p></li><li><p>测试: 模拟对象，TestContext 框架，Spring MVC Test，WebTestClient。</p></li><li><p>数据访问: 事务，DAO 支持，JDBC，ORM，封送 XML。</p></li><li><p>集成: 远程处理、 JMS、 JCA、 JMX、电子邮件、任务、调度、缓存。</p></li><li><p>语言: Kotlin，Groovy，动态语言。</p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1 容器的基本实现</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/2-1-rong-qi-de-ji-ben-shi-xian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/2-1-rong-qi-de-ji-ben-shi-xian/</url>
      
        <content type="html"><![CDATA[<h2 id="容器的基本用法"><a href="#容器的基本用法" class="headerlink" title="容器的基本用法"></a>容器的基本用法</h2><p>bean是spring最核心的东西 如果spring是水桶 那么bean就是容器里的水</p><p>定义一个<strong>bean</strong></p><pre><code>pulic class MyTestBean{    private String testStr="testStr";    publiv void setTestStr(String testStr){        this.testStr=testStr;    }    public String getTestStr(){        return this.testStr;    }}</code></pre><p>spring 配置Bean</p><h2 id="功能分析"><a href="#功能分析" class="headerlink" title="功能分析"></a>功能分析</h2><ol><li>读取配置文件</li><li>根据配置文件找到对应的类，并实例化</li><li>调用实例化后的实例</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 搭建环境</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/1-1-da-jian-huan-jing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-yuan-ma-xue-xi/1-1-da-jian-huan-jing/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring整体架构和环境搭建"><a href="#Spring整体架构和环境搭建" class="headerlink" title="Spring整体架构和环境搭建"></a>Spring整体架构和环境搭建</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200923191652.png" alt="image-20200923191651135"></p><ol><li>Core Container（核心容器）包含core beans context Expression Language模块</li></ol><h2 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h2><p><strong>版本对应</strong></p><p>官方wiki: <a href="https://github.com/spring-projects/spring-framework/wiki" target="_blank" rel="noopener">https://github.com/spring-projects/spring-framework/wiki</a></p><ol><li>下载Gradle</li><li>利用idea 下载github 源码</li><li>使用手机网络或科学上网 等方式 等待idea 编译下载相关依赖</li><li>等——————————-编译完成</li><li>可能出现一些问题  大部分是依赖下载失败 xxx包找不到</li></ol><h1 id="相关问题总结"><a href="#相关问题总结" class="headerlink" title="相关问题总结"></a>相关问题总结</h1><h2 id="xxx-jar依赖包找不到"><a href="#xxx-jar依赖包找不到" class="headerlink" title="xxx.jar依赖包找不到"></a>xxx.jar依赖包找不到</h2><ol><li>搜索spring源码文件夹 查找</li><li>maven仓库浏览器下载</li><li>将下载的文件放到自己的仓库</li></ol><h2 id="创建测试moudle"><a href="#创建测试moudle" class="headerlink" title="创建测试moudle"></a>创建测试moudle</h2><h4 id="利用gradle创建-java项目"><a href="#利用gradle创建-java项目" class="headerlink" title="利用gradle创建 java项目"></a>利用gradle创建 java项目</h4><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200926101840.png" alt="image-20200926101840144"></p><h4 id="编译spring-Reload-Gradle-Project-和-Refresh-Gradle-Dependencies"><a href="#编译spring-Reload-Gradle-Project-和-Refresh-Gradle-Dependencies" class="headerlink" title="编译spring ,Reload Gradle Project 和 Refresh Gradle Dependencies"></a>编译spring ,Reload Gradle Project 和 Refresh Gradle Dependencies</h4><p><img src="../../../../AppData/Roaming/Typora/typora-user-images/image-20200926102047584.png" alt="image-20200926102047584"></p><h4 id="编辑build-gradle-添加本地依赖"><a href="#编辑build-gradle-添加本地依赖" class="headerlink" title="编辑build.gradle,添加本地依赖"></a>编辑build.gradle,添加本地依赖</h4><pre class=" language-groovy"><code class="language-groovy">dependencies <span class="token punctuation">{</span>    compile <span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':spring-beans'</span><span class="token punctuation">)</span>    testCompile group<span class="token punctuation">:</span> <span class="token string">'junit'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'junit'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'4.12'</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>传统JDBC写法</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-he-shu-ju-ku/chuan-tong-jdbc-xie-fa/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-he-shu-ju-ku/chuan-tong-jdbc-xie-fa/</url>
      
        <content type="html"><![CDATA[<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>spring_jdbc<span class="token punctuation">.</span>jdbc<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>spring_jdbc<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span>Role<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Connection<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>DriverManager<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>PreparedStatement<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>ResultSet<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcExample</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getRoleTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//查询数据库,返回实体对象</span>        Role role <span class="token operator">=</span> <span class="token function">getRole</span><span class="token punctuation">(</span>1L<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>role<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Role <span class="token function">getRole</span><span class="token punctuation">(</span>Long id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Role role <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 声明JDBC变量</span>        Connection con <span class="token operator">=</span> null<span class="token punctuation">;</span>        PreparedStatement ps <span class="token operator">=</span> null<span class="token punctuation">;</span>        ResultSet rs <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 注册驱动程序</span>            Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.cj.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 获取连接</span>            con <span class="token operator">=</span> DriverManager<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://localhost:3306/chapter12?serverTimezone=UTC"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 预编译SQL</span>            ps <span class="token operator">=</span> con<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"select id, role_name, note from t_role where id = ?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 设置参数</span>            ps<span class="token punctuation">.</span><span class="token function">setLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 执行SQL</span>            rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 组装结果集返回POJO</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                role <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Role</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                role<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                role<span class="token punctuation">.</span><span class="token function">setRoleName</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                role<span class="token punctuation">.</span><span class="token function">setNote</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> SQLException e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 异常处理</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 关闭数据库连接资源</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>rs <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>rs<span class="token punctuation">.</span><span class="token function">isClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>ps <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>ps<span class="token punctuation">.</span><span class="token function">isClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    ps<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>con <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>con<span class="token punctuation">.</span><span class="token function">isClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    con<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> role<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1配置数据库</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-he-shu-ju-ku/1-1-pei-zhi-shu-ju-ku/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-he-shu-ju-ku/1-1-pei-zhi-shu-ju-ku/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学习记录（一）</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springtest/xue-xi-ji-lu-yi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springtest/xue-xi-ji-lu-yi/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>测试是企业软件开发不可或缺的一部分。本章重点介绍IoC原则对单元<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#unit-testing" target="_blank" rel="noopener">测试的价值，</a>以及春框架支持集成测试<a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#integration-testing" target="_blank" rel="noopener">的好处</a>。（对企业中的测试进行彻底处理超出了本参考手册的范围。</p><h1 id="1-单元测试"><a href="#1-单元测试" class="headerlink" title="1.单元测试"></a>1.单元测试</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库连接池Druid</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-chi-jiu-ceng-kuang-jia/shu-ju-ku-lian-jie-chi-druid/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-chi-jiu-ceng-kuang-jia/shu-ju-ku-lian-jie-chi-druid/</url>
      
        <content type="html"><![CDATA[<h1 id="Druid连接池介绍"><a href="#Druid连接池介绍" class="headerlink" title="Druid连接池介绍"></a>Druid连接池介绍</h1><h1 id="1-什么是Druid连接池"><a href="#1-什么是Druid连接池" class="headerlink" title="1. 什么是Druid连接池"></a>1. 什么是Druid连接池</h1><p>Druid连接池是阿里巴巴开源的数据库连接池项目。Druid连接池为监控而生，内置强大的监控功能，监控特性不影响性能。功能强大，能防SQL注入，内置Loging能诊断Hack应用行为。</p><h2 id="1-1-代码仓库、文档、下载"><a href="#1-1-代码仓库、文档、下载" class="headerlink" title="1.1 代码仓库、文档、下载"></a>1.1 代码仓库、文档、下载</h2><ul><li>Github项目地址 <a href="https://github.com/alibaba/druid" target="_blank" rel="noopener">https://github.com/alibaba/druid</a></li><li>文档 <a href="https://github.com/alibaba/druid/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank" rel="noopener">https://github.com/alibaba/druid/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98</a></li><li>下载 <a href="http://repo1.maven.org/maven2/com/alibaba/druid/1.1.10/" target="_blank" rel="noopener">http://repo1.maven.org/maven2/com/alibaba/druid/</a></li><li>监控DEMO <a href="http://120.26.192.168/druid/index.html" target="_blank" rel="noopener">http://120.26.192.168/druid/index.html</a></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot整合template</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-chi-jiu-ceng-kuang-jia/springboot-zheng-he-template/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-chi-jiu-ceng-kuang-jia/springboot-zheng-he-template/</url>
      
        <content type="html"><![CDATA[<h1 id="Springboot整合JdbcTmplate"><a href="#Springboot整合JdbcTmplate" class="headerlink" title="Springboot整合JdbcTmplate"></a>Springboot整合JdbcTmplate</h1><blockquote><p>jdbctemplate在之前的开发中用的还是比较多的，它和mybatis有点类似都是需要自己写sql语句，也是对jdbc做了封装，缺点也比较明显就是移植性有些差。但日常的中小型开发也够用，这次就来一个Spring Boot整合jdbctemplate实现增删改查的小例子</p></blockquote><h2 id="需要的依赖"><a href="#需要的依赖" class="headerlink" title="需要的依赖"></a>需要的依赖</h2><h3 id="1-maven"><a href="#1-maven" class="headerlink" title="1. maven"></a>1. maven</h3><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><h3 id="2-gradle"><a href="#2-gradle" class="headerlink" title="2. gradle"></a>2. gradle</h3><pre class=" language-groovy"><code class="language-groovy">dependencies <span class="token punctuation">{</span>   implementation <span class="token string">'org.springframework.boot:spring-boot-starter-jdbc'</span>   implementation <span class="token string">'org.springframework.boot:spring-boot-starter-web'</span>   runtimeOnly <span class="token string">'mysql:mysql-connector-java'</span>   <span class="token function">testImplementation</span><span class="token punctuation">(</span><span class="token string">'org.springframework.boot:spring-boot-starter-test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      exclude group<span class="token punctuation">:</span> <span class="token string">'org.junit.vintage'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">'junit-vintage-engine'</span>   <span class="token punctuation">}</span>   implementation <span class="token string">'com.alibaba:druid-spring-boot-starter:1.1.10'</span><span class="token punctuation">}</span></code></pre><h2 id="文件目录结构"><a href="#文件目录结构" class="headerlink" title="文件目录结构"></a>文件目录结构</h2><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200912111339016.png" alt="image-20200912111339016"></p><h2 id="案例代码"><a href="#案例代码" class="headerlink" title="案例代码"></a>案例代码</h2><p>实体类 user</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>template<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/9/10 * 修改时间：2020/9/10 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String username<span class="token punctuation">;</span>    <span class="token keyword">private</span> String address<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">,</span> String username<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span> String address<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"User{"</span> <span class="token operator">+</span>                <span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>                <span class="token string">", username='"</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", address='"</span> <span class="token operator">+</span> address <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> username<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span>String username<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> address<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span>String address<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>userService</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>template<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>BeanPropertyRowMapper<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>JdbcTemplate<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>RowMapper<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>ResultSet<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/9/10 * 修改时间：2020/9/10 */</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    JdbcTemplate template<span class="token punctuation">;</span>    <span class="token keyword">public</span> Integer <span class="token function">addUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">"insert into user ( username, address) value (?,?)"</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">deleteUserById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">"delete from user where id=?"</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Integer <span class="token function">updataUser</span><span class="token punctuation">(</span>User user<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token string">"update user set username=? where id=?"</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"select * from user"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RowMapper</span><span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> User <span class="token function">mapRow</span><span class="token punctuation">(</span>ResultSet rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span> <span class="token keyword">throws</span> SQLException <span class="token punctuation">{</span>                User user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> user<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">getAllUser2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"select * from user"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanPropertyRowMapper</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>application.propertions数据库配置信息 mysql8.*</p><pre class=" language-xml"><code class="language-xml">spring.datasource.type=com.mysql.cj.jdbc.MysqlDataSourcespring.datasource.username=rootspring.datasource.password=123456spring.datasource.url=jdbc:mysql://192.168.43.147:3306/t1?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8</code></pre><p>测试代码</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>template<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>BeforeEach<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>SpringBootTest<span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Assertions<span class="token punctuation">.</span>*<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/9/10 * 修改时间：2020/9/10 */</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">class</span> <span class="token class-name">UserServiceTest</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    UserService userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@BeforeEach</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">testAddUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        User user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"k2"</span><span class="token punctuation">,</span><span class="token string">"jt2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userService<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">deleteUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        userService<span class="token punctuation">.</span><span class="token function">deleteUserById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">updataUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        User user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"jt2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        userService<span class="token punctuation">.</span><span class="token function">updataUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">void</span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userService<span class="token punctuation">.</span><span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Data Jpa简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-chi-jiu-ceng-kuang-jia/spring-data-jpa-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-chi-jiu-ceng-kuang-jia/spring-data-jpa-jian-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="Jpa"><a href="#Jpa" class="headerlink" title="Jpa"></a>Jpa</h2><h3 id="1-JPA是什么"><a href="#1-JPA是什么" class="headerlink" title="1. JPA是什么"></a>1. JPA是什么</h3><ol><li>Java Persistence API：用于对象持久化的 API</li><li>Java EE 5.0 平台标准的 ORM 规范，使得应用程序以统一的方式访问持久层<br><a href="http://www.javaboy.org/images/sb/19-1.png" target="_blank" rel="noopener"><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/19-1.png" alt="img"></a></li></ol><h3 id="2-JPA和Hibernate的关系"><a href="#2-JPA和Hibernate的关系" class="headerlink" title="2. JPA和Hibernate的关系"></a>2. JPA和Hibernate的关系</h3><ol><li>JPA 是 Hibernate 的一个抽象（就像JDBC和JDBC驱动的关系）；</li><li>JPA 是规范：JPA 本质上就是一种 ORM 规范，不是ORM 框架，这是因为 JPA 并未提供 ORM 实现，它只是制订了一些规范，提供了一些编程的 API 接口，但具体实现则由 ORM 厂商提供实现；</li><li>Hibernate 是实现：Hibernate 除了作为 ORM 框架之外，它也是一种 JPA 实现</li><li>从功能上来说， JPA 是 Hibernate 功能的一个子集</li></ol><h3 id="3-JPA的供应商"><a href="#3-JPA的供应商" class="headerlink" title="3. JPA的供应商"></a>3. JPA的供应商</h3><p>JPA 的目标之一是制定一个可以由很多供应商实现的 API，Hibernate 3.2+、TopLink 10.1+ 以及 OpenJPA 都提供了 JPA 的实现，Jpa 供应商有很多，常见的有如下四种：</p><ol><li>Hibernate<br>JPA 的始作俑者就是 Hibernate 的作者，Hibernate 从 3.2 开始兼容 JPA。</li><li>OpenJPA<br>OpenJPA 是 Apache 组织提供的开源项目。</li><li>TopLink<br>TopLink 以前需要收费，如今开源了。</li><li>EclipseLink</li></ol><h3 id="4-JPA的优势"><a href="#4-JPA的优势" class="headerlink" title="4. JPA的优势"></a>4. JPA的优势</h3><ol><li>标准化: 提供相同的 API，这保证了基于JPA 开发的企业应用能够经过少量的修改就能够在不同的 JPA 框架下运行。</li><li>简单易用，集成方便: JPA 的主要目标之一就是提供更加简单的编程模型，在 JPA 框架下创建实体和创建 Java 类一样简单，只需要使用 javax.persistence.Entity 进行注解；JPA 的框架和接口也都非常简单。</li><li>可媲美JDBC的查询能力: JPA的查询语言是面向对象的，JPA定义了独特的JPQL，而且能够支持批量更新和修改、JOIN、GROUP BY、HAVING 等通常只有 SQL 才能够提供的高级查询特性，甚至还能够支持子查询。</li><li>支持面向对象的高级特性: JPA 中能够支持面向对象的高级特性，如类之间的继承、多态和类之间的复杂关系，最大限度的使用面向对象的模型</li></ol><h3 id="5-JPA包含的技术"><a href="#5-JPA包含的技术" class="headerlink" title="5. JPA包含的技术"></a>5. JPA包含的技术</h3><ol><li>ORM 映射元数据：JPA 支持 XML 和 JDK 5.0 注解两种元数据的形式，元数据描述对象和表之间的映射关系，框架据此将实体对象持久化到数据库表中。</li><li>JPA 的 API：用来操作实体对象，执行CRUD操作，框架在后台完成所有的事情，开发者从繁琐的 JDBC 和 SQL 代码中解脱出来。</li><li>查询语言（JPQL）：这是持久化操作中很重要的一个方面，通过面向对象而非面向数据库的查询语言查询数据，避免程序和具体的 SQL 紧密耦合。</li></ol><h2 id="Spring-Data"><a href="#Spring-Data" class="headerlink" title="Spring Data"></a>Spring Data</h2><p>Spring Data 是 Spring 的一个子项目。用于简化数据库访问，支持NoSQL 和 关系数据存储。其主要目标是使数据库的访问变得方便快捷。Spring Data 具有如下特点：</p><ol><li>SpringData 项目支持 NoSQL 存储：<br>MongoDB （文档数据库）<br>Neo4j（图形数据库）<br>Redis（键/值存储）<br>Hbase（列族数据库）</li><li>SpringData 项目所支持的关系数据存储技术：<br>JDBC<br>JPA</li><li>Spring Data Jpa 致力于减少数据访问层 (DAO) 的开发量. 开发者唯一要做的，就是声明持久层的接口，其他都交给 Spring Data JPA 来帮你完成！</li><li>框架怎么可能代替开发者实现业务逻辑呢？比如：当有一个 UserDao.findUserById() 这样一个方法声明，大致应该能判断出这是根据给定条件的 ID 查询出满足条件的 User 对象。Spring Data JPA 做的便是规范方法的名字，根据符合规范的名字来确定方法需要实现什么样的逻辑。</li></ol><h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>为了让大伙彻底把这两个东西学会，这里我就先来介绍单纯的Jpa使用，然后我们再结合 Spring Data 来看 Jpa如何使用。</p><p>整体步骤如下：</p><p>1.使用 IntelliJ IDEA 创建项目，创建时选择 JavaEE Persistence ，如下：<br><a href="http://www.javaboy.org/images/sb/19-2.png" target="_blank" rel="noopener"><img src="http://www.javaboy.org/images/sb/19-2.png" alt="img"></a></p><p>2.创建成功后，添加依赖jar，由于 Jpa 只是一个规范，因此我们说用Jpa实际上必然是用Jpa的某一种实现，那么是哪一种实现呢？当然就是Hibernate了，所以添加的jar，实际上来自 Hibernate，如下：</p><p><a href="http://www.javaboy.org/images/sb/19-3.png" target="_blank" rel="noopener"><img src="http://www.javaboy.org/images/sb/19-3.png" alt="img"></a></p><p>3.添加实体类</p><p>接下来在项目中添加实体类，如下：</p><pre><code>@Entity(name = "t_book")public class Book {    private Long id;    private String name;    private String author;    @Id    @GeneratedValue(strategy = GenerationType.IDENTITY)    public Long getId() {        return id;    }    // 省略其他getter/setter}</code></pre><p>首先@Entity注解表示这是一个实体类，那么在项目启动时会自动针对该类生成一张表，默认的表名为类名，@Entity注解的name属性表示自定义生成的表名。@Id注解表示这个字段是一个id，@GeneratedValue注解表示主键的自增长策略，对于类中的其他属性，默认都会根据属性名在表中生成相应的字段，字段名和属性名相同，如果开发者想要对字段进行定制，可以使用@Column注解，去配置字段的名称，长度，是否为空等等。</p><p>4.创建 persistence.xml 文件</p><p>JPA 规范要求在类路径的 META-INF 目录下放置persistence.xml，文件的名称是固定的</p><pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0"&gt;    &lt;persistence-unit name="NewPersistenceUnit" transaction-type="RESOURCE_LOCAL"&gt;        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;        &lt;class&gt;org.sang.Book&lt;/class&gt;        &lt;properties&gt;            &lt;property name="hibernate.connection.url"                      value="jdbc:mysql:///jpa01?useUnicode=true&amp;amp;characterEncoding=UTF-8"/&gt;            &lt;property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/&gt;            &lt;property name="hibernate.connection.username" value="root"/&gt;            &lt;property name="hibernate.connection.password" value="123"/&gt;            &lt;property name="hibernate.archive.autodetection" value="class"/&gt;            &lt;property name="hibernate.show_sql" value="true"/&gt;            &lt;property name="hibernate.format_sql" value="true"/&gt;            &lt;property name="hibernate.hbm2ddl.auto" value="update"/&gt;        &lt;/properties&gt;    &lt;/persistence-unit&gt;&lt;/persistence&gt;</code></pre><p>注意：</p><ul><li>persistence-unit 的name 属性用于定义持久化单元的名字, 必填。</li><li>transaction-type：指定 JPA 的事务处理策略。RESOURCE_LOCAL：默认值，数据库级别的事务，只能针对一种数据库，不支持分布式事务。如果需要支持分布式事务，使用JTA：transaction-type=”JTA”</li><li>class节点表示显式的列出实体类</li><li>properties中的配置分为两部分：数据库连接信息以及Hibernate信息</li></ul><ol><li>执行持久化操作</li></ol><pre><code>EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory("NewPersistenceUnit");EntityManager manager = entityManagerFactory.createEntityManager();EntityTransaction transaction = manager.getTransaction();transaction.begin();Book book = new Book();book.setAuthor("罗贯中");book.setName("三国演义");manager.persist(book);transaction.commit();manager.close();entityManagerFactory.close();</code></pre><p>这里首先根据配置文件创建出来一个 EntityManagerFactory ，然后再根据 EntityManagerFactory 的实例创建出来一个 EntityManager ，然后再开启事务，调用 EntityManager 中的 persist 方法执行一次持久化操作，最后提交事务，执行完这些操作后，数据库中旧多出来一个 t_book 表，并且表中有一条数据。</p><h3 id="关于-JPQL"><a href="#关于-JPQL" class="headerlink" title="关于 JPQL"></a>关于 JPQL</h3><ol><li>JPQL语言，即 Java Persistence Query Language 的简称。JPQL 是一种和 SQL 非常类似的中间性和对象化查询语言，它最终会被编译成针对不同底层数据库的 SQL 查询，从而屏蔽不同数据库的差异。JPQL语言的语句可以是 select 语句、update 语句或delete语句，它们都通过 Query 接口封装执行。</li><li>Query接口封装了执行数据库查询的相关方法。调用 EntityManager 的 createQuery、create NamedQuery 及 createNativeQuery 方法可以获得查询对象，进而可调用 Query 接口的相关方法来执行查询操作。</li><li>Query接口的主要方法如下：</li></ol><ul><li><strong>int executeUpdate();</strong> | 用于执行update或delete语句。</li><li><strong>List getResultList();</strong> | 用于执行select语句并返回结果集实体列表。</li><li><strong>Object getSingleResult();</strong> | 用于执行只返回单个结果实体的select语句。</li><li><strong>Query setFirstResult(int startPosition);</strong> | 用于设置从哪个实体记录开始返回查询结果。</li><li><strong>Query setMaxResults(int maxResult);</strong> | 用于设置返回结果实体的最大数。与setFirstResult结合使用可实现分页查询。</li><li><strong>Query setFlushMode(FlushModeType flushMode);</strong> | 设置查询对象的Flush模式。参数可以取2个枚举值：FlushModeType.AUTO 为自动更新数据库记录，FlushMode Type.COMMIT 为直到提交事务时才更新数据库记录。</li><li><strong>setHint(String hintName, Object value);</strong> | 设置与查询对象相关的特定供应商参数或提示信息。参数名及其取值需要参考特定 JPA 实现库提供商的文档。如果第二个参数无效将抛出IllegalArgumentException异常。</li><li><strong>setParameter(int position, Object value);</strong> | 为查询语句的指定位置参数赋值。Position 指定参数序号，value 为赋给参数的值。</li><li><strong>setParameter(int position, Date d, TemporalType type);</strong> | 为查询语句的指定位置参数赋 Date 值。Position 指定参数序号，value 为赋给参数的值，temporalType 取 TemporalType 的枚举常量，包括 DATE、TIME 及 TIMESTAMP 三个，，用于将 Java 的 Date 型值临时转换为数据库支持的日期时间类型（java.sql.Date、java.sql.Time及java.sql.Timestamp）。</li><li><strong>setParameter(int position, Calendar c, TemporalType type);</strong> | 为查询语句的指定位置参数赋 Calenda r值。position 指定参数序号，value 为赋给参数的值，temporalType 的含义及取舍同前。</li><li><strong>setParameter(String name, Object value);</strong> | 为查询语句的指定名称参数赋值。</li><li><strong>setParameter(String name, Date d, TemporalType type);</strong> | 为查询语句的指定名称参数赋 Date 值,用法同前。</li><li><strong>setParameter(String name, Calendar c, TemporalType type);</strong> | 为查询语句的指定名称参数设置Calendar值。name为参数名，其它同前。该方法调用时如果参数位置或参数名不正确，或者所赋的参数值类型不匹配，将抛出 IllegalArgumentException 异常。</li></ul><h3 id="JPQL-举例"><a href="#JPQL-举例" class="headerlink" title="JPQL 举例"></a>JPQL 举例</h3><p>和在 SQL 中一样，JPQL 中的 select 语句用于执行查询。其语法可表示为：<br><code>select_clause form_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</code></p><p>其中：</p><ol><li>from 子句是查询语句的必选子句。</li><li>select 用来指定查询返回的结果实体或实体的某些属性。</li><li>from 子句声明查询源实体类，并指定标识符变量（相当于SQL表的别名）。</li><li>如果不希望返回重复实体，可使用关键字 distinct 修饰。select、from 都是 JPQL 的关键字，通常全大写或全小写，建议不要大小写混用。</li></ol><p>在 JPQL 中，查询所有实体的 JPQL 查询语句很简单，如下：<br><code>select o from Order o 或 select o from Order as o</code><br>这里关键字 as 可以省去，标识符变量的命名规范与 Java 标识符相同，且区分大小写,调用 EntityManager 的 createQuery() 方法可创建查询对象，接着调用 Query 接口的 getResultList() 方法就可获得查询结果集，如下：</p><pre><code>Query query = entityManager.createQuery( "select o from Order o"); List orders = query.getResultList();Iterator iterator = orders.iterator();while(iterator.hasNext() ) {  // 处理Order}</code></pre><p>其他方法的与此类似，这里不再赘述。</p><h2 id="Spring-Data-的故事"><a href="#Spring-Data-的故事" class="headerlink" title="Spring Data 的故事"></a>Spring Data 的故事</h2><p>在 Spring Boot 中，Spring Data Jpa 官方封装了太多东西了，导致很多人用的时候不知道底层到底是怎么配置的，本文就和大伙来看看在手工的Spring环境下，Spring Data Jpa要怎么配置，配置完成后，用法和 Spring Boot 中的用法是一致的。</p><h3 id="基本环境搭建"><a href="#基本环境搭建" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><p>首先创建一个普通的Maven工程，并添加如下依赖：</p><pre><code>&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;        &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;        &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;        &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;        &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;mysql&lt;/groupId&gt;        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;        &lt;version&gt;5.1.27&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;        &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework&lt;/groupId&gt;        &lt;artifactId&gt;spring-expression&lt;/artifactId&gt;        &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;        &lt;version&gt;5.2.12.Final&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;        &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;        &lt;version&gt;5.2.12.Final&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;        &lt;artifactId&gt;druid&lt;/artifactId&gt;        &lt;version&gt;1.0.29&lt;/version&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;        &lt;version&gt;1.11.3.RELEASE&lt;/version&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;</code></pre><p>这里除了 Jpa 的依赖之外，就是Spring Data Jpa 的依赖了。</p><p>接下来创建一个 User 实体类，创建方式参考 Jpa中实体类的创建方式，这里不再赘述。</p><p>接下来在resources目录下创建一个applicationContext.xml文件，并配置Spring和Jpa，如下：</p><pre><code>&lt;context:property-placeholder location="classpath:db.properties"/&gt;&lt;context:component-scan base-package="org.sang"/&gt;&lt;bean class="com.alibaba.druid.pool.DruidDataSource" id="dataSource"&gt;    &lt;property name="driverClassName" value="${db.driver}"/&gt;    &lt;property name="url" value="${db.url}"/&gt;    &lt;property name="username" value="${db.username}"/&gt;    &lt;property name="password" value="${db.password}"/&gt;&lt;/bean&gt;&lt;bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory"&gt;    &lt;property name="dataSource" ref="dataSource"/&gt;    &lt;property name="jpaVendorAdapter"&gt;        &lt;bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/&gt;    &lt;/property&gt;    &lt;property name="packagesToScan" value="org.sang.model"/&gt;    &lt;property name="jpaProperties"&gt;        &lt;props&gt;            &lt;prop key="hibernate.show_sql"&gt;true&lt;/prop&gt;            &lt;prop key="hibernate.format_sql"&gt;true&lt;/prop&gt;            &lt;prop key="hibernate.hbm2ddl.auto"&gt;update&lt;/prop&gt;            &lt;prop key="hibernate.dialect"&gt;org.hibernate.dialect.MySQL57Dialect&lt;/prop&gt;        &lt;/props&gt;    &lt;/property&gt;&lt;/bean&gt;&lt;bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager"&gt;    &lt;property name="entityManagerFactory" ref="entityManagerFactory"/&gt;&lt;/bean&gt;&lt;tx:annotation-driven transaction-manager="transactionManager"/&gt;&lt;!-- 配置jpa --&gt;&lt;jpa:repositories base-package="org.sang.dao"                  entity-manager-factory-ref="entityManagerFactory"/&gt;</code></pre><p>这里和 Jpa 相关的配置主要是三个，一个是entityManagerFactory，一个是Jpa的事务，还有一个是配置dao的位置，配置完成后，就可以在 org.sang.dao 包下创建相应的 Repository 了，如下：</p><pre><code>public interface UserDao extends Repository&lt;User, Long&gt; {    User getUserById(Long id);}</code></pre><p>getUserById表示根据id去查询User对象，只要我们的方法名称符合类似的规范，就不需要写SQL，具体的规范一会来说。好了，接下来，创建 Service 和 Controller 来调用这个方法，如下：</p><pre><code>@Service@Transactionalpublic class UserService {    @Resource    UserDao userDao;    public User getUserById(Long id) {        return userDao.getUserById(id);    }}public void test1() {    ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext("applicationContext.xml");    UserService userService = ctx.getBean(UserService.class);    User user = userService.getUserById(1L);    System.out.println(user);}</code></pre><p>这样，就可以查询到id为1的用户了。</p><h3 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h3><p>上文我们自定义的 UserDao 实现了 Repository 接口，这个 Repository 接口是什么来头呢？</p><p>首先来看 Repository 的一个继承关系图：</p><p><a href="http://www.javaboy.org/images/sb/19-4.png" target="_blank" rel="noopener"><img src="http://www.javaboy.org/images/sb/19-4.png" alt="img"></a></p><p>可以看到，实现类不少。那么到底如何理解 Repository 呢？</p><ol><li>Repository 接口是 Spring Data 的一个核心接口，它不提供任何方法，开发者需要在自己定义的接口中声明需要的方法 <code>public interface Repository&lt;T, ID extends Serializable&gt; { }</code></li><li>若我们定义的接口继承了 Repository, 则该接口会被 IOC 容器识别为一个 Repository Bean，进而纳入到 IOC 容器中，进而可以在该接口中定义满足一定规范的方法。</li><li>Spring Data可以让我们只定义接口，只要遵循 Spring Data 的规范，就无需写实现类。</li><li>与继承 Repository 等价的一种方式，就是在持久层接口上使用 @RepositoryDefinition 注解，并为其指定 domainClass 和 idClass 属性。像下面这样：</li></ol><pre><code>@RepositoryDefinition(domainClass = User.class, idClass = Long.class)public interface UserDao{    User findById(Long id);    List&lt;User&gt; findAll();}</code></pre><p>基础的 Repository 提供了最基本的数据访问功能，其几个子接口则扩展了一些功能，它的几个常用的实现类如下：</p><ul><li>CrudRepository： 继承 Repository，实现了一组 CRUD 相关的方法</li><li>PagingAndSortingRepository： 继承 CrudRepository，实现了一组分页排序相关的方法</li><li>JpaRepository： 继承 PagingAndSortingRepository，实现一组 JPA 规范相关的方法</li><li>自定义的 XxxxRepository 需要继承 JpaRepository，这样的 XxxxRepository 接口就具备了通用的数据访问控制层的能力。</li><li>JpaSpecificationExecutor： 不属于Repository体系，实现一组 JPA Criteria 查询相关的方法</li></ul><h3 id="方法定义规范"><a href="#方法定义规范" class="headerlink" title="方法定义规范"></a>方法定义规范</h3><h4 id="1-简单条件查询"><a href="#1-简单条件查询" class="headerlink" title="1.简单条件查询"></a>1.简单条件查询</h4><ul><li>按照 Spring Data 的规范，查询方法以 find | read | get 开头</li><li>涉及条件查询时，条件的属性用条件关键字连接，要注意的是：条件属性以首字母大写</li></ul><p>例如：定义一个 Entity 实体类：</p><pre><code>class User｛    private String firstName;    private String lastName; ｝</code></pre><p>使用And条件连接时，条件的属性名称与个数要与参数的位置与个数一一对应，如下：</p><pre><code>findByLastNameAndFirstName(String lastName,String firstName);</code></pre><ul><li>支持属性的级联查询. 若当前类有符合条件的属性, 则优先使用, 而不使用级联属性. 若需要使用级联属性, 则属性之间使用 _ 进行连接.</li></ul><p>查询举例：<br>1.按照id查询</p><pre><code>User getUserById(Long id);User getById(Long id);</code></pre><p>2.查询所有年龄小于90岁的人</p><pre><code>List&lt;User&gt; findByAgeLessThan(Long age);</code></pre><p>3.查询所有姓赵的人</p><pre><code>List&lt;User&gt; findByUsernameStartingWith(String u);</code></pre><p>4.查询所有姓赵的、并且id大于50的人</p><pre><code>List&lt;User&gt; findByUsernameStartingWithAndIdGreaterThan(String name, Long id);</code></pre><p>5.查询所有姓名中包含”上”字的人</p><pre><code>List&lt;User&gt; findByUsernameContaining(String name);</code></pre><p>6.查询所有姓赵的或者年龄大于90岁的</p><pre><code>List&lt;User&gt; findByUsernameStartingWithOrAgeGreaterThan(String name, Long age);</code></pre><p>7.查询所有角色为1的用户</p><pre><code>List&lt;User&gt; findByRole_Id(Long id);</code></pre><h4 id="2-支持的关键字"><a href="#2-支持的关键字" class="headerlink" title="2.支持的关键字"></a>2.支持的关键字</h4><p>支持的查询关键字如下图：</p><p><a href="http://www.javaboy.org/images/sb/19-5.png" target="_blank" rel="noopener"><img src="http://www.javaboy.org/images/sb/19-5.png" alt="img"></a></p><h4 id="3-查询方法流程解析"><a href="#3-查询方法流程解析" class="headerlink" title="3.查询方法流程解析"></a>3.查询方法流程解析</h4><p>为什么写上方法名，JPA就知道你想干嘛了呢？假如创建如下的查询：<code>findByUserDepUuid()</code>，框架在解析该方法时，首先剔除 findBy，然后对剩下的属性进行解析，假设查询实体为Doc：</p><ol><li>先判断 userDepUuid （根据 POJO 规范，首字母变为小写）是否为查询实体的一个属性，如果是，则表示根据该属性进行查询；如果没有该属性，继续第二步；</li><li>从右往左截取第一个大写字母开头的字符串(此处为Uuid)，然后检查剩下的字符串是否为查询实体的一个属性，如果是，则表示根据该属性进行查询；如果没有该属性，则重复第二步，继续从右往左截取；最后假设 user 为查询实体的一个属性；</li><li>接着处理剩下部分（DepUuid），先判断 user 所对应的类型是否有depUuid属性，如果有，则表示该方法最终是根据 “ Doc.user.depUuid” 的取值进行查询；否则继续按照步骤 2 的规则从右往左截取，最终表示根据 “Doc.user.dep.uuid” 的值进行查询。</li><li>可能会存在一种特殊情况，比如 Doc包含一个 user 的属性，也有一个 userDep 属性，此时会存在混淆。可以明确在属性之间加上 “_” 以显式表达意图，比如 “findByUser_DepUuid()” 或者 “findByUserDep_uuid()”</li><li>还有一些特殊的参数：例如分页或排序的参数：</li></ol><pre><code>Page&lt;UserModel&gt; findByName(String name, Pageable pageable);  List&lt;UserModel&gt; findByName(String name, Sort sort);</code></pre><h3 id="Query注解"><a href="#Query注解" class="headerlink" title="@Query注解"></a>@Query注解</h3><p>有的时候，这里提供的查询关键字并不能满足我们的查询需求，这个时候就可以使用 @Query 关键字，来自定义查询 SQL，例如查询Id最大的User：</p><pre><code>@Query("select u from t_user u where id=(select max(id) from t_user)")User getMaxIdUser();</code></pre><p>如果查询有参数的话，参数有两种不同的传递方式:</p><p>1.利用下标索引传参，索引参数如下所示，索引值从1开始，查询中 ”?X” 个数需要与方法定义的参数个数相一致，并且顺序也要一致：</p><pre><code>@Query("select u from t_user u where id&gt;?1 and username like ?2")List&lt;User&gt; selectUserByParam(Long id, String name);</code></pre><p>2.命名参数（推荐）：这种方式可以定义好参数名，赋值时采用@Param(“参数名”)，而不用管顺序：</p><pre><code>@Query("select u from t_user u where id&gt;:id and username like :name")List&lt;User&gt; selectUserByParam2(@Param("name") String name, @Param("id") Long id);</code></pre><p>查询时候，也可以是使用原生的SQL查询，如下：</p><pre><code>@Query(value = "select * from t_user",nativeQuery = true)List&lt;User&gt; selectAll();</code></pre><h3 id="Modifying注解"><a href="#Modifying注解" class="headerlink" title="@Modifying注解"></a>@Modifying注解</h3><p>涉及到数据修改操作，可以使用 @Modifying 注解，@Query 与 @Modifying 这两个 annotation一起声明，可定义个性化更新操作，例如涉及某些字段更新时最为常用，示例如下：</p><pre><code>@Modifying@Query("update t_user set age=:age where id&gt;:id")int updateUserById(@Param("age") Long age, @Param("id") Long id);</code></pre><p>注意：</p><ol><li>可以通过自定义的 JPQL 完成 UPDATE 和 DELETE 操作. 注意: JPQL 不支持使用 INSERT</li><li>方法的返回值应该是 int，表示更新语句所影响的行数</li><li>在调用的地方必须加事务，没有事务不能正常执行</li><li>默认情况下, Spring Data 的每个方法上有事务, 但都是一个只读事务. 他们不能完成修改操作</li></ol><p>说到这里，再来顺便说说Spring Data 中的事务问题：</p><ol><li>Spring Data 提供了默认的事务处理方式，即所有的查询均声明为只读事务。</li><li>对于自定义的方法，如需改变 Spring Data 提供的事务默认方式，可以在方法上添加 @Transactional 注解。</li><li>进行多个 Repository 操作时，也应该使它们在同一个事务中处理，按照分层架构的思想，这部分属于业务逻辑层，因此，需要在Service 层实现对多个 Repository 的调用，并在相应的方法上声明事务。</li></ol><p>好了，关于Spring Data Jpa 本文就先说这么多。</p><p>#<a href="http://www.javaboy.org/tags/Jpa/" target="_blank" rel="noopener">JPA</a>,<a href="http://www.javaboy.org/tags/Spring-Data/" target="_blank" rel="noopener">SPRING DATA</a></p><p>喜欢这篇文章吗？扫码关注公众号<strong>【江南一点雨】</strong>，<strong>【江南一点雨】</strong>专注于 SPRING BOOT+微服务以及前后端分离技术，每天推送原创技术干货，关注后回复 JAVA，领取松哥为你精心准备的 JAVA 干货!</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot集成swagger</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-ji-cheng-swagger/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-ji-cheng-swagger/</url>
      
        <content type="html"><![CDATA[<p>1、引入swagger maven依赖</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>2、编写swagger配置类：Swagger2Config.java</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Swagger2Config</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> Docket <span class="token function">createRestApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//控制器 所在的包路径 todo</span>                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"com.kujin.springboot_fileupload.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span>PathSelectors<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> ApiInfo <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"Restful API"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"swagger Restful API文档"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"1.1.0"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>3、编写测试接口：HelloController.java</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"测试接口-API"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"hello的测试接口"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"名称"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> dataType <span class="token operator">=</span> <span class="token string">"String"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">index</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">final</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"hello "</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/sum"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"两整数求和接口"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"a"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"参数a"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> dataType <span class="token operator">=</span> <span class="token string">"int"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"b"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"参数b"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> dataType <span class="token operator">=</span> <span class="token string">"int"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">sum</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">final</span> Integer a<span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">final</span> Integer b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"a + b = "</span> <span class="token operator">+</span> sum<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>4、启动项目，在浏览器输入<a href="http://127.0.0.1:8080/swagger-ui.html%E6%9F%A5%E7%9C%8B%E6%8E%A5%E5%8F%A3%E4%BF%A1%E6%81%AF" target="_blank" rel="noopener">http://127.0.0.1:8080/swagger-ui.html查看接口信息</a></p><p><img src="https://img-blog.csdnimg.cn/20181026152723782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xEWTEwMTY=,size_27,color_FFFFFF,t_70" alt="img"></p><p>5、点击“测试接口-API”展开接口列表</p><p><img src="https://img-blog.csdnimg.cn/20181026152946118.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xEWTEwMTY=,size_27,color_FFFFFF,t_70" alt="img"></p><p>6、 测试接口：点击指定的接口，然后点击 “Tty it out”</p><p><img src="https://img-blog.csdnimg.cn/2018102615315931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xEWTEwMTY=,size_27,color_FFFFFF,t_70" alt="img"></p><p> 7、测试接口：输入参数</p><p><img src="https://img-blog.csdnimg.cn/20181026153335621.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xEWTEwMTY=,size_27,color_FFFFFF,t_70" alt="img"></p><p>8、测试接口：点击下方的“Execute”按钮提交请求，执行结果如下</p><p><img src="https://img-blog.csdnimg.cn/20181026153611907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xEWTEwMTY=,size_27,color_FFFFFF,t_70" alt="img"></p><p>9、swagger2常用注解说明</p><pre class=" language-properties"><code class="language-properties">1、@Api：用在请求的类上，表示对类的说明<span class="token attr-name">    tags</span><span class="token punctuation">=</span><span class="token attr-value">"说明该类的作用，可以在UI界面上看到的注解" </span><span class="token attr-name">    value</span><span class="token punctuation">=</span><span class="token attr-value">"该参数没什么意义，在UI界面上也看到，所以不需要配置" </span><span class="token attr-name">2、@ApiOperation：用在请求的方法上，说明方法的用途、作用</span> <span class="token attr-name">    value</span><span class="token punctuation">=</span><span class="token attr-value">"说明方法的用途、作用" </span><span class="token attr-name">    notes</span><span class="token punctuation">=</span><span class="token attr-value">"方法的备注说明" </span><span class="token attr-name">3、@ApiImplicitParams：用在请求的方法上，表示一组参数说明</span> <span class="token attr-name">    @ApiImplicitParam：用在@ApiImplicitParams注解中，或者单独用在只有一个参数的方法上，指定具体某一个请求参数的详细信息</span> <span class="token attr-name">        name：参数名</span> <span class="token attr-name">        value：参数的汉字说明、解释</span> <span class="token attr-name">        required：参数是否必须传</span> <span class="token attr-name">        paramType：参数放在哪个地方</span> <span class="token attr-name">            ·</span> <span class="token attr-value">header --> 请求参数的获取：@RequestHeader </span><span class="token attr-name">            ·</span> <span class="token attr-value">query --> 请求参数的获取：@RequestParam </span><span class="token attr-name">            ·</span> <span class="token attr-value">path（用于restful接口）--> 请求参数的获取：@PathVariable </span><span class="token attr-name">            ·</span> <span class="token attr-value">body（不常用） </span><span class="token attr-name">            ·</span> <span class="token attr-value">form（不常用） </span><span class="token attr-name">        dataType：参数类型，默认String，其它值dataType</span><span class="token punctuation">=</span><span class="token attr-value">"Integer" defaultValue：参数的默认值 </span><span class="token attr-name">4、@ApiModel：用于响应类上，表示一个返回响应数据的信息</span> <span class="token attr-value">（这种一般用在post创建的时候，使用@RequestBody这样的场景， 请求参数无法使用@ApiImplicitParam注解进行描述的时候</span>    @ApiModelProperty：用在属性上，描述响应类的属性5、@ApiIgnore：使用该注解忽略这个API</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot路径映射</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-lu-jing-ying-she/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-lu-jing-ying-she/</url>
      
        <content type="html"><![CDATA[<h1 id="普通的springboot访问html"><a href="#普通的springboot访问html" class="headerlink" title="普通的springboot访问html"></a>普通的springboot访问html</h1><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//访问路径</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//文件名</span>     <span class="token keyword">return</span> <span class="token string">"hello"</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="通过配置访问"><a href="#通过配置访问" class="headerlink" title="通过配置访问"></a>通过配置访问</h1><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span>ViewControllerRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//访问路径 返回的view</span>        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/view"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/a"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="测试案例目录结构"><a href="#测试案例目录结构" class="headerlink" title="测试案例目录结构"></a>测试案例目录结构</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/mulu-20200906162349379.png" alt="mulu-20200906162349379"></p><h1 id="项目依赖"><a href="#项目依赖" class="headerlink" title="项目依赖"></a>项目依赖</h1><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot整合web</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-zheng-he-web/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-zheng-he-web/</url>
      
        <content type="html"><![CDATA[<h1 id="HttpServlet"><a href="#HttpServlet" class="headerlink" title="HttpServlet"></a>HttpServlet</h1><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//请求路径</span><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/myservler"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"MyServlet do get"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="请求监听器"><a href="#请求监听器" class="headerlink" title="请求监听器"></a>请求监听器</h1><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ServletRequestEvent<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ServletRequestListener<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>WebListener<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：请求监听器 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token annotation punctuation">@WebListener</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRequestListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletRequestListener</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestDestroyed</span><span class="token punctuation">(</span>ServletRequestEvent sre<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"requestDestroyed"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">requestInitialized</span><span class="token punctuation">(</span>ServletRequestEvent sre<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"requestInitialized"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="自定义web拦截器"><a href="#自定义web拦截器" class="headerlink" title="自定义web拦截器"></a>自定义web拦截器</h1><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 类：自定义web拦截器 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//拦截路径</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>FilterConfig filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span>ServletRequest servletRequest<span class="token punctuation">,</span> ServletResponse servletResponse<span class="token punctuation">,</span> FilterChain filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doFilter 启动拦截器"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span> servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="启动webservlet扫描"><a href="#启动webservlet扫描" class="headerlink" title="启动webservlet扫描"></a>启动webservlet扫描</h1><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token comment" spellcheck="true">//servler所在的包路径</span><span class="token annotation punctuation">@ServletComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">"com.example.springboot_servlet"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootServletApplication</span> <span class="token punctuation">{</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>      SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringbootServletApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="测试案例目录结构"><a href="#测试案例目录结构" class="headerlink" title="测试案例目录结构"></a>测试案例目录结构</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/web-20200906162605161.png" alt="image-20200906162605161"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot使用类型转换器</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-shi-yong-lei-xing-zhuan-huan-qi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-shi-yong-lei-xing-zhuan-huan-qi/</url>
      
        <content type="html"><![CDATA[<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboot_convert<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>convert<span class="token punctuation">.</span>converter<span class="token punctuation">.</span>Converter<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Component<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>ParseException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>SimpleDateFormat<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：日期类型转换器 Converter&lt;输入类型, 转换类型> * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataConvert</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Date<span class="token operator">></span> <span class="token punctuation">{</span>    SimpleDateFormat simpleDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"YYYY-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Date <span class="token function">convert</span><span class="token punctuation">(</span>String s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token operator">!=</span>null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot-自定义欢迎页</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-zi-ding-yi-huan-ying-ye/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-zi-ding-yi-huan-ying-ye/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBoot-会默认访问寻找index页面"><a href="#SpringBoot-会默认访问寻找index页面" class="headerlink" title="SpringBoot 会默认访问寻找index页面"></a>SpringBoot 会默认访问寻找index页面</h1><blockquote><p>当static文件夹(存放静态资源)和templates文件夹(存放动态页面) 同时存在index页面时, 会优先访问static里的页面</p></blockquote><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200909154316065.png" alt="image-20200909154316065"></p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WelcomeController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/index"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"index"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>欢迎 static<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200909154426616.png" alt="image-20200909154426616"></p><h2 id="添加浏览器图标"><a href="#添加浏览器图标" class="headerlink" title="添加浏览器图标"></a>添加浏览器图标</h2><p>在线制作网站: <a href="https://tool.lu/favicon/" target="_blank" rel="noopener">https://tool.lu/favicon/</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot-自定义异常</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-zi-ding-yi-yi-chang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-zi-ding-yi-yi-chang/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot-实现系统启动任务CommandLineRunner</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-shi-xian-xi-tong-qi-dong-ren-wu-commandlinerunner/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-shi-xian-xi-tong-qi-dong-ren-wu-commandlinerunner/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot-上传文件</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-shang-chuan-wen-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-shang-chuan-wen-jian/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot-MockMvc单元测试</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-mockmvc-dan-yuan-ce-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-mockmvc-dan-yuan-ce-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是Mock"><a href="#什么是Mock" class="headerlink" title="什么是Mock"></a>什么是Mock</h2><p>在面向对象的程序设计中，模拟对象（英语：mock object）是以可控的方式模拟真实对象行为的假对象。在编程过程中，通常通过模拟一些输入数据，来验证程序是否达到预期结果。</p><h2 id="为什么使用Mock对象"><a href="#为什么使用Mock对象" class="headerlink" title="为什么使用Mock对象"></a>为什么使用Mock对象</h2><p>使用模拟对象，可以模拟复杂的、真实的对象行为。如果在单元测试中无法使用真实对象，可采用模拟对象进行替代。</p><p>在以下情况可以采用模拟对象来替代真实对象：</p><ul><li>真实对象的行为是不确定的（例如，当前的时间或温度）；</li><li>真实对象很难搭建起来；</li><li>真实对象的行为很难触发（例如，网络错误）；</li><li>真实对象速度很慢（例如，一个完整的数据库，在测试之前可能需要初始化）；</li><li>真实的对象是用户界面，或包括用户界面在内；</li><li>真实的对象使用了回调机制；</li><li>真实对象可能还不存在；</li><li>真实对象可能包含不能用作测试（而不是为实际工作）的信息和方法。</li></ul><p>使用Mockito一般分三个步骤：1、模拟测试类所需的外部依赖；2、执行测试代码；3、判断执行结果是否达到预期；</p><h2 id="MockMvc"><a href="#MockMvc" class="headerlink" title="MockMvc"></a>MockMvc</h2><p>MockMvc是由spring-test包提供，实现了对Http请求的模拟，能够直接使用网络的形式，转换到Controller的调用，使得测试速度快、不依赖网络环境。同时提供了一套验证的工具，结果的验证十分方便。</p><p>接口MockMvcBuilder，提供一个唯一的build方法，用来构造MockMvc。主要有两个实现：StandaloneMockMvcBuilder和DefaultMockMvcBuilder，分别对应两种测试方式，即独立安装和集成Web环境测试（并不会集成真正的web环境，而是通过相应的Mock API进行模拟测试，无须启动服务器）。MockMvcBuilders提供了对应的创建方法standaloneSetup方法和webAppContextSetup方法，在使用时直接调用即可。</p><h2 id="SpringBoot中使用"><a href="#SpringBoot中使用" class="headerlink" title="SpringBoot中使用"></a>SpringBoot中使用</h2><p>第一步：jar包引入。创建SpringBoot项目中默认引入的spring-boot-starter-test间接引入了spring-test，因此无需再额外引入jar包。</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>第二步：创建HelloWorldController类，并提供hello方法作为待测试的业务接口。</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">hello</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Hello "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"!"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>第三步：编写测试类。实例化MockMvc有两种形式，一种是使用StandaloneMockMvcBuilder，另外一种是使用DefaultMockMvcBuilder。测试类及初始化MockMvc初始化：</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//SpringBoot1.4版本之前用的是SpringJUnit4ClassRunner.class</span><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span>SpringRunner<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//SpringBoot1.4版本之前用的是@SpringApplicationConfiguration(classes = Application.class)</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token comment" spellcheck="true">//测试环境使用，用来表示测试环境使用的ApplicationContext将是WebApplicationContext类型的</span><span class="token annotation punctuation">@WebAppConfiguration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldTest</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> MockMvc mockMvc<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> WebApplicationContext webApplicationContext<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Before</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 实例化方式一</span>        mockMvc <span class="token operator">=</span> MockMvcBuilders<span class="token punctuation">.</span><span class="token function">standaloneSetup</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HelloWorldController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 实例化方式二</span><span class="token comment" spellcheck="true">//        mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();</span>    <span class="token punctuation">}</span></code></pre><p>单元测试方法：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/*     * 1、mockMvc.perform执行一个请求。     * 2、MockMvcRequestBuilders.get("XXX")构造一个请求。     * 3、ResultActions.param添加请求传值     * 4、ResultActions.accept(MediaType.TEXT_HTML_VALUE))设置返回类型     * 5、ResultActions.andExpect添加执行完成后的断言。     * 6、ResultActions.andDo添加一个结果处理器，表示要对结果做点什么事情     *   比如此处使用MockMvcResultHandlers.print()输出整个响应结果信息。     * 7、ResultActions.andReturn表示执行完成后返回相应的结果。     */</span>    mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>MockMvcRequestBuilders            <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 设置返回值类型为utf-8，否则默认为ISO-8859-1</span>            <span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON_UTF8_VALUE<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"Tom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>MockMvcResultMatchers<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span>MockMvcResultMatchers<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"Hello Tom!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">andDo</span><span class="token punctuation">(</span>MockMvcResultHandlers<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>测试结果打印：</p><pre class=" language-bash"><code class="language-bash">FlashMap:       Attributes <span class="token operator">=</span> nullMockHttpServletResponse:           Status <span class="token operator">=</span> 200    Error message <span class="token operator">=</span> null          Headers <span class="token operator">=</span> <span class="token punctuation">[</span>Content-Type:<span class="token string">"application/json;charset=UTF-8"</span>, Content-Length:<span class="token string">"10"</span><span class="token punctuation">]</span>     Content <span class="token function">type</span> <span class="token operator">=</span> application/json<span class="token punctuation">;</span>charset<span class="token operator">=</span>UTF-8             Body <span class="token operator">=</span> Hello Tom<span class="token operator">!</span>    Forwarded URL <span class="token operator">=</span> null   Redirected URL <span class="token operator">=</span> null          Cookies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>2019-04-02 21:34:27.954  INFO 6937 --- <span class="token punctuation">[</span>       Thread-2<span class="token punctuation">]</span> o.s.s.concurrent.ThreadPoolTaskExecutor  <span class="token keyword">:</span> Shutting down ExecutorService <span class="token string">'applicationTaskExecutor'</span></code></pre><p>整个过程如下：<br>1、准备测试环境<br>2、通过MockMvc执行请求<br>3、添加验证断言<br>4、添加结果处理器<br>5、得到MvcResult进行自定义断言/进行下一步的异步请求<br>6、卸载测试环境</p><p>注意事项：如果使用DefaultMockMvcBuilder进行MockMvc实例化时需在SpringBoot启动类上添加组件扫描的package的指定，否则会出现404。如：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">"com.secbro2"</span><span class="token punctuation">)</span></code></pre><h2 id="相关API"><a href="#相关API" class="headerlink" title="相关API"></a>相关API</h2><p>RequestBuilder提供了一个方法buildRequest(ServletContext servletContext)用于构建MockHttpServletRequest；其主要有两个子类MockHttpServletRequestBuilder和MockMultipartHttpServletRequestBuilder（如文件上传使用）。</p><p>MockMvcRequestBuilders提供get、post等多种方法用来实例化RequestBuilder。</p><p>ResultActions，MockMvc.perform(RequestBuilder requestBuilder)的返回值，提供三种能力：andExpect，添加断言判断结果是否达到预期；andDo，添加结果处理器，比如示例中的打印；andReturn，返回验证成功后的MvcResult，用于自定义验证/下一步的异步处理。</p><h2 id="一些常用的测试"><a href="#一些常用的测试" class="headerlink" title="一些常用的测试"></a>一些常用的测试</h2><p>1.测试普通控制器</p><pre class=" language-java"><code class="language-java">mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//执行请求  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attributeExists</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//验证存储模型数据  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"user/view"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//验证viewName  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">forwardedUrl</span><span class="token punctuation">(</span><span class="token string">"/WEB-INF/jsp/user/view.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//验证视图渲染时forward到的jsp  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//验证状态码  </span>            <span class="token punctuation">.</span><span class="token function">andDo</span><span class="token punctuation">(</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//输出MvcResult到控制台</span></code></pre><p>2.得到MvcResult自定义验证</p><pre class=" language-java"><code class="language-java">MvcResult result <span class="token operator">=</span> mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//执行请求  </span>        <span class="token punctuation">.</span><span class="token function">andReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//返回MvcResult  </span>Assert<span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">getModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//自定义断言 </span></code></pre><p>3.验证请求参数绑定到模型数据及Flash属性</p><pre><code>mockMvc.perform(post("/user").param("name", "zhang")) //执行传递参数的POST请求(也可以post("/user?name=zhang"))              .andExpect(handler().handlerType(UserController.class)) //验证执行的控制器类型              .andExpect(handler().methodName("create")) //验证执行的控制器方法名              .andExpect(model().hasNoErrors()) //验证页面没有错误              .andExpect(flash().attributeExists("success")) //验证存在flash属性              .andExpect(view().name("redirect:/user")); //验证视图  123456</code></pre><p>4.文件上传</p><pre class=" language-java"><code class="language-java"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">fileUpload</span><span class="token punctuation">(</span><span class="token string">"/user/{id}/icon"</span><span class="token punctuation">,</span> 1L<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"icon"</span><span class="token punctuation">,</span> bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//执行文件上传  </span>        <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">"icon"</span><span class="token punctuation">,</span> bytes<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//验证属性相等性  </span>        <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//验证视图 </span></code></pre><p>5.JSON请求/响应验证</p><pre class=" language-java"><code class="language-java">String requestBody <span class="token operator">=</span> <span class="token string">"{\"id\":1, \"name\":\"zhang\"}"</span><span class="token punctuation">;</span>      mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span>requestBody<span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//执行请求  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//验证响应contentType  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">jsonPath</span><span class="token punctuation">(</span><span class="token string">"$.id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//使用Json path验证JSON 请参考http://goessner.net/articles/JsonPath/  </span>    String errorBody <span class="token operator">=</span> <span class="token string">"{id:1, name:zhang}"</span><span class="token punctuation">;</span>      MvcResult result <span class="token operator">=</span> mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span>errorBody<span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//执行请求  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isBadRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//400错误请求  </span>            <span class="token punctuation">.</span><span class="token function">andReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      Assert<span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>HttpMessageNotReadableException<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">getResolvedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//错误的请求内容体</span></code></pre><p>6.异步测试</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//Callable  </span>    MvcResult result <span class="token operator">=</span> mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/async1?id=1&amp;name=zhang"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//执行请求  </span>            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asyncStarted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asyncResult</span><span class="token punctuation">(</span>CoreMatchers<span class="token punctuation">.</span><span class="token function">instanceOf</span><span class="token punctuation">(</span>User<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//默认会等10秒超时  </span>            <span class="token punctuation">.</span><span class="token function">andReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">asyncDispatch</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span>MediaType<span class="token punctuation">.</span>APPLICATION_JSON<span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">jsonPath</span><span class="token punctuation">(</span><span class="token string">"$.id"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  </code></pre><p>7.全局配置</p><pre class=" language-java"><code class="language-java">mockMvc <span class="token operator">=</span> <span class="token function">webAppContextSetup</span><span class="token punctuation">(</span>wac<span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">defaultRequest</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requestAttr</span><span class="token punctuation">(</span><span class="token string">"default"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//默认请求 如果其是Mergeable类型的，会自动合并的哦mockMvc.perform中的RequestBuilder  </span>            <span class="token punctuation">.</span><span class="token function">alwaysDo</span><span class="token punctuation">(</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//默认每次执行请求后都做的动作  </span>            <span class="token punctuation">.</span><span class="token function">alwaysExpect</span><span class="token punctuation">(</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attribute</span><span class="token punctuation">(</span><span class="token string">"default"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//默认每次执行后进行验证的断言  </span>            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/user/1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attributeExists</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot-AOP了解使用</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-aop-liao-jie-shi-yong/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-aop-liao-jie-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><h2 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h2><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200909152040578.png" alt="image-20200909152040578"></p><h2 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h2><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'org.springframework.boot:spring-boot-starter-aop:2.3.3.RELEASE'</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboot_aop<span class="token punctuation">.</span>service<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/9/9 * 修改时间：2020/9/9 */</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> String <span class="token function">getUserNameById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"getUserNameById"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"kujin"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUserById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"deleteUserById"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboot_aop<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboot_aop<span class="token punctuation">.</span>service<span class="token punctuation">.</span>UserService<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>GetMapping<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>RestController<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/9/9 * 修改时间：2020/9/9 */</span><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    UserService userService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getTest1"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">getUserNameById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">getUserNameById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getTest2"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUserById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">{</span>        userService<span class="token punctuation">.</span><span class="token function">deleteUserById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springboot_aop<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>JoinPoint<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>ProceedingJoinPoint<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>*<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Component<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：日志组件 * 编写人：kujin * 创建时间：2020/9/9 * 修改时间：2020/9/9 */</span><span class="token annotation punctuation">@Component</span> <span class="token comment" spellcheck="true">//组件注解</span><span class="token annotation punctuation">@Aspect</span> <span class="token comment" spellcheck="true">//aop 切面</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogComponent</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 定义拦截规则     * * 表示返回值任意     * com.example.springboot_aop.service.*.*(..) 指定包下的任意 类,方法,参数     */</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.springboot_aop.service.*.*(..))"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pc1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 前置通知     * pc1() 拦截规则     * @param jp     */</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pc1()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span>JoinPoint jp<span class="token punctuation">)</span><span class="token punctuation">{</span>        String name <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Before: "</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 后置通知     * @param jp     */</span>    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pc1()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span>JoinPoint jp<span class="token punctuation">)</span><span class="token punctuation">{</span>        String name <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"After: "</span><span class="token operator">+</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 返回通知     * @param jp 方法对象     * @param result 方法返回结果     */</span>    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pc1()"</span><span class="token punctuation">,</span>returning <span class="token operator">=</span> <span class="token string">"result"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span>JoinPoint jp<span class="token punctuation">,</span>Object result<span class="token punctuation">)</span><span class="token punctuation">{</span>        String name <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AfterReturning: "</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">" result: "</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 异常通知     * @param jp     * @param e 异常对象     */</span>    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"pc1()"</span><span class="token punctuation">,</span>throwing <span class="token operator">=</span> <span class="token string">"e"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterThrowing</span><span class="token punctuation">(</span>JoinPoint jp<span class="token punctuation">,</span>Exception e<span class="token punctuation">)</span><span class="token punctuation">{</span>        String name <span class="token operator">=</span> jp<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"AfterReturning: "</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">" e: "</span><span class="token operator">+</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 环绕通知     * @param pjp     * @return     */</span>    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"pc1()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Object <span class="token function">around</span><span class="token punctuation">(</span>ProceedingJoinPoint pjp<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//处理方法前</span>        String changes<span class="token operator">=</span><span class="token string">"处理方法"</span><span class="token punctuation">;</span>        Object proceed <span class="token operator">=</span> pjp<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//相当以invoke() 方法</span>        <span class="token comment" spellcheck="true">//处理方法后</span>        proceed<span class="token operator">+=</span>changes<span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"around: "</span><span class="token operator">+</span>proceed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> proceed<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot- 异常处理</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-yi-chang-chu-li/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-yi-chang-chu-li/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringMVC-中-ControllerAdvice-注解的三种使用场景"><a href="#SpringMVC-中-ControllerAdvice-注解的三种使用场景" class="headerlink" title="SpringMVC 中 @ControllerAdvice 注解的三种使用场景"></a>SpringMVC 中 @ControllerAdvice 注解的三种使用场景</h1><p>@ControllerAdvice ，很多初学者可能都没有听说过这个注解，实际上，这是一个非常有用的注解，顾名思义，这是一个增强的 Controller。使用这个 Controller ，可以实现三个方面的功能：</p><ol><li>全局异常处理</li><li>全局数据绑定</li><li>全局数据预处理</li></ol><p>灵活使用这三个功能，可以帮助我们简化很多工作，需要注意的是，这是 SpringMVC 提供的功能，在 Spring Boot 中可以直接使用，下面分别来看。</p><h1 id="全局异常处理"><a href="#全局异常处理" class="headerlink" title="全局异常处理"></a>全局异常处理</h1><p>使用 @ControllerAdvice 实现全局异常处理，只需要定义类，添加该注解即可定义方式如下：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGlobalExceptionHandler</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>Exception<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> ModelAndView <span class="token function">customException</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ModelAndView mv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mv<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        mv<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"myerror"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> mv<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>在该类中，可以定义多个方法，不同的方法处理不同的异常，例如专门处理空指针的方法、专门处理数组越界的方法…，也可以直接向上面代码一样，在一个方法中处理所有的异常信息。</p><p>@ExceptionHandler 注解用来指明异常的处理类型，即如果这里指定为 NullpointerException，则数组越界异常就不会进到这个方法中来。</p><h1 id="全局数据绑定"><a href="#全局数据绑定" class="headerlink" title="全局数据绑定"></a>全局数据绑定</h1><p>全局数据绑定功能可以用来做一些初始化的数据操作，我们可以将一些公共的数据定义在添加了 @ControllerAdvice 注解的类中，这样，在每一个 Controller 的接口中，就都能够访问导致这些数据。</p><p>使用步骤，首先定义全局数据，如下：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@ControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGlobalExceptionHandler</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"md"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Object<span class="token operator">></span> <span class="token function">mydata</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"gender"</span><span class="token punctuation">,</span> <span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> map<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>使用 @ModelAttribute 注解标记该方法的返回数据是一个全局数据，默认情况下，这个全局数据的 key 就是返回的变量名，value 就是方法返回值，当然开发者可以通过 @ModelAttribute 注解的 name 属性去重新指定 key。</p><p>定义完成后，在任何一个Controller 的接口中，都可以获取到这里定义的数据：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">hello</span><span class="token punctuation">(</span>Model model<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> model<span class="token punctuation">.</span><span class="token function">asMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"hello controller advice"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="全局数据预处理"><a href="#全局数据预处理" class="headerlink" title="全局数据预处理"></a>全局数据预处理</h1><p>考虑我有两个实体类，Book 和 Author，分别定义如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Long price<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//getter/setter</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> Integer age<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//getter/setter</span><span class="token punctuation">}</span></code></pre><p>此时，如果我定义一个数据添加接口，如下：</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Book book<span class="token punctuation">,</span> Author author<span class="token punctuation">)</span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>这个时候，添加操作就会有问题，因为两个实体类都有一个 name 属性，从前端传递时 ，无法区分。此时，通过 @ControllerAdvice 的全局数据预处理可以解决这个问题</p><p>解决步骤如下:</p><p>1.给接口中的变量取别名</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addBook</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span> Book book<span class="token punctuation">,</span> <span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span> Author author<span class="token punctuation">)</span> <span class="token punctuation">{</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>2.进行请求数据预处理<br>在 @ControllerAdvice 标记的类中添加如下代码:</p><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@InitBinder</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">b</span><span class="token punctuation">(</span>WebDataBinder binder<span class="token punctuation">)</span> <span class="token punctuation">{</span>    binder<span class="token punctuation">.</span><span class="token function">setFieldDefaultPrefix</span><span class="token punctuation">(</span><span class="token string">"b."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@InitBinder</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">a</span><span class="token punctuation">(</span>WebDataBinder binder<span class="token punctuation">)</span> <span class="token punctuation">{</span>    binder<span class="token punctuation">.</span><span class="token function">setFieldDefaultPrefix</span><span class="token punctuation">(</span><span class="token string">"a."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>@InitBinder(“b”) 注解表示该方法用来处理和Book和相关的参数,在方法中,给参数添加一个 b 前缀,即请求参数要有b前缀.</p><p>3.发送请求</p><p>请求发送时,通过给不同对象的参数添加不同的前缀,可以实现参数的区分.</p><p><img src="https://www.javaboy.org/images/boot/5-1.png" alt="img"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这就是松哥给大伙介绍的 @ControllerAdvice 的几个简单用法，这些点既可以在传统的 SSM 项目中使用，也可以在 Spring Boot + Spring Cloud 微服务中使用，</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot CORS跨域访问</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-cors-kua-yu-fang-wen/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/springboot-cors-kua-yu-fang-wen/</url>
      
        <content type="html"><![CDATA[<h2 id="春季框架中的-CORS-支持"><a href="#春季框架中的-CORS-支持" class="headerlink" title="春季框架中的 CORS 支持"></a><a href="https://spring.io/blog/2015/06/08/cors-support-in-spring-framework" target="_blank" rel="noopener">春季框架中的 CORS 支持</a></h2><p><a href="https://spring.io/understanding/CORS" target="_blank" rel="noopener">跨源资源共享</a>（CORS） 是一个<a href="https://www.w3.org/TR/cors/" target="_blank" rel="noopener">W3C 规范</a>实施者<a href="https://caniuse.com/#feat=cors" target="_blank" rel="noopener">大多数浏览器</a>允许您以灵活的方式指定授权哪些类跨域请求，而不是使用一些不太安全、功能不太强大的黑客，如 IFrame 或 JSONP</p><ul><li><h2 id="控制器方法-CORS-配置"><a href="#控制器方法-CORS-配置" class="headerlink" title="控制器方法 CORS 配置"></a>控制器方法 CORS 配置</h2></li><li><h2 id="也可以为整个控制器启用-CORS："><a href="#也可以为整个控制器启用-CORS：" class="headerlink" title="也可以为整个控制器启用 CORS："></a>也可以为整个控制器启用 CORS：</h2></li><li><h2 id="全局-CORS-配置"><a href="#全局-CORS-配置" class="headerlink" title="全局 CORS 配置"></a>全局 CORS 配置</h2></li></ul><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token comment" spellcheck="true">//为整个控制器配置</span><span class="token comment" spellcheck="true">//@CrossOrigin(origins = "http://localhost:8081")</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//为单个方法配置</span><span class="token comment" spellcheck="true">//    @CrossOrigin(origins = "http://localhost:8081")</span>    <span class="token keyword">public</span> String <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"跨域get"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> String <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"跨域put"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//全局配置</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span>CorsRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        registry                <span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//容许访问api</span>                <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8081"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//启用 CORS</span>                <span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//请求头</span>                <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//访求方式 默认 get post head</span>                <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//探测请求的有效时间</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-Json数据</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/spring-json-shu-ju/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/spring-json-shu-ju/</url>
      
        <content type="html"><![CDATA[<p>SpringBoot自带json依赖,在json数据转化中 HttpMessageConverter 起到关键作用</p><ol><li>MappingJackson2HttpMessageConverter</li><li>GsonHttpMessageConverterConfiguration</li><li>FastJsonHttpMessageConverter</li></ol><h1 id="jackson和Gson"><a href="#jackson和Gson" class="headerlink" title="jackson和Gson"></a>jackson和Gson</h1><p>gson需要自己导入依赖</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.google.code.gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>用ObjectMapper把json转换成实体对象</p><p>相关源码</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200831182702666.png" alt="image-20200831182702666"></p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//1. 自定义配置类</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//2. 编写Bean 实现器需要的的功能</span>    <span class="token comment" spellcheck="true">//org.springframework.boot.autoconfigure.http.JacksonHttpMessageConvertersConfiguration</span><span class="token comment" spellcheck="true">//    @Bean</span><span class="token comment" spellcheck="true">//    MappingJackson2HttpMessageConverter mappingJackson2CborHttpMessageConverter(){</span><span class="token comment" spellcheck="true">//        MappingJackson2HttpMessageConverter converter=new MappingJackson2HttpMessageConverter();</span><span class="token comment" spellcheck="true">//        ObjectMapper om=new ObjectMapper();</span><span class="token comment" spellcheck="true">//        //对日期进行格式化</span><span class="token comment" spellcheck="true">//        om.setDateFormat(new SimpleDateFormat("yyyy/MM/dd"));</span><span class="token comment" spellcheck="true">//        converter.setObjectMapper(om);</span><span class="token comment" spellcheck="true">//        return converter;</span><span class="token comment" spellcheck="true">//    }</span>    <span class="token comment" spellcheck="true">// 3.简化上方代码 auto</span>    <span class="token comment" spellcheck="true">// org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration</span>    <span class="token annotation punctuation">@Bean</span>    ObjectMapper <span class="token function">objectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ObjectMapper om<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//对日期进行格式化</span>        om<span class="token punctuation">.</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy/MM/dd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> om<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">package</span> com<span class="token punctuation">.</span>tutorial<span class="token punctuation">.</span>spring_json<span class="token punctuation">.</span>config<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span>Gson<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span>GsonBuilder<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Bean<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span>converter<span class="token punctuation">.</span>json<span class="token punctuation">.</span>GsonHttpMessageConverter<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/8/31 * 修改时间：2020/8/31 */</span><span class="token comment" spellcheck="true">//2. Gson自定义配置类</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfig</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//2. 编写Bean 实现器需要的的功能</span>    <span class="token comment" spellcheck="true">//org.springframework.boot.autoconfigure.http.JacksonHttpMessageConvertersConfiguration</span><span class="token comment" spellcheck="true">//    @Bean</span><span class="token comment" spellcheck="true">//    MappingJackson2HttpMessageConverter mappingJackson2CborHttpMessageConverter(){</span><span class="token comment" spellcheck="true">//        MappingJackson2HttpMessageConverter converter=new MappingJackson2HttpMessageConverter();</span><span class="token comment" spellcheck="true">//        ObjectMapper om=new ObjectMapper();</span><span class="token comment" spellcheck="true">//        //对日期进行格式化</span><span class="token comment" spellcheck="true">//        om.setDateFormat(new SimpleDateFormat("yyyy/MM/dd"));</span><span class="token comment" spellcheck="true">//        converter.setObjectMapper(om);</span><span class="token comment" spellcheck="true">//        return converter;</span><span class="token comment" spellcheck="true">//    }</span>    <span class="token comment" spellcheck="true">// 3.简化上方代码 auto</span>    <span class="token comment" spellcheck="true">// org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration</span><span class="token comment" spellcheck="true">//    @Bean</span><span class="token comment" spellcheck="true">//    ObjectMapper objectMapper(){</span><span class="token comment" spellcheck="true">//        ObjectMapper om=new ObjectMapper();</span><span class="token comment" spellcheck="true">//        //对日期进行格式化</span><span class="token comment" spellcheck="true">//        om.setDateFormat(new SimpleDateFormat("yyyy/MM/dd"));</span><span class="token comment" spellcheck="true">//        return om;</span><span class="token comment" spellcheck="true">//    }</span><span class="token comment" spellcheck="true">//    @Bean</span><span class="token comment" spellcheck="true">//    GsonHttpMessageConverter gsonHttpMessageConverter(){</span><span class="token comment" spellcheck="true">//        GsonHttpMessageConverter converter=new GsonHttpMessageConverter();</span><span class="token comment" spellcheck="true">//        converter.setGson(new GsonBuilder().setDateFormat("yyyy-MM-dd").create());</span><span class="token comment" spellcheck="true">//        return converter;</span><span class="token comment" spellcheck="true">//    }</span>    <span class="token annotation punctuation">@Bean</span>    Gson <span class="token function">gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GsonBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//@Controller</span>    <span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//@ResponseBody</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">getAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        List<span class="token operator">&lt;</span>User<span class="token operator">></span> uses<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            uses<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">"user"</span><span class="token operator">+</span>i<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> uses<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>tutorial<span class="token punctuation">.</span>spring_json<span class="token punctuation">.</span>bean<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>JsonFormat<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Date<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/8/31 * 修改时间：2020/8/31 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//@JsonFormat(pattern = "yyyy-MM-dd")</span>    <span class="token keyword">private</span> Date brithday<span class="token punctuation">;</span>    <span class="token keyword">public</span> Date <span class="token function">getBrithday</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> brithday<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBrithday</span><span class="token punctuation">(</span>Date brithday<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>brithday <span class="token operator">=</span> brithday<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> Date brithday<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>brithday <span class="token operator">=</span> brithday<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="fastjson"><a href="#fastjson" class="headerlink" title="fastjson"></a>fastjson</h1><p>github地址:<a href="https://github.com/alibaba/fastjson" target="_blank" rel="noopener">https://github.com/alibaba/fastjson</a> </p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.2.62<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Bean</span>FastJsonHttpMessageConverter <span class="token function">fastJsonHttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    FastJsonHttpMessageConverter converter<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FastJsonHttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    FastJsonConfig fastconfig<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FastJsonConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    fastconfig<span class="token punctuation">.</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    converter<span class="token punctuation">.</span><span class="token function">setFastJsonConfig</span><span class="token punctuation">(</span>fastconfig<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> converter<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-ActiveMQ</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/spring-activemq/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/spring-activemq/</url>
      
        <content type="html"><![CDATA[<h1 id="ActiveMQ"><a href="#ActiveMQ" class="headerlink" title="ActiveMQ"></a>ActiveMQ</h1><blockquote><p>Apache ActiveMQ™是最流行的开源、多协议、基于 Java 的消息传递服务器。它支持行业标准协议，使用户能够从各种语言和平台上获得客户选择的好处。提供来自 C、C++、Python、.Net 等的连接。使用无处不在的<strong>AMQP 协议集成您的多平台</strong>应用程序。使用通过 Web 袜子在 Web 上<strong>使用 STOMP</strong>在 Web 应用程序之间交换消息。使用<strong>MQTT</strong>管理 IoT 设备。支持您现有的<strong>JMS</strong>基础架构等。ActiveMQ 提供了支持任何消息传递用例的电源和灵活性。</p></blockquote><p>下载地址: <a href="http://activemq.apache.org/components/classic/download/" target="_blank" rel="noopener">http://activemq.apache.org/components/classic/download/</a></p><p>入门文档: <a href="http://activemq.apache.org/getting-started" target="_blank" rel="noopener">http://activemq.apache.org/getting-started</a></p><h2 id="Unix-的安装过程"><a href="#Unix-的安装过程" class="headerlink" title="Unix 的安装过程"></a>Unix 的安装过程</h2><h3 id="前期要求安装jdk"><a href="#前期要求安装jdk" class="headerlink" title="前期要求安装jdk"></a>前期要求安装jdk</h3><h4 id="Unix-二进制安装"><a href="#Unix-二进制安装" class="headerlink" title="Unix 二进制安装"></a>Unix 二进制安装</h4><p>此过程说明如何在 Unix 系统下载和安装二进制分发。<br><strong>注意</strong>：有几种其他方法来执行这种类型的安装。</p><ol><li><p>使用浏览器或工具（例如 wget、scp、ftp 等）将 activemq 压缩的 tarball 文件下载到 Unix 计算机，例如：（<br>请参阅<a href="http://activemq.apache.org/download" target="_blank" rel="noopener">下载</a>-&gt;”最新稳定版本”）</p><pre><code>wget http://activemq.apache.org/path/tofile/apache-activemq-x.x.x-bin.tar.gz</code></pre></li><li><p>将文件从压缩的 tarball 中提取到您选择的目录中。例如：</p><pre><code>cd [activemq_install_dir]tar zxvf activemq-x.x.x-bin.tar.gz</code></pre></li><li><p>activemq 默认只能当前服务器访问，如果需要外部访问，需要修改jetty.xml文件</p><pre class=" language-xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jettyPort<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.apache.activemq.web.WebConsolePort<span class="token punctuation">"</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>start<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token comment" spellcheck="true">&lt;!-- the default port number for the web console --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>host<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>192.168.213.133<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  // 将 127.0.0.1 修改为外网IP即可访问,或者 0.0.0.0        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>port<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8161<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre></li><li><p>开放端口</p><pre class=" language-bash"><code class="language-bash">firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span>8161/tcp --permanent  <span class="token comment" spellcheck="true"># 开放8161端口</span>firewall-cmd --reload  <span class="token comment" spellcheck="true"># 配置立即生效</span></code></pre></li><li><p>启动</p><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /root/apache-activemq-5.16.0/bin/./activemq start</code></pre></li></ol><h2 id="创建项目测试"><a href="#创建项目测试" class="headerlink" title="创建项目测试"></a>创建项目测试</h2><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200807151255534.png" alt="image-20200807151255534"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring boot之 DevTools 热部署，修改代码立刻见效，快速重启</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/spring-boot-zhi-devtools-re-bu-shu-xiu-gai-dai-ma-li-ke-jian-xiao-kuai-su-chong-qi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-web/spring-boot-zhi-devtools-re-bu-shu-xiu-gai-dai-ma-li-ke-jian-xiao-kuai-su-chong-qi/</url>
      
        <content type="html"><![CDATA[<h3 id="IDEA新建sping-boot选择-DevTools"><a href="#IDEA新建sping-boot选择-DevTools" class="headerlink" title="IDEA新建sping boot选择 DevTools"></a>IDEA新建sping boot选择 DevTools</h3><p><strong><em>\</em>spring-boot-devtools 模块能够实现热部署，添加类  添加方法  修改配置文件  修改页面等 都能实现热部署<br>   原理就是重启项目，但比手动重启快多了，其深层原理是使用了两个ClassLoader，一个Classloader加载那些不会改变的类（第三方Jar包），另一个ClassLoader加载会更改的类，称为  restart ClassLoader,这样在有代码更改的时候，原来的restart ClassLoader 被丢弃，重新创建一个restart ClassLoader，由于需要加载的类相比较少，所以实现了较快的重启时间（5秒以内）**</strong></p><p>第一步 引入jar+插件<dependency>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <groupid>org.springframework.boot</groupid>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <artifactid>spring-boot-devtools</artifactid>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <optional>true</optional>&nbsp; &nbsp; 不能被其它模块继承，如果多个子模块可以去掉&nbsp; 不必须&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<scope>runtime</scope>&nbsp; &nbsp; &nbsp;只在运行时起作用&nbsp; 打包时不打进去</dependency>&nbsp;&nbsp; &nbsp;添加spring-boot-maven-plugin：<build>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<plugins>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;<plugin>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<groupid>org.springframework.boot</groupid>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<artifactid>spring-boot-maven-plugin</artifactid>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<configuration>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<!--fork :  如果没有该项配置，肯呢个devtools不会起作用，即应用不会restart   这个要手动加进去 -->&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<fork>true</fork>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</configuration>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</plugin>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;</plugins>&nbsp; &nbsp;</build></p><p><strong>第二部 启动项目即可</strong></p><p><strong>1. devtools会监听classpath下的文件变动，并且会立即重启应用（发生在保存时机），注意：因为其采用的虚拟机机制，该项重启是很快的。<br>\2. devtools可以实现页面热部署（即页面修改后会立即生效，这个可以直接在application.properties文件中配置spring.thymeleaf.cache=false来实现(这里注意不同的模板配置不一样)</strong></p><h3 id="如果使用idea，必须确保开启运行时编译才行"><a href="#如果使用idea，必须确保开启运行时编译才行" class="headerlink" title="如果使用idea，必须确保开启运行时编译才行"></a>如果使用idea，必须确保开启运行时编译才行</h3><p>1，设置File -&gt;Setting -&gt;Compile： 勾选“Make project automatically”选项</p><p><img src="https://img-blog.csdn.net/20170628101259378?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZGlhb21lbmcxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p><p>使用快捷键ctrl+alt+shift+/，选择选项Registry，打开下面的界面 并找到图中红框的选项”compller.automake.allow.when.app.running”并勾选</p><p><img src="https://img-blog.csdn.net/20170628101839728?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZGlhb21lbmcxMQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="img"></p><p>3、重启idea即可</p><p>idea新建一个spring-boot工程，勾选DevTools即可，pom就会引入相应jar ，该jar默认是runtime 也就是只在运行时使用，打包时不打进去</p><p><img src="https://img-blog.csdn.net/2018092111365621?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI3ODg2OTk3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><h2 id="devtools-原理说明"><a href="#devtools-原理说明" class="headerlink" title="devtools 原理说明"></a>devtools 原理说明</h2><p>Spring Boot 包括一组额外的工具，可以使应用程序开发体验更加愉快。 spring-boot-devtools 模块可以包含在任何项目中，它可以节省大量的时间。 想要使用devtools支持，只需将模块依赖关系添加到你的构建中：</p><p><strong>Maven:</strong></p><pre><code>&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;        &lt;optional&gt;true&lt;/optional&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;</code></pre><p><strong>Gradle:</strong></p><pre><code>dependencies {    compile("org.springframework.boot:spring-boot-devtools")}</code></pre><p>运行打包的应用程序时，开发人员工具会自动禁用。如果你通过 Java -jar 或者其他特殊的类加载器进行启动时，都会被认为是“生产环境的应用”。</p><p>将依赖标记为 optional 可选是一种最佳做法，可以防止将devtools依赖传递到其他模块中。Gradle 不支持开箱即用的optional依赖项，你可以参考propdeps-plugin。</p><h2 id="属性默认设置"><a href="#属性默认设置" class="headerlink" title="属性默认设置"></a>属性默认设置</h2><p>Spring Boot 支持的一些库中会使用缓存来提高性能。例如模版引擎将缓存编译后的模板，以避免重复解析模板文件。 此外，Spring MVC可以在服务静态资源时向响应中添加HTTP缓存头。</p><p>虽然缓存在生产中非常有益，但它在开发过程中可能会产生反效果，它会阻止你看到刚刚在应用程序中进行的更改。 因此，spring-boot-devtools 将默认禁用这些缓存选项。</p><p>缓存选项通常在application.properties 文件中配置。例如，Thymeleaf提供了spring.thymeleaf.cache属性。spring-boot-devtools 模块不需要手动设置这些属性，而是自动应用合理的开发时配置。</p><h2 id="自动重启"><a href="#自动重启" class="headerlink" title="自动重启"></a>自动重启</h2><p>spring-boot-devtools会在类路径上的文件发生更改时自动重启。 这在IDE中工作时可能是一个有用的功能，因为它为代码更改提供了非常快的反馈循环。 默认情况下会监视类路径上的所有变动，但请注意，某些资源（如静态资源和视图模板）不需要重启应用程序。</p><pre><code>触发重启当DevTools监视类路径资源时，触发重启的唯一方法是更新类路径。 导致类路径更新的方式取决于你正在使用的IDE。在Eclipse中，保存修改的文件将导致类路径被更新并触发重启。 在IntelliJ IDEA中，构建项目（ Build -&gt; Make Project ）将具有相同的效果。重新启动和重新加载Spring Boot提供的重新启动技术使用了两个类加载器。 不改变的类（例如，来自第三方jar的）被加载到 base 类加载器中。 你正在开发的类被加载到 restart 类加载器中。 当应用程序重启时， restart加载器将被丢弃，并创建一个新的类加载器。 这种方法意味着应用程序重启通常比“冷启动”快得多，因为 base 加载器已经已加载并且可用。</code></pre><p><strong>1. 排除资源</strong></p><p>某些资源在更改时不一定需要触发重启。 例如，可以直接编辑Thymeleaf模板。 默认情况下，更改/META-INF/maven ， /META-INF/resources ， /resources ， /static ， /public或/templates中的资源不会触发重启，但会触发实时重新加载。 如果要自定义这些排除项，可以使用spring.devtools.restart.exclude属性。 例如，要仅排除/static和/public你将设置以下内容：</p><pre><code>spring.devtools.restart.exclude = static / **，public / ** </code></pre><p>如果你想保留上面的默认（情况下的）值并添加其他的排除项，你可以使用</p><p>spring.devtools.restart.additional-exclude 属性。</p><p><strong>2. 监控额外的路径</strong></p><p>当你对不在类路径中的文件进行更改时，可能需要重启或重新加载应用程序。为此，请使用spring.devtools.restart.additional-paths 属性来配置监视其他路径的更改。你可以使用上述的 spring.devtools.restart.exclude 属性来控制附加路径下的更改是否会触发完全重启或只是实时重新加载 。</p><p><strong>3. 禁用重启</strong></p><p>如果不想使用重启功能，可以使用spring.devtools.restart.enabled属性来禁用它。 在大多数情况下，你可以在application.properties中设置此项（这仍将初始化重启类加载器，但不会监视文件更改）。</p><p>例如，如果你需要完全禁用重启支持，因为它不适用于特定库，则需要在调用SpringApplication.run(…)之前设置System属性。 例如：</p><pre><code>public static void main(String[] args) {    System.setProperty("spring.devtools.restart.enabled", "false");    SpringApplication.run(MyApp.class, args);} </code></pre><p><strong>4. 使用触发文件</strong></p><p>如果你使用自动编译已更改文件的IDE，则可能希望仅在特定时间触发重启。 为此，你可以使用“触发文件”，这是一个特殊文件，当你要实际触发重启检查时，必须修改它。 更改文件只会触发检查，只有在Devtools检测到它必须执行某些操作时才会重启。 触发文件可以手动更新，也可以通过IDE插件更新。</p><p>要使用触发器文件，请使用spring.devtools.restart.trigger-file属性。</p><p>如果你希望将spring.devtools.restart.trigger-file设置为全局配置，可以参考下面第四小节。</p><p><strong>5. 自定义重启类加载器</strong></p><p>如上面重新启动和重新加载部分所述，重启功能是通过使用两个类加载器实现的。 对于大多数应用程序，此方法运行良好，但有时可能会导致类加载问题。</p><p>默认情况下，IDE中的任何打开的项目都会使用“restart”类加载器加载，任何常规.jar文件将使用“base”类加载器加载。 如果你在多模块项目上工作，但不是每个模块都导入到IDE中，则可能需要自定义配置。 为此，你可以创建一个META-INF/spring-devtools.properties文件。</p><p>spring-devtools.properties文件可以包含restart.exclude. 和restart.include. 前缀的属性。 include元素是应该被放入“restart”类加载器的项目， exclude元素是应该放入“base”类加载器的项目。 属性的值是应用于类路径下的正则表达式。</p><p>例如：</p><pre><code>restart.exclude.companycommonlibs=/mycorp-common-[\\w-]+\.jarrestart.include.projectcommon=/mycorp-myproj-[\\w-]+\.jar</code></pre><p>针对通用Mapper，可以做如下配置：</p><pre><code>restart.include.mapper=/mapper-[\\w-\\.]+jar</code></pre><p>所有属性的键值（名字，companycommonlibs 部分）必须是唯一的，只有 restart.exclude. 和 restart.include. 开头的属性有效。</p><p>所有类路径下面的 META-INF/spring-devtools.properties 配置文件都会生效，所以你可以把该配置打包到每个模块中。</p><p>注：新版本的Mapper(3.4.1+)会默认增加该配置。</p><p><strong>6. 已知限制</strong></p><p>重启功能对使用标准ObjectInputStream对象序列化的对象不是很好 。如果需要反序列化数据，可能需要使用Spring的ConfigurableObjectInputStream配合Thread.currentThread().getContextClassLoader() 使用。</p><p>不幸的是，一些第三方库都不考虑在使用上下文类加载器的情况下反序列化。 如果你发现这样的问题，你需要向原作者请求修复。</p><h2 id="实时加载"><a href="#实时加载" class="headerlink" title="实时加载"></a>实时加载</h2><p>spring-boot-devtools模块包含嵌入式LiveReload服务器，可以在资源更改时用于触发浏览器刷新。 LiveReload浏览器扩展程序支持Chrome，Firefox和Safari，你可以从livereload.com免费下载。</p><p>如果你不想在应用程序运行时启动LiveReload服务器，则可以将spring.devtools.livereload.enabled属性设置为false 。</p><p>同一时间只能运行一个LiveReload服务器。 开始应用程序之前，请确保没有其他LiveReload服务器正在运行。如果从IDE启动多个应用程序，则只有第一个应用程序将支持LiveReload。</p><h2 id="全局设置"><a href="#全局设置" class="headerlink" title="全局设置"></a>全局设置</h2><p>你可以通过向$HOME文件夹添加名为.spring-boot-devtools.properties的文件来配置全局devtools设置（请注意，文件名以“.”开头）。 添加到此文件的任何属性将适用于你的计算机上使用devtools的所有 Spring Boot应用程序。 例如，要配置重启始终使用触发器文件 ，你可以添加以下内容：</p><pre><code>〜/ .spring-boot-devtools.properties</code></pre><ul><li></li></ul><pre><code>spring.devtools.reload.trigger-file=.reloadtrigger</code></pre><ul><li>1参考：<a href="http://blog.csdn.net/isea533/article/details/70495714" target="_blank" rel="noopener">http://blog.csdn.net/isea533/article/details/70495714</a></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小试牛刀</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-vue/xiao-shi-niu-dao/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-zheng-he-vue/xiao-shi-niu-dao/</url>
      
        <content type="html"><![CDATA[<h1 id="SrpingBoot-Vue-体验"><a href="#SrpingBoot-Vue-体验" class="headerlink" title="SrpingBoot  Vue 体验"></a>SrpingBoot  Vue 体验</h1><h2 id="相关依赖"><a href="#相关依赖" class="headerlink" title="相关依赖"></a>相关依赖</h2><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'org.springframework.boot:spring-boot-starter-data-jpa'</span>implementation <span class="token string">'org.springframework.boot:spring-boot-starter-web'</span>compileOnly <span class="token string">'org.projectlombok:lombok'</span>developmentOnly <span class="token string">'org.springframework.boot:spring-boot-devtools'</span>runtimeOnly <span class="token string">'mysql:mysql-connector-java'</span>annotationProcessor <span class="token string">'org.projectlombok:lombok'</span><span class="token function">testImplementation</span><span class="token punctuation">(</span><span class="token string">'org.springframework.boot:spring-boot-starter-test'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    exclude group<span class="token punctuation">:</span> <span class="token string">'org.junit.vintage'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">'junit-vintage-engine'</span><span class="token punctuation">}</span>implementation <span class="token string">'io.springfox:springfox-swagger2:3.0.0'</span>implementation <span class="token string">'io.springfox:springfox-swagger-ui:3.0.0'</span></code></pre><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><h2 id="具体配置代码"><a href="#具体配置代码" class="headerlink" title="具体配置代码"></a>具体配置代码</h2><h3 id="application-properties配置"><a href="#application-properties配置" class="headerlink" title="application.properties配置"></a>application.properties配置</h3><pre class=" language-xml"><code class="language-xml">#端口server.port=8888#连接数据库的配置spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driverspring.datasource.password=rootspring.datasource.username=rootspring.datasource.url=jdbc:mysql://localhost:3306/test?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=GMT%2B8 #SpringData JPA的配置spring.jpa.hibernate.ddl-auto=updatespring.jpa.database-platform=org.hibernate.dialect.MySQL5Dialect</code></pre><h3 id="实体类User-java"><a href="#实体类User-java" class="headerlink" title="实体类User.java"></a>实体类User.java</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> GenerationType<span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span>    <span class="token keyword">private</span> Integer id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>length <span class="token operator">=</span> <span class="token number">55</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String avatarURL<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="接口UserMapper-java继承JpaRepository"><a href="#接口UserMapper-java继承JpaRepository" class="headerlink" title="接口UserMapper.java继承JpaRepository"></a>接口UserMapper.java继承JpaRepository</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token operator">&lt;</span>User<span class="token punctuation">,</span>Integer<span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h3 id="UserController-java"><a href="#UserController-java" class="headerlink" title="UserController.java"></a>UserController.java</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/api"</span><span class="token punctuation">,</span>produces <span class="token operator">=</span> APPLICATION_JSON_VALUE<span class="token punctuation">)</span><span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">"用户管理"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> UserMapper userMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"用户列表"</span><span class="token punctuation">,</span>notes <span class="token operator">=</span> <span class="token string">"查寻所有已注册过的用户信息"</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"getAll"</span><span class="token punctuation">,</span>method <span class="token operator">=</span> RequestMethod<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> userMapper<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="SwaggerConfig-java"><a href="#SwaggerConfig-java" class="headerlink" title="SwaggerConfig.java"></a>SwaggerConfig.java</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> Docket <span class="token function">createRestApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span>DocumentationType<span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span>RequestHandlerSelectors<span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">"cn.niit.controller"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span>PathSelectors<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> ApiInfo <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">"Spring Boot中使用Swagger2实现前后端分离开发"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">"此项目只是练习如何实现前后端分离开发的小Demo"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">termsOfServiceUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.jianshu.com/u/2f60beddf923"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token string">"WEN"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">"1.0"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="WebConfig-java是实现跨域的配置，务必记得"><a href="#WebConfig-java是实现跨域的配置，务必记得" class="headerlink" title="WebConfig.java是实现跨域的配置，务必记得"></a>WebConfig.java是实现跨域的配置，务必记得</h3><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">class</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//跨域配置</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> WebMvcConfigurer <span class="token function">corsConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token comment" spellcheck="true">//重写父类提供的跨域请求处理的接口</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span>CorsRegistry registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//添加映射路径</span>                registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">//放行哪些原始域</span>                        <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">//是否发送Cookie信息</span>                        <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">//放行哪些原始域(请求方式)</span>                        <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token string">"PUT"</span><span class="token punctuation">,</span> <span class="token string">"DELETE"</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">//放行哪些原始域(头部信息)</span>                        <span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span>                        <span class="token comment" spellcheck="true">//暴露哪些头部信息（因为跨域访问默认不能获取全部头部信息）</span>                        <span class="token punctuation">.</span><span class="token function">exposedHeaders</span><span class="token punctuation">(</span><span class="token string">"Header1"</span><span class="token punctuation">,</span> <span class="token string">"Header2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="查看接口文档"><a href="#查看接口文档" class="headerlink" title="查看接口文档"></a>查看接口文档</h3><p>点击localhost:8888/swagger-ui.html查看生成的接口文档，测试一下</p><p><img src="https://user-gold-cdn.xitu.io/2019/5/4/16a835dac2b67fe3?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p><p>返回数据没有问题，接着可以根据文档开发前端代码了</p><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><h3 id="使用HBuilderX创建test页面"><a href="#使用HBuilderX创建test页面" class="headerlink" title="使用HBuilderX创建test页面"></a>使用HBuilderX创建test页面</h3><pre class=" language-xml"><code class="language-xml"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Vue.js-访问API接口数据-蓝墨云班课练习<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1, maximum-scale<span class="token punctuation">=</span>1,user-scalable<span class="token punctuation">=</span>no<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ie<span class="token punctuation">=</span>edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- 通过CDN引入Vue.js --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/vue/dist/vue.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- 通过CDN引入axios --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">            <span class="token selector"><span class="token class">.container</span></span><span class="token punctuation">{</span>                <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>                <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token selector"><span class="token class">.card</span></span><span class="token punctuation">{</span>                <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>                <span class="token property">margin-bottom</span><span class="token punctuation">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token selector"><span class="token class">.cover</span></span><span class="token punctuation">{</span>                <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token selector"><span class="token class">.cover</span> img</span><span class="token punctuation">{</span>                <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>                <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>{{users.length}}个人在线<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user in users<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cover<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>img/<span class="token punctuation">'</span>+user.avatarURL<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>{{user.id}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>{{user.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">            <span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>                data<span class="token punctuation">:</span> <span class="token punctuation">{</span>                    users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                created<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>                    axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8888/api/getAll'</span><span class="token punctuation">)</span>                        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            _this<span class="token punctuation">.</span>users <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>                        <span class="token punctuation">}</span><span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot Security</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-an-quan-quan-xian/springboot-security/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/springboot-an-quan-quan-xian/springboot-security/</url>
      
        <content type="html"><![CDATA[<h2 id="初始Security"><a href="#初始Security" class="headerlink" title="初始Security"></a>初始Security</h2><h2 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span></code></pre><p>效果</p><p>自动生成密码</p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200915091318303.png" alt="image-20200915091318303"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200915091213318.png" alt="image-20200915091213318"></p><h2 id="手动设置密码"><a href="#手动设置密码" class="headerlink" title="手动设置密码"></a>手动设置密码</h2><blockquote><p>配置appliacton.properties</p></blockquote><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">spring.security.user.name</span><span class="token punctuation">=</span><span class="token attr-value">kujin</span><span class="token attr-name">spring.security.user.password</span><span class="token punctuation">=</span><span class="token attr-value">123</span><span class="token attr-name">spring.security.user.roles</span><span class="token punctuation">=</span><span class="token attr-value">admin</span></code></pre><blockquote><p>代码配置(会覆盖文件配置)</p></blockquote><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>security01<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Bean<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>builders<span class="token punctuation">.</span>AuthenticationManagerBuilder<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>builders<span class="token punctuation">.</span>HttpSecurity<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>WebSecurityConfigurerAdapter<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>password<span class="token punctuation">.</span>NoOpPasswordEncoder<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>password<span class="token punctuation">.</span>PasswordEncoder<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：权限访问配置类 * 编写人：kujin * 创建时间：2020/9/15 * 修改时间：2020/9/15 */</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//spring 要求密码需要进行加密</span>    <span class="token annotation punctuation">@Bean</span>    PasswordEncoder <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> NoOpPasswordEncoder<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>AuthenticationManagerBuilder auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/**         * 配置用户         */</span>        auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//添加 用户名 密码 角色</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * 配置拦截规则     * @param http     * @throws Exception     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//开启配置</span>        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//配置路径规则 角色访问设置</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/user/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasAnyRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span><span class="token string">"user"</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//其他请求路径 登录即可访问</span>                <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 配置表单登录</span>                <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//处理登录请求的地址</span>                <span class="token punctuation">.</span><span class="token function">loginProcessingUrl</span><span class="token punctuation">(</span><span class="token string">"/doLogin"</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//登录接口 直接访问</span>                <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//用于postman 关闭csrf 攻击策略</span>                <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="登录表单的详细配置"><a href="#登录表单的详细配置" class="headerlink" title="登录表单的详细配置"></a>登录表单的详细配置</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 配置表单登录</span><span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//处理登录请求的地址</span><span class="token punctuation">.</span><span class="token function">loginProcessingUrl</span><span class="token punctuation">(</span><span class="token string">"/doLogin"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//配置登录界面</span><span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//自定义 参数名</span><span class="token punctuation">.</span><span class="token function">usernameParameter</span><span class="token punctuation">(</span><span class="token string">"u"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordParameter</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//登录成功处理器</span><span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AuthenticationSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationSuccess</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">,</span> Authentication authentication<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        PrintWriter writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span>authentication<span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//登录失败处理器</span><span class="token punctuation">.</span><span class="token function">failureHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AuthenticationFailureHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationFailure</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">,</span> AuthenticationException e<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        PrintWriter writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">LockedException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"账户被锁定,登录失败!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">BadCredentialsException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"用户名或密码错误,登陆错误!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">DisabledException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"账户被禁用,登陆错误!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">AccountExpiredException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"账户过期,登陆错误!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">CredentialsExpiredException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"密码过期,登陆错误!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"登陆错误!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//登录接口 直接访问</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="配置注销登录"><a href="#配置注销登录" class="headerlink" title="配置注销登录"></a>配置注销登录</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//配置注销登录</span><span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//注销请求地址</span><span class="token punctuation">.</span><span class="token function">logoutUrl</span><span class="token punctuation">(</span><span class="token string">"/logout"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//注销处理器</span><span class="token punctuation">.</span><span class="token function">logoutSuccessHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LogoutSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onLogoutSuccess</span><span class="token punctuation">(</span>HttpServletRequest req<span class="token punctuation">,</span> HttpServletResponse resp<span class="token punctuation">,</span> Authentication authentication<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ServletException <span class="token punctuation">{</span>        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        PrintWriter writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span><span class="token string">"注销登录成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        writer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="多个HttpSecurityConfig配置"><a href="#多个HttpSecurityConfig配置" class="headerlink" title="多个HttpSecurityConfig配置"></a>多个HttpSecurityConfig配置</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>security01<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>ObjectMapper<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Autowired<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Bean<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Order<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>*<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>builders<span class="token punctuation">.</span>AuthenticationManagerBuilder<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>builders<span class="token punctuation">.</span>HttpSecurity<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>web<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>WebSecurityConfigurerAdapter<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>Authentication<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>core<span class="token punctuation">.</span>AuthenticationException<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>password<span class="token punctuation">.</span>NoOpPasswordEncoder<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>password<span class="token punctuation">.</span>PasswordEncoder<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>AuthenticationFailureHandler<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>AuthenticationSuccessHandler<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>web<span class="token punctuation">.</span>authentication<span class="token punctuation">.</span>logout<span class="token punctuation">.</span>LogoutSuccessHandler<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>ServletException<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletRequest<span class="token punctuation">;</span><span class="token keyword">import</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span>HttpServletResponse<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>PrintWriter<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>HashMap<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：多个HttpSecurityConfig配置类 * 编写人：kujin * 创建时间：2020/9/15 * 修改时间：2020/9/15 */</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultHttpSecurityConfig</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//spring 要求密码需要进行加密</span>    <span class="token annotation punctuation">@Bean</span>    PasswordEncoder <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> NoOpPasswordEncoder<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>AuthenticationManagerBuilder auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/**         * 配置用户         */</span>        auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//添加 用户名 密码 角色</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Configuration</span>    <span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">AdminSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span><span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>            http<span class="token punctuation">.</span><span class="token function">antMatcher</span><span class="token punctuation">(</span><span class="token string">"/admin/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasAnyRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Configuration</span>    <span class="token annotation punctuation">@Order</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">OrtherSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span><span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>            http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">loginProcessingUrl</span><span class="token punctuation">(</span><span class="token string">"/doLogin"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="密码加密"><a href="#密码加密" class="headerlink" title="密码加密"></a>密码加密</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   BCryptPasswordEncoder passwordEncoder<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>passwordEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/*$2a$10$jp/4YuY1fiXQ8tVuAWWikOWwyLt6ABSQBRFwy6Tkqw/PeS1PHPDfy$2a$10$YQqxmQzMVW0GDmozSZAsx.yOQ/XFri1lehqBuO5Rj9GmCF4KAOll.$2a$10$gk.PlosNV9xkjgI.ECn2pem8cswgHuJ42XBfbtIFHjjvlMIvE1q3i$2a$10$6H8FEaDjcDhi4ZtKHL5OM.WHVPEJl76Ut4xMrEx6DeSe6BjltLREG$2a$10$xLEdIH3jh2fmDtxphDC2Z.m2rm9BN9Bu5NxBVrsrJ0ScRzf582RIm$2a$10$bg8wmZAk9zhW0BnAidRT8.iVED8QCrgP2bJqaqR2Umjr5HAPDAnfa$2a$10$Wa91Rqat3XVUJ8amOZVQke4WCEaMYM8RxXEdzVaz1T7sATaLr1B52$2a$10$GfrMxg..frzhgL9HQ.32S.Sj9GXxO5NzmPv7nPtfCOkLt0IEYoE8u$2a$10$RJoUFvZBkMNAYuNw9F1AvuHVD9eSm5/5bV4zGIzHk8Oidxyd8R7AS$2a$10$oa0Xosd0iOSryYuYIA30k.vZnTk5qU8IU.vkatlTi3s9cQ5x4pRW.*/</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//spring 要求密码需要进行加密</span><span class="token annotation punctuation">@Bean</span>PasswordEncoder <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Autowired</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>AuthenticationManagerBuilder auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 配置用户     */</span>    auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//添加 用户名 密码 角色</span>            <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"$2a$10$eYAzedrkUkrbV87HYw6UP.oHNKChAhjBhmbopgYQuq31dLXIrAoNa"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"$2a$10$ZIvQMsCmGgUHubOOESi2IOGr1xZSe06f9NmryNcNbaXDMNbpOgo8S"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>扩展知识-CSRF攻防知识</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/kuo-zhan-zhi-shi-csrf-gong-fang-zhi-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/springboot-xue-xi/kuo-zhan-zhi-shi-csrf-gong-fang-zhi-shi/</url>
      
        <content type="html"><![CDATA[<p> <strong>CSRF概念：</strong>CSRF跨站点请求伪造(Cross—Site Request Forgery)，跟XSS攻击一样，存在巨大的危害性，你可以这样来理解：<br>    攻击者盗用了你的身份，以你的名义发送恶意请求，对服务器来说这个请求是完全合法的，但是却完成了攻击者所期望的一个操作，比如以你的名义发送邮件、发消息，盗取你的账号，添加系统管理员，甚至于购买商品、虚拟货币转账等。 如下：其中Web A为存在CSRF漏洞的网站，Web B为攻击者构建的恶意网站，User C为Web A网站的合法用户。<br> <img src="http://www.phpddt.com/usr/uploads/2013/08/323678727.jpg" alt="CSRF攻击介绍及防御"></p><p>**<br>**</p><p>​    <strong>CSRF攻击攻击原理及过程如下：</strong></p><p>​    \1. 用户C打开浏览器，访问受信任网站A，输入用户名和密码请求登录网站A；</p><p>​    2.在用户信息通过验证后，网站A产生Cookie信息并返回给浏览器，此时用户登录网站A成功，可以正常发送请求到网站A；</p><p>​    \3. 用户未退出网站A之前，在同一浏览器中，打开一个TAB页访问网站B；</p><p>​    \4. 网站B接收到用户请求后，返回一些攻击性代码，并发出一个请求要求访问第三方站点A；</p><pre><code>\5. 浏览器在接收到这些攻击性代码后，根据网站B的请求，在用户不知情的情况下携带Cookie信息，向网站A发出请求。网站A并不知道该请求其实是由B发起的，所以会根据用户C的Cookie信息以C的权限处理该请求，导致来自网站B的恶意代码被执行。 </code></pre><p>​    <strong>CSRF攻击实例<img src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/proud.gif" alt="得意"><img src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/proud.gif" alt="得意"><img src="http://static.blog.csdn.net/xheditor/xheditor_emot/default/proud.gif" alt="得意"></strong></p><p>**<br>**    受害者 Bob 在银行有一笔存款，通过对银行的网站发送请求 <a href="http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=bob2" target="_blank" rel="noopener">http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=bob2</a> 可以使 Bob 把 1000000 的存款转到 bob2 的账号下。通常情况下，该请求发送到网站后，服务器会先验证该请求是否来自一个合法的 session，并且该 session 的用户 Bob 已经成功登陆。</p><p>​    黑客 Mallory 自己在该银行也有账户，他知道上文中的 URL 可以把钱进行转帐操作。Mallory 可以自己发送一个请求给银行：<a href="http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory%E3%80%82%E4%BD%86%E6%98%AF%E8%BF%99%E4%B8%AA%E8%AF%B7%E6%B1%82%E6%9D%A5%E8%87%AA" target="_blank" rel="noopener">http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory。但是这个请求来自</a> Mallory 而非 Bob，他不能通过安全认证，因此该请求不会起作用。</p><p>​    这时，Mallory 想到使用 CSRF 的攻击方式，他先自己做一个网站，在网站中放入如下代码： src=”<a href="http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory" target="_blank" rel="noopener">http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory</a> ”，并且通过广告等诱使 Bob 来访问他的网站。当 Bob 访问该网站时，上述 url 就会从 Bob 的浏览器发向银行，而这个请求会附带 Bob 浏览器中的 cookie 一起发向银行服务器。大多数情况下，该请求会失败，因为他要求 Bob 的认证信息。但是，如果 Bob 当时恰巧刚访问他的银行后不久，他的浏览器与银行网站之间的 session 尚未过期，浏览器的 cookie 之中含有 Bob 的认证信息。这时，悲剧发生了，这个 url 请求就会得到响应，钱将从 Bob 的账号转移到 Mallory 的账号，而 Bob 当时毫不知情。等以后 Bob 发现账户钱少了，即使他去银行查询日志，他也只能发现确实有一个来自于他本人的合法请求转移了资金，没有任何被攻击的痕迹。而 Mallory 则可以拿到钱后逍遥法外。 </p><p>​    <strong>CSRF漏洞检测：</strong><br>​    检测CSRF漏洞是一项比较繁琐的工作，最简单的方法就是抓取一个正常请求的数据包，去掉Referer字段后再重新提交，如果该提交还有效，那么基本上可以确定存在CSRF漏洞。</p><p>​    随着对CSRF漏洞研究的不断深入，不断涌现出一些专门针对CSRF漏洞进行检测的工具，如CSRFTester，CSRF Request Builder等。</p><p>​    以CSRFTester工具为例，CSRF漏洞检测工具的测试原理如下：使用CSRFTester进行测试时，首先需要抓取我们在浏览器中访问过的所有链接以及所有的表单等信息，然后通过在CSRFTester中修改相应的表单等信息，重新提交，这相当于一次伪造客户端请求。如果修改后的测试请求成功被网站服务器接受，则说明存在CSRF漏洞，当然此款工具也可以被用来进行CSRF攻击。</p><pre><code>**防御CSRF攻击：**</code></pre><p>​    目前防御 CSRF 攻击主要有三种策略：验证 HTTP Referer 字段；在请求地址中添加 token 并验证；在 HTTP 头中自定义属性并验证。</p><p>   <strong>（1）验证 HTTP Referer 字段</strong></p><p>​    根据 HTTP 协议，在 HTTP 头中有一个字段叫 Referer，它记录了该 HTTP 请求的来源地址。在通常情况下，访问一个安全受限页面的请求来自于同一个网站，比如需要访问 <a href="http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory%EF%BC%8C%E7%94%A8%E6%88%B7%E5%BF%85%E9%A1%BB%E5%85%88%E7%99%BB%E9%99%86" target="_blank" rel="noopener">http://bank.example/withdraw?account=bob&amp;amount=1000000&amp;for=Mallory，用户必须先登陆</a> bank.example，然后通过点击页面上的按钮来触发转账事件。这时，该转帐请求的 Referer 值就会是转账按钮所在的页面的 URL，通常是以 bank.example 域名开头的地址。而如果黑客要对银行网站实施 CSRF 攻击，他只能在他自己的网站构造请求，当用户通过黑客的网站发送请求到银行时，该请求的 Referer 是指向黑客自己的网站。因此，要防御 CSRF 攻击，银行网站只需要对于每一个转账请求验证其 Referer 值，如果是以 bank.example 开头的域名，则说明该请求是来自银行网站自己的请求，是合法的。如果 Referer 是其他网站的话，则有可能是黑客的 CSRF 攻击，拒绝该请求。</p><p>​    这种方法的显而易见的好处就是简单易行，网站的普通开发人员不需要操心 CSRF 的漏洞，只需要在最后给所有安全敏感的请求统一增加一个拦截器来检查 Referer 的值就可以。特别是对于当前现有的系统，不需要改变当前系统的任何已有代码和逻辑，没有风险，非常便捷。</p><p>​    然而，这种方法并非万无一失。Referer 的值是由浏览器提供的，虽然 HTTP 协议上有明确的要求，但是每个浏览器对于 Referer 的具体实现可能有差别，并不能保证浏览器自身没有安全漏洞。使用验证 Referer 值的方法，就是把安全性都依赖于第三方（即浏览器）来保障，从理论上来讲，这样并不安全。事实上，对于某些浏览器，比如 IE6 或 FF2，目前已经有一些方法可以篡改 Referer 值。如果 bank.example 网站支持 IE6 浏览器，黑客完全可以把用户浏览器的 Referer 值设为以 bank.example 域名开头的地址，这样就可以通过验证，从而进行 CSRF 攻击。</p><p>即便是使用最新的浏览器，黑客无法篡改 Referer 值，这种方法仍然有问题。因为 Referer 值会记录下用户的访问来源，有些用户认为这样会侵犯到他们自己的隐私权，特别是有些组织担心 Referer 值会把组织内网中的某些信息泄露到外网中。因此，用户自己可以设置浏览器使其在发送请求时不再提供 Referer。当他们正常访问银行网站时，网站会因为请求没有 Referer 值而认为是 CSRF 攻击，拒绝合法用户的访问。</p><p>​    <strong>（2）在请求地址中添加 token 并验证</strong></p><p>​     CSRF 攻击之所以能够成功，是因为黑客可以完全伪造用户的请求，该请求中所有的用户验证信息都是存在于 cookie 中，因此黑客可以在不知道这些验证信息的情况下直接利用用户自己的 cookie 来通过安全验证。要抵御 CSRF，关键在于在请求中放入黑客所不能伪造的信息，并且该信息不存在于 cookie 之中。可以在 HTTP 请求中以参数的形式加入一个随机产生的 token，并在服务器端建立一个拦截器来验证这个 token，如果请求中没有 token 或者 token 内容不正确，则认为可能是 CSRF 攻击而拒绝该请求。</p><p>​    这种方法要比检查 Referer 要安全一些，token 可以在用户登陆后产生并放于 session 之中，然后在每次请求时把 token 从 session 中拿出，与请求中的 token 进行比对，但这种方法的难点在于如何把 token 以参数的形式加入请求。对于 GET 请求，token 将附在请求地址之后，这样 URL 就变成 <a href="http://url/?csrftoken=tokenvalue%E3%80%82" target="_blank" rel="noopener">http://url?csrftoken=tokenvalue。</a> 而对于 POST 请求来说，要在 form 的最后加上 <input type="”hidden”" name="”csrftoken”" value="”tokenvalue”/">，这样就把 token 以参数的形式加入请求了。但是，在一个网站中，可以接受请求的地方非常多，要对于每一个请求都加上 token 是很麻烦的，并且很容易漏掉，通常使用的方法就是在每次页面加载时，使用 javascript 遍历整个 dom 树，对于 dom 中所有的 a 和 form 标签后加入 token。这样可以解决大部分的请求，但是对于在页面加载之后动态生成的 html 代码，这种方法就没有作用，还需要程序员在编码时手动添加 token。</p><p>​     该方法还有一个缺点是难以保证 token 本身的安全。特别是在一些论坛之类支持用户自己发表内容的网站，黑客可以在上面发布自己个人网站的地址。由于系统也会在这个地址后面加上 token，黑客可以在自己的网站上得到这个 token，并马上就可以发动 CSRF 攻击。为了避免这一点，系统可以在添加 token 的时候增加一个判断，如果这个链接是链到自己本站的，就在后面添加 token，如果是通向外网则不加。不过，即使这个 csrftoken 不以参数的形式附加在请求之中，黑客的网站也同样可以通过 Referer 来得到这个 token 值以发动 CSRF 攻击。这也是一些用户喜欢手动关闭浏览器 Referer 功能的原因。</p><p>   <strong>（3）在 HTTP 头中自定义属性并验证</strong></p><p>​    这种方法也是使用 token 并进行验证，和上一种方法不同的是，这里并不是把 token 以参数的形式置于 HTTP 请求之中，而是把它放到 HTTP 头中自定义的属性里。通过 XMLHttpRequest 这个类，可以一次性给所有该类请求加上 csrftoken 这个 HTTP 头属性，并把 token 值放入其中。这样解决了上种方法在请求中加入 token 的不便，同时，通过 XMLHttpRequest 请求的地址不会被记录到浏览器的地址栏，也不用担心 token 会透过 Referer 泄露到其他网站中去。</p><p>​    然而这种方法的局限性非常大。XMLHttpRequest 请求通常用于 Ajax 方法中对于页面局部的异步刷新，并非所有的请求都适合用这个类来发起，而且通过该类请求得到的页面不能被浏览器所记录下，从而进行前进，后退，刷新，收藏等操作，给用户带来不便。另外，对于没有进行 CSRF 防护的遗留系统来说，要采用这种方法来进行防护，要把所有请求都改为 XMLHttpRequest 请求，这样几乎是要重写整个网站，这代价无疑是不能接受的。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot-静态资源</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-mybatis-xiang-mu/springboot-jing-tai-zi-yuan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-mybatis-xiang-mu/springboot-jing-tai-zi-yuan/</url>
      
        <content type="html"><![CDATA[<h3 id="1-SpringBoot的默认配置"><a href="#1-SpringBoot的默认配置" class="headerlink" title="1. SpringBoot的默认配置"></a>1. SpringBoot的默认配置</h3><p>首先我们打开<code>WebMvcAutoConfiguration</code>类, 因为是静态资源的位置, 所以搜索<code>location</code>,找到这一行代码:</p><pre class=" language-java"><code class="language-java"> String staticPathPattern <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>staticPathPattern<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token function">getResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><p>然后进入<code>getStaticLocations</code>这个方法,到了<code>ResourceProperties</code>类中的</p><pre class=" language-java"><code class="language-java">  <span class="token keyword">public</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>staticLocations<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token number">1234</span></code></pre><p>这个方法,那接着看<code>staticLocations</code>这个属性,其实就到了这个类的顶部</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceProperties</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"classpath:/META-INF/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/static/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/public/"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> staticLocations<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">boolean</span> addMappings<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">final</span> ResourceProperties<span class="token punctuation">.</span>Chain chain<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">final</span> ResourceProperties<span class="token punctuation">.</span>Cache cache<span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token function">ResourceProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>staticLocations <span class="token operator">=</span> CLASSPATH_RESOURCE_LOCATIONS<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>addMappings <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>chain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceProperties<span class="token punctuation">.</span>Chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceProperties<span class="token punctuation">.</span>Cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token number">123456789101112131415</span></code></pre><p>可以看出,静态资源默认的位置是classpath,也就是resource目录下的:</p><ul><li>/META-INF/resources</li><li>/resources</li><li>/static</li><li>/public</li></ul><p>而且顺序就是数组的顺序.</p><h3 id="2-测试"><a href="#2-测试" class="headerlink" title="2. 测试"></a>2. 测试</h3><p>我们创建一个index.html页面,然后<code>&lt;h1&gt;</code>标签分别是各自的路径,比如在<code>/META-INF/resources</code>下的index.html:</p><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html ></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>http-template<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token punctuation">></span></span>META-INF.resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>12345678910</code></pre><p>在上面四个文件夹中各自放一个不同标题的页面,启动springboot,访问<code>localhost:8080</code><br>可以看到页面的标题是<code>/META-INF/resources</code>, 说明是按照上面的默认配置读取顺序读取的<br><img src="https://img-blog.csdnimg.cn/20190320134209874.png" alt="在这里插入图片描述"><br><strong>注意,这里不需要加这个静态资源文件夹的名字!!</strong>,比如<code>localhost:8080</code>能看到页面,但是<code>localhost:8080/static</code>或<code>localhost:8080/META-INF/resources</code>是访问不了的</p><p>为了继续证实四个文件夹都可以,我放了同一个图片在各自文件夹,只是名字不同,结构如下:<br><img src="https://img-blog.csdnimg.cn/20190320112329245.png" alt="在这里插入图片描述"><br>访问</p><ul><li>localhost:8080/2b.jpg</li><li>localhost:8080/3b.jpg</li><li>localhost:8080/4b.jpg</li><li>localhost:8080/5b.jpg</li></ul><p>都能访问(不需要加静态资源文件夹的名字!!!), 反而是resource根目录,也就是classpath下的1b.jpg不能访问</p><h3 id="3-配置"><a href="#3-配置" class="headerlink" title="3.配置"></a>3.配置</h3><p>配置一: 是否可以访问静态资源</p><pre class=" language-yml"><code class="language-yml">spring:  mvc:    static-path-pattern: /static/**123</code></pre><p>这个配置默认是/<strong>, 表示的是正则匹配到这种路径才去访问静态资源,所以默认情况下,上面四个能够访问的路径也必须加上<code>/zgd</code>才可以访问<br>**另一个需要注意的事,默认情况下访问index.html页面,不需要加这个文件名,比如localhost:8080,但是配置了该项后,需要文件名.localhost:8080/zgd/index.html</strong><br><img src="https://img-blog.csdnimg.cn/20190320112408852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p6emdkXzY2Ng==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>加上<code>index.html</code>资源全称后可以访问<br><img src="https://img-blog.csdnimg.cn/20190320134332590.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p6emdkXzY2Ng==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>配置二: 去哪找静态资源<br>这个配置就是我们上面说的那四个文件夹的配置了,注释掉上面的配置,启动看看</p><pre class=" language-yml"><code class="language-yml">spring:  resources:    static-locations: classpath:/static/</code></pre><p>启动访问localhost:8080<br>不出意料的显示的是static的标题,也就是static文件夹下的html文件.<br><img src="https://img-blog.csdnimg.cn/20190320134341403.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p6emdkXzY2Ng==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>此时尝试访问3b.jpg,4b.jpb都是无法访问的,只能访问2b.jpg</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 入门学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-mybatis-xiang-mu/1-1-ru-men-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-mybatis-xiang-mu/1-1-ru-men-xue-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="配置Mybatis-Spring项目"><a href="#配置Mybatis-Spring项目" class="headerlink" title="配置Mybatis-Spring项目"></a>配置Mybatis-Spring项目</h1><p><a href="http://mybatis.org/spring/zh/index.html" target="_blank" rel="noopener">官方文档</a></p><p>官方实例代码：<a href="https://github.com/mybatis/jpetstore-6.git" target="_blank" rel="noopener">https://github.com/mybatis/jpetstore-6.git</a></p><h2 id="1-配置数据源（简单版）"><a href="#1-配置数据源（简单版）" class="headerlink" title="1.配置数据源（简单版）"></a>1.配置数据源（简单版）</h2><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.SimpleDriverDataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>driverClass<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/chapter12<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span></code></pre><h2 id="2-配置SqlSessionFactory"><a href="#2-配置SqlSessionFactory" class="headerlink" title="2.配置SqlSessionFactory"></a>2.配置SqlSessionFactory</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>配置文件</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/pei-zhi-wen-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/pei-zhi-wen-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-jian-jie/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring注解</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/spring/spring-zhu-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/spring/spring-zhu-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="spring注解"><a href="#spring注解" class="headerlink" title="spring注解"></a>spring注解</h2><h3 id="定义配置"><a href="#定义配置" class="headerlink" title="定义配置"></a>定义配置</h3><pre><code>1. @Configuration2. @ComoinentScan</code></pre><h3 id="定义组件"><a href="#定义组件" class="headerlink" title="定义组件"></a>定义组件</h3><pre><code>1. @Component2. @AutiWired3. @Autowired(required=false)</code></pre><h3 id="自动装配歧义性"><a href="#自动装配歧义性" class="headerlink" title="自动装配歧义性"></a>自动装配歧义性</h3><pre><code>1. @Primary2. @Qualifier3. @Resource</code></pre><h3 id="分层架构中定义组件"><a href="#分层架构中定义组件" class="headerlink" title="分层架构中定义组件"></a>分层架构中定义组件</h3><pre><code>1. @Controller2. @Service3. @Repository4. @Repository</code></pre><h3 id="Spring测试环境"><a href="#Spring测试环境" class="headerlink" title="Spring测试环境"></a>Spring测试环境</h3><pre><code>1. @RunWith2. @ContextConfiguration</code></pre><h3 id="使用xml启用组件扫描"><a href="#使用xml启用组件扫描" class="headerlink" title="使用xml启用组件扫描"></a>使用xml启用组件扫描</h3><pre><code>&lt;comtext:component-scan base-package="com...."/&gt;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1安装环境</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/python-xue-xi/1-1-an-zhuang-huan-jing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/python-xue-xi/1-1-an-zhuang-huan-jing/</url>
      
        <content type="html"><![CDATA[<h1 id="1-安装Anaconda"><a href="#1-安装Anaconda" class="headerlink" title="1. 安装Anaconda"></a>1. 安装Anaconda</h1><blockquote><p>傻瓜式安装即可</p></blockquote><p>官方下载地址:<a href="https://www.anaconda.com/products/individual" target="_blank" rel="noopener">https://www.anaconda.com/products/individual</a></p><p><img src="https://raw.githubusercontent.com/kujin521/imgs/master/img/image-20200806145708420.png" alt="image-20200806145708420"></p><h1 id="2-开发工具pychram"><a href="#2-开发工具pychram" class="headerlink" title="2. 开发工具pychram"></a>2. 开发工具pychram</h1><p><img src="https://raw.githubusercontent.com/kujin521/imgs/master/img/image-20200806150355609.png" alt="image-20200806150355609"></p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><img src="https://raw.githubusercontent.com/kujin521/imgs/master/img/image-20200806150955704.png" alt="image-20200806150955704"></p><p><img src="https://raw.githubusercontent.com/kujin521/imgs/master/img/image-20200806151131134.png" alt="image-20200806151131134"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>index</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/maven-he-gradle/index/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/maven-he-gradle/index/</url>
      
        <content type="html"><![CDATA[<h1 id="Maven和Gradle相关设置"><a href="#Maven和Gradle相关设置" class="headerlink" title="Maven和Gradle相关设置"></a>Maven和Gradle相关设置</h1><p>idea对项目创建创建的两种方式maven和gradle</p><p>注意：idea对gradle的支持还不是很智能，对maven的依赖的好</p><h2 id="maven设置"><a href="#maven设置" class="headerlink" title="maven设置"></a>maven设置</h2><ol><li><p>下载maven</p><p><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">http://maven.apache.org/download.cgi</a></p></li><li><p>配置仓库阿里源</p><p>编辑settings.xml 文件</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus-aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Nexus aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.aliyun.com/nexus/content/groups/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">></span></span></code></pre></li><li><p>所有的需要的依赖都会下载到repository</p></li></ol><h3 id="idea设置"><a href="#idea设置" class="headerlink" title="idea设置"></a>idea设置</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200926094915.png" alt="image-20200926094915437"></p><h2 id="gradle设置"><a href="#gradle设置" class="headerlink" title="gradle设置"></a>gradle设置</h2><ol><li><p>下载gradle</p><p><a href="https://gradle.org/" target="_blank" rel="noopener">https://gradle.org/</a></p></li><li><p>创建一个主目录 用于版本切换,相当于maven的仓库,会生成如下文件</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200926100108.png" alt="image-20200926100108121"></p></li></ol><h3 id="idea设置-1"><a href="#idea设置-1" class="headerlink" title="idea设置"></a>idea设置</h3><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200926100448.png" alt="image-20200926100448235"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Maven和Gradle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven和Gradle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>防火墙的设置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/fang-huo-qiang-de-she-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/fang-huo-qiang-de-she-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="防火墙的设置"><a href="#防火墙的设置" class="headerlink" title="防火墙的设置"></a>防火墙的设置</h1><pre><code>保护服务器的安全设置防火墙规则开放80 22端口关闭防火墙</code></pre><h1 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h1><pre><code>1. 安装 yum install firewalld2. 启动 service firewalld start3. 检查状态 service firewalld status4. 关闭或禁用防火墙 service firewalld stop/disable</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>端口设置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/duan-kou-she-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/duan-kou-she-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="Linux防火墙端口设置"><a href="#Linux防火墙端口设置" class="headerlink" title="Linux防火墙端口设置"></a>Linux防火墙端口设置</h2><blockquote><p>关闭防火墙命令：systemctl stop firewalld.service</p><p>开启防火墙：</p><p>systemctl start firewalld.service</p><p>systemctl start firewalld.service</p><p>关闭开机自启动：systemctl disable firewalld.service</p><p>开启开机启动：systemctl enable firewalld.service</p></blockquote><p>1、开放端口</p><pre class=" language-bash"><code class="language-bash">firewall-cmd --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span>5005/tcp --permanent  <span class="token comment" spellcheck="true"># 开放5005端口</span>firewall-cmd --zone<span class="token operator">=</span>public --remove-port<span class="token operator">=</span>5005/tcp --permanent <span class="token comment" spellcheck="true">#关闭5005端口</span>firewall-cmd --reload  <span class="token comment" spellcheck="true"># 配置立即生效</span></code></pre><p>2、查看防火墙所有开放的端口</p><pre class=" language-bash"><code class="language-bash">firewall-cmd --zone<span class="token operator">=</span>public --list-ports</code></pre><p>3.、关闭防火墙</p><p># 如果要开放的端口太多，嫌麻烦，可以关闭防火墙，安全性自行评估</p><pre><code>systemctl stop firewalld.service</code></pre><p>4、查看防火墙状态</p><pre><code> firewall-cmd --state</code></pre><p>5、查看监听的端口</p><pre class=" language-bash"><code class="language-bash"><span class="token function">netstat</span> -lnpt</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTMzNjQzMi8yMDE5MDMvMTMzNjQzMi0yMDE5MDMwMjEwNDM0MjY1MS03NzkxMDM2OTAucG5n" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p><em>PS:centos7默认没有 netstat 命令，需要安装 net-tools 工具，yum install -y net-tools</em></p><p>6、检查端口被哪个进程占用</p><pre class=" language-bash"><code class="language-bash"><span class="token function">netstat</span> -lnpt <span class="token operator">|</span><span class="token function">grep</span> 5005</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTMzNjQzMi8yMDE5MDMvMTMzNjQzMi0yMDE5MDMwMjEwNDM0MjY1MS03NzkxMDM2OTAucG5n" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>7、查看进程的详细信息</p><pre class=" language-bash"><code class="language-bash"><span class="token function">ps</span> 5005</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/aHR0cHM6Ly9pbWcyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTMzNjQzMi8yMDE5MDMvMTMzNjQzMi0yMDE5MDMwMjEwNDM0MjY1MS03NzkxMDM2OTAucG5n" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p><p>8、中止进程</p><pre class=" language-bash"><code class="language-bash"><span class="token function">kill</span> -9 5005</code></pre><p> 参考地址：<a href="https://www.cnblogs.com/heqiuyong/p/10460150.html" target="_blank" rel="noopener">https://www.cnblogs.com/heqiuyong/p/10460150.html</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用户操作</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/yong-hu-cao-zuo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/yong-hu-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="系统用户操作命令"><a href="#系统用户操作命令" class="headerlink" title="系统用户操作命令"></a>系统用户操作命令</h1><ol><li>useradd 选项 用户名<ol><li>参数说明：<br>选项:</li><li>-c comment 指定一段注释性描述.</li></ol>-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。<br>-g 用户组 指定用户所属的用户组。<br>-G 用户组，用户组 指定用户所属的附加组。<br>-s Shell文件 指定用户的登录Shell。<br>-u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。</li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件命令操作md</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/wen-jian-ming-ling-cao-zuo-md/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/wen-jian-ming-ling-cao-zuo-md/</url>
      
        <content type="html"><![CDATA[<h1 id="文件命令操作"><a href="#文件命令操作" class="headerlink" title="文件命令操作"></a>文件命令操作</h1><div id="navCategory" style="color:#152e97;"><p style="font-size:18px;"><b>目录</b></p><ul><li><a href="#_label0">1、Linux命令的普遍语法格式</a></li><li><a href="#_label1">2、目录处理命令</a><ul><li><a href="#_label1_0">　一、显示目录文件命令：ls</a></li><li><a href="#_label1_1">　二、创建目录命令：mkdir</a></li><li><a href="#_label1_2">　三、切换目录命令：cd</a></li><li><a href="#_label1_3">　四、shell内置命令和外部命令的区别</a></li><li><a href="#_label1_4">　五、显示当前目录命令：pwd</a></li><li><a href="#_label1_5">　六、删除空目录命令：rmdir</a></li><li><a href="#_label1_6">　七、复制文件或目录命令：cp</a></li><li><a href="#_label1_7">　八、剪切文件或目录命令：mv</a></li><li><a href="#_label1_8">　九、删除文件或目录命令：rm</a></li></ul></li><li><a href="#_label2">3、文件处理命令</a><ul><li><a href="#_label2_0">　一、创建空文件命令：touch</a></li><li><a href="#_label2_1">　二、显示文件内容命令（适合内容较少的文件）：cat</a></li><li><a href="#_label2_2">　三、反向显示文件内容命令（适合内容较少的文件）：tac</a></li><li><a href="#_label2_3">　四、分页显示文件内容命令（不能向前翻页）：more</a></li><li><a href="#_label2_4">　五、分页显示文件内容命令（可以前后翻页）：less</a></li><li><a href="#_label2_5">　六、显示文件内容命令（指定行数）：head</a></li><li><a href="#_label2_6">　七、反向文件内容命令（文件即时更新后也能动态显示，多用于日志文件显示）：tail</a></li></ul></li><li><a href="#_label3">4、总结</a></li></ul></div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关闭进程</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/guan-bi-jin-cheng/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/guan-bi-jin-cheng/</url>
      
        <content type="html"><![CDATA[<p>查出需要关闭的进程ID后，使用命令【pkill -9 进程ID】即可删除关闭进程。</p><p>例如:pkill -9 29944</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Untitled</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/untitled/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/untitled/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Readis安装及配置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/readis-an-zhuang-ji-pei-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/readis-an-zhuang-ji-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="Readis安装"><a href="#Readis安装" class="headerlink" title="Readis安装"></a>Readis安装</h2><p><a href="https://redis.io/" target="_blank" rel="noopener">官方网址</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginx简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/nginx-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/nginx-jian-jie/</url>
      
        <content type="html"><![CDATA[<p><a href="http://nginx.org/en/linux_packages.html#RHEL-CentOS" target="_blank" rel="noopener">官方安装教程（网速会很慢）</a> </p><p><a href="http://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="noopener">官方入门指南</a></p><h2 id="Nginx简介"><a href="#Nginx简介" class="headerlink" title="Nginx简介"></a>Nginx简介</h2><pre><code>Nginx是什么？能干什么？有什么特点？</code></pre><ol><li>轻量级web服务器，也是一款反向代理服务器</li><li>可直接支持Rails和PHP的程序</li><li>可作为http反向代理服务器</li><li>负债均衡服务器</li><li>邮件代理服务器</li><li>帮助前端动静分离<h2 id="Nginx命令"><a href="#Nginx命令" class="headerlink" title="Nginx命令"></a>Nginx命令</h2><ol><li>启动systemctl start nginx</li><li>停止systemctl stop nginx</li><li>状态systemctl status nginx</li><li>重启systemctl reload nginx<h2 id="nginx文件目录"><a href="#nginx文件目录" class="headerlink" title="nginx文件目录"></a>nginx文件目录</h2></li></ol></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nat连接网络</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/nat-lian-jie-wang-luo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/nat-lian-jie-wang-luo/</url>
      
        <content type="html"><![CDATA[<h1 id="虚拟机NAT模式连接SSH"><a href="#虚拟机NAT模式连接SSH" class="headerlink" title="虚拟机NAT模式连接SSH"></a>虚拟机NAT模式连接SSH</h1><img src="https://raw.githubusercontent.com/kujin521/imgs/master/img/nat.png"><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql安装</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/mysql-an-zhuang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/mysql-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h2 id="Centos7安装mysql8-0"><a href="#Centos7安装mysql8-0" class="headerlink" title="Centos7安装mysql8.0"></a>Centos7安装mysql8.0</h2><p><a href="https://dev.mysql.com/doc/refman/8.0/en/linux-installation.html" target="_blank" rel="noopener">官方安装教程地址</a></p><div class="htmledit_views" id="content_views">                                            <div id="cnblogs_post_body" class="blogpost-body">    <h2><a name="t0"></a>CentOS 7 安装 MySQL</h2><h3><a name="t1"></a>首先检查 MySQL 是否已安装</h3><p>yum list installed | <span class="hljs-keyword">grep mysql</span></p><p><span class="hljs-keyword">如果有的话 就全部卸载</span></p><p><span class="hljs-keyword"><span class="hljs-selector-tag">yum <span class="hljs-selector-tag">-y <span class="hljs-selector-tag">remove +数据库名称<span class="hljs-selector-tag"><br></span></span></span></span></span></p><p><span class="hljs-keyword"><span class="hljs-selector-tag"><span class="hljs-selector-tag"><span class="hljs-selector-tag"><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182138628-598984235.png" alt=""></span></span></span></span></p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182146284-309574833.png" alt=""></p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182150753-216803501.png" alt=""></p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182156316-2043422646.png" alt=""></p><h3><a name="t2"></a>MySQL 依赖 libaio，所以先要安装 libaio</h3><p><span class="hljs-attribute">yum search libaio <span class="hljs-comment"># 检索相关信息</span></span></p><p><span class="hljs-attribute"><span class="hljs-comment"> yum install libaio <span class="hljs-comment"># 安装依赖包</span></span></span></p><p><span class="hljs-attribute"><span class="hljs-comment"><span class="hljs-comment"><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182309284-812797022.png" alt=""></span></span></span></p><p>&nbsp;</p><h3><a name="t3"></a>下载 MySQL Yum Repository</h3><p>地址为&nbsp;<a href="http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm" target="_blank" rel="nofollow noopener" data-token="24f8cc217d01a7b0b936d5447908644e">http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</a></p><p>&nbsp;</p><p><span class="hljs-attribute">wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</span></p><p><span class="hljs-attribute">然后</span></p><h3><a name="t4"></a>添加 MySQL Yum Repository</h3><p>添加 MySQL Yum Repository 到你的系统 repository 列表中，执行</p><p>&nbsp;</p><p><span class="hljs-selector-tag">yum&nbsp;<span class="hljs-selector-tag">localinstall&nbsp;<span class="hljs-selector-tag">mysql-community-release-el7-5<span class="hljs-selector-class">.noarch<span class="hljs-selector-class">.rpm</span></span></span></span></span></p><p><span class="hljs-attribute"><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182521706-940146849.png" alt=""></span></p><p>如果提示<code>-bash: wget: 未找到命令</code>，请先执行&nbsp;<code>yum install wget</code>&nbsp;安装 wget</p><p>&nbsp;</p><h3><a name="t5"></a>验证下是否添加成功</h3><pre><code class="hljs perl">yum repolist enabled | <span class="hljs-keyword"><span class="hljs-keyword">grep</span> <span class="hljs-string"><span class="hljs-string">"mysql.*-community.*"</span></span></span></code><br><br><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><h3><a name="t6"></a>选择要启用 MySQL 版本</h3><p>查看 MySQL 版本，执行</p><pre><code class="hljs perl"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">yum repolist all | <span class="hljs-keyword"><span class="hljs-keyword">grep</span> mysql</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>可以看到 5.5， 5.7 版本是默认禁用的，因为现在最新的稳定版是 5.6</p><pre><code class="hljs perl"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">yum repolist enabled | <span class="hljs-keyword"><span class="hljs-keyword">grep</span> mysql</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>查看当前的启动的 MySQL 版本</p><h3><a name="t7"></a>通过 Yum 来安装 MySQL</h3><p>执行</p><pre><code class="hljs sql"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span> mysql-community-<span class="hljs-keyword"><span class="hljs-keyword">server</span> </span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>Yum 会自动处理 MySQL 与其他组件的依赖关系：</p><pre><br><br></pre><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105182927534-1130688424.png" alt=""></p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105183118300-438733573.png" alt=""></p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105183423206-1086888071.png" alt=""></p><p>&nbsp;</p><p>遇到上述提示，输入 y 继续，执行完成会提示“完毕！”。此时MySQL 安装完成，它包含了 mysql-community-server、mysql-community-client、mysql-community-common、mysql-community-libs 四个包。</p><p>执行</p><pre><code class="hljs css"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rpm</span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-qi</span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">mysql-community-server</span><span class="hljs-selector-class"><span class="hljs-selector-class">.x86_64</span> 0<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:5</span><span class="hljs-selector-class"><span class="hljs-selector-pseudo">.6</span><span class="hljs-selector-class"><span class="hljs-selector-pseudo">.24-3</span><span class="hljs-selector-class"><span class="hljs-selector-pseudo">.el7</span></span></span></span></span></span></span></span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>执行</p><pre><code class="hljs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attribute">whereis mysql</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>可以看到 MySQL 的安装目录是 /usr/bin/</p><p>&nbsp;</p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105183533222-843570707.png" alt=""></p><p>&nbsp;</p><h2><a name="t8"></a>启动和关闭 MySQL Server</h2><h3><a name="t9"></a>启动 MySQL Server</h3><pre><code class="hljs sql"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span>  mysqld</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><h3><a name="t10"></a>查看 MySQL Server 状态</h3><pre><code class="hljs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attribute">systemctl status  mysqld</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><h3><a name="t11"></a>关闭 MySQL Server</h3><pre><code class="hljs vbscript"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">systemctl <span class="hljs-keyword"><span class="hljs-keyword">stop</span> mysqld</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><h2><a name="t12"></a>测试是否安装成功</h2><pre><code class="hljs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-attribute">mysql</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>可以进入 mysql 命令行界面</p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105183644956-232259366.png" alt=""></p><p>&nbsp;</p><h2><a name="t13"></a>防火墙设置</h2><p>远程访问 MySQL， 需开放默认端口号 3306.</p><p>执行</p><pre><code class="hljs cs"><ol class="hljs-ln"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">firewall-cmd <span class="hljs-comment"><span class="hljs-comment">--permanent --zone=<span class="hljs-keyword">public</span> --<span class="hljs-keyword">add</span>-port=<span class="hljs-number">3306</span>/tcp</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">firewall-cmd <span class="hljs-comment">--permanent --zone=<span class="hljs-keyword">public</span> --<span class="hljs-keyword">add</span>-port=<span class="hljs-number">3306</span>/udp</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment"></span></div></div></li></ol></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p>这样就开放了相应的端口。</p><p>执行</p><pre><code class="hljs sql">firewall-cmd <span class="hljs-comment"><span class="hljs-comment">--reload </span><br></span></code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><h2><a name="t14"></a>MySQL 安全设置</h2><p>服务器启动后，可以执行</p><pre><code class="hljs">mysql_secure_installation;</code><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><pre><code class="hljs"></code><br><br><div class="hljs-button {2}" data-title="复制" onclick="hljs.copyCode(event)"></div></pre><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105183851300-789943277.png" alt=""></p><pre></pre><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105183854019-1241643422.png" alt=""></p><p>此时输入 root 原始密码（初始化安装的话为空），接下来，为了安全，MySQL 会提示你重置 root 密码，移除其他用户账号，禁用 root 远程登录，移除 test 数据库，重新加载 privilege 表格等，你只需输入 y 继续执行即可。</p><p>至此，整个 MySQL 安装完成。</p><pre></pre><p>下面可以看到都只能本机访问mysql，如果要外部可以访问mysql，那么host这里应该是显示%，所以这里我们可以选择重新创建一个用户并授予最高的权限，语句如下：</p><pre>grant all privileges on *.* to 'root'@'%' &nbsp;identified by 'lam7' with grant option;</pre><p>&nbsp;//这句话就是给root账户设置密码为lam7且host为%，即外部任何主机均可访问。*.*这个本意是数据库名.表名，我们这里没有写任何表名也没有写数据库名，就是意思所有的数据库都可以用这个root账户访问</p><p>flush privileges;//让刚刚修改的权限生效</p><p>然后接下来就是重启mysql服务，再次进入到mysql，用查询语句查看user表，如下所示：</p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105184028753-388403540.png" alt=""></p><p>如果需要使用外部工具链接mysql</p><p>则需要关闭防火墙</p><p>systemctl stop firewalld</p><p>然后查看状态</p><p>systemctl status firewalld</p><p><img src="https://images2015.cnblogs.com/blog/911086/201701/911086-20170105184421206-1095288281.png" alt=""></p><pre><span style="font-family:'宋体';font-size:18pt;"><strong>参考<br></strong></span></pre><h2><a name="t15"></a><a href="http://www.centoscn.com/mysql/2016/0315/6844.html" target="_blank" rel="nofollow noopener" data-token="14a059e7ea802d5e5b2ee92fe0f7a36f">CentOS 7 安装 MySQL</a></h2><pre><span style="font-family:'宋体';font-size:18pt;"><strong>&nbsp;</strong></span></pre></div><p>转载于:https://www.cnblogs.com/Lam7/p/6253564.html</p>                                    </div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LINUX设置防火墙</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/linux-she-zhi-fang-huo-qiang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/linux-she-zhi-fang-huo-qiang/</url>
      
        <content type="html"><![CDATA[<section class="ouvJEz"><h1 class="_1RuRku">Linux设置防火墙</h1><div class="rEsl9f"><div class="s-dsoj"><time datetime="2019-02-25T03:01:08.000Z">2019.02.25 11:01:08</time><span>字数 42</span><span>阅读 189</span></div></div><article class="_2rhmJa"><p>Centos 7之前的防火墙基本都是修改iptables</p><pre class="line-numbers  language-undefined"><code class="  language-undefined">service  iptables  status        查看防火墙状态<p>service  iptables  start          开启防火墙</p><p>service  iptables  stop          关闭防火墙</p><p>service  iptables  restart        重启防火墙</p></code><p><code class="  language-undefined"><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></p></pre><p></p><p>Centos 7之后的防火墙升级为Firewall，取代了之前的iptables</p><p>其常用命令为：</p><pre class="line-numbers  language-csharp"><code class="  language-csharp">firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>state                          ##查看防火墙运行状态，是否是running<p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span>reload                        ##重新载入配置，比如添加规则之后，需要执行此命令</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">get</span><span class="token operator">-</span>zones                  ##列出支持的zone</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">get</span><span class="token operator">-</span>services              ##列出支持的服务，在列表中的服务是放行的</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span>list<span class="token operator">-</span>ports                    ##列出开放的端口</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span>query<span class="token operator">-</span>service ftp                          ##查看ftp服务是否支持，返回yes或者no</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">add</span><span class="token operator">-</span>service<span class="token operator">=</span>ftp                            ##临时开放ftp服务</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">add</span><span class="token operator">-</span>service<span class="token operator">=</span>ftp <span class="token operator">–</span>permanent        ##永久开放ftp服务</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">remove</span><span class="token operator">-</span>service<span class="token operator">=</span>ftp <span class="token operator">–</span>permanent  ##永久移除ftp服务</p><p>firewall<span class="token operator">-</span>cmd <span class="token operator">–</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp <span class="token operator">–</span>permanent      ##永久添加<span class="token number">80</span>端口</p><p>iptables <span class="token operator">-</span>L <span class="token operator">-</span>n                                  ##查看规则，这个命令是和iptables的相同的</p><p>man firewall<span class="token operator">-</span>cmd                            ##查看帮助</p><p>systemctl stop firewalld                  ##关闭防火墙</p><p>systemctl start firewalld                  ##开启防火墙</p><p>systemctl status firewalld              ##查看防火墙状态</p><p>systemctl restart firewalld              ##重启防火墙</p><p>systemctl disable firewalld              ##开机关闭防火墙，即永久关闭</p></code></pre></article></section><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux安装jdk</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/linux-an-zhuang-jdk/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/linux-an-zhuang-jdk/</url>
      
        <content type="html"><![CDATA[<h1 id="下载压缩包"><a href="#下载压缩包" class="headerlink" title="下载压缩包"></a>下载压缩包</h1><p> <a href="https://download.oracle.com/otn/java/jdk/8u261-b12/a4634525489241b9a9e1aa73d9e118e6/jdk-8u261-linux-x64.tar.gz?AuthParam=1596785260_6b143225e725d6b93cf2f48e8fcbe4df" target="_blank" rel="noopener">https://download.oracle.com/otn/java/jdk/8u261-b12/a4634525489241b9a9e1aa73d9e118e6/jdk-8u261-linux-x64.tar.gz?AuthParam=1596785260_6b143225e725d6b93cf2f48e8fcbe4df</a></p><h1 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h1><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> zxvf jdk-***.gz</code></pre><h1 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h1><p>修改到自己的jdk目录,直接命令行修改</p><pre class=" language-bash"><code class="language-bash"><span class="token keyword">echo</span> <span class="token string">"export JAVA_HOME=/root/jdk1.8.0_261"</span> <span class="token operator">>></span> /etc/profile<span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string">"export PATH=<span class="token variable">$PATH</span>:<span class="token variable">$JAVA_HOME</span>/bin"</span> <span class="token operator">>></span> /etc/profile<span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string">"export CLASSPATH=.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar"</span> <span class="token operator">>></span> /etc/profile<span class="token punctuation">;</span><span class="token function">source</span> /etc/profile</code></pre><h1 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h1><pre class=" language-bash"><code class="language-bash">java -version</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux准备工作</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/linux-zhun-bei-gong-zuo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/linux-zhun-bei-gong-zuo/</url>
      
        <content type="html"><![CDATA[<h1 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h1><h3 id="虚拟机里的CentOS网络配置"><a href="#虚拟机里的CentOS网络配置" class="headerlink" title="虚拟机里的CentOS网络配置"></a>虚拟机里的CentOS网络配置</h3><pre><code>1.首先你要检查vm的网关ip是否和Centos 的IP一致</code></pre><p><img src="ip.png" alt="img"><br>    2. </p><h3 id="前期准备工作"><a href="#前期准备工作" class="headerlink" title="前期准备工作"></a>前期准备工作</h3><pre><code> 一.查看ip    1. ifconfig    2. ip addr    3. vi/ect/sysconfig/network-scripts/ifcfg-xx    4. yun install net-tool</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iptables的学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/iptables-de-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/iptables-de-xue-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h1><h2 id="什么是iptables"><a href="#什么是iptables" class="headerlink" title="什么是iptables"></a>什么是iptables</h2><pre><code>常见与linux系统的应用层防火墙工具</code></pre><h2 id="什么是Netfilter"><a href="#什么是Netfilter" class="headerlink" title="什么是Netfilter?"></a>什么是Netfilter?</h2><pre><code>Netfilter是Linux操作系统核心层内部的一个数据包处理模块什么是Hook point&gt;    数据包在Netfilter中的挂载点    （PRE_POUTING,INPUT,OUTPUT,FORWARD,POST_ROUTING）</code></pre><h2 id="iptables规则组成"><a href="#iptables规则组成" class="headerlink" title="iptables规则组成"></a>iptables规则组成</h2><pre><code>组成部分：四张表+五条链（Hook point）+规则四张表：    filter表:访问控制，规则匹配    nat表：地址转发    mangle表，    raw表五条链：INPUT,OUTPUT,FORWARD,PREROUTING,POSTROUTING数据包访问控制：ACCEPT,DROP,REJECT数据包改写:SNAT,DNAT信息记录：LOG</code></pre><h2 id="iptables-配置-场景一"><a href="#iptables-配置-场景一" class="headerlink" title="iptables 配置 场景一"></a>iptables 配置 场景一</h2><pre><code>》对所有的地址开放本机的tcp（80，22，10-21）端口的访问》允许对所有的地址开放本机的基于ICMP协议的数据包访问》其他未被允许的端口则禁止访问</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos虚拟机网络连接问题</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/centos-xu-ni-ji-wang-luo-lian-jie-wen-ti/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/centos-xu-ni-ji-wang-luo-lian-jie-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>装好CentOS7后，我们一开始是上不了网的 <br><img src="https://img-blog.csdn.net/20180804201654166?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>这时候，可以输入命令dhclient，可以自动获取一个IP地址，再用命令ip addr查看IP <br><img src="https://img-blog.csdn.net/20180804201723248?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>不过这时候获取的IP是动态的，下次重启系统后，IP地址也会变化，这时候我们可以把系统的IP设置为静态的，设置步骤如下： <br>（1）点击VMware虚拟机左上角的“编辑”，选择“虚拟网络编译器”。 <br>（2）选中VMnet8（NAT模式），再点击右侧的“NAT设置”此时会看到如下界面 <br><img src="https://img-blog.csdn.net/20180804201749749?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>（3）在命令行中输入：vim /etc/sysconfig/network-scripts/ifcfg-ens33 <br><img src="https://img-blog.csdn.net/20180804201953160?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>（4）此时会进入如下图所示界面 <br><img src="https://img-blog.csdn.net/20180804202037986?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>（5）将ONBOOT=no改为yes，将BOOTPROTO=dhcp改为BOOTPROTO=static,并在后面增加几行内容： <br>IPADDR=192.168.127.128 <br>NETMASK=255.255.255.0 <br>GATEWAY=192.168.127.2 <br>DNS1=119.29.29.29 <br><img src="https://img-blog.csdn.net/20180804202050977?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>（6）保存后退出，然后输入命令：systemctl restart network.service来重启网络服务。 <br><img src="https://img-blog.csdn.net/20180804202124183?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>（7）再用ip addr查看IP,并用命令ping测试网络的连通性。 <br><img src="https://img-blog.csdn.net/20180804202204447?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FraXBhMTE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述" title=""> <br>至此，IP即设置完毕。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-2 CentOS镜像使用帮助</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/linux-ru-men/1-2-centos-jing-xiang-shi-yong-bang-zhu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/linux-ru-men/1-2-centos-jing-xiang-shi-yong-bang-zhu/</url>
      
        <content type="html"><![CDATA[<h1 id="CentOS镜像使用帮助"><a href="#CentOS镜像使用帮助" class="headerlink" title="CentOS镜像使用帮助"></a>CentOS镜像使用帮助</h1><p><a href="http://mirrors.163.com/.help/centos.html" target="_blank" rel="noopener">http://mirrors.163.com/.help/centos.html</a><br>    1. 首先下载 wget<br>        yum install wget<br>    2. 其次进行备份<br>         mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<br>    3. 进入 /etc/yum.repos.d/ 目录，下载下载对应版本repo文件<br>        cd /etc/yum.repos.d/<br>        wget <a href="http://mirrors.163.com/.help/CentOS6-Base-163.repo" target="_blank" rel="noopener">http://mirrors.163.com/.help/CentOS6-Base-163.repo</a><br>    4. 运行以下命令生成缓存<br>        yum clean all<br>        yum makecache</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux入门 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数组</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/leetcode/shu-zu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/leetcode/shu-zu/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> LeetCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>junit简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/junit5/junit-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/junit5/junit-jian-jie/</url>
      
        <content type="html"><![CDATA[<p>官方地址:<a href="https://junit.org/" target="_blank" rel="noopener">https://junit.org/</a></p><h1 id="什么是-JUnit？"><a href="#什么是-JUnit？" class="headerlink" title="什么是 JUnit？"></a>什么是 JUnit？</h1><p>JUnit 是一个 Java 编程语言的单元测试框架。JUnit 在测试驱动的开发方面有很重要的发展，是起源于 JUnit 的一个统称为 xUnit 的单元测试框架之一。</p><p>JUnit 促进了“先测试后编码”的理念，强调建立测试数据的一段代码，可以先测试，然后再应用。这个方法就好比“测试一点，编码一点，测试一点，编码一点……”，增加了程序员的产量和程序的稳定性，可以减少程序员的压力和花费在排错上的时间。</p><h2 id="什么是Junit5"><a href="#什么是Junit5" class="headerlink" title="什么是Junit5?"></a>什么是Junit5?</h2><p>与以前的JUnit版本不同，JUnit 5由来自三个不同子项目的几个不同模块组成。</p><p>JUnit 5 = JUnit平台 + JUnit Jupiter + JUnit Vintage</p><h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><p>JUnit 是一个开放的资源框架，用于编写和运行测试。<br>提供注释来识别测试方法。<br>提供断言来测试预期结果。<br>提供测试运行来运行测试。<br>JUnit 测试允许你编写代码更快，并能提高质量。<br>JUnit 优雅简洁。没那么复杂，花费时间较少。<br>JUnit 测试可以自动运行并且检查自身结果并提供即时反馈。所以也没有必要人工梳理测试结果的报告。<br>JUnit 测试可以被组织为测试套件，包含测试用例，甚至其他的测试套件。<br>JUnit 在一个条中显示进度。如果运行良好则是绿色；如果运行失败，则变成红色。</p><h3 id="测试工具"><a href="#测试工具" class="headerlink" title="测试工具"></a>测试工具</h3><p>测试工具是一整套固定的工具用于基线测试。测试工具的目的是为了确保测试能够在共享且固定的环境中运行，因此保证测试结果的可重复性。它包括：</p><p>在所有测试调用指令发起前的 setUp() 方法。<br>在测试方法运行后的 tearDown() 方法。</p><h3 id="测试套件"><a href="#测试套件" class="headerlink" title="测试套件"></a>测试套件</h3><p>测试套件意味捆绑几个测试案例并且同时运行。在 JUnit 中，@RunWith 和 @Suite 都被用作运行测试套件。</p><h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><table><thead><tr><th>注解</th><th>描述</th></tr></thead><tbody><tr><td><strong style="color:red;">@Test</strong></td><td>表示方法是测试方法。与JUnit 4的@Test注释不同，此注释不声明任何属性，因为JUnit Jupiter中的测试扩展基于其自己的专用注释进行操作。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@ParameterizedTest</td><td>表示方法是参数化测试。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@RepeatedTest</td><td>表示方法是重复测试的测试模板。除非重写这些方法，否则它们将被继承。</td></tr><tr><td><strong style="color:red;">@TestFactory</strong></td><td>表示方法是动态测试的测试工厂。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@TestTemplate</td><td>表示方法是测试用例的模板，测试用例设计为根据已注册提供程序返回的调用上下文的数量被多次调用。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@TestMethodOrder</td><td>用于为带注释的测试类配置测试方法的执行顺序；类似于JUnit 4的@FixMethodOrder。这样的注释是继承的。</td></tr><tr><td>@TestInstance</td><td>用于为带注释的测试类配置测试实例生命周期。这样的注释是继承的。</td></tr><tr><td>@DisplayName</td><td>声明测试类或测试方法的自定义显示名称。这样的注释不是继承的。</td></tr><tr><td>@DisplayNameGeneration</td><td>声明测试类的自定义显示名称生成器。这样的注释是继承的。</td></tr><tr><td><strong style="color:red;">@BeforeEach</strong></td><td>表示该注释的方法应该被执行之前 的每个 @Test，@RepeatedTest，@ParameterizedTest，或@TestFactory方法在当前类; 类似于JUnit 4的@Before。除非重写这些方法，否则它们将被继承。</td></tr><tr><td><strong style="color:red;">@AfterEach</strong></td><td>表示该注释的方法应该被执行之后 每个 @Test，@RepeatedTest，@ParameterizedTest，或@TestFactory方法在当前类; 类似于JUnit 4的@After。除非重写这些方法，否则它们将被继承。</td></tr><tr><td><strong style="color:red;">@BeforeAll</strong></td><td>表示该注释的方法应该被执行之前 所有 @Test，@RepeatedTest，@ParameterizedTest，和@TestFactory方法在当前类; 类似于JUnit 4的@BeforeClass。此类方法是继承的（除非它们被隐藏或覆盖），并且必须被继承（除非static使用“每类” 测试实例生命周期）。</td></tr><tr><td>@AfterAll</td><td>表示该注释的方法应该被执行之后 的所有 @Test，@RepeatedTest，@ParameterizedTest，和@TestFactory方法在当前类; 类似于JUnit 4的@AfterClass。此类方法是继承的（除非它们被隐藏或覆盖），并且必须被继承（除非static使用“每类” 测试实例生命周期）。</td></tr><tr><td>@Nested</td><td>表示带注释的类是一个非静态的嵌套测试类。@BeforeAll和@AfterAll方法不能直接在使用@Nested测试类除非“每级” 测试实例的生命周期被使用。这样的注释不是继承的。</td></tr><tr><td>@Tag</td><td>用于在类或方法级别声明用于过滤测试的标签；类似于TestNG中的测试组或JUnit 4中的类别。此类注释在类级别继承，而不在方法级别继承。</td></tr><tr><td>@Disabled</td><td>用于禁用测试类或测试方法；类似于JUnit 4的@Ignore。这样的注释不是继承的。</td></tr><tr><td><strong style="color:red;">@Timeout</strong></td><td>如果执行超过给定的持续时间，则使测试，测试工厂，测试模板或生命周期方法失败。这样的注释是继承的。</td></tr><tr><td>@ExtendWith</td><td>用于声明性地注册扩展。这样的注释是继承的。</td></tr><tr><td>@RegisterExtension</td><td>用于通过字段以编程方式注册扩展。除非被遮盖，否则这些字段将被继承。</td></tr><tr><td>@TempDir</td><td>用于通过生命周期方法或测试方法中的字段注入或参数注入来提供临时目录；位于org.junit.jupiter.api.io包装中。</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Junit5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Junit5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Junit测试例子</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/junit5/junit-ce-shi-li-zi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/junit5/junit-ce-shi-li-zi/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Junit5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Junit5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA对junit5的支持</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/junit5/idea-dui-junit5-de-zhi-chi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/junit5/idea-dui-junit5-de-zhi-chi/</url>
      
        <content type="html"><![CDATA[<h1 id="在-IntelliJ-IDEA-中使用-JUnit-5"><a href="#在-IntelliJ-IDEA-中使用-JUnit-5" class="headerlink" title="在 IntelliJ IDEA 中使用 JUnit 5"></a>在 IntelliJ IDEA 中使用 JUnit 5</h1><p>发表于八月 2， 2016由<a href="https://blog.jetbrains.com/author/trishagee" target="_blank" rel="noopener">特里莎吉</a></p><p>IntelliJ IDEA 2016.2 中的新功能之一是支持新的<a href="http://junit.org/junit5/" target="_blank" rel="noopener">JUnit 5</a>测试框架。几乎所有的Java开发人员都会在某个时候使用JUnit，因此发现最新版本已经与时俱进，并提供了许多新功能，其中一些功能可能为使用其他框架的人所熟悉，这非常令人兴奋。</p><p>IntelliJ IDEA 支持实际运行为 JUnit 5 编写的测试的能力 – 无需使用其他库（<a href="http://junit.org/junit5/docs/5.0.0-M2/user-guide/#running-tests-build-gradle" target="_blank" rel="noopener">例如 Gradle</a>或<a href="http://junit.org/junit5/docs/5.0.0-M2/user-guide/#running-tests-build-maven" target="_blank" rel="noopener">Maven</a>插件），您只需要包括 JUnit 5 依赖项。在这里，我们使用<a href="https://gradle.org/" target="_blank" rel="noopener">Gradle</a>包括对M2版本的依赖项：</p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-1Dependencies.png" alt="Setting up dependencies"></p><p>完成此项工作后，可以开始编写使用新注释的测试：</p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-2FirstTest.png" alt="Simple JUnit 5 test"></p><p>运行这些测试将在 IntelliJ IDEA 运行窗口中为您提供熟悉的结果：</p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-3RunResults.png" alt="JUnit 5 test results"></p><p>您会注意到<a href="http://junit.org/junit5/docs/current/user-guide/#overview-what-is-junit-5" target="_blank" rel="noopener">JUnit Jupiter</a>是新 JUnit 测试的测试引擎，您可以同时运行新测试和旧测试。</p><p>乍一看，新的 JUnit 5 测试与 JUnit 4 测试没有什么不同，只是从不同的包导入的注释，并在结果上显示两种类型的运行程序。</p><p>但 JUnit 5 附带了一些新功能，例如为测试添加可读名称或说明的功能，因此您不再需要依赖方法名称，使用 ：<code>@DisplayName</code></p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-4DisplayName.png" alt="Using @DisplayName"></p><p>您可以对断言进行分组，以便运行所有断言，无论一个（或更多）是否失败，都能更好地查看失败的真实状态：</p><p><a href="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-7GroupedAssertions.png" target="_blank" rel="noopener"><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-7GroupedAssertions.png" alt="Grouping assertions"></a></p><p>您可以使用注释，因此可以编写 BDD 样式的测试或按某些维度对类中的测试进行分组：<code>@Nested</code></p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-5Nested.png" alt="Running @Nested tests"></p><p>JUnit 5 还有一种新的处理预期异常的方法，允许您断言引发特定的异常</p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-6ExpectExceptions.png" alt="JUnit 5 can expect exceptions"></p><p>您甚至可以获取引发异常以检查更多详细信息：</p><p><img src="https://blog.jetbrains.com/wp-content/uploads/2016/08/idea-8InspectException.png" alt="Inspect Exception"></p><p>这些只是 JUnit 5 中可用的一些功能，IntelliJ 对新框架的支持也在不断发展。</p><p>如果您认为 Junit 5 看起来很有趣， 请下载<a href="https://www.jetbrains.com/idea/specials/idea/whatsnew.html?landing" target="_blank" rel="noopener">Intellij Idea 2016.2</a>并查看：</p><ul><li><a href="http://junit.org/junit5/docs/current/user-guide/" target="_blank" rel="noopener">JUnit 5 用户指南</a>，供参考和示例</li><li><a href="https://www.infoq.com/articles/JUnit-5-Early-Test-Drive" target="_blank" rel="noopener">JUnit 5 = 早期</a>试驾，用于演练新功能</li><li><a href="https://youtu.be/ct9sIsrnE9Y" target="_blank" rel="noopener">JUnit 5 上的 vJUG 会话</a>。</li></ul><p>当然，您也可以查看<a href="https://blog.jetbrains.com/idea/2016/07/intellij-idea-2016-2-is-here/" target="_blank" rel="noopener">IntelliJ IDEA 2016.2 中提供的功能</a>。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Junit5 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Junit5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>junit简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/junit/junit-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/junit/junit-jian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是-JUnit？"><a href="#什么是-JUnit？" class="headerlink" title="什么是 JUnit？"></a>什么是 JUnit？</h1><p>JUnit 是一个 Java 编程语言的单元测试框架。JUnit 在测试驱动的开发方面有很重要的发展，是起源于 JUnit 的一个统称为 xUnit 的单元测试框架之一。</p><p>JUnit 促进了“先测试后编码”的理念，强调建立测试数据的一段代码，可以先测试，然后再应用。这个方法就好比“测试一点，编码一点，测试一点，编码一点……”，增加了程序员的产量和程序的稳定性，可以减少程序员的压力和花费在排错上的时间。</p><h2 id="什么是Junit5"><a href="#什么是Junit5" class="headerlink" title="什么是Junit5?"></a>什么是Junit5?</h2><p>与以前的JUnit版本不同，JUnit 5由来自三个不同子项目的几个不同模块组成。</p><p>JUnit 5 = JUnit平台 + JUnit Jupiter + JUnit Vintage</p><h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><p>JUnit 是一个开放的资源框架，用于编写和运行测试。<br>提供注释来识别测试方法。<br>提供断言来测试预期结果。<br>提供测试运行来运行测试。<br>JUnit 测试允许你编写代码更快，并能提高质量。<br>JUnit 优雅简洁。没那么复杂，花费时间较少。<br>JUnit 测试可以自动运行并且检查自身结果并提供即时反馈。所以也没有必要人工梳理测试结果的报告。<br>JUnit 测试可以被组织为测试套件，包含测试用例，甚至其他的测试套件。<br>JUnit 在一个条中显示进度。如果运行良好则是绿色；如果运行失败，则变成红色。</p><h3 id="测试工具"><a href="#测试工具" class="headerlink" title="测试工具"></a>测试工具</h3><p>测试工具是一整套固定的工具用于基线测试。测试工具的目的是为了确保测试能够在共享且固定的环境中运行，因此保证测试结果的可重复性。它包括：</p><p>在所有测试调用指令发起前的 setUp() 方法。<br>在测试方法运行后的 tearDown() 方法。</p><h3 id="测试套件"><a href="#测试套件" class="headerlink" title="测试套件"></a>测试套件</h3><p>测试套件意味捆绑几个测试案例并且同时运行。在 JUnit 中，@RunWith 和 @Suite 都被用作运行测试套件。</p><h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><table><thead><tr><th>注解</th><th>描述</th></tr></thead><tbody><tr><td>@Test</td><td>表示方法是测试方法。与JUnit 4的@Test注释不同，此注释不声明任何属性，因为JUnit Jupiter中的测试扩展基于其自己的专用注释进行操作。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@ParameterizedTest</td><td>表示方法是参数化测试。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@RepeatedTest</td><td>表示方法是重复测试的测试模板。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@TestFactory</td><td>表示方法是动态测试的测试工厂。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@TestTemplate</td><td>表示方法是测试用例的模板，测试用例设计为根据已注册提供程序返回的调用上下文的数量被多次调用。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@TestMethodOrder</td><td>用于为带注释的测试类配置测试方法的执行顺序；类似于JUnit 4的@FixMethodOrder。这样的注释是继承的。</td></tr><tr><td>@TestInstance</td><td>用于为带注释的测试类配置测试实例生命周期。这样的注释是继承的。</td></tr><tr><td>@DisplayName</td><td>声明测试类或测试方法的自定义显示名称。这样的注释不是继承的。</td></tr><tr><td>@DisplayNameGeneration</td><td>声明测试类的自定义显示名称生成器。这样的注释是继承的。</td></tr><tr><td>@BeforeEach</td><td>表示该注释的方法应该被执行之前 的每个 @Test，@RepeatedTest，@ParameterizedTest，或@TestFactory方法在当前类; 类似于JUnit 4的@Before。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@AfterEach</td><td>表示该注释的方法应该被执行之后 每个 @Test，@RepeatedTest，@ParameterizedTest，或@TestFactory方法在当前类; 类似于JUnit 4的@After。除非重写这些方法，否则它们将被继承。</td></tr><tr><td>@BeforeAll</td><td>表示该注释的方法应该被执行之前 所有 @Test，@RepeatedTest，@ParameterizedTest，和@TestFactory方法在当前类; 类似于JUnit 4的@BeforeClass。此类方法是继承的（除非它们被隐藏或覆盖），并且必须被继承（除非static使用“每类” 测试实例生命周期）。</td></tr><tr><td>@AfterAll</td><td>表示该注释的方法应该被执行之后 的所有 @Test，@RepeatedTest，@ParameterizedTest，和@TestFactory方法在当前类; 类似于JUnit 4的@AfterClass。此类方法是继承的（除非它们被隐藏或覆盖），并且必须被继承（除非static使用“每类” 测试实例生命周期）。</td></tr><tr><td>@Nested</td><td>表示带注释的类是一个非静态的嵌套测试类。@BeforeAll和@AfterAll方法不能直接在使用@Nested测试类除非“每级” 测试实例的生命周期被使用。这样的注释不是继承的。</td></tr><tr><td>@Tag</td><td>用于在类或方法级别声明用于过滤测试的标签；类似于TestNG中的测试组或JUnit 4中的类别。此类注释在类级别继承，而不在方法级别继承。</td></tr><tr><td>@Disabled</td><td>用于禁用测试类或测试方法；类似于JUnit 4的@Ignore。这样的注释不是继承的。</td></tr><tr><td>@Timeout</td><td>如果执行超过给定的持续时间，则使测试，测试工厂，测试模板或生命周期方法失败。这样的注释是继承的。</td></tr><tr><td>@ExtendWith</td><td>用于声明性地注册扩展。这样的注释是继承的。</td></tr><tr><td>@RegisterExtension</td><td>用于通过字段以编程方式注册扩展。除非被遮盖，否则这些字段将被继承。</td></tr><tr><td>@TempDir</td><td>用于通过生命周期方法或测试方法中的字段注入或参数注入来提供临时目录；位于org.junit.jupiter.api.io包装中。</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Junit </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Junit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件上传和下载</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/wen-jian-shang-chuan-he-xia-zai/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/wen-jian-shang-chuan-he-xia-zai/</url>
      
        <content type="html"><![CDATA[<p>1.进行文件上传时,表单需要做的准备:</p><ol><li>请求方式为post</li><li>使用file 的表单域:</li><li>使用mulitpart/form-data的请求编码方式:<ol><li>关于enctype:<ul><li>application/x-www-form-urlencoded: 表单enctype属性默认值,对大容量的二进制数据或包含Aacii字符,这种编码不能满足要求</li><li>multipart/form-data form设定了entype=“mulitipart/form-data”属性后,表示表单进行二进制数据传输</li></ul></li></ol></li></ol><h1 id="效果截图"><a href="#效果截图" class="headerlink" title="效果截图"></a>效果截图</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字节流与字符流</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/zi-jie-liu-yu-zi-fu-liu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/zi-jie-liu-yu-zi-fu-liu/</url>
      
        <content type="html"><![CDATA[<h1 id="字节流与字符流"><a href="#字节流与字符流" class="headerlink" title="字节流与字符流"></a>字节流与字符流</h1><p>字节流与字符流区别</p><h2 id="OutputStream字节输出流"><a href="#OutputStream字节输出流" class="headerlink" title="OutputStream字节输出流"></a>OutputStream字节输出流</h2><h3 id="字节-byte-是进行i-o操作的基本数据单位"><a href="#字节-byte-是进行i-o操作的基本数据单位" class="headerlink" title="字节(byte)是进行i/o操作的基本数据单位"></a>字节(byte)是进行i/o操作的基本数据单位</h3><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="Writer字符输出流"><a href="#Writer字符输出流" class="headerlink" title="Writer字符输出流"></a>Writer字符输出流</h2><h2 id="Reader字符输入流"><a href="#Reader字符输入流" class="headerlink" title="Reader字符输入流"></a>Reader字符输入流</h2><h2 id="转换流"><a href="#转换流" class="headerlink" title="转换流"></a>转换流</h2><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><p><em>XMind - Trial Version</em></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多线程编程</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/duo-xian-cheng-bian-cheng/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/duo-xian-cheng-bian-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="多线程编程"><a href="#多线程编程" class="headerlink" title="多线程编程"></a>多线程编程</h1><h2 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="多线程的两种实现方式"><a href="#多线程的两种实现方式" class="headerlink" title="多线程的两种实现方式"></a>多线程的两种实现方式</h2><h2 id="线程的基本操作"><a href="#线程的基本操作" class="headerlink" title="线程的基本操作"></a>线程的基本操作</h2><h2 id="多线程同步与死锁"><a href="#多线程同步与死锁" class="headerlink" title="多线程同步与死锁"></a>多线程同步与死锁</h2><h2 id="synchronized同步实现操作"><a href="#synchronized同步实现操作" class="headerlink" title="synchronized同步实现操作"></a>synchronized同步实现操作</h2><h2 id="Object类对多线程的支持"><a href="#Object类对多线程的支持" class="headerlink" title="Object类对多线程的支持"></a>Object类对多线程的支持</h2><h2 id="线程生命周期"><a href="#线程生命周期" class="headerlink" title="线程生命周期"></a>线程生命周期</h2><p><em>XMind - Trial Version</em></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring入门</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/spring-ru-men/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/spring-ru-men/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring入门"><a href="#Spring入门" class="headerlink" title="Spring入门"></a>Spring入门</h1><h2 id="课程概述"><a href="#课程概述" class="headerlink" title="课程概述"></a>课程概述</h2><h2 id="IOC介绍"><a href="#IOC介绍" class="headerlink" title="IOC介绍"></a>IOC介绍</h2><h3 id="ioc概念介绍"><a href="#ioc概念介绍" class="headerlink" title="ioc概念介绍"></a>ioc概念介绍</h3><ul><li><p>控制反转</p><ul><li>控制对象的创建及销毁（生命周期）</li><li>将对象的控制权交给ioc容器</li></ul></li></ul><h2 id="Springioc入门"><a href="#Springioc入门" class="headerlink" title="Springioc入门"></a>Springioc入门</h2><h2 id="Bean实例化和注入"><a href="#Bean实例化和注入" class="headerlink" title="Bean实例化和注入"></a>Bean实例化和注入</h2><h3 id="实例化Bean的方式介绍"><a href="#实例化Bean的方式介绍" class="headerlink" title="实例化Bean的方式介绍"></a>实例化Bean的方式介绍</h3><h3 id="注入Bean的方式介绍"><a href="#注入Bean的方式介绍" class="headerlink" title="注入Bean的方式介绍"></a>注入Bean的方式介绍</h3><h2 id="Bean的作用域"><a href="#Bean的作用域" class="headerlink" title="Bean的作用域"></a>Bean的作用域</h2><h3 id="singleton"><a href="#singleton" class="headerlink" title="singleton"></a>singleton</h3><h3 id="web相关作用域"><a href="#web相关作用域" class="headerlink" title="web相关作用域"></a>web相关作用域</h3><h3 id="自定义作用域"><a href="#自定义作用域" class="headerlink" title="自定义作用域"></a>自定义作用域</h3><h2 id="Bean的懒加载"><a href="#Bean的懒加载" class="headerlink" title="Bean的懒加载"></a>Bean的懒加载</h2><h2 id="Bean的初始和销毁逻辑处理"><a href="#Bean的初始和销毁逻辑处理" class="headerlink" title="Bean的初始和销毁逻辑处理"></a>Bean的初始和销毁逻辑处理</h2><h2 id="Bean属性继承"><a href="#Bean属性继承" class="headerlink" title="Bean属性继承"></a>Bean属性继承</h2><h2 id="SpringIoc注解"><a href="#SpringIoc注解" class="headerlink" title="SpringIoc注解"></a>SpringIoc注解</h2><h3 id="注解的基本介绍使用"><a href="#注解的基本介绍使用" class="headerlink" title="注解的基本介绍使用"></a>注解的基本介绍使用</h3><h3 id="通过注解注入Bean"><a href="#通过注解注入Bean" class="headerlink" title="通过注解注入Bean"></a>通过注解注入Bean</h3><h3 id="通过注解设定Bean的作用域"><a href="#通过注解设定Bean的作用域" class="headerlink" title="通过注解设定Bean的作用域"></a>通过注解设定Bean的作用域</h3><h3 id="通过注解开启Bean的懒加载"><a href="#通过注解开启Bean的懒加载" class="headerlink" title="通过注解开启Bean的懒加载"></a>通过注解开启Bean的懒加载</h3><h3 id="通过注解编写Bean初始化及销毁逻辑处理"><a href="#通过注解编写Bean初始化及销毁逻辑处理" class="headerlink" title="通过注解编写Bean初始化及销毁逻辑处理"></a>通过注解编写Bean初始化及销毁逻辑处理</h3><p><em>XMind - Trial Version</em></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis框架</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/mybatis-kuang-jia/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/mybatis-kuang-jia/</url>
      
        <content type="html"><![CDATA[<h1 id="MyBatis框架"><a href="#MyBatis框架" class="headerlink" title="MyBatis框架"></a>MyBatis框架</h1><h2 id="mybatis入门"><a href="#mybatis入门" class="headerlink" title="mybatis入门"></a>mybatis入门</h2><h3 id="mybatis的概述"><a href="#mybatis的概述" class="headerlink" title="mybatis的概述"></a>mybatis的概述</h3><ul><li>java持久层框架 封装了jdbc 等复杂的数据库操作</li><li>通过xml或注解的方式将要执行的statement配置</li><li>通过java对象和statement中的sql动态参数进行映射生成sql语句，并将结果映射为java对象并返回</li><li>采用ORM（Object Relational Mapping 对象关系映射）思想 实体–数据库–映射</li></ul><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><ul><li><p>第一步：创建maven工程并导入依赖pom.xml</p><dependency>    <groupid>org.mybatis</groupid>    <artifactid>mybatis</artifactid>    <version>3.4.5</version></dependency><dependency>    <groupid>mysql</groupid>    <artifactid>mysql-connector-java</artifactid>    <version>8.0.12</version></dependency><dependency>    <groupid>log4j</groupid>    <artifactid>log4j</artifactid>    <version>1.2.17</version></dependency></li><li><p>第二步：创建实体类和dao接口</p></li><li><p>第三步：创建mybatis的主配置文件SqlMapConfig.xml</p></li><li><p>第四步：创建映射配置文件IUserDao.xml</p></li><li></li></ul><h3 id="环境搭建注意事项"><a href="#环境搭建注意事项" class="headerlink" title="环境搭建注意事项"></a>环境搭建注意事项</h3><ul><li>第一个：创建IUserDao.xml和IUserDao.java时名称保持一致</li><li>第二个：xml文件目录要逐个创建，进行分层</li><li>第三个：mybatis的配置文件必须包接口一致</li><li>第四个：映射文件的mapper标签namsespace属性值必须是dao接口的全类名</li><li>第五个：映射配置文件的配置操作。id属性取值必须是dao接口的方法名</li></ul><h3 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h3><p>//1.读取配置文件<br>String resource = “mybatis-config.xml”;<br>InputStream inputStream = Resources.getResourceAsStream(resource);</p><p>//2.创建SqlSessionFactory工厂<br>SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</p><p>//3.使用工厂生产SqlSession对象<br>SqlSession sqlSession=sqlSessionFactory.openSession();<br>//4.使用SqlSession创建Dao接口代理对象<br>IUserDao userDao=sqlSession.getMapper(IUserDao.class);<br>//5.使用代理对象执行方法<br>List<user> all = userDao.findAll();<br>for (User user : all) {<br>    System.out.println(user.toString());<br>}<br>//6.释放资源<br>sqlSession.close();<br>inputStream.close();</user></p><h3 id="mybatis基于注解的入门案例"><a href="#mybatis基于注解的入门案例" class="headerlink" title="mybatis基于注解的入门案例"></a>mybatis基于注解的入门案例</h3><ul><li>把IUserDao.xml移除，在dao接口上使用@Select注解，并指向SQL语句</li><li>SqlMapperConfig.xml中mapper配置时，使用class属性指定dao接口全类名 </li></ul><h3 id="自定义mybatis框架分析"><a href="#自定义mybatis框架分析" class="headerlink" title="自定义mybatis框架分析"></a>自定义mybatis框架分析</h3><ul><li><p>Mybatis 在使用代理dao的方式实现增删改查时做什么事呢</p><ul><li>第一：创建代理对象</li><li>第二：在代理对象中调用selectList</li></ul></li></ul><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="mybatis基本使用"><a href="#mybatis基本使用" class="headerlink" title="mybatis基本使用"></a>mybatis基本使用</h2><h3 id="mybatis的单表crud操作"><a href="#mybatis的单表crud操作" class="headerlink" title="mybatis的单表crud操作"></a>mybatis的单表crud操作</h3><h3 id="mybatis的参数和返回值"><a href="#mybatis的参数和返回值" class="headerlink" title="mybatis的参数和返回值"></a>mybatis的参数和返回值</h3><h3 id="mybatis的dao编写"><a href="#mybatis的dao编写" class="headerlink" title="mybatis的dao编写"></a>mybatis的dao编写</h3><h3 id="mybatis配置的细节-几个标签的使用"><a href="#mybatis配置的细节-几个标签的使用" class="headerlink" title="mybatis配置的细节 几个标签的使用"></a>mybatis配置的细节 几个标签的使用</h3><h2 id="mybatis深入和多表"><a href="#mybatis深入和多表" class="headerlink" title="mybatis深入和多表"></a>mybatis深入和多表</h2><h3 id="mybatis的连接池"><a href="#mybatis的连接池" class="headerlink" title="mybatis的连接池"></a>mybatis的连接池</h3><h3 id="mybatis的事务控制及设计的方法"><a href="#mybatis的事务控制及设计的方法" class="headerlink" title="mybatis的事务控制及设计的方法"></a>mybatis的事务控制及设计的方法</h3><h3 id="mybatis的多表查询"><a href="#mybatis的多表查询" class="headerlink" title="mybatis的多表查询"></a>mybatis的多表查询</h3><ul><li>一对多</li><li>多</li><li>对多</li></ul><p><em>XMind - Trial Version</em></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux常用命令</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/linux-chang-yong-ming-ling/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/linux-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h1><h2 id="软件操作命令"><a href="#软件操作命令" class="headerlink" title="软件操作命令"></a>软件操作命令</h2><h3 id="软件包管理-yum"><a href="#软件包管理-yum" class="headerlink" title="软件包管理 yum"></a>软件包管理 yum</h3><h3 id="安装软件-yum-install-xxx"><a href="#安装软件-yum-install-xxx" class="headerlink" title="安装软件 yum install xxx"></a>安装软件 yum install xxx</h3><h3 id="卸载软件-yum-remove-xxx"><a href="#卸载软件-yum-remove-xxx" class="headerlink" title="卸载软件 yum remove xxx"></a>卸载软件 yum remove xxx</h3><h3 id="搜索软件-yum-serach-xxx"><a href="#搜索软件-yum-serach-xxx" class="headerlink" title="搜索软件 yum serach xxx"></a>搜索软件 yum serach xxx</h3><h3 id="清理缓存-yum-clean-packages"><a href="#清理缓存-yum-clean-packages" class="headerlink" title="清理缓存 yum clean packages"></a>清理缓存 yum clean packages</h3><h3 id="列出已安装-yum-list"><a href="#列出已安装-yum-list" class="headerlink" title="列出已安装 yum list"></a>列出已安装 yum list</h3><h3 id="软件包信息-yum-info-xxx"><a href="#软件包信息-yum-info-xxx" class="headerlink" title="软件包信息 yum info xxx"></a>软件包信息 yum info xxx</h3><h2 id="服务器硬件资源和磁盘操作"><a href="#服务器硬件资源和磁盘操作" class="headerlink" title="服务器硬件资源和磁盘操作"></a>服务器硬件资源和磁盘操作</h2><h3 id="内存：free-m"><a href="#内存：free-m" class="headerlink" title="内存：free -m"></a>内存：free -m</h3><h3 id="硬盘：df-h"><a href="#硬盘：df-h" class="headerlink" title="硬盘：df -h"></a>硬盘：df -h</h3><h3 id="负载：w-top"><a href="#负载：w-top" class="headerlink" title="负载：w/top"></a>负载：w/top</h3><h2 id="文件和文件夹操作命令"><a href="#文件和文件夹操作命令" class="headerlink" title="文件和文件夹操作命令"></a>文件和文件夹操作命令</h2><h3 id="linux文件的目录结构"><a href="#linux文件的目录结构" class="headerlink" title="linux文件的目录结构"></a>linux文件的目录结构</h3><ul><li>根目录 /</li><li>家目录 /home</li><li>临时目录 /tmp</li><li>配置目录 /etc</li><li>用户程序目录 /usr </li></ul><h3 id="文件基本操作"><a href="#文件基本操作" class="headerlink" title="文件基本操作"></a>文件基本操作</h3><ul><li>ls 查看目录下文件</li><li>touch 新建文件</li><li>mkdir 新建文件夹</li><li>cd 进入目录 </li><li>rm 删除文件或目录</li><li>cp 复制</li><li>mv 移动</li><li>pwd 显示路径</li></ul><h3 id="文本编辑神器Vim"><a href="#文本编辑神器Vim" class="headerlink" title="文本编辑神器Vim"></a>文本编辑神器Vim</h3><ul><li>Vim安装 yum install vim</li></ul><h3 id="文件权限-421"><a href="#文件权限-421" class="headerlink" title="文件权限 421"></a>文件权限 421</h3><ul><li>r=4 w=2 x=1  </li></ul><h3 id="文件搜索-查找-读取"><a href="#文件搜索-查找-读取" class="headerlink" title="文件搜索 查找 读取"></a>文件搜索 查找 读取</h3><ul><li><p>tail 尾部读取</p></li><li><p>head 头部读取</p></li><li><p>cat 读取整个文件</p></li><li><p>more 分页读取</p></li><li><p>less 可控分页</p></li><li><p>grep 搜索关键字</p></li><li><p>find 查找</p><ul><li>可以去菜鸟教程学习</li></ul></li><li><p>wc 统计个数</p></li></ul><h3 id="文件解压"><a href="#文件解压" class="headerlink" title="文件解压"></a>文件解压</h3><ul><li><p>压缩</p><ul><li>tar –cvf jpg.tar *.jpg       // 将目录里所有jpg文件打包成 tar.jpg </li><li>tar –czf jpg.tar.gz *.jpg    // 将目录里所有jpg文件打包成 jpg.tar 后，并且将其用 gzip 压缩，生成一个 gzip 压缩过的包，命名为 jpg.tar.gz </li><li>tar –cjf jpg.tar.bz2 *.jpg   // 将目录里所有jpg文件打包成 jpg.tar 后，并且将其用 bzip2 压缩，生成一个 bzip2 压缩过的包，命名为jpg.tar.bz2 </li><li>tar –cZf jpg.tar.Z *.jpg     // 将目录里所有 jpg 文件打包成 jpg.tar 后，并且将其用 compress 压缩，生成一个 umcompress 压缩过的包，命名为jpg.tar.Z </li><li>rar a jpg.rar *.jpg          // rar格式的压缩，需要先下载 rar for linux </li><li>zip jpg.zip *.jpg            // zip格式的压缩，需要先下载 zip for linux</li></ul></li><li><p>解压</p><ul><li>tar –xvf file.tar         // 解压 tar 包 </li><li>tar -xzvf file.tar.gz     // 解压 tar.gz </li><li>tar -xjvf file.tar.bz2    // 解压 tar.bz2 </li><li>tar –xZvf file.tar.Z      // 解压 tar.Z </li><li>unrar e file.rar          // 解压 rar </li><li>unzip file.zip            // 解压 zip </li></ul></li><li><p>总结</p><ul><li>1、*.tar 用 tar –xvf 解压 </li><li>2、*.gz 用 gzip -d或者gunzip 解压 </li><li>3、*.tar.gz和*.tgz 用 tar –xzf 解压 </li><li>4、*.bz2 用 bzip2 -d或者用bunzip2 解压 </li><li>5、*.tar.bz2用tar –xjf 解压 </li><li>6、*.Z 用 uncompress 解压 </li><li>7、*.tar.Z 用tar –xZf 解压 </li><li>8、*.rar 用 unrar e解压 </li><li>9、*.zip 用 unzip 解压</li></ul></li></ul><h2 id="系统用户操作命令"><a href="#系统用户操作命令" class="headerlink" title="系统用户操作命令"></a>系统用户操作命令</h2><h3 id="useradd-添加用户"><a href="#useradd-添加用户" class="headerlink" title="useradd 添加用户"></a>useradd 添加用户</h3><h3 id="adduser-添加用户"><a href="#adduser-添加用户" class="headerlink" title="adduser 添加用户"></a>adduser 添加用户</h3><h3 id="userdel-删除用户"><a href="#userdel-删除用户" class="headerlink" title="userdel 删除用户"></a>userdel 删除用户</h3><h3 id="passwd-设置密码"><a href="#passwd-设置密码" class="headerlink" title="passwd 设置密码"></a>passwd 设置密码</h3><h2 id="防火墙相关设置"><a href="#防火墙相关设置" class="headerlink" title="防火墙相关设置"></a>防火墙相关设置</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul><li><p>作用：保护服务器安全</p></li><li><p>设置防火墙</p><ul><li>开放80，22端口</li></ul></li><li><p>关闭防火墙</p></li><li></li></ul><h3 id="设置防火墙命令"><a href="#设置防火墙命令" class="headerlink" title="设置防火墙命令"></a>设置防火墙命令</h3><ul><li>安装：yum install firewalld</li><li>启动：service firewalld start</li><li>状态：service firewalld status</li><li>关闭或禁用：service firewalld stop/disable</li></ul><h2 id="提权操作sudo-和文件传输操作"><a href="#提权操作sudo-和文件传输操作" class="headerlink" title="提权操作sudo 和文件传输操作"></a>提权操作sudo 和文件传输操作</h2><h3 id="提权：sudo"><a href="#提权：sudo" class="headerlink" title="提权：sudo"></a>提权：sudo</h3><ul><li>visudo：将普通用户添加到root信任列表中</li></ul><h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><ul><li>wget ，curl</li></ul><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><ul><li>scp</li></ul><p><em>XMind - Trial Version</em></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/linux/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/linux/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h1><h2 id="linux版本"><a href="#linux版本" class="headerlink" title="linux版本"></a>linux版本</h2><h3 id="ubuntu-界面友好"><a href="#ubuntu-界面友好" class="headerlink" title="ubuntu:界面友好"></a>ubuntu:界面友好</h3><h3 id="Red-Hat：商业级-红帽认证工程师"><a href="#Red-Hat：商业级-红帽认证工程师" class="headerlink" title="Red Hat：商业级-红帽认证工程师"></a>Red Hat：商业级-红帽认证工程师</h3><h3 id="Centos：企业级-使用yum管理软件包"><a href="#Centos：企业级-使用yum管理软件包" class="headerlink" title="Centos：企业级-使用yum管理软件包"></a>Centos：企业级-使用yum管理软件包</h3><h2 id="linux组成部分"><a href="#linux组成部分" class="headerlink" title="linux组成部分"></a>linux组成部分</h2><h3 id="内核"><a href="#内核" class="headerlink" title="内核"></a>内核</h3><ul><li>作用：运行程序管理硬件</li><li>进程管理，内存管理，硬件设备驱动，文件系统驱动</li></ul><h3 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h3><ul><li>作用：提供用户与内核进行交互操作接口（命令解释器）</li><li></li></ul><h3 id="文件结构"><a href="#文件结构" class="headerlink" title="文件结构"></a>文件结构</h3><ul><li>文件存放磁盘的组织方法</li></ul><h3 id="实用工具"><a href="#实用工具" class="headerlink" title="实用工具"></a>实用工具</h3><ul><li>编辑器：用于编辑文件</li><li>过滤器：用于接收并过滤数据</li><li>交互程序：容许用户发送信息或接收来自其他用户的信息</li></ul><h2 id="linux常用命令"><a href="#linux常用命令" class="headerlink" title="linux常用命令"></a>linux常用命令</h2><h3 id="终端与工作区"><a href="#终端与工作区" class="headerlink" title="终端与工作区"></a>终端与工作区</h3><ul><li>alt+fx</li></ul><h3 id="用户和用户组管理"><a href="#用户和用户组管理" class="headerlink" title="用户和用户组管理"></a>用户和用户组管理</h3><ul><li><p>用户：user</p><ul><li><p>切换用户：su 用户名</p></li><li><p>添加用户：useradd 选项 用户名</p><ul><li>-c：描述</li><li>-d：目录</li><li>-g：用户组</li><li>-G：附加用户组</li><li>-s：用户登录shell</li><li>-u：用户号</li></ul></li><li><p>删除用户：userdel -r 用户名</p></li><li><p>修改账号：usermod 选项 用户名</p></li><li><p>设置密码：passwd 选项 用户名</p><ul><li>强制设置简单密码：echo 123456 |passwd –stdin kujin</li><li>-l 禁用账号</li><li>-u 解锁</li><li>-d 无口令</li><li>-f 下次登录修改口令</li></ul></li></ul></li><li><p>用户组：group</p><ul><li><p>groupadd 选项 用户组</p><ul><li>-g：指定用户组标识GID</li><li>-o：和-g差不多</li></ul></li><li><p>groupdel 删除用户组</p></li><li><p>groupmod 选项 用户组</p><ul><li>-g：GID</li><li>-n：新用户组（新名字）</li></ul></li></ul></li></ul><h3 id="文件，目录操作命令"><a href="#文件，目录操作命令" class="headerlink" title="文件，目录操作命令"></a>文件，目录操作命令</h3><ul><li><p>什么是路径？</p><ul><li>绝对路径</li><li>相对路径：cd ../</li></ul></li><li><p>处理目录的常用命令</p><ul><li>ls: 列出目录</li><li>cd：切换目录</li><li>pwd：显示目前的目录</li><li>mkdir：创建一个新的目录</li><li>rmdir：删除一个空的目录</li><li>cp: 复制文件或目录</li><li>rm: 移除文件或目录</li><li>mv: 移动文件与目录，或修改文件与目录的名称</li></ul></li><li><p>linux文件内容查看</p><ul><li>cat 由第一行开始显示文件内容</li><li>tac 从最后一行开始显示</li><li>nl 显示行号</li><li>more 一页一页的显示</li><li>less 可以往前翻页</li><li>head 头部几行</li><li>tail 尾巴几行</li></ul></li></ul><h3 id="文件信息显示"><a href="#文件信息显示" class="headerlink" title="文件信息显示"></a>文件信息显示</h3><h3 id=""><a href="#" class="headerlink" title=""></a></h3><p><em>XMind - Trial Version</em></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Filter</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-web/filter/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-web/filter/</url>
      
        <content type="html"><![CDATA[<h1 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h1><h2 id="Filter是什么？"><a href="#Filter是什么？" class="headerlink" title="Filter是什么？"></a>Filter是什么？</h2><pre><code>1. javaweb的一个重要组件，可以对发送到servlet的请求进行拦截，并对响应也进行拦截2. Filter 是实现Filter 接口的java类3. Filter 需要在web.xml中进行配置和映射</code></pre><h2 id="如何创建一个Filter，并把它跑起来"><a href="#如何创建一个Filter，并把它跑起来" class="headerlink" title="如何创建一个Filter，并把它跑起来"></a>如何创建一个Filter，并把它跑起来</h2><pre><code>`public class MyFilter implements Filter {`web.xml`&lt;filter&gt;    &lt;filter-name&gt;别名&lt;/filter-name&gt;    &lt;filter-class&gt;全类名&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt;    &lt;filter-name&gt;别名&lt;/filter-name&gt;    &lt;url-pattern&gt;拦截url&lt;/url-pattern&gt;&lt;/filter-mapping&gt;`</code></pre><h2 id="Filter-相关API"><a href="#Filter-相关API" class="headerlink" title="Filter 相关API"></a>Filter 相关API</h2><pre><code>1. init(FilterConfig filterConfig) 单例初始化2. doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) 相关逻辑的处理    /放行，传给下一个filter 如果是最后一个Filter 则传给servler（jsp）    filterChain.doFilter(servletRequest,servletResponse);    多个Filter 的拦截顺序与&lt;filter-mapping&gt;的配置顺序有关 靠前的先被调用3. destroy()销毁</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单例</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/chuang-jian-xing/dan-li/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/chuang-jian-xing/dan-li/</url>
      
        <content type="html"><![CDATA[<h2 id="单例（Singleton）-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-单例（singleton）"><a href="#单例（Singleton）-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-单例（singleton）" class="headerlink" title="[单例（Singleton）](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=单例（singleton）)"></a>[单例（Singleton）](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=单例（singleton）)</h2><h3 id="Intent-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-intent"><a href="#Intent-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-intent" class="headerlink" title="[Intent](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=intent)"></a>[Intent](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=intent)</h3><p>确保一个类只有一个实例，并提供该实例的全局访问点。</p><h3 id="Class-Diagram-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-class-diagram"><a href="#Class-Diagram-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-class-diagram" class="headerlink" title="[Class Diagram](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=class-diagram)"></a>[Class Diagram](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=class-diagram)</h3><p>使用一个私有构造函数、一个私有静态变量以及一个公有静态函数来实现。</p><p>私有构造函数保证了不能通过构造函数来创建对象实例，只能通过公有静态函数返回唯一的私有静态变量。</p><p><img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/eca1f422-8381-409b-ad04-98ef39ae38ba.png" alt="img"></p><h3 id="Implementation-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-implementation"><a href="#Implementation-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-implementation" class="headerlink" title="[Implementation](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=implementation)"></a>[Implementation](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=implementation)</h3><h4 id="Ⅰ-懒汉式-线程不安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅰ-懒汉式-线程不安全"><a href="#Ⅰ-懒汉式-线程不安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅰ-懒汉式-线程不安全" class="headerlink" title="[Ⅰ 懒汉式-线程不安全](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=Ⅰ-懒汉式-线程不安全)"></a>[Ⅰ 懒汉式-线程不安全](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=Ⅰ-懒汉式-线程不安全)</h4><p>以下实现中，私有静态变量 uniqueInstance 被延迟实例化，这样做的好处是，如果没有用到该类，那么就不会实例化 uniqueInstance，从而节约资源。</p><p>这个实现在多线程环境下是不安全的，如果多个线程能够同时进入 <code>if (uniqueInstance == null)</code> ，并且此时 uniqueInstance 为 null，那么会有多个线程执行 <code>uniqueInstance = new Singleton();</code> 语句，这将导致实例化多次 uniqueInstance。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton uniqueInstance<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getUniqueInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>uniqueInstance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            uniqueInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> uniqueInstance<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="Ⅱ-饿汉式-线程安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅱ-饿汉式-线程安全"><a href="#Ⅱ-饿汉式-线程安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅱ-饿汉式-线程安全" class="headerlink" title="[Ⅱ 饿汉式-线程安全](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=Ⅱ-饿汉式-线程安全)"></a>[Ⅱ 饿汉式-线程安全](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=Ⅱ-饿汉式-线程安全)</h4><p>线程不安全问题主要是由于 uniqueInstance 被实例化多次，采取直接实例化 uniqueInstance 的方式就不会产生线程不安全问题。</p><p>但是直接实例化的方式也丢失了延迟实例化带来的节约资源的好处。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> Singleton uniqueInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="Ⅲ-懒汉式-线程安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅲ-懒汉式-线程安全"><a href="#Ⅲ-懒汉式-线程安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅲ-懒汉式-线程安全" class="headerlink" title="[Ⅲ 懒汉式-线程安全](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=Ⅲ-懒汉式-线程安全)"></a>[Ⅲ 懒汉式-线程安全](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=Ⅲ-懒汉式-线程安全)</h4><p>只需要对 getUniqueInstance() 方法加锁，那么在一个时间点只能有一个线程能够进入该方法，从而避免了实例化多次 uniqueInstance。</p><p>但是当一个线程进入该方法之后，其它试图进入该方法的线程都必须等待，即使 uniqueInstance 已经被实例化了。这会让线程阻塞时间过长，因此该方法有性能问题，不推荐使用。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> Singleton <span class="token function">getUniqueInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>uniqueInstance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>        uniqueInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> uniqueInstance<span class="token punctuation">;</span><span class="token punctuation">}</span>Copy to clipboardErrorCopied</code></pre><h4 id="Ⅳ-双重校验锁-线程安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅳ-双重校验锁-线程安全"><a href="#Ⅳ-双重校验锁-线程安全-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅳ-双重校验锁-线程安全" class="headerlink" title="[Ⅳ 双重校验锁-线程安全](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=Ⅳ-双重校验锁-线程安全)"></a>[Ⅳ 双重校验锁-线程安全](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=Ⅳ-双重校验锁-线程安全)</h4><p>uniqueInstance 只需要被实例化一次，之后就可以直接使用了。加锁操作只需要对实例化那部分的代码进行，只有当 uniqueInstance 没有被实例化时，才需要进行加锁。</p><p>双重校验锁先判断 uniqueInstance 是否已经被实例化，如果没有被实例化，那么才对实例化语句进行加锁。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">static</span> Singleton uniqueInstance<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getUniqueInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>uniqueInstance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>uniqueInstance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    uniqueInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> uniqueInstance<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>考虑下面的实现，也就是只使用了一个 if 语句。在 uniqueInstance == null 的情况下，如果两个线程都执行了 if 语句，那么两个线程都会进入 if 语句块内。虽然在 if 语句块内有加锁操作，但是两个线程都会执行 <code>uniqueInstance = new Singleton();</code> 这条语句，只是先后的问题，那么就会进行两次实例化。因此必须使用双重校验锁，也就是需要使用两个 if 语句：第一个 if 语句用来避免 uniqueInstance 已经被实例化之后的加锁操作，而第二个 if 语句进行了加锁，所以只能有一个线程进入，就不会出现 uniqueInstance == null 时两个线程同时进行实例化操作。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>uniqueInstance <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        uniqueInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>uniqueInstance 采用 volatile 关键字修饰也是很有必要的， <code>uniqueInstance = new Singleton();</code> 这段代码其实是分为三步执行：</p><ol><li>为 uniqueInstance 分配内存空间</li><li>初始化 uniqueInstance</li><li>将 uniqueInstance 指向分配的内存地址</li></ol><p>但是由于 JVM 具有指令重排的特性，执行顺序有可能变成 1&gt;3&gt;2。指令重排在单线程环境下不会出现问题，但是在多线程环境下会导致一个线程获得还没有初始化的实例。例如，线程 T1 执行了 1 和 3，此时 T2 调用 getUniqueInstance() 后发现 uniqueInstance 不为空，因此返回 uniqueInstance，但此时 uniqueInstance 还未被初始化。</p><p>使用 volatile 可以禁止 JVM 的指令重排，保证在多线程环境下也能正常运行。</p><h4 id="Ⅴ-静态内部类实现-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅴ-静态内部类实现"><a href="#Ⅴ-静态内部类实现-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅴ-静态内部类实现" class="headerlink" title="[Ⅴ 静态内部类实现](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=Ⅴ-静态内部类实现)"></a>[Ⅴ 静态内部类实现](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=Ⅴ-静态内部类实现)</h4><p>当 Singleton 类被加载时，静态内部类 SingletonHolder 没有被加载进内存。只有当调用 <code>getUniqueInstance()</code> 方法从而触发 <code>SingletonHolder.INSTANCE</code> 时 SingletonHolder 才会被加载，此时初始化 INSTANCE 实例，并且 JVM 能确保 INSTANCE 只被实例化一次。</p><p>这种方式不仅具有延迟初始化的好处，而且由 JVM 提供了对线程安全的支持。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Singleton INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> Singleton <span class="token function">getUniqueInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> SingletonHolder<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="Ⅵ-枚举实现-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅵ-枚举实现"><a href="#Ⅵ-枚举实现-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-Ⅵ-枚举实现" class="headerlink" title="[Ⅵ 枚举实现](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=Ⅵ-枚举实现)"></a>[Ⅵ 枚举实现](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=Ⅵ-枚举实现)</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">enum</span> Singleton <span class="token punctuation">{</span>    INSTANCE<span class="token punctuation">;</span>    <span class="token keyword">private</span> String objName<span class="token punctuation">;</span>    <span class="token keyword">public</span> String <span class="token function">getObjName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> objName<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setObjName</span><span class="token punctuation">(</span>String objName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>objName <span class="token operator">=</span> objName<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 单例测试</span>        Singleton firstSingleton <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>        firstSingleton<span class="token punctuation">.</span><span class="token function">setObjName</span><span class="token punctuation">(</span><span class="token string">"firstName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>firstSingleton<span class="token punctuation">.</span><span class="token function">getObjName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Singleton secondSingleton <span class="token operator">=</span> Singleton<span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>        secondSingleton<span class="token punctuation">.</span><span class="token function">setObjName</span><span class="token punctuation">(</span><span class="token string">"secondName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>firstSingleton<span class="token punctuation">.</span><span class="token function">getObjName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>secondSingleton<span class="token punctuation">.</span><span class="token function">getObjName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 反射获取实例测试</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            Singleton<span class="token punctuation">[</span><span class="token punctuation">]</span> enumConstants <span class="token operator">=</span> Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getEnumConstants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>Singleton enumConstant <span class="token operator">:</span> enumConstants<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>enumConstant<span class="token punctuation">.</span><span class="token function">getObjName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>firstNamesecondNamesecondNamesecondName</code></pre><p>该实现可以防止反射攻击。在其它实现中，通过 setAccessible() 方法可以将私有构造函数的访问级别设置为 public，然后调用构造函数从而实例化对象，如果要防止这种攻击，需要在构造函数中添加防止多次实例化的代码。该实现是由 JVM 保证只会实例化一次，因此不会出现上述的反射攻击。</p><p>该实现在多次序列化和序列化之后，不会得到多个实例。而其它实现需要使用 transient 修饰所有字段，并且实现序列化和反序列化的方法。</p><h3 id="Examples-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-examples"><a href="#Examples-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-examples" class="headerlink" title="[Examples](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=examples)"></a>[Examples](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=examples)</h3><ul><li>Logger Classes</li><li>Configuration Classes</li><li>Accesing resources in shared mode</li><li>Factories implemented as Singletons</li></ul><h3 id="JDK-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-jdk"><a href="#JDK-https-cyc2018-github-io-CS-Notes-notes-设计模式-单例-id-jdk" class="headerlink" title="[JDK](https://cyc2018.github.io/CS-Notes/#/notes/设计模式  - 单例?id=jdk)"></a>[JDK](<a href="https://cyc2018.github.io/CS-Notes/#/notes/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">https://cyc2018.github.io/CS-Notes/#/notes/设计模式</a>  - 单例?id=jdk)</h3><ul><li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#getRuntime()" target="_blank" rel="noopener">java.lang.Runtime#getRuntime()</a></li><li><a href="http://docs.oracle.com/javase/8/docs/api/java/awt/Desktop.html#getDesktop--" target="_blank" rel="noopener">java.awt.Desktop#getDesktop()</a></li><li>[java.lang.System#getSecurityManager()](</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模板设计模式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/mo-ban-she-ji-mo-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/mo-ban-she-ji-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="模板设计模式"><a href="#模板设计模式" class="headerlink" title="模板设计模式"></a>模板设计模式</h2><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>模板方法模式就是定义一个算法的骨架 , 而具体实现的算法延迟到子类中实现.</p><h4 id="优点和缺点"><a href="#优点和缺点" class="headerlink" title="优点和缺点"></a>优点和缺点</h4><p> A. 优点: 使用模板方法模式, 在定义算法骨架的同时, 可以灵活实现具体的算法,满足灵活多变的需求</p><p>B. 缺点 如果算法骨架 有修改的话 则需要修改抽象类</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2. 代理设计模式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/2.dai-li-she-ji-mo-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/2.dai-li-she-ji-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="代理设计模式"><a href="#代理设计模式" class="headerlink" title="代理设计模式"></a>代理设计模式</h1><blockquote><p>真实主题执行具体的业务操作，利用代理操作其他的相关业务，</p></blockquote><ul><li>比如：我去餐厅吃饭，但购买食材，做饭，洗碗，我不需要知道，我只负责吃，其他事情由餐厅代理完成</li></ul><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/uml-20200906093027230.png" alt="image-20200906093027230"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/result-20200906093520169.png" alt="image-20200906093520169"></p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> proxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：学习代理模式 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token keyword">interface</span> <span class="token class-name">IEat</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//定义核心业务标准</span>    <span class="token keyword">void</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//业务方法</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">EatReal</span> <span class="token keyword">implements</span> <span class="token class-name">IEat</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"[真实主题] 得到一份食物,而后开始品尝美味"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">EatProxy</span> <span class="token keyword">implements</span> <span class="token class-name">IEat</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> IEat eat<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">EatProxy</span><span class="token punctuation">(</span>IEat eat<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>eat<span class="token operator">=</span>eat<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>eat<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"[代理主题] 1.精心购买食材"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"[代理主题] 2.小心地处理食材"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"[代理主题] 3.收拾碗筷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        IEat eat<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">EatProxy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EatReal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        eat<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="代理设计模式结合工厂设计模式"><a href="#代理设计模式结合工厂设计模式" class="headerlink" title="代理设计模式结合工厂设计模式"></a>代理设计模式结合工厂设计模式</h1><pre class=" language-java"><code class="language-java">。。。。。<span class="token comment" spellcheck="true">//添加工厂设计代码</span><span class="token keyword">class</span> <span class="token class-name">Factory</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> IEat <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//获取IEat接口实例</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">EatProxy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EatReal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        IEat eat<span class="token operator">=</span>Factory<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//获取接口实例</span>        eat<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//调用代理方法</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1. 工厂设计模式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/1.gong-han-she-ji-mo-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/she-ji-mo-shi/1.gong-han-she-ji-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="工厂设计模式"><a href="#工厂设计模式" class="headerlink" title="工厂设计模式"></a>工厂设计模式</h1><p>接口是进行标准的实例,标准不应该与具体的子类固定在一起,为了解决代码耦合问题,通过工厂设计模式完成</p><h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ol><li>接口子类扩充时,工厂类代码造成大量重复</li><li>若有若干接口需通过工厂类获取实例,Factory需追加大量重复的static方法</li><li>一个项目可能只需要某个接口的特定子类,而这个子类往往需要利用配置文件的形式来定义,修改时也可以通过配置文件修改而更换子类,固定标记的做法可能回导致代码结构混乱</li></ol><h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><blockquote><p>定义一个Factory工厂类,在类中提供一个静态方法,返回IFood接口实例化对象</p><p>客户端在调用时,不在关注具体的IFood接口子类,只需传入类型标记就可以获取接口对象</p></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/uml-20200906090303756.png" alt="image-20200906090303756"></p><pre class=" language-java"><code class="language-java"><span class="token keyword">interface</span> <span class="token class-name">IFood</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 吃食物     */</span>    <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Bread</span> <span class="token keyword">implements</span> <span class="token class-name">IFood</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"吃面包 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Milk</span> <span class="token keyword">implements</span> <span class="token class-name">IFood</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"喝牛奶 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Factory</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 获取IFood接口实例化对象,利用此方法隐藏子类,由于Factory类没有属性,所以定义static方法     * @param className 要获取子类标记     * @return 返回指定子类对象     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> IFood <span class="token function">getInstance</span><span class="token punctuation">(</span>String className<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"bread"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Bread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"milk"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Milk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//通过工厂获取实例</span>        IFood food<span class="token operator">=</span>Factory<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"bread"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        food<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中兴java web 数据库笔试题</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/bi-shi-ti/zhong-xing-java-web-shu-ju-ku-bi-shi-ti/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/bi-shi-ti/zhong-xing-java-web-shu-ju-ku-bi-shi-ti/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>死锁</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/bing-fa-bian-cheng/si-suo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/bing-fa-bian-cheng/si-suo/</url>
      
        <content type="html"><![CDATA[<h1 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h1><h2 id="先看一下这段代码"><a href="#先看一下这段代码" class="headerlink" title="先看一下这段代码"></a>先看一下这段代码</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>concurrthread<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：死锁 * 编写人：kujin * 创建时间：2020/9/26 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeadLockDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> String A<span class="token operator">=</span><span class="token string">"A"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> String B<span class="token operator">=</span><span class="token string">"B"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">new</span> <span class="token class-name">DeadLockDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deadLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">deadLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Thread thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"thread--1 b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">{</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>利用dump线程查看 得出以下信息</p><p>thread-1 等待 lock a 持有者是 thread-0</p><p>thread-0 等待 lock a 持有者 thread-1</p><p>,哎呦我去, lock a 到底在谁拿的???</p><p>形成死循环</p><pre class=" language-verilog"><code class="language-verilog">Found one Java<span class="token operator">-</span>level deadlock<span class="token punctuation">:</span><span class="token operator">=============================</span><span class="token string">"Thread-1"</span><span class="token punctuation">:</span>  waiting to lock monitor <span class="token number">0</span>x00007f3a8c004e28 <span class="token punctuation">(</span>object <span class="token number">0</span>x00000000f0c5bb88<span class="token punctuation">,</span> a java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>  which is held by <span class="token string">"Thread-0"</span><span class="token string">"Thread-0"</span><span class="token punctuation">:</span>  waiting to lock monitor <span class="token number">0</span>x00007f3a8c0062c8 <span class="token punctuation">(</span>object <span class="token number">0</span>x00000000f0c5bbb8<span class="token punctuation">,</span> a java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span><span class="token punctuation">,</span>  which is held by <span class="token string">"Thread-1"</span>Java stack information <span class="token keyword">for</span> the threads listed above<span class="token punctuation">:</span><span class="token operator">===================================================</span><span class="token string">"Thread-1"</span><span class="token punctuation">:</span>   at com<span class="token punctuation">.</span>concurrthread<span class="token punctuation">.</span>DeadLockDemo<span class="token punctuation">.</span>lambda$deadLock$<span class="token function">1</span><span class="token punctuation">(</span>DeadLockDemo<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">33</span><span class="token punctuation">)</span>   <span class="token operator">-</span> waiting to lock <span class="token operator">&lt;</span><span class="token number">0</span>x00000000f0c5bb88<span class="token operator">></span> <span class="token punctuation">(</span>a java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span>   <span class="token operator">-</span> locked <span class="token operator">&lt;</span><span class="token number">0</span>x00000000f0c5bbb8<span class="token operator">></span> <span class="token punctuation">(</span>a java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span>   at com<span class="token punctuation">.</span>concurrthread<span class="token punctuation">.</span>DeadLockDemo$<span class="token property">$Lambda</span><span class="token property">$2</span><span class="token operator">/</span><span class="token number">303563356</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>   at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">748</span><span class="token punctuation">)</span><span class="token string">"Thread-0"</span><span class="token punctuation">:</span>   at com<span class="token punctuation">.</span>concurrthread<span class="token punctuation">.</span>DeadLockDemo<span class="token punctuation">.</span>lambda$deadLock$<span class="token function">0</span><span class="token punctuation">(</span>DeadLockDemo<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">25</span><span class="token punctuation">)</span>   <span class="token operator">-</span> waiting to lock <span class="token operator">&lt;</span><span class="token number">0</span>x00000000f0c5bbb8<span class="token operator">></span> <span class="token punctuation">(</span>a java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span>   <span class="token operator">-</span> locked <span class="token operator">&lt;</span><span class="token number">0</span>x00000000f0c5bb88<span class="token operator">></span> <span class="token punctuation">(</span>a java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>String<span class="token punctuation">)</span>   at com<span class="token punctuation">.</span>concurrthread<span class="token punctuation">.</span>DeadLockDemo$<span class="token property">$Lambda</span><span class="token property">$1</span><span class="token operator">/</span><span class="token number">471910020</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>   at java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Thread<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span>java<span class="token punctuation">:</span><span class="token number">748</span><span class="token punctuation">)</span>Found <span class="token number">1</span> deadlock<span class="token punctuation">.</span></code></pre><h2 id="避免死锁的几个常见方法"><a href="#避免死锁的几个常见方法" class="headerlink" title="避免死锁的几个常见方法"></a>避免死锁的几个常见方法</h2><ul><li><p>避免一个线程同时获取多个锁。</p></li><li><p>避免一个线程在锁内同时占用多个资源，尽量保证每个锁只占用一个资源。</p></li><li><p>尝试使用定时锁，使用lock.tryLock（timeout）来替代使用内部锁机制。</p><p>参考文章: <a href="https://www.cnblogs.com/hezhiyao/p/7637974.html" target="_blank" rel="noopener">https://www.cnblogs.com/hezhiyao/p/7637974.html</a></p></li><li><p>对于数据库锁，加锁和解锁必须在一个数据库连接里，否则会出现解锁失败的情况。</p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初识并发编程</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/bing-fa-bian-cheng/chu-shi-bing-fa-bian-cheng/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/bing-fa-bian-cheng/chu-shi-bing-fa-bian-cheng/</url>
      
        <content type="html"><![CDATA[<p>并发编程的目的是为了让程序运行得更快，但是，并不是启动更多的线程就能让程序最大限度地并发执行。在进行并发编程时，如果希望通过多线程执行任务让程序运行得更快，会面临非常多的挑战，比如上下文切换的问题、死锁的问题，以及受限于硬件和软件的资源限制问题</p><h2 id="多线程一定快吗"><a href="#多线程一定快吗" class="headerlink" title="多线程一定快吗?"></a>多线程一定快吗?</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>concurrthread<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类： * 编写人：kujin * 创建时间：2020/9/26 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcurrencyTest</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> count<span class="token operator">=</span><span class="token number">100</span><span class="token operator">*</span><span class="token number">10000</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>        <span class="token function">concurrency</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">serial</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">concurrency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>        <span class="token keyword">long</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            a <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            b<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">long</span> time <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>start<span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"currency: "</span><span class="token operator">+</span>time<span class="token operator">+</span><span class="token string">"ms,b="</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">serial</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>        <span class="token keyword">long</span> start <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    a <span class="token operator">+=</span> <span class="token number">5</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            b<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">long</span> time <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>start<span class="token punctuation">;</span>        thread<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"currency: "</span><span class="token operator">+</span>time<span class="token operator">+</span><span class="token string">"ms,b="</span><span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token number">10</span>万次    并发<span class="token operator">:</span> 48ms<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">100000</span>    串行<span class="token operator">:</span> 2ms<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">100000</span><span class="token number">1</span>亿次   并发<span class="token operator">:</span> 85ms<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">100000000</span>    串行<span class="token operator">:</span> 70ms<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">100000000</span><span class="token number">10</span>亿次    并发<span class="token operator">:</span> 428ms<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1000000000</span>    串行<span class="token operator">:</span> 770ms<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1000000000</span></code></pre><p>发现并发执行次数特别巨大时 并发才比串行快</p><p>这是因为线程有创建 和 上下文 切换 的开销</p><h2 id="如何减少上下文切换"><a href="#如何减少上下文切换" class="headerlink" title="如何减少上下文切换"></a>如何减少上下文切换</h2><ul><li><p>无锁并发编程</p><p>多线程竞争锁时 会引起上下文切换</p><p>多线程处理时 可以避免使用锁</p><p>如 将数据ID 按照</p></li><li><p>CAS算法</p></li><li><p>使用最小线程</p></li><li><p>协程</p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SimDateFormat</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/chang-yong-java-lei/simdateformat/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/chang-yong-java-lei/simdateformat/</url>
      
        <content type="html"><![CDATA[<h2 id="概括"><a href="#概括" class="headerlink" title="概括"></a>概括</h2><blockquote><p>A:DateFormat类的概述<br>            * DateFormat 是日期/时间格式化子类的抽象类，它以与语言无关的方式格式化并解析日期或时间。是抽象类，所以使用其子类SimpleDateFormat<br>        * B:SimpleDateFormat构造方法<br>            * public SimpleDateFormat()<br>            * public SimpleDateFormat(String pattern)<br>        * C:成员方法<br>            * public final String format(Date date)<br>            * public Date parse(String source)</p></blockquote><h2 id="将时间字符串转换成日期对象"><a href="#将时间字符串转换成日期对象" class="headerlink" title="将时间字符串转换成日期对象"></a>将时间字符串转换成日期对象</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//将时间字符串转换成日期对象</span>        String str <span class="token operator">=</span> <span class="token string">"2000年08月08日 08:08:08"</span><span class="token punctuation">;</span>        SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日 HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Date d <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//将时间字符串转换成日期对象</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="将日期对象转换为字符串"><a href="#将日期对象转换为字符串" class="headerlink" title="将日期对象转换为字符串"></a>将日期对象转换为字符串</h2><pre class=" language-java"><code class="language-java">Date d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//获取当前时间对象</span>        SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy/MM/dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//创建日期格式化类对象</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//将日期对象转换为字符串</span></code></pre><h2 id="获取当前时间对象"><a href="#获取当前时间对象" class="headerlink" title="获取当前时间对象"></a>获取当前时间对象</h2><pre class=" language-java"><code class="language-java">Date d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token comment" spellcheck="true">//获取当前时间对象</span>        SimpleDateFormat sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//创建日期格式化类对象</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment" spellcheck="true">//88-6-6 下午9:31</span></code></pre><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//DateFormat df = new DateFormat();                //DateFormat是抽象类,不允许实例化</span>        <span class="token comment" spellcheck="true">//DateFormat df1 = new SimpleDateFormat();</span>        DateFormat df1 <span class="token operator">=</span> DateFormat<span class="token punctuation">.</span><span class="token function">getDateInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//相当于父类引用指向子类对象,右边的方法返回一个子类对象 </span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Calendar</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/chang-yong-java-lei/calendar/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/chang-yong-java-lei/calendar/</url>
      
        <content type="html"><![CDATA[<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * * A:Calendar类的概述            * Calendar 类是一个抽象类，它为特定瞬间与一组诸如 YEAR、MONTH、DAY_OF_MONTH、HOUR 等日历字段之间的转换提供了一些方法，并为操作日历字段（例如获得下星期的日期）提供了一些方法。        * B:成员方法            * public static Calendar getInstance()            * public int get(int field)     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Calendar c <span class="token operator">=</span> Calendar<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//父类引用指向子类对象</span>        <span class="token comment" spellcheck="true">//System.out.println(c);                    //证明重写了toString方法打印了对象中所有的属性</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//通过字段获取对应的值</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Calendar c <span class="token operator">=</span> Calendar<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//父类引用指向子类对象</span>        <span class="token comment" spellcheck="true">//System.out.println(c);</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//通过字段获取年</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//通过字段后期月,但是月是从0开始编号的</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//月中的第几天</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DAY_OF_WEEK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//周日是第一天,周六是最后一天</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"年"</span> <span class="token operator">+</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token operator">+</span> <span class="token string">"月"</span> <span class="token operator">+</span> <span class="token function">getNum</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"日"</span> <span class="token operator">+</span> <span class="token function">getWeek</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DAY_OF_WEEK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * * A:Calendar类的概述            * Calendar 类是一个抽象类，它为特定瞬间与一组诸如 YEAR、MONTH、DAY_OF_MONTH、HOUR 等日历字段之间的转换提供了一些方法，并为操作日历字段（例如获得下星期的日期）提供了一些方法。        * B:成员方法            * public static Calendar getInstance()            * public int get(int field)        * C:成员方法            * public void add(int field,int amount)            * public final void set(int year,int month,int date)        * D:案例演示            * Calendar类的成员方法使用     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//demo1();</span>        Calendar c <span class="token operator">=</span> Calendar<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//父类引用指向子类对象</span>        <span class="token comment" spellcheck="true">//c.add(Calendar.MONTH, -1);                    //对指定的字段进行向前减或向后加</span>        <span class="token comment" spellcheck="true">//c.set(Calendar.YEAR, 2000);                    //修改指定字段</span>        c<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"年"</span> <span class="token operator">+</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                 <span class="token operator">+</span> <span class="token string">"月"</span> <span class="token operator">+</span> <span class="token function">getNum</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"日"</span> <span class="token operator">+</span> <span class="token function">getWeek</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>Calendar<span class="token punctuation">.</span>DAY_OF_WEEK<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*     * 将星期存储表中进行查表     * 1,返回值类型String     * 2,参数列表int week     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">getWeek</span><span class="token punctuation">(</span><span class="token keyword">int</span> week<span class="token punctuation">)</span> <span class="token punctuation">{</span>        String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"星期日"</span><span class="token punctuation">,</span><span class="token string">"星期一"</span><span class="token punctuation">,</span><span class="token string">"星期二"</span><span class="token punctuation">,</span><span class="token string">"星期三"</span><span class="token punctuation">,</span><span class="token string">"星期四"</span><span class="token punctuation">,</span><span class="token string">"星期五"</span><span class="token punctuation">,</span><span class="token string">"星期六"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">[</span>week<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*     * 如果是个数数字前面补0     * 1,返回值类型String类型     * 2,参数列表,int num     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/*if(num > 9) {            return "" + num;        }else {            return "0" + num;        }*/</span>        <span class="token keyword">return</span> num <span class="token operator">></span> <span class="token number">9</span> <span class="token operator">?</span> <span class="token string">""</span> <span class="token operator">+</span> num <span class="token operator">:</span> <span class="token string">"0"</span> <span class="token operator">+</span> num<span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多线程的实现</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/duo-xian-cheng-bian-cheng/duo-xian-cheng-de-shi-xian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/duo-xian-cheng-bian-cheng/duo-xian-cheng-de-shi-xian/</url>
      
        <content type="html"><![CDATA[<p>在java中多线程,必须有一个主线程,在定义主线程需要有要求,</p><p>这个类可以继承Thread类,实现Runnable接口或Callable接口来完成,需要实现run()方法,执行并发操作</p><h1 id="Create-Thread"><a href="#Create-Thread" class="headerlink" title="Create Thread"></a>Create Thread</h1><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> demo1<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：创建线程的方式 * 编写人：kujin * 创建时间：2020/9/10 * 修改时间：2020/9/10 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Thread thread1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">MyThread1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyThread2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//java8 函数式编程</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"java8 匿名内部类 编写线程! "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread1</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"继承Thread类，并重写run方法；"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyThread2</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"实现Runnable接口的run方法；"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>反射类和方法获取</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/fan-she-ji-zhi/fan-she-lei-he-fang-fa-huo-qu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/fan-she-ji-zhi/fan-she-lei-he-fang-fa-huo-qu/</url>
      
        <content type="html"><![CDATA[<h2 id="反射的常用方式"><a href="#反射的常用方式" class="headerlink" title="反射的常用方式"></a>反射的常用方式</h2><h3 id="通过反射获取带参数的构造方法-Constrtor"><a href="#通过反射获取带参数的构造方法-Constrtor" class="headerlink" title="通过反射获取带参数的构造方法(Constrtor)"></a><strong>通过反射获取带参数的构造方法</strong>(Constrtor)</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 获取无参构造函数 * @param aClass * @throws NoSuchMethodException * @throws InstantiationException * @throws IllegalAccessException * @throws InvocationTargetException */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getConstructor_demo2</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass<span class="token punctuation">)</span> <span class="token keyword">throws</span> NoSuchMethodException<span class="token punctuation">,</span> InstantiationException<span class="token punctuation">,</span> IllegalAccessException<span class="token punctuation">,</span> InvocationTargetException <span class="token punctuation">{</span>    Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Person person<span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    person<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    person<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**     * 获取有参构造函数     * @param aClass     * @throws NoSuchMethodException     * @throws InstantiationException     * @throws IllegalAccessException     * @throws InvocationTargetException     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getConstructor_demo1</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass<span class="token punctuation">)</span> <span class="token keyword">throws</span> NoSuchMethodException<span class="token punctuation">,</span> InstantiationException<span class="token punctuation">,</span> IllegalAccessException<span class="token punctuation">,</span> InvocationTargetException <span class="token punctuation">{</span>        Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Person person<span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"String属性参数"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span></code></pre><h3 id="通过反射获取成员变量并使用"><a href="#通过反射获取成员变量并使用" class="headerlink" title="通过反射获取成员变量并使用"></a><strong>通过反射获取成员变量并使用</strong></h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 通过反射获取Field * @param aClass * @param person * @throws NoSuchFieldException * @throws IllegalAccessException */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getField_Demo1</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass<span class="token punctuation">,</span> Person person<span class="token punctuation">)</span> <span class="token keyword">throws</span> NoSuchFieldException<span class="token punctuation">,</span> IllegalAccessException <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Field eat = aClass.getField("name");    //返回一个字段 1.该对象是public 2.在父类接口有 3.如果12不符合 NoSuchFieldException被抛出。</span>    Field name <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//获取声明的字段,即所有在类声明的字段 包括private S级别</span>    name<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//由于获取到的字段 还是private 需要对其获取access(访问)权限</span>    name<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//Field 设置 (要修改的对象, 对象内的值)</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="通过反射获取成员方法并使用-私有成员方法参考Field"><a href="#通过反射获取成员方法并使用-私有成员方法参考Field" class="headerlink" title="通过反射获取成员方法并使用(私有成员方法参考Field)"></a><strong>通过反射获取成员方法并使用(私有成员方法参考Field)</strong></h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 获取有参的内部方法 * 在学习框架时 利用反射机制 去获取 内部参数 和变量 去进行修改 达到自己想要的效果 * @param aClass * @param person * @throws NoSuchMethodException * @throws IllegalAccessException * @throws InvocationTargetException */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getMethod_demo1</span><span class="token punctuation">(</span>Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass<span class="token punctuation">,</span> Person person<span class="token punctuation">)</span> <span class="token keyword">throws</span> NoSuchMethodException<span class="token punctuation">,</span> IllegalAccessException<span class="token punctuation">,</span> InvocationTargetException <span class="token punctuation">{</span>    Method eat <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"eat"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//获取有参的方法</span>    <span class="token comment" spellcheck="true">//person.setName("kujin");</span>    eat<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">"苹果"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//执行方法(对象,方法参数)</span><span class="token punctuation">}</span></code></pre><h3 id="通过反射越过泛型检查"><a href="#通过反射越过泛型检查" class="headerlink" title="通过反射越过泛型检查"></a><strong>通过反射越过泛型检查</strong></h3><blockquote><p>ArrayList<integer>的一个对象 在这个集合中添加一个字符串数组 如何实现<br><strong>泛型</strong>只 在<strong>编译器有效</strong> 在<strong>运行时被擦除掉</strong><br>通过反射 获取ArrayList 对象 得到 add 方法 利用<strong>invoke</strong> 执行方法添加字符串类型</integer></p></blockquote><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * ArrayList&lt;Integer>的一个对象 在这个集合中添加一个字符串数组 如何实现 * 泛型只 在编译器有效 在运行时被擦除掉 * 通过反射 获取ArrayList 对象 得到 add 方法 利用invoke 执行方法添加字符串类型 */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">demo_arrayList_Reflect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">></span> list <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//获取字节码对象</span>    Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> clazz <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.util.ArrayList"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Method m<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span>Object<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span><span class="token string">"添加字符串"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="利用反射设置属性"><a href="#利用反射设置属性" class="headerlink" title="利用反射设置属性"></a>利用反射设置属性</h3><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 利用反射 设置 属性值 */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">demo_tool_Reflect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> NoSuchFieldException<span class="token punctuation">,</span> IllegalAccessException <span class="token punctuation">{</span>    Person person<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//利用反射 设置属性值</span>    <span class="token function">setProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setProperty</span><span class="token punctuation">(</span>Object o<span class="token punctuation">,</span> String name<span class="token punctuation">,</span> Object value<span class="token punctuation">)</span> <span class="token keyword">throws</span> NoSuchFieldException<span class="token punctuation">,</span> IllegalAccessException <span class="token punctuation">{</span>    Class <span class="token class-name">clazz</span><span class="token operator">=</span>o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Field f <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    f<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="通过配置文件进行反射"><a href="#通过配置文件进行反射" class="headerlink" title="通过配置文件进行反射"></a>通过配置文件进行反射</h3><p>config.properties</p><pre class=" language-properties"><code class="language-properties">com.kujin.reflect.MyThread</code></pre><p>主函数</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 通过反射 利用配置文件执行反射方法 */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">demo_proertyfile_reflect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>    BufferedReader br<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"config.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Class <span class="token class-name">clazz</span><span class="token operator">=</span>Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    MyThread myThread <span class="token operator">=</span> <span class="token punctuation">(</span>MyThread<span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//通过字节码文件 创建字节码对象</span>    myThread<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>利用反射调用的类</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyThread</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"welcome to Reflect"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="动态代理简单了解"><a href="#动态代理简单了解" class="headerlink" title="动态代理简单了解"></a>动态代理简单了解</h3><p><strong>InvocationHandler</strong>是代理实例的调用处理程序实现的接口。<br>每个代理实例都有一个关联的调用处理程序。 当一个方法是在代理实例调用，方法调用进行编码，并分发给invoke的调用处理程序的方法。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>dynamicProxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>InvocationHandler<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Proxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * DynamicProxy_Demo1 * 动态代理 * * @author kujin * 创建时间：2020/10/2 * @version 1 */</span><span class="token comment" spellcheck="true">/** * 定义用户接口 */</span><span class="token keyword">interface</span> <span class="token class-name">IUser</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 定义用户实现类 */</span><span class="token keyword">class</span> <span class="token class-name">IUserImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IUser</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"实现添加功能"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"实现删除功能"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * InvocationHandler是代理实例的调用处理程序实现的接口。 * 每个代理实例都有一个关联的调用处理程序。 当一个方法是在代理实例调用，方法调用进行编码，并分发给invoke的调用处理程序的方法。 */</span><span class="token keyword">class</span> <span class="token class-name">MyInvocationHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> Object target<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">MyInvocationHandler</span><span class="token punctuation">(</span>Object target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Object <span class="token function">invoke</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Throwable <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动态代理: 权限效验"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//执行被代理对象target 的method</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"动态代理: 日志记录"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> null<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DynamicProxy_Demo1</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        IUser user<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">IUserImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        MyInvocationHandler myInvocationHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyInvocationHandler</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 返回接口  类加载器 所有接口列表 方法调度器</span>        IUser user1<span class="token operator">=</span> <span class="token punctuation">(</span>IUser<span class="token punctuation">)</span> Proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>myInvocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>        user1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user1<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="扩展案例"><a href="#扩展案例" class="headerlink" title="扩展案例"></a>扩展案例</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>reflect<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Constructor<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>InvocationTargetException<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author kujin * 创建时间：2020/10/1 * @version 1 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectDemo</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 学习反射机制     * @param args 运行需要输入的参数数组     * @throws ClassNotFoundException 抛出的异常     * @throws IllegalAccessException     * @throws InstantiationException     * @throws NoSuchMethodException     * @throws InvocationTargetException     * 参考地址 :https://blog.csdn.net/javazejian/article/details/70768369     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> ClassNotFoundException<span class="token punctuation">,</span> IllegalAccessException<span class="token punctuation">,</span>            InstantiationException<span class="token punctuation">,</span> NoSuchMethodException<span class="token punctuation">,</span> InvocationTargetException <span class="token punctuation">{</span>        Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> clazz<span class="token operator">=</span>null<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        获取class对象的应用</span>        clazz<span class="token operator">=</span>Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.kujin.reflect.User"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------第一种方法获取 实例化默认方法 User必须无参构造方法 否则抛异常------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        User user= (User) clazz.newInstance();        //方法过时</span>        User user<span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"库金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------获取String 带参数的pulic构造函数------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cs1<span class="token operator">=</span>clazz<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        User user1<span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> cs1<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token string">"kujin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        user1<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user1 "</span><span class="token operator">+</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"--------取得指定带int和String参数构造函数,该方法是私有构造private------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//私有的构造方法</span>        Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cs2 <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//由于方法是私有的 需设置为可访问的</span>        cs2<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//创建user对象</span>        User user2<span class="token operator">=</span> <span class="token punctuation">(</span>User<span class="token punctuation">)</span> cs2<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token string">"库金"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------------------获取所有构造包含private--------------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//获取所有构造包含private</span>        Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cons<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 查看每个构造方法需要的参数</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cons<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//获取构造函数参数类型</span>            Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> clazzs<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> cons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"构造函数["</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">"]:"</span><span class="token operator">+</span>cons<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"参数类型["</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">"]:("</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> clazzs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> clazzs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>clazzs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">else</span>                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>clazzs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">User</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">,</span> String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"User{"</span> <span class="token operator">+</span>                <span class="token string">"age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态代理理解</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/fan-she-ji-zhi/dong-tai-dai-li-li-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/fan-she-ji-zhi/dong-tai-dai-li-li-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="Java-代理模式实现方式，主要有如下五种方法"><a href="#Java-代理模式实现方式，主要有如下五种方法" class="headerlink" title="Java 代理模式实现方式，主要有如下五种方法"></a>Java 代理模式实现方式，主要有如下五种方法</h2><ul><li>静态代理，工程师编辑代理类代码，实现代理模式；在编译期就生成了代理类。</li><li>基于 JDK 实现动态代理，通过jdk提供的工具方法Proxy.newProxyInstance动态构建全新的代理类(继承Proxy类，并持有InvocationHandler接口引用 )字节码文件并实例化对象返回。(jdk动态代理是由java内部的反射机制来实例化代理对象，并代理的调用委托类方法)</li><li>基于CGlib 动态代理模式 基于继承被代理类生成代理子类，不用实现接口。只需要被代理类是非final 类即可。(cglib动态代理底层是借助asm字节码技术</li><li>基于 Aspectj 实现动态代理（修改目标类的字节，织入代理的字节，在程序编译的时候 插入动态代理的字节码，不会生成全新的Class ）</li><li>基于 instrumentation 实现动态代理（修改目标类的字节码、类装载的时候动态拦截去修改，基于javaagent） <code>-javaagent:spring-instrument-4.3.8.RELEASE.jar</code> （类装载的时候 插入动态代理的字节码，不会生成全新的Class ）</li></ul><h2 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h2><ul><li>委托类 即指的是代理模式中的被代理对象</li><li>代理类 指的是生成的代表委托类的一个角色</li></ul><h2 id="静态代理实现"><a href="#静态代理实现" class="headerlink" title="静态代理实现"></a>静态代理实现</h2><p>静态代理是代理类在编译期间就创建好了，不是编译器生成的代理类，而是手动创建的类。在编译时就已经将接口，被代理类，代理类等确定下来。，软件设计中所指的代理一般是指静态代理，也就是在代码中显式指定的代理。</p><h3 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h3><ul><li>委托类和代理类之间的约束接口Cat</li><li>约束接口实现类 Lion，实现 Cat 接口，委托角色</li><li>代理类实现 FeederProxy，实现Cat 接口，并含有一个 Cat接口引用属性。 代理角色，代理 cat接口属性引用实例的行为并可以新增公共逻辑</li></ul><h4 id="Cat接口"><a href="#Cat接口" class="headerlink" title="Cat接口"></a>Cat接口</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>staticproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @author PengRong* @package org.vincent.proxy.staticproxy* @date 2018/12/15 - 17:12* @ProjectName JavaAopLearning* @Description: 静态代理类接口, 委托类和代理类都需要实现的接口规范。* 定义了一个猫科动物的两个行为接口，吃东西，奔跑。* 作为代理类 和委托类之间的约束接口*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> String <span class="token function">eatFood</span><span class="token punctuation">(</span>String foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> boolean <span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="委托类-Lion"><a href="#委托类-Lion" class="headerlink" title="委托类 Lion"></a>委托类 Lion</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>staticproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @author PengRong* @package org.vincent.proxy.staticproxy* @date 2018/12/15 - 17:15* @ProjectName JavaAopLearning* @Description: 狮子 实现了猫科动物接口Cat， 并实现了具体的行为。作为委托类实现*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">implements</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> int runningSpeed<span class="token punctuation">;</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> int <span class="token function">getRunningSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> runningSpeed<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRunningSpeed</span><span class="token punctuation">(</span>int runningSpeed<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>runningSpeed <span class="token operator">=</span> runningSpeed<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Lion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token punctuation">}</span>    @Override   <span class="token keyword">public</span> String <span class="token function">eatFood</span><span class="token punctuation">(</span>String foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>       String eat <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" Lion eat food. foodName = "</span> <span class="token operator">+</span> foodName<span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>eat<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> eat<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    @Override   <span class="token keyword">public</span> boolean <span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" Lion is running . Speed :"</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>runningSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="代理类角色-FeederProxy"><a href="#代理类角色-FeederProxy" class="headerlink" title="代理类角色(FeederProxy)"></a>代理类角色(FeederProxy)</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>staticproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @author PengRong* @package org.vincent.proxy.staticproxy* @date 2018/12/15 - 17:19* @ProjectName JavaAopLearning* @Description: 饲养员 实现Cat接口，作为静态代理类实现。代理狮子的行为。* 代理类中可以新增一些其他行为，在实践中主要做的是参数校验的功能。*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeederProxy</span> <span class="token keyword">implements</span> <span class="token class-name">Cat</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Cat cat<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">FeederProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">FeederProxy</span><span class="token punctuation">(</span>Cat cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>cat <span class="token keyword">instanceof</span> <span class="token class-name">Cat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cat <span class="token operator">=</span> cat<span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCat</span><span class="token punctuation">(</span>Cat cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>cat <span class="token keyword">instanceof</span> <span class="token class-name">Cat</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>cat <span class="token operator">=</span> cat<span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    @Override   <span class="token keyword">public</span> String <span class="token function">eatFood</span><span class="token punctuation">(</span>String foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"proxy Lion exec eatFood "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> cat<span class="token punctuation">.</span><span class="token function">eatFood</span><span class="token punctuation">(</span>foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>    @Override   <span class="token keyword">public</span> boolean <span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"proxy Lion exec running."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> cat<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="静态代理类测试"><a href="#静态代理类测试" class="headerlink" title="静态代理类测试"></a>静态代理类测试</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>staticproxy<span class="token punctuation">.</span>Cat<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>staticproxy<span class="token punctuation">.</span>FeederProxy<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>staticproxy<span class="token punctuation">.</span>Lion<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @author PengRong* @package org.vincent.proxy* @date 2018/12/15 - 18:31* @ProjectName JavaAopLearning* @Description: 静态代理类测试*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">staticProxyTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>       Lion lion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       lion<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"狮子 小王"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       lion<span class="token punctuation">.</span><span class="token function">setRunningSpeed</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**        * new 静态代理类，静态代理类在编译前已经创建好了，和动态代理的最大区别点        */</span>       Cat proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FeederProxy</span><span class="token punctuation">(</span>lion<span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" -- "</span> <span class="token operator">+</span> proxy<span class="token punctuation">.</span><span class="token function">eatFood</span><span class="token punctuation">(</span><span class="token string">"水牛"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       proxy<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>静态代理很好的诠释了代理设计模式，代理模式最主要的就是有一个公共接口（Cat），一个委托类（Lion），一个代理类（FeederProxy）,代理类持有委托类的实例，代为执行具体类实例方法。 上面说到，代理模式就是在访问实际对象时引入一定程度的间接性，因为这种间接性，可以附加多种用途。这里的间接性就是指客户端不直接调用实际对象的方法，客户端依赖公共接口并使用代理类。 那么我们在代理过程中就可以加上一些其他用途。 就这个例子来说在 eatFood方法调用中，代理类在调用具体实现类之前添加<code>System.out.println("proxy Lion exec eatFood ");</code>语句 就是添加间接性带来的收益。代理类存在的意义是为了增加一些公共的逻辑代码。</p><h2 id="动态代理类-基于接口实现"><a href="#动态代理类-基于接口实现" class="headerlink" title="动态代理类(基于接口实现)"></a>动态代理类(基于接口实现)</h2><p>静态代理是代理类在代码运行前已经创建好，并生成class文件；动态代理类 是代理类在程序运行时创建的代理模式。</p><p>动态代理类的代理类并不是在Java代码中定义的，而是在运行时根据我们在Java代码中的“指示”动态生成的。相比于静态代理， 动态代理的优势在于可以很方便的对代理类的函数进行统一的处理，而不用修改每个代理类中的方法。 想想你有100个静态代理类，现在有一个需求，每个代理类都需要新增一个处理逻辑，你需要打开100个代理类在每个代理方法里面新增处理逻辑吗？ 有或者代理类有5个方法，每个方法都需要新增一个处理逻辑， 你需要在每个方法都手动新增处理逻辑吗？ 想想就挺无趣的。动态代理类帮你一键搞定。</p><h3 id="动态代理类涉及角色"><a href="#动态代理类涉及角色" class="headerlink" title="动态代理类涉及角色"></a>动态代理类涉及角色</h3><ul><li>委托类和代理类实现的公共接口(Person.java)</li><li>实现公共接口的具体委托类(SoftwareEngineer.java)</li><li>InvocationHandler接口被Proxy类回调处理，一般实现 InvocationHandler 接口的类具有委托类引用，接口方法 invoke 中添加公共代码并调用委托类的接口方法。(PersonInvocationHandler.java)</li><li>JDK提供生成动态代理类的核心类Proxy ( JDK 提供的Proxy.java)</li></ul><h3 id="基于JDK技术-动态代理类技术核心-Proxy类和一个-InvocationHandler-接口"><a href="#基于JDK技术-动态代理类技术核心-Proxy类和一个-InvocationHandler-接口" class="headerlink" title="基于JDK技术 动态代理类技术核心 Proxy类和一个 InvocationHandler 接口"></a>基于JDK技术 动态代理类技术核心 Proxy类和一个 InvocationHandler 接口</h3><p>java的java.lang.reflect包下提供了Proxy类和一个 InvocationHandler 接口，这个类Proxy定义了生成JDK动态代理类的方法 <code>getProxyClass(ClassLoader loader,Class&lt;?&gt;... interfaces)</code>生成动态代理类,返回class实例代表一个class文件。可以保存该 class 文件查看jdk生成的代理类文件长什么样</p><p>该生成的动态代理类继承Proxy类，(重要特性) ，并实现公共接口。</p><p>InvocationHandler这个接口 是被动态代理类回调的接口，我们所有需要增加的针对委托类的统一处理逻辑都增加到invoke 方法里面在调用委托类接口方法之前或之后 结束战斗。</p><h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><h5 id="公共接口"><a href="#公共接口" class="headerlink" title="公共接口"></a>公共接口</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** Created by PengRong on 2018/12/25.* 创建Person 接口 用于定义 委托类和代理类之间的约束行为*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    *    * @param name 人名    * @param dst 工作目的地    */</span>   <span class="token keyword">void</span> <span class="token function">goWorking</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> String dst<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**    * 获取名称    * @return    */</span>   String <span class="token function">getName</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**    * 设置名称    * @param name    */</span>   <span class="token keyword">void</span>  <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h5 id="具体实现类，等下被委托，被代理的类-SoftwareEngineer-java"><a href="#具体实现类，等下被委托，被代理的类-SoftwareEngineer-java" class="headerlink" title="具体实现类，等下被委托，被代理的类 SoftwareEngineer.java"></a>具体实现类，等下被委托，被代理的类 SoftwareEngineer.java</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** Created by PengRong on 2018/12/25.* 动态代理委托类实现， 实现接口 Person。 被动态生成的代理类代理*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SoftwareEngineer</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>    <span class="token keyword">public</span>  <span class="token function">SoftwareEngineer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">public</span>  <span class="token function">SoftwareEngineer</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">private</span>  String name<span class="token punctuation">;</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    @Override   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">goWorking</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> String dst<span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name ="</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">" ， 去 "</span><span class="token operator">+</span>dst <span class="token operator">+</span><span class="token string">" 工作"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="InvocationHandler-接口实现-PersonInvocationHandler-java"><a href="#InvocationHandler-接口实现-PersonInvocationHandler-java" class="headerlink" title="InvocationHandler 接口实现 PersonInvocationHandler.java"></a>InvocationHandler 接口实现 PersonInvocationHandler.java</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>InvocationHandler<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** Created by PengRong on 2018/12/25.* PersonInvocationHandler 类 实现InvocationHandler接口，这个类中持有一个被代理对象(委托类)的实例target。该类别JDK Proxy类回调* InvocationHandler 接口中有一个invoke方法，当一个代理实例的方法被调用时，代理方法将被编码并分发到 InvocationHandler接口的invoke方法执行。*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PersonInvocationHandler</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * 被代理对象引用，invoke 方法里面method 需要使用这个 被代理对象    */</span>   T target<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">PersonInvocationHandler</span><span class="token punctuation">(</span>T target<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 在    * @param proxy  代表动态生成的 动态代理 对象实例    * @param method 代表被调用委托类的接口方法，和生成的代理类实例调用的接口方法是一致的，它对应的Method 实例    * @param args   代表调用接口方法对应的Object参数数组，如果接口是无参，则为null； 对于原始数据类型返回的他的包装类型。    * @return    * @throws Throwable    */</span>   @Override   <span class="token keyword">public</span> Object <span class="token function">invoke</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws Throwable <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/**        * 在转调具体目标对象之前，可以执行一些功能处理        */</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"被动态代理类回调执行, 代理类 proxyClass ="</span><span class="token operator">+</span>proxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" 方法名: "</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"方法. 方法返回类型："</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>       <span class="token operator">+</span><span class="token string">" 接口方法入参数组: "</span><span class="token operator">+</span><span class="token punctuation">(</span>args <span class="token operator">==</span><span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">"null"</span> <span class="token punctuation">:</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**        * 代理过程中插入监测方法,计算该方法耗时        */</span>       MonitorUtil<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 调用呗代理对象的真实方法，*/</span>       Object result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>       MonitorUtil<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="PersonInvocationHandler-invoke-方法中添加的公共代码，这里简单以统计方法执行时间为逻辑"><a href="#PersonInvocationHandler-invoke-方法中添加的公共代码，这里简单以统计方法执行时间为逻辑" class="headerlink" title="PersonInvocationHandler invoke 方法中添加的公共代码，这里简单以统计方法执行时间为逻辑"></a>PersonInvocationHandler invoke 方法中添加的公共代码，这里简单以统计方法执行时间为逻辑</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** Created by PengRong on 2018/12/25.* 方法用时监控类*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MonitorUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> ThreadLocal<span class="token operator">&lt;</span>Long<span class="token operator">></span> tl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       tl<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 结束时打印耗时    * @param methodName 方法名    */</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">finish</span><span class="token punctuation">(</span>String methodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        long finishTime <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>methodName <span class="token operator">+</span> <span class="token string">"方法执行耗时"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>finishTime <span class="token operator">-</span> tl<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="最后的是-怎么创建代理类"><a href="#最后的是-怎么创建代理类" class="headerlink" title="最后的是 怎么创建代理类"></a>最后的是 怎么创建代理类</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>jdkdynamicProxy<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>Person<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>PersonInvocationHandler<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>SoftwareEngineer<span class="token punctuation">;</span><span class="token keyword">import</span> sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>ProxyGenerator<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileOutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Constructor<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Field<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>InvocationHandler<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Proxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span>Path<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span>Paths<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Properties<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** 动态代理类测试* Created by PengRong on 2018/12/25.*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdkDynamicProxyTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 打开保存JDK动态代理生成的类文件</span>       <span class="token function">saveGeneratedJdkProxyFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**        * 第一种方法: 通过 Proxy.newProxyInstance 方法 获取代理对象        */</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------------第一种创建代理类方法--------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//创建一个实例对象，这个对象是被代理的对象，委托类</span>       Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SoftwareEngineer</span><span class="token punctuation">(</span><span class="token string">"Vincent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//创建一个与代理类相关联的InvocationHandler,每一个代理类都有一个关联的 InvocationHandler，并将代理类引用传递进去</span>       InvocationHandler Handler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonInvocationHandler</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//创建一个 代理对象 personProxy 来代理 person，创建的代理对象的每个执行方法都会被替换执行Invocation接口中的invoke方法</span>       Person personProxy <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> Proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Handler<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 代理类信息 */</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"package = "</span> <span class="token operator">+</span> personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" SimpleName = "</span> <span class="token operator">+</span> personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" name ="</span> <span class="token operator">+</span> personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" CanonicalName = "</span> <span class="token operator">+</span>                <span class="token string">""</span> <span class="token operator">+</span> personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCanonicalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 实现的接口 Interfaces = "</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>                <span class="token string">" superClass = "</span> <span class="token operator">+</span> personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" methods ="</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>personProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 通过 代理类 执行 委托类的代码逻辑</span>       personProxy<span class="token punctuation">.</span><span class="token function">goWorking</span><span class="token punctuation">(</span>personProxy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"深圳"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-------------------第二种创建代理类方法--------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**        *  动态代理对象步骤        *      1、 创建一个与代理对象相关联的 InvocationHandler，以及真实的委托类实例        *      2、Proxy类的getProxyClass静态方法生成一个动态代理类stuProxyClass，该类继承Proxy类，实现 Person.java接口；JDK动态代理的特点是代理类必须继承Proxy类        *      3、通过代理类 proxyClass 获得他的带InvocationHandler 接口的构造函数 ProxyConstructor        *      4、通过 构造函数实例 ProxyConstructor 实例化一个代理对象，并将  InvocationHandler 接口实例传递给代理类。        */</span>       <span class="token comment" spellcheck="true">// 1、创建 InvocationHandler 实例并设置代理的目标类对象</span>       Person persontwo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SoftwareEngineer</span><span class="token punctuation">(</span><span class="token string">"Vincent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       InvocationHandler Handlertwo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PersonInvocationHandler</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span>persontwo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2 创建代理类,是一个字节码文件, 把 proxyClass 保存起来就能看到 他继承Proxy 类，实现Person接口</span>       Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> proxyClass <span class="token operator">=</span> Proxy<span class="token punctuation">.</span><span class="token function">getProxyClass</span><span class="token punctuation">(</span>Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 代理类信息 */</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"package = "</span> <span class="token operator">+</span> proxyClass<span class="token punctuation">.</span><span class="token function">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" SimpleName = "</span> <span class="token operator">+</span> proxyClass<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" name ="</span> <span class="token operator">+</span> proxyClass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" CanonicalName = "</span> <span class="token operator">+</span>                <span class="token string">""</span> <span class="token operator">+</span> proxyClass<span class="token punctuation">.</span><span class="token function">getCanonicalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 实现的接口 Interfaces = "</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>proxyClass<span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span>                <span class="token string">" superClass = "</span> <span class="token operator">+</span> proxyClass<span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" methods ="</span> <span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>proxyClass<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3、  通过 proxyClass 获得 一个带有InvocationHandler参数的构造器constructor</span>       Constructor<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> ProxyConstructor <span class="token operator">=</span> proxyClass<span class="token punctuation">.</span><span class="token function">getConstructor</span><span class="token punctuation">(</span>InvocationHandler<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 4、通过构造器创建一个  动态代理类 实例</span>       Person stuProxy <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> ProxyConstructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>Handlertwo<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 检测生成的类是否是代理类 */</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"stuProxy isProxy "</span><span class="token operator">+</span>Proxy<span class="token punctuation">.</span><span class="token function">isProxyClass</span><span class="token punctuation">(</span>stuProxy<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 获取 代理类关联的 InvocationHandler 是哪个*/</span>       InvocationHandler handlerObject <span class="token operator">=</span> Proxy<span class="token punctuation">.</span><span class="token function">getInvocationHandler</span><span class="token punctuation">(</span>stuProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>handlerObject<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       stuProxy<span class="token punctuation">.</span><span class="token function">goWorking</span><span class="token punctuation">(</span>stuProxy<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"广州"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 保存代理類</span>       <span class="token function">saveClass</span><span class="token punctuation">(</span><span class="token string">"$PersonProxy0"</span><span class="token punctuation">,</span> proxyClass<span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"D:/123/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 生成代理类 class 并保持到文件中    *    * @param className  生成的代理类名称    * @param interfaces 代理类需要实现的接口    * @param pathdir    代理类保存的目录路径,以目录分隔符结尾    */</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">saveClass</span><span class="token punctuation">(</span>String className<span class="token punctuation">,</span> Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> interfaces<span class="token punctuation">,</span> String pathdir<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/**        * 第一个参数是 代理类 名 。        * 第二个参数是 代理类需要实现的接口        */</span>       byte<span class="token punctuation">[</span><span class="token punctuation">]</span> classFile <span class="token operator">=</span> ProxyGenerator<span class="token punctuation">.</span><span class="token function">generateProxyClass</span><span class="token punctuation">(</span>className<span class="token punctuation">,</span> interfaces<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/**        * 如果目录不存在就新建所有子目录        */</span>       Path path1 <span class="token operator">=</span> Paths<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>pathdir<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>path1<span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           path1<span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       String path <span class="token operator">=</span> pathdir <span class="token operator">+</span> className <span class="token operator">+</span> <span class="token string">".class"</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span>FileOutputStream fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>classFile<span class="token punctuation">)</span><span class="token punctuation">;</span>           fos<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"代理类class文件写入成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>           System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"写文件错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 设置保存Java动态代理生成的类文件。    *    * @throws Exception    */</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">saveGeneratedJdkProxyFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>       Field field <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"props"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       Properties props <span class="token operator">=</span> <span class="token punctuation">(</span>Properties<span class="token punctuation">)</span> field<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"sun.misc.ProxyGenerator.saveGeneratedFiles"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="解析JDK生成的动态代理类"><a href="#解析JDK生成的动态代理类" class="headerlink" title="解析JDK生成的动态代理类"></a>解析JDK生成的动态代理类</h4><p>saveGeneratedJdkProxyFiles方法 打开了存储jdk生成的动态代理类 以 接口方法 goWorking 为例讲解</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//// Source code recreated from a .class file by IntelliJ IDEA// (powered by Fernflower decompiler)//package com.sun.proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;import java.lang.reflect.UndeclaredThrowableException;import org.vincent.proxy.dynamicproxy.Person;public final class $Proxy0 extends Proxy implements Person {    private static Method m1;    private static Method m4;    private static Method m3;    private static Method m2;    private static Method m5;    private static Method m0;    public $Proxy0(InvocationHandler var1) throws  {        super(var1);</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> final boolean <span class="token function">equals</span><span class="token punctuation">(</span>Object var1<span class="token punctuation">)</span> throws  <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m1<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>var1<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">booleanValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> <span class="token operator">|</span> Error var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> var3<span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var4<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>var4<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> final <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String var1<span class="token punctuation">)</span> throws  <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">super</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m4<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>var1<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> <span class="token operator">|</span> Error var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> var3<span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var4<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>var4<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> final String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws  <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token punctuation">(</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> <span class="token operator">|</span> Error var2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> var2<span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>var3<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> final String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws  <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m2<span class="token punctuation">,</span> <span class="token punctuation">(</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> <span class="token operator">|</span> Error var2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> var2<span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>var3<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**   * 对接口  goWorking 的调用 转变成   super.h.invoke(this, m5, new Object[]{var1, var2}); 调用。   * h 就是Proxy.java类的一个 InvocationHandler 接口 属性，   * 我们在创建 动态代理类实例时候都必须 传一个 InvocationHandler 接口的实例过去。 这里就是刚才我们定义的 PersonInvocationHandler 。   * 回到过后是不是就回到了 PersonInvocationHandler.invoke方法里面，所以 PersonInvocationHandler 是我们生成的动态代理类的拦截器，拦截所有方法调用。   */</span>   <span class="token keyword">public</span> final <span class="token keyword">void</span> <span class="token function">goWorking</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> String var2<span class="token punctuation">)</span> throws  <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">super</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m5<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>var1<span class="token punctuation">,</span> var2<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> <span class="token operator">|</span> Error var4<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> var4<span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var5<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>var5<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> final int <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws  <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span><span class="token keyword">super</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m0<span class="token punctuation">,</span> <span class="token punctuation">(</span>Object<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RuntimeException</span> <span class="token operator">|</span> Error var2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> var2<span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UndeclaredThrowableException</span><span class="token punctuation">(</span>var3<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token comment" spellcheck="true">/*** 静态代码块，根据动态代理实现的公共接口类接口方法 获取到所有接口方法 的 Method 实例*/</span>   <span class="token keyword">static</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>           m1 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"equals"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           m4 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"org.vincent.proxy.dynamicproxy.Person"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"setName"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.String"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           m3 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"org.vincent.proxy.dynamicproxy.Person"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"getName"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           m2 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"toString"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           m5 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"org.vincent.proxy.dynamicproxy.Person"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"goWorking"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.String"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.String"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           m0 <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"java.lang.Object"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"hashCode"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchMethodException</span> var2<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchMethodError</span><span class="token punctuation">(</span>var2<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoClassDefFoundError</span><span class="token punctuation">(</span>var3<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>Jdk为我们的生成了一个叫$Proxy0（这个名字后面的0是编号，有多个代理类会一次递增）的代理类，这个类文件时默认不会保存在文件，放在内存中的，我们在创建代理对象时，就是通过反射获得这个类的构造方法，然后创建代理对象实例。通过对这个生成的代理类源码的查看，我们很容易能看出，动态代理实现的具体过程。</p><p>我们可以对 InvocationHandler 看做一个中介类，中介类持有一个被代理对象，被Proxy类回调。在invoke方法中调用了被代理对象的相应方法。通过聚合方式持有被代理对象的引用，把客户端对invoke的调用最终都转为对被代理对象的调用。</p><p>客户端代码通过代理类引用调用接口方法时，通过代理类关联的中介类对象引用来调用中介类对象的invoke方法，从而达到代理执行被代理对象的方法。也就是说，动态代理Proxy类提供了模板实现，对外提供扩展点，外部通过实现InvocationHandler接口将被代理类纳入JDK代理类Proxy。</p><h4 id="一个典型的基于JDK动态代理创建对象过程可分为以下四个步骤："><a href="#一个典型的基于JDK动态代理创建对象过程可分为以下四个步骤：" class="headerlink" title="一个典型的基于JDK动态代理创建对象过程可分为以下四个步骤："></a>一个典型的基于JDK动态代理创建对象过程可分为以下四个步骤：</h4><p>1、通过实现InvocationHandler接口创建自己的调用处理器 IvocationHandler handler = new InvocationHandlerImpl(…);</p><p>2、通过为Proxy类指定ClassLoader对象和一组interface代理类需要实现的接口，创建动态代理类类文件，默认JDK并不会保存这个文件到文件中；可以保存起来观察生成的代理类结构<code>Class clazz = Proxy.getProxyClass(classLoader,new Class[]{...});</code></p><p>3、通过上面新建的代理clazz的反射机制获取动态代理类的一个构造函数，其构造函数入参类型是调用处理器接口(<code>IvocationHandler</code>)类型 <code>Constructor constructor = clazz.getConstructor(new Class[]{InvocationHandler.class});</code></p><p>4、通过构造函数实例创建代理类实例，此时需将调用处理器对象作为参数被传入 Interface Proxy = (Interface)constructor.newInstance(new Object[] (handler)); 为了简化对象创建过程，Proxy类中的newInstance工具方法封装了2~4，只需两步即可完成代理对象的创建。</p><h4 id="JDK动态代理特点总结"><a href="#JDK动态代理特点总结" class="headerlink" title="JDK动态代理特点总结"></a>JDK动态代理特点总结</h4><ul><li>生成的代理类：$Proxy0 extends Proxy implements Person，我们看到代理类继承了Proxy类，Java的继承机制决定了JDK动态代理类们无法实现对 类 的动态代理。所以也就决定了java动态代理只能对接口进行代理，</li><li>每个生成的动态代理实例都会关联一个调用处理器对象，可以通过 Proxy 提供的静态方法 getInvocationHandler 去获得代理类实例的调用处理器对象。在代理类实例上调用其代理的接口中所声明的方法时，这些方法最终都会由调用处理器的 invoke 方法执行</li><li>代理类的根类 java.lang.Object 中有三个方法也同样会被分派到调用处理器的 invoke 方法执行，它们是 hashCode，equals 和 toString，可能的原因有：一是因为这些方法为 public 且非 final 类型，能够被代理类覆盖； 二是因为这些方法往往呈现出一个类的某种特征属性，具有一定的区分度，所以为了保证代理类与委托类对外的一致性，这三个方法也应该被调用处理器分派到委托类执行。</li></ul><h4 id="JDK动态代理不足"><a href="#JDK动态代理不足" class="headerlink" title="JDK动态代理不足"></a>JDK动态代理不足</h4><p>JDK动态代理的代理类字节码在创建时，需要实现业务实现类所实现的接口作为参数。如果业务实现类是没有实现接口而是直接定义业务方法的话，就无法使用JDK动态代理了。(JDK动态代理重要特点是代理接口) 并且，如果业务实现类中新增了接口中没有的方法，这些方法是无法被代理的（因为无法被调用）。</p><p>动态代理只能对接口产生代理，不能对类产生代理</p><h3 id="基于CGlib-技术动态代理代理类实现-基于继承"><a href="#基于CGlib-技术动态代理代理类实现-基于继承" class="headerlink" title="基于CGlib 技术动态代理代理类实现 (基于继承)"></a>基于CGlib 技术动态代理代理类实现 (基于继承)</h3><p>Cglib是针对类来实现代理的，他的原理是对代理的目标类生成一个子类，并覆盖其中方法实现增强，因为底层是基于创建被代理类的一个子类，所以它避免了JDK动态代理类的缺陷。</p><p>但因为采用的是继承，所以不能对final修饰的类进行代理。final修饰的类不可继承。</p><h4 id="导入maven-依赖"><a href="#导入maven-依赖" class="headerlink" title="导入maven 依赖"></a>导入maven 依赖</h4><p>cglib 是基于asm 字节修改技术。导入 cglib 会间接导入 asm, ant, ant-launcher 三个jar 包。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> cglib 动态代理依赖 begin <span class="token operator">--</span><span class="token operator">></span> <span class="token operator">&lt;</span>dependency<span class="token operator">></span>   <span class="token operator">&lt;</span>groupId<span class="token operator">></span>cglib<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>   <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>cglib<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>   <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">3.2</span><span class="token punctuation">.</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> cglib 动态代理依赖 stop <span class="token operator">--</span><span class="token operator">></span></code></pre><h4 id="业务类实现"><a href="#业务类实现" class="headerlink" title="业务类实现"></a>业务类实现</h4><p>cglib是针对类来实现代理的，原理是对指定的业务类生成他的一个子类，并覆盖其中的业务方法来实现代理。因为采用的是继承，所以不能对final修饰的类进行代理。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>cglibproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.proxy.cglibproxy &lt;br/>* @Description： Cglib 代理模式中 被代理的委托类 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-17:55 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> String  <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"wang wang wang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"Dog .."</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="方法拦截器-实现-MethodInterceptor-接口"><a href="#方法拦截器-实现-MethodInterceptor-接口" class="headerlink" title="方法拦截器 实现 MethodInterceptor 接口"></a>方法拦截器 实现 MethodInterceptor 接口</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>cglibproxy<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>Enhancer<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>MethodInterceptor<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>MethodProxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.proxy.cglibproxy &lt;br/>* @Description： Cglib 方法拦截器,不用依赖被代理业务类的引用。  &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-17:56 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CglibMethodInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * 用于生成 Cglib 动态代理类工具方法    * @param target 代表需要 被代理的 委托类的 Class 对象    * @return    */</span>   <span class="token keyword">public</span> Object <span class="token function">CglibProxyGeneratory</span><span class="token punctuation">(</span>Class <span class="token class-name">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">/** 创建cglib 代理类 start */</span>       <span class="token comment" spellcheck="true">// 创建加强器，用来创建动态代理类</span>       Enhancer enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 为代理类指定需要代理的类，也即是父类</span>       enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 设置方法拦截器回调引用，对于代理类上所有方法的调用，都会调用CallBack，而Callback则需要实现intercept() 方法进行拦截</span>       enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 获取动态代理类对象并返回</span>       <span class="token keyword">return</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 创建cglib 代理类 end */</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 功能主要是在调用业务类方法之前 之后添加统计时间的方法逻辑.    * intercept 因为  具有 MethodProxy proxy 参数的原因 不再需要代理类的引用对象了,直接通过proxy 对象访问被代理对象的方法(这种方式更快)。    * 当然 也可以通过反射机制，通过 method 引用实例    Object result = method.invoke(target, args); 形式反射调用被代理类方法，    * target 实例代表被代理类对象引用, 初始化 CglibMethodInterceptor 时候被赋值 。但是Cglib不推荐使用这种方式    * @param obj    代表Cglib 生成的动态代理类 对象本身    * @param method 代理类中被拦截的接口方法 Method 实例    * @param args   接口方法参数    * @param proxy  用于调用父类真正的业务类方法。可以直接调用被代理类接口方法    * @return    * @throws Throwable    */</span>   @Override   <span class="token keyword">public</span> Object <span class="token function">intercept</span><span class="token punctuation">(</span>Object obj<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> MethodProxy proxy<span class="token punctuation">)</span> throws Throwable <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"before"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       MonitorUtil<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       Object result <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//Object result = method.invoke(target, args);</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"after"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       MonitorUtil<span class="token punctuation">.</span><span class="token function">finish</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="一个切面，用于在方法拦截器中intercept-方法中调用真正业务方法之前-之后处理逻辑"><a href="#一个切面，用于在方法拦截器中intercept-方法中调用真正业务方法之前-之后处理逻辑" class="headerlink" title="一个切面，用于在方法拦截器中intercept 方法中调用真正业务方法之前 之后处理逻辑"></a>一个切面，用于在方法拦截器中intercept 方法中调用真正业务方法之前 之后处理逻辑</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>cglibproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** Created by PengRong on 2018/12/25.* 方法用时监控类,作为一个切面 ，具有两个方法*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MonitorUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> ThreadLocal<span class="token operator">&lt;</span>Long<span class="token operator">></span> tl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       tl<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 结束时打印耗时    * @param methodName 方法名    */</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">finish</span><span class="token punctuation">(</span>String methodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>        long finishTime <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>methodName <span class="token operator">+</span> <span class="token string">"方法执行耗时"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>finishTime <span class="token operator">-</span> tl<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="Cglib测试类"><a href="#Cglib测试类" class="headerlink" title="Cglib测试类"></a>Cglib测试类</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>cglibproxy<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>core<span class="token punctuation">.</span>DebuggingClassWriter<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>Enhancer<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Field<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Properties<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.proxy.cglibproxy &lt;br/>* @Description： TODO &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-18:05 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CglibTest</span> <span class="token punctuation">{</span>    @Test   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCglib</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user.dir"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 开启 保存cglib生成的动态代理类类文件*/</span>       <span class="token function">saveGeneratedCGlibProxyFiles</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user.dir"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 第一种方法: 创建cglib 代理类 start */</span>       <span class="token comment" spellcheck="true">// 创建加强器，用来创建动态代理类</span>       Enhancer enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 为代理类指定需要代理的类，也即是父类</span>       enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>Dog<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// new 一个新的方法拦截器</span>       CglibMethodInterceptor cglibMethodInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CglibMethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 设置方法拦截器回调引用，对于代理类上所有方法的调用，都会调用CallBack，而Callback则需要实现intercept() 方法进行拦截</span>       enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span>cglibMethodInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 获取动态代理类对象并返回</span>       Dog dog <span class="token operator">=</span> <span class="token punctuation">(</span>Dog<span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 创建cglib 代理类 end */</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 对于上面这几步，可以新增一个工具方法 放置在 CglibMethodInterceptor 里面；也就有了第二种方法</span>       <span class="token comment" spellcheck="true">// new 一个新的方法拦截器，该拦截器还顺带一个用于创建代理类的工具方法。看起来简单很多</span>       cglibMethodInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CglibMethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       dog <span class="token operator">=</span> <span class="token punctuation">(</span>Dog<span class="token punctuation">)</span> cglibMethodInterceptor<span class="token punctuation">.</span><span class="token function">CglibProxyGeneratory</span><span class="token punctuation">(</span>Dog<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**    * 设置保存Cglib代理生成的类文件。    *    * @throws Exception    */</span>   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveGeneratedCGlibProxyFiles</span><span class="token punctuation">(</span>String dir<span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>       Field field <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"props"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       Properties props <span class="token operator">=</span> <span class="token punctuation">(</span>Properties<span class="token punctuation">)</span> field<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>DebuggingClassWriter<span class="token punctuation">.</span>DEBUG_LOCATION_PROPERTY<span class="token punctuation">,</span> dir<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//dir为保存文件路径</span>       props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"net.sf.cglib.core.DebuggingClassWriter.traceEnabled"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="Cglib-总结"><a href="#Cglib-总结" class="headerlink" title="Cglib 总结"></a>Cglib 总结</h4><ul><li>CGlib可以传入接口也可以传入普通的类，接口使用实现的方式,普通类使用会使用继承的方式生成代理类.</li><li>由于是继承方式,如果是 static方法,private方法,final方法等描述的方法是不能被代理的</li><li>做了方法访问优化，使用建立方法索引的方式避免了传统JDK动态代理需要通过Method方法反射调用.</li><li>提供callback 和filter设计，可以灵活地给不同的方法绑定不同的callback。编码更方便灵活。</li><li>CGLIB会默认代理Object中equals,toString,hashCode,clone等方法。比JDK代理多了clone。</li></ul><h2 id="静态代理-基于JDK动态代理-基于Cglib-动态代理"><a href="#静态代理-基于JDK动态代理-基于Cglib-动态代理" class="headerlink" title="静态代理 基于JDK动态代理 基于Cglib 动态代理"></a>静态代理 基于JDK动态代理 基于Cglib 动态代理</h2><p>静态代理是通过在代码中显式编码定义一个业务实现类的代理类，在代理类中对同名的业务方法进行包装，用户通过代理类调用被包装过的业务方法；</p><p>JDK动态代理是通过接口中的方法名，在动态生成的代理类中调用业务实现类的同名方法；</p><p>CGlib动态代理是通过继承业务类，生成的动态代理类是业务类的子类，通过重写业务方法进行代理；</p><p>静态代理在编译时产生class字节码文件，可以直接使用，效率高。动态代理必须实现InvocationHandler接口，通过invoke调用被委托类接口方法是通过反射方式，比较消耗系统性能，但可以减少代理类的数量，使用更灵活。 cglib代理无需实现接口，通过生成类字节码实现代理，比反射稍快，不存在性能问题，但cglib会继承目标对象，需要重写方法，所以目标对象不能为final类。</p><h2 id="AOP-实现案例"><a href="#AOP-实现案例" class="headerlink" title="AOP 实现案例"></a>AOP 实现案例</h2><p>AOP的源码中用到了两种动态代理来实现拦截切入功能：jdk动态代理和cglib动态代理。两种方法同时存在，各有优劣。 jdk动态代理是由java内部的反射机制来实现的，cglib动态代理底层则是借助asm来实现的。 总的来说，反射机制在生成类的过程中比较高效，执行时候通过反射调用委托类接口方法比较慢；而asm在生成类之后的相关代理类执行过程中比较高效（可以通过将asm生成的类进行缓存，这样解决asm生成类过程低效问题）。 还有一点必须注意：jdk动态代理的应用前提，必须是委托类基于统一的接口。如果没有上述前提，jdk动态代理不能应用。 由此可以看出，jdk动态代理有一定的局限性，cglib这种第三方类库实现的动态代理应用更加广泛，且在效率上更有优势。</p><p>实现AOP关键特点是定义好两个角色 切点 和 切面 。 代理模式中被代理类 委托类处于切点角色，需要添加的其他比如 校验逻辑，事务，审计逻辑 属于非功能实现逻辑通过 切面类定义的方法插入进去。</p><h3 id="JDK动态代理-aop-实现方式"><a href="#JDK动态代理-aop-实现方式" class="headerlink" title="JDK动态代理 aop 实现方式"></a>JDK动态代理 aop 实现方式</h3><h4 id="定义切面接口，完成将通用公共方法注入到被代理类接口调用处理中"><a href="#定义切面接口，完成将通用公共方法注入到被代理类接口调用处理中" class="headerlink" title="定义切面接口，完成将通用公共方法注入到被代理类接口调用处理中"></a>定义切面接口，完成将通用公共方法注入到被代理类接口调用处理中</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： 定义切面接口，切面接口定义了两个切面方法，分别在切点接口方法执行前和执行后执行 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAspect</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * 在切点接口方法执行之前执行    * @param args 切点参数列表    * @return    */</span>   boolean <span class="token function">startTransaction</span><span class="token punctuation">(</span>Object<span class="token operator">...</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**    * 在切点接口方法执行之后执行    */</span>   <span class="token keyword">void</span> <span class="token function">endTrasaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="定义切面实现类"><a href="#定义切面实现类" class="headerlink" title="定义切面实现类"></a>定义切面实现类</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Objects<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： 改类作为AOP 模型中切面角色类， 实现切面接口，切面接口定义了两个切面方法，分别在切点接口方法执行前和执行后执行 。 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomAspect</span> <span class="token keyword">implements</span> <span class="token class-name">IAspect</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * 对参数 做判空处理    * @param args 切点参数列表    * @return    */</span>   @Override   <span class="token keyword">public</span> boolean <span class="token function">startTransaction</span><span class="token punctuation">(</span>Object<span class="token operator">...</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>       Objects<span class="token punctuation">.</span><span class="token function">nonNull</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>        boolean result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>Object temp <span class="token punctuation">:</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>Objects<span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                result <span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>                 <span class="token keyword">break</span><span class="token punctuation">;</span>           <span class="token punctuation">}</span>       <span class="token punctuation">}</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">endTrasaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"I get datasource here and end transaction"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="定义切点角色接口-因为是基于JDK实现的Aop-，所以委托类需要基于接口实现。"><a href="#定义切点角色接口-因为是基于JDK实现的Aop-，所以委托类需要基于接口实现。" class="headerlink" title="定义切点角色接口 因为是基于JDK实现的Aop ，所以委托类需要基于接口实现。"></a>定义切点角色接口 因为是基于JDK实现的Aop ，所以委托类需要基于接口实现。</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： AOP基于动态代理 实现  &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span> String password<span class="token punctuation">)</span> throws Exception<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="委托类实现"><a href="#委托类实现" class="headerlink" title="委托类实现"></a>委托类实现</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： UserService接口实现类UserServiceImpl 该类 作为AOP中切点角色，切面定义的方法插入到切点的接口方法 执行前和执行后执行。 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span><span class="token punctuation">{</span>    @Override   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span> String password<span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"save user[username="</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">",password="</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="JDK动态代理生成器工具类"><a href="#JDK动态代理生成器工具类" class="headerlink" title="JDK动态代理生成器工具类"></a>JDK动态代理生成器工具类</h4><p>可以看到 generatorJDKProxy 方法入参只有两个参数 一个切点接口引用，一个切面接口引用；在InvocationHandler 内部类中可以完整看到切面类方法是怎么影响切点代码执行逻辑的。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>InvocationHandler<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Proxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Arrays<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： JDK动态代理类生成器 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-16:48 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDKDynamicProxyGenerator</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * @param targetPoint 需要被代理的委托类对象    * @param aspect 切面对象,该对象方法将在切点方法之前或之后执行    * @return    */</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> Object <span class="token function">generatorJDKProxy</span><span class="token punctuation">(</span>IUserService targetPoint<span class="token punctuation">,</span> final IAspect aspect<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> Proxy<span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>                <span class="token comment" spellcheck="true">/**                *   委托类使用的类加载器                */</span>               targetPoint<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token comment" spellcheck="true">/**                * 委托类实现的接口                */</span>               targetPoint<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token comment" spellcheck="true">/**                * 生成的动态代理类关联的 执行处理器，代理我们的业务逻辑被生成的动态代理类回调                * 具体逻辑代码执行,返回值为方法执行结果, 在aop模型中，委托类的接口方法称为切点。                */</span>               <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    @Override                   <span class="token keyword">public</span> Object <span class="token function">invoke</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws Throwable <span class="token punctuation">{</span>                        <span class="token comment" spellcheck="true">// 执行切面方法,对入参进行校验</span>                      boolean prepareAction <span class="token operator">=</span> aspect<span class="token punctuation">.</span><span class="token function">startTransaction</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token keyword">if</span> <span class="token punctuation">(</span>prepareAction<span class="token punctuation">)</span><span class="token punctuation">{</span>                           <span class="token comment" spellcheck="true">// 具体逻辑代码执行,返回值为方法执行结果</span>                          Object result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>targetPoint<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                          aspect<span class="token punctuation">.</span><span class="token function">endTrasaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                           <span class="token keyword">return</span> result<span class="token punctuation">;</span>                      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                           <span class="token keyword">throw</span>  <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"args: "</span><span class="token operator">+</span> Arrays<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"不能为null "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token punctuation">}</span>                   <span class="token punctuation">}</span>               <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>CustomAspect<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>IUserService<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>JDKDynamicProxyGenerator<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>dynamicproxy<span class="token punctuation">.</span>UserServiceImpl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent &lt;br/>* @Description： 基于动态代理类AOP测试案例 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-16:56 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">testAopJDKProxy</span> <span class="token punctuation">{</span>    @Test   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testJDKProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws Exception <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"无代理前 调用方法 userService.saveUser 输出......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       IUserService userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       userService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token string">"zby"</span><span class="token punctuation">,</span> <span class="token string">"1234567890"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"有代理后AOP 是怎么样的？ Proxy......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       IUserService proxyUserService <span class="token operator">=</span> <span class="token punctuation">(</span>IUserService<span class="token punctuation">)</span> JDKDynamicProxyGenerator<span class="token punctuation">.</span><span class="token function">generatorJDKProxy</span><span class="token punctuation">(</span>userService<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CustomAspect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       proxyUserService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token string">"zby"</span><span class="token punctuation">,</span> <span class="token string">"1234567890"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 制造异常,两个入参都是null   */</span>       proxyUserService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="Cglib-aop-实现方式"><a href="#Cglib-aop-实现方式" class="headerlink" title="Cglib aop 实现方式"></a>Cglib aop 实现方式</h3><h4 id="定义切面接口"><a href="#定义切面接口" class="headerlink" title="定义切面接口"></a>定义切面接口</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： 定义切面接口，切面接口定义了两个切面方法，分别在切点接口方法执行前和执行后执行 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAspect</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * 在切点接口方法执行之前执行    */</span>   <span class="token keyword">void</span> <span class="token function">startTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/**    * 在切点接口方法执行之后执行    */</span>   <span class="token keyword">void</span> <span class="token function">endTrasaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="切面实现"><a href="#切面实现" class="headerlink" title="切面实现"></a>切面实现</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： 改类作为AOP 模型中切面角色类， 实现切面接口，切面接口定义了两个切面方法，分别在切点接口方法执行前和执行后执行 。 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomAspect</span> <span class="token keyword">implements</span> <span class="token class-name">IAspect</span> <span class="token punctuation">{</span>    @Override   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cglib. I get datasource here and start transaction"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">endTrasaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cglib I get datasource here and end transaction"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="Cglib-是基于类实现的动态代理即业务类只需要实现类即可，不用强制必须实现某个接口为了突出这个优点这里没有实现接口"><a href="#Cglib-是基于类实现的动态代理即业务类只需要实现类即可，不用强制必须实现某个接口为了突出这个优点这里没有实现接口" class="headerlink" title="Cglib 是基于类实现的动态代理即业务类只需要实现类即可，不用强制必须实现某个接口为了突出这个优点这里没有实现接口"></a>Cglib 是基于类实现的动态代理即业务类只需要实现类即可，不用强制必须实现某个接口为了突出这个优点这里没有实现接口</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.dynamicproxy &lt;br/>* @Description： 业务实现类UserServiceImpl 该类 作为AOP中切点角色，切面定义的方法插入到切点的接口方法 执行前和执行后执行。 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span>String username<span class="token punctuation">,</span> String password<span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cglib save user[username="</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">",password="</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="Cglib-动态代理生成器工具类"><a href="#Cglib-动态代理生成器工具类" class="headerlink" title="Cglib 动态代理生成器工具类"></a>Cglib 动态代理生成器工具类</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>Enhancer<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>MethodInterceptor<span class="token punctuation">;</span><span class="token keyword">import</span> net<span class="token punctuation">.</span>sf<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>proxy<span class="token punctuation">.</span>MethodProxy<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent.aop.cglib &lt;br/>* @Description： 基于Cglib代理类生成器工具类 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-17:04 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CglibProxyGenerator</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**    * @param target 需要被代理的委托类对象，Cglib需要继承该类生成子类    * @param aspect 切面对象,改对象方法将在切点方法之前或之后执行    * @return    */</span>   <span class="token keyword">public</span> <span class="token keyword">static</span>  Object <span class="token function">generatorCglibProxy</span><span class="token punctuation">(</span>final Object target<span class="token punctuation">,</span> final IAspect aspect<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//3.1 new Enhancer</span>       Enhancer enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.2 设置需要代理的父类</span>       enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.3 设置回调</span>       enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MethodInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            @Override           <span class="token keyword">public</span> Object <span class="token function">intercept</span><span class="token punctuation">(</span>Object proxy<span class="token punctuation">,</span> Method method<span class="token punctuation">,</span> Object<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> MethodProxy methodProxy<span class="token punctuation">)</span>                   throws Throwable <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// 执行切面方法</span>               aspect<span class="token punctuation">.</span><span class="token function">startTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 具体逻辑代码执行,返回值为方法执行结果</span>               Object result <span class="token operator">=</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 执行切面方法</span>               aspect<span class="token punctuation">.</span><span class="token function">endTrasaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// 返回方法执行结果</span>               <span class="token keyword">return</span> result<span class="token punctuation">;</span>           <span class="token punctuation">}</span>       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.4 创建代理对象</span>       <span class="token keyword">return</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="测试类-1"><a href="#测试类-1" class="headerlink" title="测试类"></a>测试类</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">package</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>CglibProxyGenerator<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>CustomAspect<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>vincent<span class="token punctuation">.</span>aop<span class="token punctuation">.</span>cglib<span class="token punctuation">.</span>UserServiceImpl<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*** @Package: org.vincent &lt;br/>* @Description： 基于动态代理类AOP测试案例 &lt;br/>* @author: lenovo &lt;br/>* @Company: PLCC &lt;br/>* @Copyright: Copyright (c) 2019 &lt;br/>* @Version: 1.0 &lt;br/>* @Modified By: &lt;br/>* @Created by lenovo on 2018/12/26-16:56 &lt;br/>*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">testAopCglibKProxy</span> <span class="token punctuation">{</span>    @Test   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCglibProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"before Proxy......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       UserServiceImpl userService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       userService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token string">"zby"</span><span class="token punctuation">,</span> <span class="token string">"1234567890"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"引入Cglib  Proxy代理库 后......"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       UserServiceImpl proxyUserService <span class="token operator">=</span> <span class="token punctuation">(</span>UserServiceImpl<span class="token punctuation">)</span> CglibProxyGenerator<span class="token punctuation">.</span><span class="token function">generatorCglibProxy</span><span class="token punctuation">(</span>userService<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">CustomAspect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       proxyUserService<span class="token punctuation">.</span><span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token string">"zby"</span><span class="token punctuation">,</span> <span class="token string">"1234567890"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="AspectJ-实现-AOP-效果"><a href="#AspectJ-实现-AOP-效果" class="headerlink" title="AspectJ 实现 AOP 效果"></a>AspectJ 实现 AOP 效果</h3><p>AOP 实现的关键就在于 AOP 框架自动创建的 AOP 代理，AOP 代理则可分为静态代理和动态代理两大类:</p><ul><li>静态代理是指使用 AOP 框架提供的命令进行编译，从而在编译阶段通过AOP框架指令生成 AOP 代理类，因此也称为编译时增强；还有一种静态代理是编写代码实现不用工具；这种方式一般是代理模式会使用。</li><li>动态代理则在运行时借助于 JDK 动态代理、CGLIB 等在内存中“临时”生成 AOP 动态代理类，因此也被称为运行时增强。</li></ul><h4 id="基于-AspectJ-的编译时增强进行-AOP-POM-依赖"><a href="#基于-AspectJ-的编译时增强进行-AOP-POM-依赖" class="headerlink" title="基于 AspectJ 的编译时增强进行 AOP POM 依赖"></a>基于 AspectJ 的编译时增强进行 AOP POM 依赖</h4><p>原生 AspectJ 不依赖Spring案例, 基于 AspectJ 的编译时增强进行 AOP 它是在编译期修改字节码，增强功能；并不会生成新的代理类字节码。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> AspectJ begin<span class="token operator">--</span><span class="token operator">></span><span class="token operator">&lt;</span>dependency<span class="token operator">></span>   <span class="token operator">&lt;</span>groupId<span class="token operator">></span>org<span class="token punctuation">.</span>aspectj<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>   <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>aspectjrt<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>   <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">1.9</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span><span class="token operator">&lt;</span>dependency<span class="token operator">></span>   <span class="token operator">&lt;</span>groupId<span class="token operator">></span>org<span class="token punctuation">.</span>aspectj<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">></span>   <span class="token operator">&lt;</span>artifactId<span class="token operator">></span>aspectjweaver<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">></span>   <span class="token operator">&lt;</span>version<span class="token operator">></span><span class="token number">1.9</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> AspectJ stop<span class="token operator">--</span><span class="token operator">></span></code></pre><h2 id="动态代理-使用场景"><a href="#动态代理-使用场景" class="headerlink" title="动态代理 使用场景"></a>动态代理 使用场景</h2><ul><li>日志集中打印</li><li>事务</li><li>权限管理</li><li>AOP</li></ul><p>本文分享自微信公众号 - Java架构沉思录（code-thinker），作者：不才黄某</p><p>原文出处及转载信息见文内详细说明，如有侵权，请联系 <a href="mailto:yunjia_community@tencent.com">yunjia_community@tencent.com</a> 删除。</p><p>原始发表时间：2019-01-07</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java反射机制概括</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/fan-she-ji-zhi/java-fan-she-ji-zhi-gai-gua/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/fan-she-ji-zhi/java-fan-she-ji-zhi-gai-gua/</url>
      
        <content type="html"><![CDATA[<h2 id="认识反射机制"><a href="#认识反射机制" class="headerlink" title="认识反射机制"></a>认识反射机制</h2><p>参考:</p><p>​    <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Class.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/9/docs/api/java/lang/Class.html</a></p><blockquote><p>在java语言中,之所以会有如此众多的<strong>开源技术</strong>支撑,很大的一部分来源于java最大特征–<strong>反射机制.**能够灵活的去使用反射机制进行项目的开发与设计,才能够真正接触到java的精髓.所有的技术实现的目标只有一点:**重用性.</strong><br>–对于反射技术,首先应该考虑**”反”与”正”的概念**,所谓的”正”操作指的是当你要使用一个类的时候,要先导入程序所在的包,而后根据类进行对象的实例化,并且依靠对象调用类中的方法.但是”反”则为,根据实例化对象,<strong>反推出其类型</strong>.</p></blockquote><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ul><li>在运行时判断任意一个对象所属的类；</li><li>在运行时构造任意一个类的对象；</li><li>在运行时判断任意一个类所具有的成员变量和方法；</li><li>在运行时调用任意一个对象的方法；</li></ul><h3 id="反射的动态性"><a href="#反射的动态性" class="headerlink" title="反射的动态性"></a><strong>反射的动态性</strong></h3><ul><li>静态加载类:编译时加载类</li><li>动态加载类:运行时加载类</li></ul><p><strong>加载</strong>:类加载过程的一个阶段：通过一个类的完全限定查找此类字节码文件，并利用字节码文件创建一个Class对象</p><p><strong>验证</strong>:目的在于确保Class文件的字节流中包含信息符合当前虚拟机要求，不会危害虚拟机自身安全。主要包括四种验证，文件格式验证，元数据验证，字节码验证，符号引用验证。</p><p><strong>准备</strong>：为类变量(即static修饰的字段变量)分配内存并且设置该类变量的初始值即0(如static int i=5;这里只将i初始化为0，至于5的值将在初始化时赋值)，这里不包含用final修饰的static，因为final在编译的时候就会分配了，注意这里不会为实例变量分配初始化，类变量会分配在方法区中，而实例变量是会随着对象一起分配到Java堆中。</p><p><strong>解析</strong>：主要将常量池中的符号引用替换为直接引用的过程。符号引用就是一组符号来描述目标，可以是任何字面量，而直接引用就是直接指向目标的指针、相对偏移量或一个间接定位到目标的句柄。有类或接口的解析，字段解析，类方法解析，接口方法解析(这里涉及到字节码变量的引用，如需更详细了解，可参考《深入Java虚拟机》)。</p><p><strong>初始化</strong>：类加载最后阶段，若该类具有超类，则对其进行初始化，执行静态初始化器和静态初始化成员变量(如前面只初始化了默认值的static变量将会在这个阶段赋值，成员变量也将被初始化)。</p><p><img src="https://img-blog.csdn.net/20170430160610299?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvamF2YXplamlhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p><h2 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>在虚拟机提供了3种类加载器，引导（Bootstrap）类加载器、扩展（Extension）类加载器、系统（System）类加载器（也称应用类加载器）</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201001151052.png" alt="image-20201001151052771"></p><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p><code>启动（Bootstrap）类加载器</code>：启动类加载器是用本地代码实现的类加载器，它负责将JAVA_HOME/lib下面的核心类库或-Xbootclasspath选项指定的jar包等虚拟机识别的类库加载到内存中。由于启动类加载器涉及到虚拟机本地实现细节，开发者无法直接获取到启动类加载器的引用。具体可由启动类加载器加载到的路径可通过<code>System.getProperty(“sun.boot.class.path”)</code>查看。</p><p><code>扩展（Extension）类加载器</code>：扩展类加载器是由Sun的ExtClassLoader（sun.misc.Launcher$ExtClassLoader）实现的，它负责将JAVA_HOME /lib/ext或者由系统变量-Djava.ext.dir指定位置中的类库加载到内存中。开发者可以直接使用标准扩展类加载器，具体可由扩展类加载器加载到的路径可通过<code>System.getProperty("java.ext.dirs")</code>查看。</p><p><code>系统（System）类加载器</code>：系统类加载器是由 Sun 的 AppClassLoader（sun.misc.Launcher$AppClassLoader）实现的，它负责将用户类路径(java -classpath或-Djava.class.path变量所指的目录，即当前类所在路径及其引用的第三方类库的路径，如第四节中的问题6所述)下的类库加载到内存中。开发者可以</p><h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="榨汁机"><a href="#榨汁机" class="headerlink" title="榨汁机"></a>榨汁机</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kujin<span class="token punctuation">.</span>reflect<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>*<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 水果榨汁机-学习反射机制 * @author kujin * 创建时间：2020/10/1 * @version 1 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Juicer_Reflect</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException<span class="token punctuation">,</span> ClassNotFoundException<span class="token punctuation">,</span> IllegalAccessException<span class="token punctuation">,</span> InstantiationException <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//demo1_interfacse();</span>        <span class="token comment" spellcheck="true">//由于接口 也需要不断改变main函数 的代码 有此产生 通过修改配置文件的方式 实现代码的更新</span>        <span class="token comment" spellcheck="true">// 如果找不到路径 可以创建一下 然后编辑 包路径.Apple(具体的类)</span>        File file<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"config.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            file<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 读取配置 文件,利用配置文件进行反射</span>        BufferedReader bufferedReader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Class<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass <span class="token operator">=</span> Class<span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>bufferedReader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Fruit fruit<span class="token operator">=</span> <span class="token punctuation">(</span>Fruit<span class="token punctuation">)</span> aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Juicer juicer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Juicer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        juicer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>fruit<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">demo1_interfacse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Juicer juicer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Juicer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        juicer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Apple</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//        juicer.run(new Orange()); //需要创建一个接口 利用多态 实现 子类对象</span>        juicer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Orange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Juicer</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//    public void run(Apple o){ //只能实现一种类型</span><span class="token comment" spellcheck="true">//        o.squeeze();</span><span class="token comment" spellcheck="true">//    }</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span>Fruit fruit<span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//利用接口实现多种水果类型</span>        fruit<span class="token punctuation">.</span><span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 定义水果接口 */</span><span class="token keyword">interface</span> <span class="token class-name">Fruit</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 定义苹果 实现水果接口 */</span><span class="token keyword">class</span> <span class="token class-name">Apple</span> <span class="token keyword">implements</span> <span class="token class-name">Fruit</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"榨出一杯苹果汁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 定义橙子 实现 水果接口 */</span><span class="token keyword">class</span> <span class="token class-name">Orange</span> <span class="token keyword">implements</span> <span class="token class-name">Fruit</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">squeeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"榨出一杯橙汁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaDoc简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/javadoc-zhu-shi/javadoc-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/javadoc-zhu-shi/javadoc-jian-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="一：简介"><a href="#一：简介" class="headerlink" title="一：简介"></a>一：简介</h2><p>Javadoc用于描述类或者方法的作用。Javadoc可以写在类上面和方法上面。</p><p><a href="https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html</a></p><h2 id="二：写在类上面的Javadoc"><a href="#二：写在类上面的Javadoc" class="headerlink" title="二：写在类上面的Javadoc"></a>二：写在类上面的Javadoc</h2><p>写在类上的文档标注一般分为三段：</p><ul><li>第一段：概要描述，通常用一句或者一段话简要描述该类的作用，以英文句号作为结束</li><li>第二段：详细描述，通常用一段或者多段话来详细描述该类的作用，一般每段话都以英文句号作为结束</li><li>第三段：文档标注，用于标注作者、创建时间、参阅类等信息</li></ul><h3 id="1-link：-link-包名-类名-方法名-参数类型-用于快速链接到相关代码"><a href="#1-link：-link-包名-类名-方法名-参数类型-用于快速链接到相关代码" class="headerlink" title="1. @link：{@link 包名.类名#方法名(参数类型)} 用于快速链接到相关代码"></a>1. @link：{@link 包名.类名#方法名(参数类型)} 用于快速链接到相关代码</h3><h4 id="2-code：-code-text-将文本标记为code"><a href="#2-code：-code-text-将文本标记为code" class="headerlink" title="2. @code： {@code text} 将文本标记为code"></a>2. @code： {@code text} 将文本标记为code</h4><h4 id="3-param"><a href="#3-param" class="headerlink" title="3. @param"></a>3. @param</h4><p>一般类中支持泛型时会通过@param来解释泛型的类型</p><h4 id="4-author"><a href="#4-author" class="headerlink" title="4. @author"></a>4. @author</h4><p>详细描述后面一般使用@author来标记作者，如果一个文件有多个作者来维护就标记多个@author，@author 后面可以跟作者姓名(也可以附带邮箱地址)、组织    名称(也可以附带组织官网地址)</p><h4 id="5-see-另请参阅"><a href="#5-see-另请参阅" class="headerlink" title="5. @see 另请参阅"></a>5. @see 另请参阅</h4><h4 id="6-since-从以下版本开始"><a href="#6-since-从以下版本开始" class="headerlink" title="6. @since 从以下版本开始"></a>6. @since 从以下版本开始</h4><h4 id="7-version-版本"><a href="#7-version-版本" class="headerlink" title="7. @version 版本"></a>7. @version 版本</h4><h2 id="三：写在方法上的Javadoc"><a href="#三：写在方法上的Javadoc" class="headerlink" title="三：写在方法上的Javadoc"></a>三：写在方法上的Javadoc</h2><p>写在方法上的文档标注一般分为三段：</p><ul><li>第一段：概要描述，通常用一句或者一段话简要描述该方法的作用，以英文句号作为结束</li><li>第二段：详细描述，通常用一段或者多段话来详细描述该方法的作用，一般每段话都以英文句号作为结束</li><li>第三段：文档标注，用于标注参数、返回值、异常、参阅等</li></ul><h4 id="8-param"><a href="#8-param" class="headerlink" title="8. @param"></a>8. @param</h4><p>@param 后面跟参数名，再跟参数描述</p><h4 id="9-return"><a href="#9-return" class="headerlink" title="9. @return"></a>9. @return</h4><p>@return 跟返回值的描述</p><h4 id="10-throws"><a href="#10-throws" class="headerlink" title="10. @throws"></a>10. @throws</h4><p>@throws 跟异常类型 异常描述 , 用于描述方法内部可能抛出的异常</p><h4 id="11-exception"><a href="#11-exception" class="headerlink" title="11. @exception"></a>11. @exception</h4><p>用于描述方法签名throws对应的异常</p><h4 id="12-see"><a href="#12-see" class="headerlink" title="12. @see"></a>12. @see</h4><p>@see既可以用来类上也可以用在方法上，表示可以参考的类或者方法</p><h4 id="13-value"><a href="#13-value" class="headerlink" title="13. @value"></a>13. @value</h4><p>用于标注在常量上，{@value} 用于表示常量的值</p><h4 id="14-inheritDoc"><a href="#14-inheritDoc" class="headerlink" title="14. @inheritDoc"></a>14. @inheritDoc</h4><p>@inheritDoc用于注解在重写方法或者子类上，用于继承父类中的Javadoc</p><ul><li>基类的文档注释被继承到了子类</li><li>子类可以再加入自己的注释（特殊化扩展）</li><li>@return @param @throws 也会被继承</li></ul><h2 id="生成Javadoc"><a href="#生成Javadoc" class="headerlink" title="生成Javadoc"></a>生成Javadoc</h2><p>idea生成javadoc <a href="https://www.cnblogs.com/cyberniuniu/p/5021910.html" target="_blank" rel="noopener">https://www.cnblogs.com/cyberniuniu/p/5021910.html</a></p><p>通过IDEA生成Javadoc： Tools –&gt; Generate JavaDoc –&gt;<br>注意要配置编码，如果不配送为生成乱码，还需要配置Output directory</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字节流与字符流简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/io-bian-cheng/zi-jie-liu-yu-zi-fu-liu/zi-jie-liu-yu-zi-fu-liu-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/io-bian-cheng/zi-jie-liu-yu-zi-fu-liu/zi-jie-liu-yu-zi-fu-liu-jian-jie/</url>
      
        <content type="html"><![CDATA[<p><strong>字节流:OutputStream InputStream</strong></p><p><strong>字符流: Writer Reader</strong></p><p>执行资源操作的步骤:</p><ol><li>如果操作的是文件,那么首先要通过File类对象找到一个要操作文件的路径 (路径可能存在,也可能不存在,如果不存在 则要创建路径)</li><li>通过字节流或字符流 的子类 为字节流或字符流的对象实例化(向上转型)</li><li>执行 读写 操作</li><li>一定要关闭操作资源 (close()) 资源一定要关闭</li></ol><h1 id="OutputStream"><a href="#OutputStream" class="headerlink" title="OutputStream"></a>OutputStream</h1><h3 id="类结构"><a href="#类结构" class="headerlink" title="类结构"></a>类结构</h3><p><img src="../../../../../AppData/Roaming/Typora/typora-user-images/image-20200921194546027.png" alt="image-20200921194546027"></p><blockquote><p><strong>java 在1.7 版本加入了AutoCloseable 接口 在try 里的对象 可自动关闭</strong></p></blockquote><p>测试代码</p><pre class=" language-java"><code class="language-java">File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"/aa"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">(</span>OutputStream out<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"字符数组"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h1 id="管道流"><a href="#管道流" class="headerlink" title="管道流"></a>管道流</h1><blockquote><p>可以在两个线程之间通信, 分为 管道输出流(PipedOutputStream,PipedWriter) 管道输入流 (PipedInputStream PipedReader)</p></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200921203744259.png" alt="image-20200921203744259"></p><p>实例代码</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> PipIStream<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>ByteArrayOutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>PipedInputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>PipedOutputStream<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：管道流 实现连个线程 管道IO通信 * 编写人：kujin * 创建时间：2020/9/21 * 修改时间：2020/9/21 */</span><span class="token keyword">class</span> <span class="token class-name">SendThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//数据发送线程</span>    <span class="token keyword">private</span> PipedOutputStream outputStream<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//管道输出流</span>    <span class="token keyword">public</span> <span class="token function">SendThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//实例化管道输出流</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>outputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> PipedOutputStream <span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//获取管道输出流</span>        <span class="token keyword">return</span> outputStream<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>outputStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"管道流通信 线程之间IO操作"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//数据发送</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>outputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ReceiveThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//数据接收</span>    <span class="token keyword">private</span> PipedInputStream inputStream<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//管道输入流</span>    <span class="token keyword">public</span> PipedInputStream <span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">//获取管道输入流</span>        <span class="token keyword">return</span> inputStream<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">ReceiveThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//创建管道输入流</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>inputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PipedInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//数据读取</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//读取缓冲区</span>        <span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//定义读取长度</span>        ByteArrayOutputStream bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//通过内存流保存内容</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//循环遍历 读取内容</span>                bos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//输出数据</span>            bos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//关闭内存流</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>inputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//关闭输入流</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPipInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>           SendThread sned<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SendThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//创建发送线程</span>           ReceiveThread receiveThread<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ReceiveThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//创建接收线程</span>           sned<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>receiveThread<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//****管道连接</span>           <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>sned<span class="token punctuation">,</span><span class="token string">"消息发送线程"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>receiveThread<span class="token punctuation">,</span><span class="token string">"消息接收"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="缓冲输入流"><a href="#缓冲输入流" class="headerlink" title="缓冲输入流"></a>缓冲输入流</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件批量更名</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/io-bian-cheng/file/wen-jian-pi-liang-geng-ming/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/io-bian-cheng/file/wen-jian-pi-liang-geng-ming/</url>
      
        <content type="html"><![CDATA[<h1 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/kj-20200902191212.png" alt="image-20200902191045383"></p><h1 id="范例代码"><a href="#范例代码" class="headerlink" title="范例代码"></a>范例代码</h1><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> File<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>File<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：文件批量更名 * 编写人：kujin * 创建时间：2020/9/2 * 修改时间：2020/9/2 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUpdateName</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//给定目录</span>        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"d:"</span> <span class="token operator">+</span> File<span class="token punctuation">.</span>separator <span class="token operator">+</span> <span class="token string">"fileTest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//目录更名</span>        <span class="token function">renameDir</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">renameDir</span><span class="token punctuation">(</span>File file<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//是否为文件夹</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//            获取文件列表</span>            File<span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>files<span class="token operator">!=</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//遍历文件,递归调用</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">renameDir</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//            是否为文件</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                String fileName<span class="token operator">=</span>null<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//                文件后缀是 .java</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".java"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment" spellcheck="true">//                    设置新的文件名</span>                    fileName<span class="token operator">=</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">".txt"</span><span class="token punctuation">;</span>                    File newFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//                    重命名</span>                    file<span class="token punctuation">.</span><span class="token function">renameTo</span><span class="token punctuation">(</span>newFile<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对象序列化</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/io-bian-cheng/dui-xiang-xu-lie-hua/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/io-bian-cheng/dui-xiang-xu-lie-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="Java对象的序列化和反序列化"><a href="#Java对象的序列化和反序列化" class="headerlink" title="Java对象的序列化和反序列化"></a>Java对象的序列化和反序列化</h1><h2 id="一、序列化和反序列化的概念"><a href="#一、序列化和反序列化的概念" class="headerlink" title="一、序列化和反序列化的概念"></a>一、序列化和反序列化的概念</h2><p>　　<strong>把对象转换为字节序列的过程称为对象的序列化</strong>。<br>　　<strong>把字节序列恢复为对象的过程称为对象的反序列化</strong>。<br>　　对象的序列化主要有两种用途：<br>　　1） <strong>对象持久化：</strong>把对象的字节序列永久地保存到硬盘上，通常存放在一个文件中；<br>　　2） <strong>网络传输对象：</strong>在网络上传送对象的字节序列。可以通过序列化把主机A进程上的对象序列化为二进制序列，传输到主机B上的进程从序列中重构出该对象。</p><p>　　　　　　　　　　  这在RMI中应用广泛，RMI的结果可以是一个对象。</p><p>　　在很多应用中，需要对某些对象进行序列化，让它们离开内存空间，入住物理硬盘，以便长期保存。比如最常见的是Web服务器中的Session对象，当有 10万用户并发访问，就有可能出现10万个Session对象，内存可能吃不消，于是Web容器就会把一些seesion先序列化到硬盘中，等要用了，再把保存在硬盘中的对象还原到内存中。</p><p>　　当两个进程在进行远程通信时，彼此可以发送各种类型的数据。无论是何种类型的数据，都会以二进制序列的形式在网络上传送。发送方需要把这个Java对象转换为字节序列，才能在网络上传送；接收方则需要把字节序列再恢复为Java对象。</p><h2 id="二、Java序列化对象的方式"><a href="#二、Java序列化对象的方式" class="headerlink" title="二、Java序列化对象的方式"></a>二、J<strong>ava序列化对象的方式</strong></h2><h3 id="1：Java序列化的默认API"><a href="#1：Java序列化的默认API" class="headerlink" title="1：Java序列化的默认API"></a><strong>1：Java序列化的默认API</strong></h3><p>　　通过java.io.ObjectOutputStream<strong>对象输出流</strong>的writeObject(Object obj)方法可对参数指定的obj对象进行序列化，把得到的字节序列写到一个目标输出流中。<br>　　通过java.io.ObjectInputStream<strong>对象输入流</strong>的readObject()方法从一个源输入流中读取字节序列，再把它们反序列化为一个对象，并将其返回，返回时通过强制类型转换赋值给具体的类对象引用。</p><h3 id="2：让对象可以被序列化的三种方式"><a href="#2：让对象可以被序列化的三种方式" class="headerlink" title="2：让对象可以被序列化的三种方式"></a><strong>2：让对象可以被序列化的三种方式</strong></h3><p>　　 <strong>1）默认序列化：</strong>定义类时实现Serializable接口即可，这个Serializable接口是一个空接口，没有需要实现的方法。作用是标记该类的对象可以被序列化，启用其序列化功能。通过调用ObjectOutputStream和ObjectInputStream的方法来对该对象进行序列化和反序列化。</p><p>​    <strong>2）类自定义序列化\</strong>方式一**：**定义类时，实现Serializable接口，并在类中定义：　　　　</p><pre><code>private void writeObject(java.io.ObjectOutputStream out)     throws IOException private void readObject(java.io.ObjectInputStream in)     throws IOException, ClassNotFoundException;    这两个方法，在方法中通过对象输入流参数、对象输出流参数进行自定义的内容输出。这样通过对象输出流和对象输入流的输入输出方法序列化和反序列化对象时会自动调用类中定义的writeObject和readObject方法而不是默认的序列化和反序列化方法。    3）类自定义序列化方式二：实现Externalnalizable接口（继承自 Serializable接口），并且在类中实现readExternal(ObjectInput in)和writeExternal(ObjectOutput out)方法，在方法中定义类对象自定义的序列化和反序列化操作。这样通过对象输出流和对象输入流的输入输出方法序列化和反序列化对象时会自动调用类中定义的readExternal(ObjectInput in)和writeExternal(ObjectOutput out)方法。</code></pre><h3 id="3、序列化和反序列化的使用步骤"><a href="#3、序列化和反序列化的使用步骤" class="headerlink" title="3、序列化和反序列化的使用步骤"></a><strong>3、序列化和反序列化的使用步骤</strong></h3><p>　　对象序列化包括如下步骤：<br>　　1）创建类，实现Serializable接口或者Externalizable接口，实现相应的序列化和反序列化方法（也可采取默认方法）；<br>　　2） 创建对象输出流ObjectOutputStream对象并在构造参数中指定流的输出目标（比如一个文件），通过objectOutputStream.writeObject(obj)把对象序列化并输出到流目标；</p><p>　　3）在需要提取对象处：创建对象输入流ObjectInputStream对象并在构造参数中指定流的来源，然后通过readObject()方法获取对象，并通过强制类型转换赋值给类对象引用。</p><h3 id="4、Java序列化的特殊情况"><a href="#4、Java序列化的特殊情况" class="headerlink" title="4、Java序列化的特殊情况"></a><strong>4、Java序列化的特殊情况</strong></h3><p>　　 1：静态变量和transient关键字修饰的变量不能被序列化；</p><p>​    2：反序列化时要按照序列化的顺序重构对象：如先序列化A后序列化B，则反序列化时也要先获取A后获取B，否则报错。</p><p>​    3：序列化ID的作用：虚拟机是否允许对象反序列化，不仅取决于该对象所属类路径和功能代码是否与虚拟机加载的类一致，而是<strong>主要取决于对象所属类与虚拟机加载的该类的序列化 ID 是否一致</strong>。</p><p>​    4：自定义序列化方法的应用场景：对某些敏感数据进行加密操作后再序列化；反序列化对加密数据进行解密操作。</p><p>​    5：重复序列化：同一个对象重复序列化时，不会把对象内容再次序列化，而是新增一个引用指向第一次序列化时的对象而已。</p><h3 id="5、其他序列化手段"><a href="#5、其他序列化手段" class="headerlink" title="\5、其他序列化手段**"></a><strong><em>\</em>5、其他序列化手段**</strong></h3><p>　　 1：把对象包装成JSON格式进行序列化</p><p>​    2：用XML格式序列化</p><p>​    3：采用第三方插件（如:ProtoBuf）进行序列化</p><p><strong>对象序列化和反序列范例：</strong></p><p>　　<strong>定义一个Person类，实现Serializable接口</strong>：</p><p><a href="javascript:void(0);"><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200902193236.gif" alt="复制代码"></a></p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Serializable<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * &lt;p>ClassName: Person&lt;p> * &lt;p>Description:测试对象序列化和反序列化&lt;p> * @author xudp * @version 1.0 V * @createTime 2014-6-9 下午02:33:25 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 序列化ID     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>5809782578272943999L<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String sex<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> String <span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSex</span><span class="token punctuation">(</span>String sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>序列化和反序列化Person类对象</strong>：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>File<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileInputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileNotFoundException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileOutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>ObjectInputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>ObjectOutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>text<span class="token punctuation">.</span>MessageFormat<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * &lt;p>ClassName: TestObjSerializeAndDeserialize&lt;p> * &lt;p>Description: 测试对象的序列化和反序列&lt;p> * @author xudp * @version 1.0 V * @createTime 2014-6-9 下午03:17:25 */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestObjSerializeAndDeserialize</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token function">SerializePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//序列化Person对象</span>        Person p <span class="token operator">=</span> <span class="token function">DeserializePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//反序列Perons对象</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>MessageFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"name={0},age={1},sex={2}"</span><span class="token punctuation">,</span>                                                 p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">getSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * MethodName: SerializePerson      * Description: 序列化Person对象     * @author xudp     * @throws FileNotFoundException     * @throws IOException     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">SerializePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> FileNotFoundException<span class="token punctuation">,</span>            IOException <span class="token punctuation">{</span>        Person person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"gacl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        person<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span><span class="token string">"男"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ObjectOutputStream 对象输出流，将Person对象存储到E盘的Person.txt文件中，完成对Person对象的序列化操作</span>        ObjectOutputStream oo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>                <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:/Person.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        oo<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Person对象序列化成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        oo<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * MethodName: DeserializePerson      * Description: 反序列Perons对象     * @author xudp     * @return     * @throws Exception     * @throws IOException     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Person <span class="token function">DeserializePerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        ObjectInputStream ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>                <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:/Person.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Person person <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Person对象反序列化成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> person<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><a href="javascript:void(0);"><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200902193236.gif" alt="复制代码"></a></p><p><strong>代码运行结果如下：</strong></p><p><strong><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQoAAABhCAIAAACh7XizAAAMPElEQVR4nO1c/2scxxXff0d3/0F+KwX9kB9CfyiRa6c4ocJJ6tTCq0Sm/aEmGCKXBiLqFttsYuFCjI0tVEMMzhHH9Zc42MQcsU9BSetiBYtamzs35Ky71Z3g+sOeZmdn5r15u3en27t9Hz7Eu7Pz3ryZfZ+ZvdVOnOrGquA3D29dOn+6Vt+u1bfX/PYYM+xjrb596fzpkN88vCUPBZNZ3Vh1xFGojY0ft//933Z+uPHjdkgWCVNnVx6hNtZr7dUnrXxyvdZer7VZIUyZMXms/dB+uNYKuffo8sTMbZx7jy6L+uPBtR/avIwwBbvyuHT+9KOnrfJ/tgQnDt385fQxnBOHbsom48FHT1uPnrZYIcyqIo97/9oSnHjr86nX3yvX2hCnXn9v4q3PZZPM8vDMdEhroSArhFmV5fHteuvOaiA4cbC09+Dxcq3d2Go3gnYzaDeCdmNruxFsN4J2I9jed/BPhd+WZJOQjgT9amr24vPwzHSn0+l0OodnpqESnd+us0LyzkgeK99v3VgJBAtvXNk/83651j5wdPnX75z7xYFTP9/z5xdeerfeaP3UaNc32/tn3p9444pscmMlcBzHeNwvpvMpxBDqQTlFDFe+32KF5JmRPL5+vHXtQVNw4sA/pt9eKNfaz+qtZ/VWrd56JrH2U2v67YXCgcuyybUHTcdxlJL+MrV/WRKyNqyGXz9mheSXkTzuPwqulpuChd9cevMPfwtXjwNHl189cv7l35158dW//Ozl4y+89O7G/7be/P1fC9MXZZOr5abjOEqJKBeX5KcvpYKxEPev14GoKOTwzDTF6mq5ef9RwArJJyN53P0u+OSrhmDhtXOHjp4q19rr1eBJNXhSDdarwbo4qAWH/niq+No52eSTrxqO4yglciHlALHSqyHmOnV5WE0E737HCskjI3l8sRos320IFvafdY955Vr7sd9c2wjW/OaaH6xtBGsb4Wkwe+zD4v6zssny3YbjOEqJXIgchMfKqbGO4llAb1cm9HCFW8n8YpUVkjtG8rix0rx4Z1Ow+Io3N784N794ZP7M3PzikfnFI8cX5+YX5+bPzHUPFouvfCibXLyz6TiOfkw5oFjp9XVzI/Gf5hQPIW+sNFkhuWIkj2sPmudubQpOzi4V950s7jtZ2HdSHBT2nizuO1nc2z2dnF2STUKK6Vwv1CsoB4qh0cpYR2lOofwaFyoh8toDVkiOGMnj03Lj7/98buTk7FJxz4nCnhOFX52YnF2CqmWW4i+A1kIKPy03WCE5YSSPK/cbp0t1mZOzS8U9C8WpD7r/nfqgOLVQmFooTi0UpxYmZ5eU+vnh5XubrJA8MJLH5XubQ0+7EeLSl5v88eLYM5LH0pcsj2S8cPv5hdvPWSFjzEgeF24/H3rCjSI/vvmcl5FxZSSPj2+yPFLy7PX62et13pc7fozkcfb68PNspPnRZ12yTsaGkTw++mz4GTZmFDphjigjeQw9mZjMrJHlwWSCVOUx9Kc9JjM7tMjDcZw+NrarHRvZyJnZISaPQWTYQLM2/DaR2JbyjWPv7QoniEMlvHStE/vVl5EnWokW+zWkWeh7FZGH4nG4kzG9dXrY4nam6B0kQlkh6Tzs/oj1feTpgzAg9rFdszz6qL9d7nDSyHufU3uXx3BHzOqHvoAkHYSM971qlIcxw/RhMj5O4Ius8RT3TGkdqWYdL6izSJD6qe6N3i+kdX1UKVbGfiHDhd8gY6fwkYdGBh/VrPW9CskDShrjKRS6PLJ6Oe7HOLgprKCSpP3CrYzHkDkennVUiTHTx4ESPLGD6Q4y2/fuafhP0t8euv6M9VPIQ3aeonVrOlqHmzKv9FEeekIgo4rcfnzEKCXG1q3jTDywjmrW+l7F5YEkAbE95b+4Hzyx6K3jw2QdbsTEKglrL6xxUu5rUp9Jb1nSu5PoAOlL1vreLQ//ofzdA5K7ciwbKvLQpwfFg1JObN1oRdSG4gQJ0ljNGgySDdbWKeHp3hQQh4t+R6xXKWETW8edDK7vVHkw+0uHIFpmdsjy2JVRNs1MzOyT5cFkglTlMfQv7JnM7FCVh/5/2sw4HMdJcakv9SnmciHdf4pIegyeYcTYykN/j5HCm5LcRuCR9CiPgSqKYUXW5WHNcmtSQnUg/+lapESSLtdxiVKc02cHhoKsy0MBJVn7kuv0GJCZHlGpfimRSpG2oAGhdI2hYATkoWcVlD3WORXKKqKWlJqKT7o8EgnJCNkVRUssj3QwyKPkxgbaLfnDDjJKYuiSUoIAN0caUupb5WFMU2Iv6PJAAkMiYRBhXD0qnuNVdmqU3OELREks+WZTUrnHEuMlXB5GJSBpqgjY2kGWx+7ALg+/5HZPKp68pggX4Wrjlny/u+7I0hL1XVcziVUOjV3XVcpFoOQHFbmckmdWGB0mOsBDTeQEKmR5DAL01UPVjKyQrnLCkooX1vOldafiRYoqudIDW8WL/PjRFV9bs4jy0OdgXSeI2w6gKKXQWsdqBdWE1IiHbZ0FGOkAySNCN01jZdoEX/FMT2CyjbRKxBeGyFS+FHeILAXWBFIWAaga3TM9EhE2nutGJ1Z56CubNWxGUthXjy5MZfJVyw8UsUr0II8Oms1yiTHJkj6lQCCuY0hN/dSa6LLS6G5FCWsmHcjy6HRKLiwQkzxiz0eSy/hzU8WTH65M8sCnRnx+Veogk67VofVqankYU1+RNBRz0vmCkQj4i10l55UHrDCX1acukeHxF8SSsvzYle4FUehVhEu35FvTUU8XfH5FxGZ0CPmhGCaSBx6wVcnW4BkpMAJ/FkRgzQZk4ky0dFgnYKK3+EwCypvSOqWE0SNGWx4MxkDB8mAwQLA8GAwQIy+PFL+ke3Tbu3PIHHlt0N9I+FcKEWMrD0cD0RvdBH8/ZgQedo/yGKii8omsy8Oa5ZRXRtaXTnQ9WEEJjxJ2ulzHJUpxThmH/CDr8lBAyb9E6Wv0QG89qQky0yOS1i8lUinSFjR6lK7lASMgDz1RoISwTpOJ5AFlVSLhKVdTyCORkPCOELXE8hDI+3aoRPWNp0gyIaqwJiW9y3R5IIEhkeQZed8OpTtPZE5sHZeHMQAkTRX1WkeD5ZEaed8OZawJVUYWGTlfdZ+JDvBoEzmBClkeROR9OxTkKmmeIX6sdaxW1oDxPiLCYyXgyPt2KKNbYp5RwqCHLZpOoWdr2PIIsDzo4O1QKX9OWCsbK9A7QpnyoUSXlUZ3K0pYMwK53g6lmytTuLUhPJN6URquK+OCAK0q9EY7LI84eDtUzBBxBQkJD48YNuRfP8UNkaiI1RgyRuDPggisNxiZC+WEo9Sht26dgIne4tMOOBdQWqeUMHSMtjwYjIGC5cFggGB5MBggWB4MEvL5W4XlwYjBQTHs6HYbLA9GDJSX4PkBy4MRAy8dMlgejBh49ZAxhvIQf38f/j6VHYjPBGIhxb4eQD5o21WwPGSMoTxC6J/EDwsVT6ii4jnGnTQZAj9cydDkgWxLkr6uku+347rd3R4VsTNKrS82dfjKVl3Zmy9NsiXPMX1LD34E5pYUOSSQB+SfEA+pX52Yy17kYd5eZtymJu9N61ZwSz41zhBOLiUhw7R6gNuSKhXpc8OdO7szI4Y7nnxhgm6fMkCaZP2SG7tnxnZjU7FqkWz1gPpljCdpv+J9lCsnfLgCtpfB8Yj76Jdc2tObrhwF5J6OCQB5GPddGL+0Fbd8x6p7F4HtU+DsFf+IPpbceLsAEsjD6B+KJ2m/4q0gOwII+WvaXoZvU/Pj6zl5lQvh2L6HH3vQ5SHNprEqsDwSPTko9entAiDLA/APxZO0XztubW8KLN3Rq4uty/g2NU0xVOhiYHng8og9yljkgW+fMkC+zzsPali78bxWfvVC8gjTJRYW3C9zPEn7FdtnL0Pec+8rTg1xItvLzPFIvYnFT4FRCSyPerT6xrcldWLrsut5ruM4XiWq0b3sVbq/7bs/P4BF3wipuud5sdRR2+1amB7e9aeNqN2K9ANbAPQPxJOsX9rTjFxbajmmH2Oc4PYyUzzybVTuI46wplLSyaU2Opl9sTug17Kx/0lKBuKBkDrOXqALQ760y8FkBNmSBzSb9gfqE8yw44GQPE7GgJAteTAYmQLLg8EAwfJgMECwPBgMECwPBgMEy4PBAMHyYDBAsDwYDBAsDwYDBMuDwQDxf0/f26x6iI+VAAAAAElFTkSuQmCC" alt="img">\</strong><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVMAAABBCAIAAADjQNAHAAAMpklEQVR4nO2d22/b1h3H9a/0adiGYShQbC/FBqTFgDVthuYhwAr4Yd2KLkiWxkWTOkvdxIYRzAGSdckekiFps8bJcrOT2LIiWZYtWbHusnW1JMu62bFkWXeJoiiJpPbAWJYokqJtOaKl3xdfBPQ5Px5GR+fDH88hJYlSmXgqE0+lYzWO83aM3TVhmXpz7dUub7J7N40YNE852+TnVI35V7GFpTirUtEa0/aK7sa1DaY36pxid11YfSMce+3ZBs3TfW2ftyMGzdNUKrLluireDteYtUoE5O8H+a0xkP+myBeMaaDuJ/lumwIMBnebRRUQCNR9El24LQODwd1m0YXbsnaffUAg0JsWkA8CdaOAfBCoGwXkg0DdKCAfBOpGAfkgUDeKgfx4PO71enU6ndPpDIfDZrPZ4XA4HA4cx/d6MBE8PgACCULb5K+trQWDQblcfu7cuZMnT0ql0mw2i+N4PB4PBAKFQsFgMKhUKqPRWCwW6a3Ui/VgQD4IJAxtkz81NWW32/1+v1arDYVCgUCARv7mZtJk8l++/M/h4SuRSITe0BbVQD4IJHxtk3/nzp1bt25NTk5S5IfDYYvF4na7rVarWq2+efM/fX397733u4GB62fPDvX399MbEokqDWw3og7wg0BC0Db59+/fHxsbu3HjxuDg4MjIiEwms1qtV69epS7+BwYGPv3003feeefGjRdff335xIkT9IaaXepXw/bldYBAoJ1om/xMJjM8PDw8PKzX6+/evXvx4sXBwcFvvuk/cuRIb29vf3//qVNfffbZVx9/fOzo0aPnz5+nN8SU85kPCfCDQO1W3dp+LBZTKpUDAwNnzpy5cuXKvXv3Tp8+8+67v33//d8fPfrJhx8eOXbs2JdffvngwYOVlRV6Q7x5BvJBoLaLflevVColEonFxcXr169//vnnQ0NXP/ro6AcffNDT0zM8PKxUKtfX11EUZWiIxwofzwAQCLTfYn6ShyCITCbj8XgeP358+fLlu3fvWiyWRCJRKpWYW2G5q8cGOcAPArVXTZ7hQ1E0mUwiCEIQxBv7P4FAoP0WPL0LAnWjgHwQqBsF5INA3SggHwTqRsE3cILB3WjR+R8j4I50bNMLBrNZ9Pf/hsEd6baPLbCQDeR3rNs+tsBCNpDfsW772AIL0Nr58UqlEgPyO9g8h4JIJGoaQMU0jQQL30B+55vnUBA1iFZeG9n2gQveo4H8zjefcUCDuZHtxhNB4xkBfIAM5He+mw4C7pROg7zpOQJ8IAzkd765R0BtMo+xk0yrBeAPuoH8zjf/0cCBPeMJAvg/uAbyO988hwLHBL7xah/IP+gG8jvfTQcB40Id2ywALvs7w9vkt+2zQkwiydcmyApBVAiiguOVMk6WcbJUfu1iiSyWSKxEFopkoUiiGIliZB4j8wUSKRAISuRQIpsnsnkigxAZhEjniFSOSGWJZJZIZIhEBo+n8Vgaj6XwzRQeTeLRJL6RwCMJPBLHw/Hyeqz8KlZ+tVlei5ZXo+XVjXJooxyMlIORciBc8odL/vWSb7208qrkfVXyrpWW10qe1ZJnteQOlVyhoitYXAoWlwJFZ6Do8Bcd/qLdV7T5iraVonWlaPViFi9mWcYWl7EFD7bgwcwezOzGTG7M5MaMLszowgxLlAt6Z0HvLOgoOwpaR0HrKLSEfI5b9NyX90D+QTeQf1DJ19r5ws9nHHCQX/snkN8xBvIFQb7JhRldqNGZ19kRvRPRORCdPa93otzka/jBz2ccNE7yOe7ewW38DjCQ32byzW7M6MyrjHHZ3OrktH9iamVy2jc5vfJ8yitWBKY1G1o7onOg+00+uNsM5LeZfKMjJ5tbey5zz2kDnpXYq0gmnsxHY4gvmNAYQ2MTjmeylVlDQmvPA/ng/TCQ3wbyjc6cbC40LnW5ljfRAv0nDAiCXI9k5ErvE7FLoYtpbHmtA6WTfyfc1Kt+MxjMZiD/TZO/uIzO6iLjMrdnJUYQJFtXpDOF6bmVMYlbaUprbHmtHd0p+Uu2OTCYzXTy3+rRUOZGtGkMLYBnPAf5VEBT8qkwinxqW2jk6+2ZCbnXZF0v43U/XiJ69x6tTzbjyDOJUzy7ql7Mamz5nZJv1EqrrohE3ezargBTFtXSXuWTVsIIbW15Ywxjg4wtsJmD/NowRvJpFhT5anN8cno5GkNo2FOulpBkhSBJk+XVqMSjMCTnrYiGSvu8ya/ra6afM8vGA+lNX3LDG3LKc6kojuP1e4g65F/4KTcm1XUKI6gcpwOOEwTHqYTx/8Gd8xmP1Zjzq1WCzfmW5YJSv6Gc9xVL25hVma+FnyQrZZwIradHJUtSTVS9kJ2n0v7eyJ+59QfH7OHvTrx979JvHLOH//3tnx2zh4dO/e32YI/P58MwbCu8g2jppNfSOjHkfBqibPmcrbbC42TBFkmSrzcYya/O8xnJpwoRtC7tC22eb1kuzOg2tMbV7TegPtVX/yRIslgmNuLIc5lbPBdRmjJ7J99sjvT1qfr6VN+deHv60b+unPtCJrE//O6LGfHU7cGeBw8ebGxs7G04CU6Q89m0g5zfGMZR2/T0wRZP8V9LfrWcg/zX2G+t8AmZfIU2ojGGGN6J+nk+TpBYCY8mkIkpz4QqPGtMvbQieyS/r0/5UrN66fihKJK9dPxQHEUuHT9UKJcuHT9UqVR6e3v9fv9WeAfR0kmvpXViIL+FOZ+jhO2gNPL5TDEY5/nVq/23hDTPtywXZnSRmZe+xuW9xkv9PFZ+Fc0+l7nHleszhmRLyJebLVEkSzmOIhmsUCiXcIKoVCq9vb0+n69+p22xjB+hC3I+m7Y7hf/VfqXZvL0pq3xi3urR8L/ar92rmvOpu3rVcoGQP2eOjctciWR++z1omOcTJImV8Cxa8vjjYxKXWBWZMSTVrSBftbjEh/wq6o0bb1h8jtskBshn0utOYcSytoq2Gx/yuUvYWuNY4eOe59eu8NEsqJyvsabHJK4FW5ggKiTJPM8vlokcWoqlUbU++EjsEs9FWpXzZxecUST77YULlOUKBUfOrxx88iHns2l7ha9xY6d4c1TxDG682t8R+dQ8v3q1X034giLfuIRIlavPJI7gWqqME5QJkqRcxolCEc+ipUQWc3iiTyXOJ1KfWB1t1Tx/1uzcac5vvNqvLaluNxbSdmwa0ChaDPexOFrhOETXavcrfBznBf7k08r3srbf+CSPAMm3ejGzO/9yITUmXZ6QuXyhJFos57EyWixTGzm0lMph8XTBsbwplrsfjrueKtakmnhL1vb7+pQzFmttzqfSPhXCnfMbSxqB3OlebMEcTdXeq+c4XF0VkM8kZvIZxYZ6Yzkf8hmboi712eb5bK69q1c7z6csqLV9qxdb8KB6e3ZGH33ywv1MsrToiIRjSDKLJXNYIovFUmgonDFa1ydkS4/GXaPyoFgVkesTLbmf39ennDE7djfPr2mJnq4ZwWtM+E03GMVxEuEooVVz1XarhNUp3fHcfsHsymus6WlddEzmfThhn5x2KzWBeWNo3hhSagJiuefxuPPhpOfJVHBCFZZq4rOmVEue4evrU84a3K3K+RwljVWQ84UmYXVKN5Bv8WILbtTgRF5a0tP6mFi19lTuH5WtPJGuPH7x2qNTwaeKNbEyLJ3fnDEm1ZYc7bn9c3fCTV3Xs9W1/QUP/5zPNoWuLWeM4T/Pry1nA5gxkvGIzKMKyGeSsDqlS8i3LGNmN6p3IPOW9KwxLtduStQRiToinguL58LiucikKiKdj8q1caUppbbkNPY87VO6uyZ/2uSgcr5coWh6P78DBDmfTcLqlO4hf3EZM7lQw1JeY82oF1KzxsSMKanQxxX6uMKQVBgSSlNyzpyetyEaO8Pn88/9EG7qup7dIl9iWKASfiyfi+eRlwa9QqW6e//etevXb968ubq6uhUurIGxJ3XSa2mdhNUpXUX+ggczuwvGJVTvzGvtiMaWm7dk5y3Zl5bcvBXR2BGtLa9zoIzfybM78jOZjFK98P3IyMWhoVOnT588efLs2bNDQ0PXrl0bGRnR6XTpdLo9b/y+CXI+m4TVKd1GPvXduyZXwegqGF0FvRPVO1HqizerGy0kH8fxYDD44sWL0dHRqakpnU5ns9m8Xm8oFIpGo7lcrvpBXcj5HS9hdUp3kr/Tb93eJfndbFCDREuBAvhguVKp7Jj8LY3PuZ+rXM+US2MzjlGF7fGU9ZFs8YHEfF9ivCc2JFLZNzv8QG0TkH/wXNkV+d9Lg3/8h+ZXX0z88sToL/768Od/+d/P/jTy054ff/LJD7kCmUCIW4+Vvz78WTyVacc4BL1p/R9XKKQ6UHY7MwAAAABJRU5ErkJggg==" alt="img">****</p><p>序列化Person成功后在E盘生成了一个Person.txt文件，而反序列化Person是读取E盘的Person.txt后生成了一个Person对象</p><h2 id="三、serialVersionUID的作用"><a href="#三、serialVersionUID的作用" class="headerlink" title="三、serialVersionUID的作用"></a>三、serialVersionUID的作用</h2><p>　　serialVersionUID: 字面意思上是序列化的版本号，凡是实现Serializable接口的类都有一个表示序列化版本标识符的静态变量</p><pre><code> private static final long serialVersionUID</code></pre><p>　　实现Serializable接口的类如果类中没有添加serialVersionUID，那么就会出现如下的警告提示</p><p>　　<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvIAAACpCAIAAADGL04GAAAgAElEQVR4nO19fXAd1ZVnz2Zrdv/Z2SQ7yexHzex8FswXWxlmNgshA1VhK5AppxLPvJQDgYhRYjLMLCZNyIgxKTns4FlVQsCprGNVrxggcgkSjIMRYqZfHDwy2EQyUYDGSDYSloMDbj/pgRxsGUk++8d93X0/zr19u1+/Dz2dU79SPfW799zP9+7vnXvuPU7l5GTl5OQjD/X/3fZX/277q+xfM8BWpof7x8wpsmgT5NT+8a/sP5MvLwkJCQkJCUlHitM4WjM93DM8nZImL62pPPDZlw/nyklCQkJCQkLSqVI0rZke7oklldTkpTVkqiEhISEhISFRpYHWGhvJpa3ywGfHfzhXYC1ISEhISEhIOkFWI60hISEhISEhIUHERGvmy7tO33n7fHkX0RoSEhISEhKS9hcNrTkytvK+/7D0B797+qs9S3/wu0v/8f2Vo+NEa0hIcorjELKBhISEJJcgtGZ+356lC39n7sdPxTxm7sdPLf32b8zvf4JoDQlJHqF1OpNQd5GQkOQVhda8uP/8+9/Pp4jJzcp73l05fJBoDQlJZqF1OpNQd5GQkOQVmdasXHbZWzs+XvnuFZVHPlL57hXVvTdAxGyqT3733Ic+SLSGhCSz0DqdSai7SEhI8opAa/7vl3cvXfC+hae64fUnGE4/1f3WUxshYjZLf/C78+VdBRZPtIZkTQit05mEuouEhCSvCLTmuQ+uP33zBcsnd6+88Wj8t7L7cohozcLd//vsNX9eYPFEa0jWhNA6nUmou0hISPJKQmu+ck9w5IIPVf/p8qXqnuWFA8sLTy8vHFia3zP35OVx6srJyXOXfXBlcRGi+4T7x6qSxupYfwNvGQ5HB5xSr1MaCZA3q/7WXqfU65R6vSnlzakRpzTgV7IVZyfGchsovuvw4vphM0vPKAX0f6v6uVZ0PYVG63QyZJ7nuX49VQo82xEPo1LR9PZ6dNXQTT1zuSZBaU3ou+0+yUlISFovCa25u3fvqff/xrx/yeLC7pXlysrSayvLlcWF3fPlS8N9d8/uLIU/+kcAWP6vv3r+6NHqWH/P8DRMD8u0Znq4Jwpv2bCYUFMjGlrDZMZrwbLXonIDz/HinvDdNfGd35LxrbdQxwGAkBuhwHOc+mhNVgkbNj/MivOUi9Ga0Hc9/aeehISEhElCawb+14NHL/jQ4ivfqB786LkzowBw7sxo9dmPLk7fM7uzBMsvzu4sAcC5yz54/gc/qOVWaI3woDrWn8ZrKicnI+tLZdwt9TqlXmdoBgDYQuKUet2hkdrzUq87WgWIaE2cfuu4+J2prkD6X/mxElyVWl9DerXcWhOEymN6kly65zoRaE3yvR94vA0nTs1+PLt+GP2M5ilRnN51lSxCYpbZdV3puV6Q/q9Z3YZGvFKvO1pl/8YvsPkg9KrcM1Mj0qDo9OvSA0AwxIZphtUWT5x3vBRaI0jG8dJaQTg9akFq6To9oWIGNOv3XdcP4jxyyUirNe2VukutP9EaEhKSVElozSPX/p/xS0oAsHKs953nPwcAZ8evWTn+1XDf3YuTWz5xobM4uSXcd/f5rq7zAwO13Km0JrLc6KRycrK2PeEOsdWl6m+NV5qqvzVeXbjXbJnhV6MUeqF5Xhl3udUrGNLtbVmmN/6gr4y7yRaMpl3a13pBrTUy1xFWDraisCeBx9LprAi+y61RgZfoCZN37H+Ly/0TdeAMYx6JEU47H3A94egAPxDxfNDp16Wv9fnWEb8ijRdSKMTp7cZL3YRKBiXzeMUplZ4PgiiB78p8UzdSKN3hCBT/Jq6f8dxaslAuWdFvbC8TojUkJCR5JaE1e/7iK4+v38x2hfxdtx98af6JoVsBYHZnKaY1sztLK9/4xso3vlHLXSCtSZaQZEUx0BqOT1itQMjzcHRAWC+nRszWmrT0SLmR7YEhqSQzDKg/8XXPtcL/7I0WFuGZYlAJPGxt4/NwVhlxGUmy8m/hChHBaM3QTPJcpDXYfED1JKYgqas1+rXpa6o4YyFXCj6p7MdLWaeT5TzPeNU0IIYRXIsmvfG5wmm0+iUiI00cWb+5vUyU7mr+nh0JCckqFdlaw2jNXY/8BAA+edPXZh/vmdvXtTi55YWBP12c3DL3VNfpj/yh0VrD+dPYbUIZaIodrbFbgdJpTZqkpUetCNF6LK/NANyiKP3K1z1HRPjha3jGv5vCQmKrTEtpjT1t5bmI2BADrcHSi/PNclJFBaWNF2J+iMYp73hhVpDkgWrbyEZrVE6j1y8pSKc1qVYXstaQkJDkFdm3htGav//OD3aPjH7mln+Y3VlamblzbvRLn7jQmRv90sr0nWd/730G3xqojg1HT6xdhtmmUrTSyJsC3MYT8rruTSjRT8J4VCclvW7Zjl4niWc8yXKTWAjQ53rBlwh1A4LPoa5hwrrDqRTXo8DjN6EaTGvQ+YDrYSax+Enc1Tr9uvRGWsOdhErGPcN4OY585Ijrw6zjFSvQbu6EvluPtUbgNPG4a/WzE0pcXvMmlLG9TIjWkJCQ5BX5JBSjNY/vO/RnXbcfeO6lA3dddP6n29+cvPeJb61/c/JeOL797Ht/8fzRo+x0dyLcZlN8vtv6gDdbb2LHTH4NS/xGx2uOnFtrLqV+sr8T/bJXXDsTVZiLqKDf0jqCpteWm7gMe6O1jN6U8Fysj+65TrgtAfWHtWrkl63/om8EtiOAbjrED70gVpnGbHQuvaVed3TcY9tAo5HLlG4+WI6v4HqM6cfSg2B0mYk2qjjaymXhqY/leNVoDS8iZcwwXuoujjwyjuN6nhu9oUuv1SO/EVEWVD874M3+Fdul1a9pr9RdshCtISEhsZGE1txx70tHLviQFMzyxMH7D9x1EY+zf3ThyrlzRRWPbUKRrHHpxPlA98tlErq3hoSEJK8Itwwf+h9/sXDPXXFsS/VSmfP9/ec/97kCi48PeKNHeUlS5efP/mFbva5XBCfrDpoPRGsyCXUXCQlJXhFozbf+9rGli36fpzUSln7vgvm9uwssnoIn1COMT7TPXxKt0DqdSai7SEhI8oocwfvcpf99vrwL5TTVJ7+7+OFLKIJ3m0g72GYaZbPpPKF1OpNQd5GQkOQVmdZUXjqw8t53o7Rm5Zf+XWXqR0RrSEgyi+MQsoGEhIQklyi05uTk/P4nln77N+bG98aEZm587/Kv/9rcwX9CHW7qEaI1JCQkJCQkJEUJQmsqJycrrxxa+pX3Lf3+he/80X9buuC3l//Lf6pMP6fzI65HiNaQkJCQkJCQFCUaWnNysnJycv4Hj8K/ftfy7/zm/KG9/PMCiydak0Peqh4nEAgEAoHA8MVNyRltE62pnJx858OXgOOcf/e/X3hwO9GaNpG3qsdbXQUSEhISEpK2kEce6s9MaxjOfuEGntawi4bl4An656gQrckhjNYEP3mWQCAQCIQ1jvy0Bhznncs+OHdkDACqY/09w9NqTCjdc50QrckhMa0BmCUQCAQCYc2iXlrDNqRg375abh19IVrTSCFaQyAQCAQC5KA1b/dswm+V2LYNgGhNa0RDa6C694bKd6+oPPKRynevqO69AQBaPuEIBAKBQGgciqM1jgOf/CRMPES0pvmC0pq3frhx4alueP0JhtNPdb/11EYAaPmcIxAIBAKhQSiU1jgO/OqvfG9wP7LwEq1ppKC0Zu77ly+f3L3yxqPx38ruywEAnQeOKPGTZs5Fc3F83exz6fTYaM5R/wZ1mjQ0rULLK1BsDduhSwtseD09FmfP92lqXB9m/U6Q2lJnxer5bnEwgYyf5UyjY1CbrytW7wekaFrjOIu/9G544AF54SVa00hBaU31ny5fqu5ZXjiwvPD08sKBpfk9c09ezmVCPsD839RPUUtQSJV0n/z2qaFBbcuZTZuXm2MpamF/5qtPu83VtpqTrf2koKXnq2G++utyNeJz0W6fnRiZac1bjz5opjXTv/Zr/ddc09M/xtSx092JRM91QrQmh6C0Zt6/ZHFh98pyZWXptZXlyuLC7vnypeG+u2d3lsIf/SMApE7TNpy1RGvaaglpw3KJ1jS/7W01J4nWFKKNaE2EK65IjkTlFaI1OQSlNYuvfKN68KPnzowCwLkzo9VnP7o4fc/szhIsvzi7swQAqdMUNUKmmiVRK6tkSuXtsQa1aOmpCcylG9qVWrqhsfZ61BqidU4tyL5XU8cid0vNw5GqXJfAZrzqqaFjPV5or2aaGzYVVocjU2+gBaV2mq70rKOD9qHNQKf2s6FdhtJjPZnGNLU3dHrURqm10lW4ntGxHwt0EM16dENvUMv/6yhirnPhKJTWTEzUv0ITrckhupNQK8d633n+cwBwdvyaleNfDffdvTi55RMXOouTW8J9dwOAOlPNHz/LD6TuSepH1JzLrFz30LIV+b56cuixbEIhvWqZK0dLM72waVem0SmqhpbjVdTcSB1Tm/qYhzXTEOTQU+foZOrnfL0Rr6z5xrTO3ijquyX3KDfoe8ymhoV/OeRGobSmu7v+FZpoTQ7R31sD/q7bD740/8TQrQAwu7MU0xrUYGP5FY9+AUkZpU+IlMvmS4TPaE6TVY/l10FqS+tpBVqcuUt1alN7NfUr3pDdPhfaY/btyjQ6lnoKmXU2Pa+rkmWaTPXRpTErMXdaqh51TDONjtrSokbHkCZHWeZutJmrNrPXXI1Mo5PaGzZl2dTZpobsX1QJ/8Lmc1EnMtOayslJ+De/iNOa97wHqlZ+wQYhWpNDDLTmrkd+AgCfvOlrs4/3zO3rWpzc8sLAny5Obpl7quv44z0209T+c2jzaTHosfxKTVWV48vIkMumgVlbkalbis1u2RsNyp5Ps81w2NQn33hl6meDHpvENvWxqZLl57RBn5183dK474TcH7T2pzX5esxmUPJ9Aeo4Vr4VJDfy0Jrl3/r1s5+/vvrD759b91GZ2Xzzm/jC6znghwAhuC6E8dMAHAcCIaFCa0I5vR8CiSgGWvP33/nB7pHRz9zyD7M7Syszd86NfukTFzpzo19amb5zdmdJnZEqrZYmq5QMnetqGlWb+vEzPFRFl8tcOloBVLNNS3XtsiwdrUBqKamlW46FeZRthtVQXI52mTWnVs/csbnHS1d/c7uyNh/txnyDaF/D1O5S+8rQP1nLyjR7dap0pas1sS9L1xvmblefo7W1mRU56qNqdtLmD1pcpiy6jPYjaNZcD/LQmhhzR8bO/4f3CLTmN38zWWxD33Rmyg8h8ASOEvgQKrQm8DgqE4DDsyKSmhhozeP7Dv1Z1+0HnnvpwF0Xnf/p9jcn733iW+vfnLwXjm8/cNdFjZtYBAKBQFhTUBlMS6pRF62pnJxceHA7/MIvCHxFPQzleRAwm0wIfmScCQNwXfDcJKPng+dXJVrj8eYZidZw2ta2GGNC1eTEwfsP3HURjxMH72/5x4BAIBAIqx0tscroUC+tqZycPPuFG0yOw6jNxvUh8MD3a5TFS7aiBGuN2d5TI0PEbCxDXaLS+s8DgUAgEAhFoQBaM3dkDH7rtwSqkTgOh+C6iT+N50II4LvgeTU64nkQ+uD6cfEcrQnB9cQ1mDahcKEI3gQCgUAgQCG0pnJyEvbtE7ai7ryzpsxzIYTglj+J3rqpRmtiC0voS0wloTW+pzCY1tKaqRGnNOBX6tRS9bf2elPF1qd+WtNCgyGBQCAQCEWhIFoDsHjNlbLjcOhDANPDPaObb4IQAMan/+RPpse5w1CM0/gefx4qojUhBCp/QWlNsLr2oWa8UkG0JpGirDVEawgEAoGwqlEYrYFqFS6+OGE23/++vPaG/nLtXa92vinZewrBrb21wLR5aS41uT1swtEBp9TrlEaCyrhb6nVKvc7QTO29qRGn1OuUer2pGY+9tXU8BGAmlugtSU+vUxoJAIKhXu7fKHup1yn1uqNVSX+MhN/wb9UKNYhUH6I1BAKBQCBAkbQGAH7yE3jXv6rxjD//c2Utnh7u98Hz0etq4vtpmnId39SIUxpwhzjKkjCJiJEMzSgbRoqhpTLuJttSVX8rx2DwNJiSGkMaiTskGLJhNryqxtEa9OIEncc7sSICgUAgtBaF0hoA+OJnEgvKq6+C72YzugQKrfEkr2FOpGtvMojkJSMwjxmPt98IgjCSYCiiMlMjPDXhbDm9TgqtSUwvmiw6aTSt4QmN/QsCgUAgEFqFomnN9HD4e38kOQ5Xx/p7evrH0LAKBpdhJmZixB2hyiIiBVFpjcb3BXurMu5Gm1CxqSYcHUh4Sbq1pupv1REps7QDrQGL618JBAKBQGgOiqc13xvcD+96Vy1EFMD0cE9P/0MmXhIGKbRGZ5IxvJUizJElYhLipk9GWgMQDDFfnIS7BEOicoHWcBtbEeNhpp1Ys5JFJ+1Aa4jQEAgEAqF9UBitmR7uiWXPldGpqG/39rNHmzaxF8PT4soc+uB6/KGnptGakSD20uUcWTjPX5FYGFx6RZIEAMC5DHujNcdk1DtY502M+OggTYjrU+ABbzQ4iJSGf06ONQQCgUBoHxRtrYmFMZuPfAQAsIv1YpHPbDeR1uTK2pbSwuv4DHHOCAQCgUBoMhpGa159Fd773prjcHJ+G0UdvjU5aI3gzJvHo6UNpbW3DJO1hrC6EZRbXweCDuFE6+uQE2UIWl6HzkN6rzaM1gDAtm3gOHDrrWm0RjDkKCeh9NzFd1fXRXyNEwqeQOhYhIPgdEOYK68/aJUs6MtcBFtrkRV3ImdVgz7wV+/63UiEg+A4cuf43eA4DSQNaKFBX1qhZXD5KTcBrpM8CQfFd5W8jgNeVoZdBqfP+C46sctyQWFZSGZP9D0n58czQ8bMvdpIWgMAV14J73kPVI8mNwvLEqTQGj/fWae1JURrCB0LRmsCbMm3urTT8KUvqjIsOWyRk03FE7XFFbmoQsyuS5aasakQV4sGqspaUBlPHPRlJwHWQJV7FrSDTZVasglw45V7AlwHPD15DQdt56rUOSmTSvPZkai8OsOt+rasnbQpxEifsYhebTCtqVbhl38ZHnjAfoU2aSPRSExrHnmon0BYJbj7yMewL+KNvWKy3ted6w7ZKPRuOW2VsvfI5rulh3s3X3fEk5Op5e7dfOVpLq/0b60Ocv3T8PXrwLlSKT1uEd85mmRW/ZzaM3cf+ZgDH7tlb4YsNqqyvouM1+tR4r2br9Sv30rnfP06cyl7N1+pS7B38y1K23tft+z/pNy7j3yslmXv5itf/3parqwzB6mV+q92EA9tdJLZK352Dm3M2lJZMzjGIdYNjXfLaV2uLL3aYFoDAI89Bn/8x/YrNNGaHMJZa0hIVq0ot1gBgGrQNWa3SMkit8imlwDfKJduxpKOKcT/+m6t6NDPtjPu6QO/4G6FOWL9Mh+A1J4JwY3ba5nFRlXWd1UJwPVruQKQD6AEnlZV4IGbdh+smlc1AbIBCjxhpALPrktdCAFCn5s26CX76AkYcebHc0xOw08J9d+0SoY+BOxIMtcVHvoxRN1bfczoyDSHUSdgGT3sY+j6Yl/hNU7t1cbTmoxCtCaH0CYUYXVC9P4L+rDtBuY9wKzNRsu2lRm/XNs/AslOPgFun5AMLcvvFszd8b/xi3DQ1nrvmr1Dos2FQHqY180oHe22CSVtr3RDGDlL8e5WngN+Ge+T1F0qvxvfaQr4qrKCJsDtBr9PXIO7k5TmfUZ3kEvQBxB7fem3kLyy/K7bDV6fMmFSN6GkT8QE+GKT2adA6ivPYpqhvWcD3hvG7FKWs1cbvQmVXYjW5BCiNYTVCn4VYUsUfrygG8K0DXsbWhP0cWnK3Pe+5Ieo+aotkNaYCYrgTGBMI69ekedp7d0+uWmSNSIpgk/GvQ76kOFgjU1XVU4ryNAQrq9kDhSxjXAwGQ7VPbxAWqOuvjgF51vUDWGUPd09lvf8jbmU6A6MN0eaSOq/Sn8KXjVl8CdEb5V4kvTVXqB9KHyOxIwp838CXK6H2dBbOtlY9yrRmk4QojWEVQwv/hLXnNqwdKVEaU3K6ZXYdVH8tkWTyZZ2js14TkJrrAwedrTGoAr5IduHVVWiNVhDEk/MTLQmTZVVQYaGcH3FEqd7XosZC6M1mOnOQGuSJV9xbsV5mzRtytxQ1k9rsGnmd0eDOwihQtblj4bm4+BhE8PtBrfPNLGlsmw/L9l6tUhawy4aVoM/VcdqVw339I+J74TqPnEb0xopQGZOkaKC5xbfja6L8TyiNYTVjMjCH39rC0uLSms0qyYKplP+Ka/qtNvf0Vlr4goXRWuAs4XgG3OOvDxIbCN5V6Q10gIW/y7X0Rq13HjRNatypEGMf1srNAtvCJfXHZR3CRnZMh+JL4rWeIxUiau1jtZ4kl1KGuUyPqB8VZMpZElrzB8BbJqFgzUq7w1qOI1ac77EPu0OFK4tHsduue2Wn5eMvVoYramO9fcMT8P0sERrpod7evrHwHPA8X4+1i+8y3z3RP8gmdZIjlqJhODqve3aWAwxp+wl9F036rfAc3S0psCL8sxKMpUi1ard7vFTY0dkbTvdT5gZsi26LNjJ67HWmEtMvoLtSsFpDWfpKZDWgGqfiLKgFhSHc8gQlhzzpo89rWFkRax2uqoIidkszRQk1b/WCXy5ZtMaV2JhvjWz8mqq0hrVLojvmWK2H19006klsKE1NvNK8aeJxy6YgGACv79AnkVxG/u0XQdptEatm/B5mQDX4q4gi14tPtQlEqo7OqFQZbSGuV6DctWe7wNKawxUNAeriW4ZHgkqtWhNyV3DUaAlbyoK6lQL/1T1t0YxnqYkPb1OFMGb+zeJCWUI/KQLFCXHnMIawdEa0GxCNTmsgWURq3GxT60zmmA1trRlUF1Jkt9njaE1wJniwZqO4LSmDE43+H3gDhZMa4T0HLPRbcek0xrU0GVHazzJAGOpShzimAWa95W8csJ4fKVL0U5WvTpy0xqdtYOfMIJyzU16OucP2XNLJEwJrzLSGvvLkHQcxRM/LLxFU9cz8UND6TitKYPTXWumNi/nFV5frzaF1njOyc9/fjquveuD50Lgg+sLhxh9H7wAoTX4+b34vF8OmRpxSgPuEEdZxAjeEdeRNowUQ0sUghsiPUiISiENpqTGkJIYVWJEcZ0km1Cun7oJRbSmoU3LTWtWY280AOzHd1leQmrfjw2jNTzkJZDfbeGA0hq2ypp9SGXkOtMU77z43frsRlpT4wpcuyw3odRNH1tV/OigtEbfD0HEaxlfFNZOxcAQRJ4i2jFVkM1aIyrkX2dlGPIAof7Cysy3ak4fON3imT4NVN/2oI+jU+qgiIcWM1lrah9MbGPL8DOgjl5tPK3hdpGmt18F1+yuPU9OxgsEpXm0JqEaAvOY8bSxohBGEgxFVEYMnylEnkqhNYkpSJPFLKHvGmiNzW6IITS3QQm6l2Tef1HDfUuJ0dJ1/2baHkLbmFoQ3zRDr6KVSc1FqIE/T6Q94G2hx4bWGL4rXf4tjftIYp5xwJ+o/UBkD7NdepuL1sTMwORZYqQ1Ko2woTWo/7KtKrHn0U2olKgR4kkoaSH09NkLpzWpeeWBEE4di0M5IbyOOxP3HbZoTm17iM0rzb3MyTBJhjexn20uU7anNUmLMtKaOnq1wbRGvpxqfPq6bwEA+K7ASLh/m0ZruAjeCq3R+L5gb1XG3WgTKjbVhKMDCS9Jt9ZU/a31Bd0M6rHWSLwEfaFq0CXOYdhANaNFoxWrp102LbVve9YeIwCI32t4+KcmWGsUx1Uc6LGLiKBIuxIpnh9ptAY5QMvfZIPdasNTLhOt4VoqWFx0tEZvuLJSFQ8N+q6hIVzDJfcL4XiwfsRbS2viBLYrN7epZ7MJhc8WbjbmiBWlWuAMrdP9PNB+joqgNXa92mBa4/tBf8/wNFt8PXCuGh6eBgjkmzo5dtJw3xqAyJElYhLipk9GWgMQDDFfnIS7BEOicoHWcBtbEeNhpp1Ys5JFkcBzONeasK5NqDoXaf6JjTXC0haCak41q5irhBIvVLNNDVXNqT1m2UVrCdLPSo31u9G0xhMDPKmMpLYqYytBbC2QaE2qBSKd1qAmJcO5aCed1sjOod3gptEatKDkXhy9KuTrWqmPqSG6SSK6vxj6WdeHUkPUAbWkNYaipaloOTMZF0lsY8opJ90VMoKBR/Qr15r0sPqwLDZGxzwuw3XTGuteLYzWsNPdiSRnudk7n592nOneh/BLozl7TPYD3kGWe7iZMGtN7KXLObJwnr8isTC49IokCQCAcxn2RmuOyah3sM6bGPHREZrs8Yukg29CmZdq9a36aU1qWeaM/L9ZK2/TLsA2j2z6qlhrDSHCBOIEgBxzSKM1IW8wyEpr1MMX0ZJsE0+b/xKXzuia1wabmOHq+RTVvI+seWknoZJc0X1r+WiNjaqEfyjnmAwns+Suw7ZUYsNerXqaRTrFoILdsGJwGZa6VGeQQwdXsFdpcvHspEZr+jQJuNrKbjpYAEvk0JZSQ08ccbO5sVG0BvtOyN6rzbqOzxz6xA/jQCFVps0qNi+DlzkOi7wJteqlzgPeOltI/BDVo0tgKFG1WKD/qkp0uVIplJrRnMZQkH3/pObin5iHppMRau68r73LLXXm33P2KSUY7n41u7LG2REXWuNyyFOEYsIUdDTikVW9uWUjn5ExZILBWpNyG/IsxikV5ej0QN1ZpCU/xEgtEksB4yueyPCk3V6Vxwgt1cxkxMXe/HsAC0CBA9t+zdKrTaE1bCOJxdPStoQFrwoWDmPaPPl6m/wiOPPW49HSRlLIdXxreokltCn0v97UlJ7dCe34Oyf19yieQL1rLnujbKpKYPCii1JS+ERBtCYd6jUwZWPdzK3LO5dQn9lMrujJEXoNEeFjU8ilY4auFPOY4Yo/FPl7tfG0hoUG5a01vidcLixGLkW04XF9ASCEoCCus8qlflpjY/wgEAgEAqHN0WBaE4c793j3XjF4eiqtMW9IddBeUrwSxfUAAB8nSURBVG6h4AkEAoFAIECDaQ3nzOs58onu+K1UWqMT312NwRMaIURrCAQCgUCAproM8wwk9BMqk5PWhOAW53CzyoVoDYFAIBAI0DJaw0tOWhNoHG7WohCtIRAIBAIBVjGtCTwWPpMEiNYQOglyIEACoSORehU1ISdaR2v464MtaY104zDtQEVCtIbQObC5qg6FTSwbGVj0IsLqRThYCzsVSLe8pHLlXFG6wHj7kVqEfPWceE2iYR4mgUK5h+yEdiZu5OWe7WX5w6W9eU8MReLZ1NAYxIqvvF1ji6Q17DphJII3AHhbn+/picIocMIFwmRidwtOS+w0UoDMnCJFBc8tSQRvzyNaQ+gcZI5+F8N496sBnng3hpfrApLCQEzLDuotzMmdbFj0BvO10exenMzdXs5GLFida/yAv8dlAlwHvL5sYTtz8HiUGUicj7+TJrkvW4nkoLsirxYCItbJmpYaFtTm6t1u5cYgHIXRmupYf8/wNBLBGwAAxvp7hsfG+lVao0iGk1CrUwwxp+wl9N04KFTgOURrCJ0De1qjRlpQ7yjTXSkmPOcvrmWsQncXXz2Y4KImpSVzB6P0qCVAvWm3CRXLrccQlCpKrN7ikaF13F18AWMG4s1v5vhNoLux1wJoQAMwzuEkC1dJ7d2PcRPQyPZ6K5GW82nA0w45XAYrRbnwUGc7UWOqp0c14ZVzr4VuzHCbX4NDXdae9fSPVaHaHrQmumV4JKjUojUldw1HgZm8qSioUy38U9XfGsV4mpL09DpRBG/u3yQmlCHwky5QlBxzCmsER2uANqEIqxfqFzqyJKBmGOwXnq/5Nse/f/uEaiRxjnJtRqQjK63RRys0RTFsXMVy68lFa2xMLMlMMNCa1IuqbcwJs8nt0jIhwKIBuIOmK3oThd0QYgybn65qz7CqSvYby4BoNvs4PAsUrDU2tAa97lmM/IoYmaytNW1Ca2pWHPaqHWgNQG07yR3iKIsYwTviOtKGkWJoiUJwQ6QHCVEppMGU1BhSEqNKjCiuk2QTyk2P4F0U4hBI9HeN/y0MaCRF9BtNsD/bLUXmkJMBZvPX/f5uHvhNKI1VJoM/R9NrbqY1cScji7eyajp6SirASGtS6YXfLdZt0LZjef6NziW+CMPcdgfl0BC8bQaPUYXFV7IxMUpcBLVj8W3JSmuS/hfJqxS0JOgT8yre08iviwn7Cd9wWiNF9sY9b3gW0DRak1ANgXnMeNpYUQgjCYYiKiOGzxQiT6XQmsQUpMliltDHI3hb4rPf38yQmpJCKxCKh/rFiltrlO84m7BK5mia6O941YSeJNb8cMQjIEbx+ZIgw+LqLv0KT+iXmkxqu8J1bCuga4U5pLYm+LanqXlRtCZOpmWZGvOJRGvw2El8EX2IznQrkWhBzLSNVVuzo0qaSSpKa1QWhdJxOfyqA4E48fwJJLqTltakGkEN26aRNvsuwtm8VSc3YxMqWr3by1rDRfBWaI3G9wV7qzLuRptQsakmHB1IeEm6tabqb60v6GZQD625btftx05svO6R2y3TO84W9KH0XH1ik0uXJjVZjsSFwFxWu9UnUx/GNVf+Ldpak4fW6LctVDOPgdlIpWt3oPTf6cgP8T4sSx9ihpGQeJI6ghnAwUKFx08yVEDXCrFE1LRQK46l7JP5BP9ugbQGLO1SBmuNGpZSnGlSofZni9SZY+sQ1sdRTNFl2ME6AaE1yqEk0FkZU8+QY/0jkSF7a03QBx5XDZVQopunOlOWurvHilM96hSsXVqTMAlx0ycjrQEIhpgvTsJdgiFRuUBruI2tiPEw006sWcmiSOA5nGtNWNcm1Kcf/vLR45+/5uEvp6aM9iDwhVN9brPEptKCHC3KV5PGobWlF1Ln+N/i25Kb1iBA9/XNtmsxS+xhI0G72pXlr+nkIG5ZXPJnZVojtTpZ1yUSoNhmhJU+SwW0rVD5lmqLEo09/LFkR/S2LpbWsDUvZW02bkLptodUTsPqmW6nKYPbLU9RS1rjScatNDscYLSG2SklK4uO1uTg/Tk3oSbAGxT6Qd3+85V+kzs2pkRc6yzdhjgURmukzaae/jF+HY7fbZ9NqJEg9tLlHFk4z1+RWBhcekWSBADAuQx7ozXHZNQ7WOdNjPjo8BJ4Di91bUJ9avDWYKb7U4O3WqbXmR+I1hTbitbCQGvaxVpTS8znRWmNRQWSL25NKWbXXdzuEu0BCa0w7PXoaA3GY2K1mSqgdTROc1JOuIV6+JynMg2gNVbO0WXBuIWehEp3S09ddPlppswT+cyOxR0zuNVBscTgvjWzchu1tMbMRbCPTD5aw4iI3A9KFtNQciTMLycWQcbksniSNes6PmtpxSbUqpestGb9wKb1Azevv2/T+vs2fXLg5kNTN7DX6++7ef19N6+/bxOay3GceFdCfC5vtdhsvuhyqQl0aaRdEj6NuSBDZTKVhapF9+Ms+0Gn3JAgU33QZupqhf7bEGtN+g9K/U6EsFrkojWxk4TpFhDRjSNOprWfp9Ia1C9EQ2v4pV1aHXNUQG0FX6Lfja/ZTuyzgpkTGkdrDNYaHaVTaY102xtKXxDjDYoyON015dqpy94V7W3orTPorA5VM57mg8A3BL3YJh+tQU9CoSfGedcilkXii55krTTbXPW2pYzX86w9WiM489bj0dJGkpXWrNtx0/6gC8FLXfuDrnXf/mtdRpXWqAuezRJomSt1cbXJZa5JapZU0mDOlal08wsbtpSvxzLpKdpao3gsotYanYOwsG0kfkdbOxiK+yypybjvdJQEJJXR05rakozeAahSB25vQlr+s1VA04qG0xplb6VY3xreuoBaa6R/kRuHpXtTdKbBwchHymytUaaoFXHXrOJaa41IZbS0JrU4jNaolVEbiN/sN6hnkKlXCWt+lpjPM2JYe7SmEyUrrblq28art9141baNV2278epv3uhPXH/1to3s4dXbbrx620Y0F7PWqBaC1BeYKnzZNttd+GSGsnLQGlB4g6GlZs02rUCV5CvdzHUaQWtSe7JeZLplWPg5KH6Js+9cmwhTlrRGSu+VjVskRlqjsgcTrYlXd/t9JbQCmlbUtQklMhKUSgpX63LVrvckVNyr4kqP0xoDwVVXUyx9Mi0z0hpzoehBLX7SGmiNNEY4hc21Lctba2IzoWl3TNMPvA+++Qw8PhCREqI1a1Dq8a258uvdj4195sqv/aVN4kxsJp+1Bk2Wqax8tCa1PvlqaFm6DZ9LrXPuHsvUroaf88+wQpTB6ePsPbk2oeJvXoPlQ14zYsZQFihUnDj22DXRGsWZ10Bragu8uiOTpQLaVmR0GTbQGtUKhbhO5763JtpE4zNKa55Aa3iaq5sY+qVUyxeLoDX89Y/mjPXQGtyEkwbklwDG82xoDd+9ql0WGQvahCKJpB5ac8XW6x9+5tor7rreIvEN6J4IalpQjRYSDLkMSsxlSVCLs6+MVB+DTt1Dc33UCuiqZFNQan10Os1dIZXeDFMNZFkhaut3/F2fndb43UIWnfED3UfQHvB20mmN7KnQLTveyj1Q1i7P9hXQtiLrAW89rdHdJSOdnFLZhu64vsRgZOON4pQqT4nZNE9wpT+RTToJddMayYhitqnY0xp03hYSA0QXkSqd1nA1T79oiqw1JJzUQ2s+vOXaB//l05d99doCZj9hDaDh1hrbe37L8mrqdmehNcrRaIZ4VVPjFfMsJMSyCBnTTkIlufoA0jahIFr40e932wroWpHrOj6hYgq30P3UricmFGLj4WIqCbW1uBFAFzVJOlqPdLgNrdFHbEAD1Bu2QQ0uw9LUUqOLFHJfto51ZaI10mFv3SkwstaQxFIPrbnkKxsuuWPDJXdssEjMrDX0l/7W/V1pgCWt8XRrAwaBvpS1Swj/la1bXAmtguouLW+LaA4/11Mifh5eCVyAQ5pjad5OHsZdDNYa/HbpOGMRUehRT2EDwWIfXqurMtFrry1g8ZEkWtMJQqEuCZ0DG1pjE7FPRTbX4AkIioolSagfIidIifRkF1sjJ7JyJv0GYlH1UW8KLmD7SWM1NOtvfUi1WSBa0xlCtIZAIHQyGhhZndBpKJLWsKuE5XuEq2P9yd3D6dETiNbkEKI1BAKBQCBAgbSmOtbfMzyNxISyCwUVC9GaHEK0hkAgEAgEaEaoS6I1jReiNQQCgUAgQJNoDW1CNViI1hAIBAKBAM2gNbxMD6cSG6I1OYRoDYGguQyjs2ATC6LtMEGuvoRmorm0BqaH+8fMKzTRmhxSD6357Pc3M7R8LhLWNNC4yplgExYRRY5TNoxeoNfMN3QJN0S0RjsEDWedrmFCTp8SzYcfAk1oJ7MG7TX/E+Bmvo2NsMbRcFoz1p+cjaq5FRuFaE0OqYfWXLfr9mMnNl73yO2W6Q037puftD8aVOfUsAlN7qv6y2pIgAX+9nc+qpHpfjMO7PLWfLeVpNIa9KI/f0IbnLmQG+sRMIYxaNJvuJOQ1VmKOBgM4peqJUREH3wAKVqMCcDqKV1qhwZ3DIy32zWqPwmdicJoDTvdnQhnlUmca9JMNUC0JpfUQ2s+/fCXjx7//DUPf9kyvW7dUp+3D62xr0mr6tw+fZW7zvG/Odvid4M/WFu2awyGD49gXlwnwI0DIVlceiZdJqZeD49fL6tE3lED8WSPX5Oti5hBy+YCWa8v2pXjrmsLy+B2g8exMW8Q4YJyXHQxfoJ6+VucK+CYqDsIXjcEg+AOCvzPx7pIe42bOfg2gYCAruPrBKmH1nxq8NZgpvtTg7dapjeESEx90ioQrWlCnXPSGuGe9T4APhYxx1HMsYg98f7ZVGYjRbhEaQ1anI7WxAobR2uEWEJp7A212biDEPSBH93Pq7up2WzvcTQxevgB4jmKJ0ae0hEUojWE4kC0phMkK61ZP7Bp/cDN6+/btP6+TZ8cuPnQ1A3s9fr7bl5/383r79ukyxjvOEgPJa5jsx+hbluor817W9IOCJpGVxndE0Od0Sql1gfViZZu01cG5YYEmepjv53UAGvNhMgwuMXb79OaalSnHLYwG9ZCiZ2gtAbNbqA17EWjaI3iEGNibxPgdif+NIxY+N3gRczD6zNFWpZjNFpsQsmtjmIXSFYxw43+RGsIxYFoTSdIVlqzbsdN+4MuBC917Q+61n37r3UZVVqjLmY2y5tNLssXNotrappMdTbrSbVa2dQwd4/ZsKVCesOyXRngd4NfjtYwtpjFS6x+40O7HJa10fhg1dEajtPwbkBqROta5SMew4ck5CmFwZcIoY8WtIZ3lwn6os4sy31lYCfkW0MoDkRrOkGy0pqrtm28etuNV23beNW2G6/+5o3+xPVXb9vIHl697cart23UZUR//ae+MKjKqlmXBq0k/yRrK+qss5Qraw11SvKVbuY6raM1YvBef6Lm0hEfaAoGa7QmLOPLqm5nKuT2WdBow5lpjeq87EDA6YmdUbRWEDuoYcklOw1jJHEMzhobEKM6B7wqdgyKOwzFNPgoJUKje6K0pqxhb6y2ZYSI1HvSrdwOMRQJqwJEazpB6vGtufLr3Y+NfebKr/2lTeJ8NhWDHpsnBoU2udRklrnsO8Gg2VB6JloDGKmyKd2+N1psrUG8dDlrDerW6pXxX/nMRzWIlMiWHoyjoIeG1ErqrDUeZ00RVl+RulmBI1iJ5SMCsvdkDBCdOMr01foqqV5ctyijl7GqKrPR+SQlfSXGhc5QYl9j3bEJHQSiNZ0g9dCaK7Ze//Az115x1/WpKSXDgNmIohokVFU64wf62pzGUjlaViPqbChIUiXB3P+6KtkUlFofnU5zV0il5+E0CDWJLQ3RiissaTY3r2SByhXQQ8igozWc/0ed1poEmvtabByiVVXeoKbTCr1lJ94UMzkdd0OoN7/pDqARCFlAtKYTpB5a8+Et1z74L5++7KvXNnPaZTVUEDoWbAnk1++EwYjuq4lFJMvKpzqLqGsqwhU06z1Oa8q1bR13sDBao1v4bc95ZTG6IN45xvuBUObBGs5ba6SeVw/DI01DnXjQrTECQYuW0ZpT1YVjr4VPHzr8xA/Hnz50+Nhr4anqAhCtySX10JpLvrLhkjs2XHLHhtSUBhsDgSDBavp50aljG1qTHPyetd1IQh1r1HNSup0ddRlGaQ1b0bXOy4Uij7UGVWL0AjYTI7WZMZkTfJJEp5xUWmPekCKvYYI1WkNr3ph767mXXn3+yE9PzC8svLNyYn7h+SPHn3vp1Tfm3iJak0MoJhRhFWJCONGDOG2ItMbEG5ibSK7LcNEnuuM//PXH/kTNbsQemm/WKQoZaI2e+bmDWmuQ0EzLt8qCr4x0ojt+K5XWGCpDLjWELCiS1rCLhvGYUMklxMPTAJPH3hh/efbU2eVTZ5dPnV0Jzy6fOrs8/vLs5LHX247WhKMDTqnXKY0EyJtVf2uvU+p1Sr3elPLm1IhTGvArddcgXQ/RGsIqhtZaU645ujJbCGo+YRBO2aQdSM5PaxQfWz6l0ArsKFAhyGSt0e3WhYPg9pl2drLRGg6eYgaTA2JkbXJ8f3Rj+pPQiSiM1tTiPWGhLqtj/T1iLKgnn37xpRPVYwtLswvvHIsQnHjzyadfbDtaA8CIBUprmMx4KK1pnhCtIaxiqLSmxlHKydW96N5HnF1+yxgfMQetqfnAYmwp9nKVaE2DVuIMtEa9WE/TOhVF0Rr7jFpYR6QiECI0PoJ3daxfCQX1neGDPzrx9te2f4/Hj068/Z3hgw2nNYn1pTLulnqdUq8zNAMAjJ04pV53aKT2vNTrjlYBIloTp986HgoqVVqjt+LESnBVkuB6giFWtxn2rjtKtIawiqFuQkm0xgDtDgWzrOjOPOfdhFJLj5dqntY07ihyNlpj7W+ktsvg5tJMWqMecScQ0tB4WjM93D883B/HuqwCAOwZff7Qq6cmT515+dSZl0+dmaycefnUmUOvntoz+nxTrDVTI05pwB1ilKLqb43pRdXfGlEZ/vXUCE9BgiGJjuisNcrzyrgbU6UaOzEYgQz6q/7WXnfriF9hOonWEFYxUq01OphW324IBrVuv263wqJUT5Q0WiOdRpbJWWNsDIXRGqMSw0Frs6eLSmv4brGkNVJP0g4UISMaTmuqY/0JnYksNz85emL/89Mz82dm5s9Oz5+ZmT8zM39m9PmZ54+eaB6tSbxVKuNu7V8DreH4R5KeiS2tCUcHBD40NZJmrdHpr/pbeSMT0RrCKkYwqGEAqdaatKO/hkhSKTDsIkV0oSVnczLYgbibhbN2rO7anlToTobn8KcmOw0hL5pCa7hNqLH+/rEqHHt9/umJIwdenH75p5Xjb7798munDr448/TEkVdfn28arUFpih2tkXlGXlpjKxprTa2eRGsIBAKBQGBo/CYUAHMmjt9mr46frB6e+Vn5mRce/edny8+88PLMz46frEKT7q1hm0o1awe/qSRvPCGv696ESp7IVh+dNI7W9D32wqU9uy6+acelPbu6tu9//NDxls9IgiVs74ZZbaV3arsIBEJzUBitSU5wR1403CosHu82ShOtNYzcSH67iR/xeM0hd2vNxdiv+RpzDjGxBtUFmH8L1c+7JKdUVdbDXIY5r+F8tOaSv9nxx1/6Xvn5E6yk4eeOX9qz6//tPWLOhX7vqzewme9kUy9ty3yTWyPhcHEl669Pg1pUoFqzKnRcmkZrmjwx2mH6EQiEerA2gyekHNhedZKD1nRt339pzy6W/Y3qGfbi4JHw0p5d5oy67331uU1KlTq0w7pSLK1pXA1bVaJ96VnrqSPNzWl1e441gUDIhLVHa8LE6JLsQ61yyUpr7t835ZS+PXPyNABc2rPr63tevPimHX898CwAXHzTDnNe3e/mHLQmVtVuy0n705pW9UlzcumU0FgQCIRUrD1a04mSldbcfP/Bi76wAwC6tu/v2r4fAC75Gytag670hh2lVCUqxZH+lV7wyXRPDNrMGdEnakvta2hTNPo8385LagXQ/kFLKWTXKbUPi9JjaFdqb+SoD4FAaGcQrekEyU1rnNK3X3ljgb149uipmZOns9Ia9Zd06m9rgy0kq2b0hU6noWK6J6n1SS3L0MYcXWeGoV2pJCZrK/JVKV8D87XLMlc9rSMQCG0IojWdIFlpzeaHDsW0BgB2lKfYi4tv2vHs0VOGjKhVI/WFqoRXhb5b/wtDnUGzCqqrOJrGhh5lojU29bEE2kxznc2dZkhjWZ/UtmdVkqlddVJwAoGw6kC0phMkK6353oGZi2/acWL+5zvKUxfftKPvsRcu+sKOi76w48mJ1/oee8GQsU6GoXteiJHGRrl9TSytNan9oybLtKbWSSYse2P1WmtsqlfPXCUQCKsORGs6QXKchOp9+NAtD/zoh8HrzHGYycAPp3aUp3RZHMUvgX9tfoKqihPo0uuSqQnQf1OTmZ8AtiqrQEvR1dmcxr4DbXpVV6KuUaktzVofdaqo/9o3yvDcZvIY5m2OWhEIhLYF0ZpOkHz31gw9M735oUPMa7hr+/7NDx1q+XQ0I9Nv9FUEad1teX0IBAJh9YJoTSdIc4InGH7BEwgdiZZ/QRMIhKwoktawu4Sl4Alj/dLlwynX6q5ZWlP1t6IRGGyEYkIRCAQCgQAF0poqi/ykxIQa60/iJVRZoEujrFlaowssZSNEawgEAoFAgOaEuoyFpzg66QhaEwVy8qZmPJtYUUpsKW8KGNFxSr3u0IgrxZCS9ROtIRAIBAIBmkprqjaspjNoDUBMSpyhmXiDKRwd4GNRiZHAUWsNH6mbfy3pJ1pDIBAIBAI0k9bYsZoOozVCzKkqCwkuYsCvJOkz05qafqI1BAKBQCBAM2mNHavpLFoj0pSqv9UQXDMPrYnSE60hEAgEAgGaR2ssbTUdTWtqwcPjh8EQb63hTkJVxt3ac47KTI0kvjWyfqI1BAKBQCBAgbSGne7mT3LzC7o1q+kUWhMMqdtMACB7B3M0RXgreV4Zr/kLD42zPSxGZUT9Ma155KF+AoFAIBDWLOg6vk4QzlpDQkJCQkKydoVoTSdITGtsBotAIBAIhE4F0ZpOEKI1BAKBQCBUiNZ0hhCtIRAIBAKhQrSmM4RoDYFAIBAIFaI1nSGptObgE19EkW/SzO4stXziEggEAoGggmhNJ4gNrTn3zrKEYM9f5WA2sztLsPwiMRsCgUAgtCGI1nSCpNKapx+/9ey5JQlH9t7x0p6/embYzTRjFie3fOJCZ3FyS8vnLoFAIBAIEojWdIKk0prRx257e3FJwrFn7zmy945gzxdGH7vNcrrM7izFtIYMNgQCgUBoNxRJa9hFw2rwhOQC4naK4B14juN4QXrCVSCptGbv7r9deHtJh727/9ZmlGcf75nb17U4ueWFgT9dnNwy91TX8cd7Wj6DCQQCgUCIURitqY719wxPqzGhas8BAGB6OJ3YVJporQm8DuE1qbTmpzNj55ZWzi2tHP7AB958e4khfv3qoSdtRvn00fL5hecWXz/4iQududEvrUzfSQYbAoFAILQVGh7qko8GVR3r18X3jqVCtCa7oLTm35a++eg/H3jmlaMbbtv28Xv2brht29SxV6q7dh3ftGlu4Z3DH/gAA3utG1lUyWzgv/3aHji+/cBdF7V8BhMIBAKBEKMJEby5IJhi/EtUKkRrsgtKax795wPrujav69oMh2Fd1+bFmRnGS6q7djFCE755LiY3upGVlJw5Nc2UvPHj7x2466ITB++fvOKqGC2fzQQCgUBYg2BBLtnrxtOa6WHOWjOcZqxpsstw4DmO64dNLLEhgtKaZ145yhjJuq7NMP/jxZmZdV2bP37PXmaz+dn8OYbDH/jA1LNl3chKShi5YUpOHzj0xv33T27oeuP++4/dsoVoDYFAIBBaAkZrAKDSBFojPEBsObJUyFqTXVBas+G2bYyFMJyonFtaPv+zuXMbbtv287Mrr1XOxXhq+EHdyKpK4DAwJWempgDgjXvvBYA37r+faA2BQCAQWgW2Glaa7FtDtKZBgtKaj9+zl5lY1nVtfiV8cl3X5rD6DrO1zIaLPB6472u6kTUomdzQVeM09947uaGLaA2BQCAQWo7CaA3nQSO50fDvpJ/wrhCtyS46a838wtL8wjvzp99Z17X5V6/++/mFpfnTSxtu2/bqyUUe93l360bWoIRoDYFAIBBaBd6fppG+NXVLsdoM0vH31kwde4XZWhbOLC28vbRwZil2i3nr7eVXXj8bw+u/RzeyBiW0CUUgEAiEVoH3p2mkb03dUqy2NSK6e2v+8//86sfv2XtmcXld1+Yzi8vsENPhwy8ePvzijh3beBgGF1VSfXyEdxl+4957idYQCAQCoZlgK6D0mmhNJ4jhOr6pY6/wV87kmzqqEv5cNx3wJhAIBEKbgGhNJ0jqLcMEAoFAIKx26PxpyLem04RoDYFAIBA6Hjp/GvKt6TQhWkMgEAiEtQC26hleE63pBCFaQyAQCARChWhNZ0hMawgEAoFAWOMgWrPq5a3qcbazSCAQCAQCoRhaw64TVsMjJNcMp18yTLQmj3xx0+cIBAKBQCDEiJfInLSmOtbfMzyNRvCOAylMDyOkRxKiNSQkJCQkJCRFSSNDXcL0cBIrCheiNSQkJCQkJCRFScG0hrfWVMf6UzeiiNaQkJCQkJCQFCX/H4VYfZewWO5FAAAAAElFTkSuQmCC" alt="img"></p><p>　　用鼠标点击<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAABrklEQVQ4jZWTO0vDUBSA+3M6FRx1sIJDB5cqZBGHloqDk2CHOBnF4CDVDiJkEAsSFKlGbKsSHw1BE5/gAyGDEVMVbclDU6ipTTwOgdrGpurhcLhw+fjO5ZzrkfNCcpkg6CJBF+W80DJ42LxCTXhqYccdAPzkXWEA0PbC8kqHnOyUVzq0vfBP3hV+2x/QsxF4zthZzEbesgMO3hVW1v1mnrJe1qpVpvwA8Ceztu2vaBumzpn6galzFXVD2fI73m+fxTSKomgdrNKthk5ZpmxVHi1TNnRK3WkrMDGJRArHCzYPANoJgaZFENN1sHE7rfGBcokFgHKJ1Y4ChjgjkQiY1xKJ2P1/N+2AAcC6H/247AeA99NeKzdWYGKGgAW9HkPACkysbowO2O6KXh3hb9TM0jAASCRShW25K2x3hScvAKB7cEpKoQoTMgTsar7dEDAlG8ql0F/ME4u71CbbNzQpkYh1N66w0aDXo7BRSxyvkzc0p5izrtAId37D4b7Ph7lXIZ6Z7XkV4pCb43BfdU7OUTl26IlPcLivNp/4hOuSNPkDDaOBuXn9q/nf//lf5i81OE8ovCBEPwAAAABJRU5ErkJggg==" alt="img">就会弹出生成serialVersionUID的对话框，如下图所示：</p><p>　　<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAADPCAIAAACY8ZVSAAAgAElEQVR4nO19W3MUR5p2/4jvZm/mai92Lz5H2P72AsfujCM8EWuCJWJHETg89owHrw1MwH7CYztMO4wXPAMznjDMuBeagweDzdrCBmRog0wjMCOEJbUEQqBDW1iSsbCwMegwSICAblF7Ud3VWXmqrFN3VvE88YSiyM58882spN6n3jolxn8Y3P/R9u3NM9ubZ8Z/GHxweZv8rxEcxn8Y9NDo/V+dPjERoBcAAAAAACghQYoGR8XgKcwLEaw1AAAAAABCRSJqmQYAAAAAAGoDZBoAAAAAAFBCjTMNV6bvgR744PI2rVjzCQFBEASrQDrTQMX1sDMNNR9/RFlzlQDRAIIgeB/SJhoMw5j6/NnxvY+O739sfO+jU58/y+oGiAYdWHOVANEAgiB4H9ImGq6fWDr91+eM75tMzvz1uet/XUrpBogGHVhzlQDRAIIgeB/SJhomDv6k+MOBuSufWH/HD/zEjO7INGjFmqsEiAYQBMH7kDbRMJX9SWHq0+J0e3H6i+J0e2Hy04kjP7FiPJlpGDmcTCaT27umKB0w1bU9aeLwSPCi4eLJrYlFaxKL9nVyfh3KrF+TWLQmsWjNpi+ZX7/cl1i0NTMexgxK+w2LDy5vOz5pm8xr7ec0Fg0BzH9N5rnSdRCd7l2RKGHTOxtXNPsxdXJTYlnmqkrNgcwLZp/c+up2RG4kEi/svei6X9e82LwsKFMgCPqgTTRMNs+7PX1grjg+VxibK47fnj4weeyRqy0bRz9cdLVzl6kbSsrg8IgxcpgWDSOHk9u7rE1H2eAp0/DlPoFoMHlmUw2CSvX7fXB520PLhwaMiV3lsH18cvb429qKhqjOc4CdDmResGLeyU2JhD/R4Kf3YLl3BV80BNvvQOaFjeL/9SAIVo020XB7+E9THf9651arYRh3brVO5f719sifRz9cZBT7Rj9cZFBvVmBEg61gqmu7k2oY/2GwnDkYP75i0ZrEojWJPWem710xD9OJRWtW7NlXKl+0ZsXJoel7ZdFg1V9/3H7AYo/v4jNUywjfFENZfbbf0hBszvPsVFqJyjlkRcOq9tmBT9oeXN720CfES7Ynx6y4bmYmrrWfW9U+axiGYRMcVv3Za0wTsvJDb49dM6vZyyWucua/lDHas2/TojUrTg6Z/7Q2eOtBMs/mkrDtFJF9Uf3pe1c695i76YzpLb+y9/11RRI+O99JWCCUhJmWWJa5Wj5lf+dk2Q7/DJ6ww3bE9i6yY5XTLgns713xwt7O5mWlX2gBwRm1YLyOswfRAII6kH56Yu6bNXfPP28Yxuzpp+YuvXG1ZePtwbX//g+J24Nrr7ZstMV8R9FQzjpIREMpcb1ij3nsHsqst47jQ5n11rGb2DYP4uSx3iF4C8rHj68gYkPnHtFVD8X60pPR8eMrKsl5wbiE21yKMg2skiB1Q0lPTI6Z26bIWNU+a13a2DVU0RnHJyuXPB76ZMIqf+jtsWtGKathtXVcZ/T8lCfwjBnXKwkk4Xrg27l4ciu5I6z1ILIvql+a8/X7MuPU/hLtXFf7y2Tl8kQlWPZvLKuBK2bAJuOoGV/Nks53yKjJkyD9JzsrHVEhViRZuGKi1PZi8zKbCODb37uC0AoXm5cRw+HZl45XTIgGENSEnPc0NDe+2jEw2bTnJcMwRj9cZIkGM9kQimioHKArx2uJaCCitdLxnVN+8eRWWzT6cp880+BUn9Nv+bzZZMVJ86SWPT0VlfNYFg0VmMHblmYooaIhHvpkgr31wW6HyCgMDZHVdg2VhAL5k2XQcZ3xRMOeM5Vyu2jgrQeunUoag5pqgX1h/ZIpItFF9MJfVG72F8VKsCRPu0sggm7nO6LcPkcEXLRO9xOJhHfRQFizpw0E9imBQkV32r58vAJW/2oOCIIi0m+ENAxj/f5zhmH8bPlbo4eSEy2Lbw+u7X33x7cH1078dfGlQ0mpaCDuY1C7PCERAWqiQe347iwanOhUn3sGXI52dOS7Mk2EHOoMVVRuJ5tpqKQE7MGe+lV+v6SVUaitaFAXhWSkZ6ZXJBp49e3rTXFRqe8vhuUT7s53Epv6hdVciIb+jUSMZ8/L3YkGVjGI7VP3NDiLBsl4xUSmAQQ1ISfTsO5/jh/4rPUXL/xh9MNFc1//dqL15X//h8RE68tzI7+1JRvYGyGnug6XS5RvhDQvN5SP43S6mLgkwdn2fXnCfn1aenu/Q31RUCxvVyqf2URlHSpnt9xyLkWiwbysYF53UBQN5B2UpOawlS8fGiAvT4QsGrjrgW/HTOdYJdZUi+yL6ktFA/H0RGW/u9pfVNC9crF5WTl2spcSiFlyJRrKp+wXm5f5yTTYFEN/+SkPof29K4g0gPPlCel4xYRoAEFNyMk0HGo5s2Dxq+3dA+3rH7j37Za/Db7dtLnub4NvG5e2tK9/wCg/b1kBcRnCeuJS+ZFL82hu3W5GRojK3XDHS7enrS/dKJepZP7LZ6XMDWsVU7wb32z2Fc8UufWF/VZuhNx0stRw05e2crs/onIu7Xcp2p6boC5bmFccmMKKsLA/uklcyzDvebTXrxQODVmXQq61n5POm+hGxUVrVpw8vsm8QHCyfKuKaD0o7l/bDZU8+7z607aEwZnyJQxCFBJNSGGhvL+uTPdvtOXkbfcKbOSk66lCK9DS5ewNkonECxs3vVBuIqovtHNyk724LAi49s1HLs1/2scltC8YrwMhGkBQE3K+cmnFicsd77Wvf4Dk5Y73HKWAOniXJ0AlSi4x1ITBDQ3rAeQR72kAQT0o+8plgPpAJBqIWwXl2V3QRjNU38j9Xyts13Y7mHHZbh3FegBBENSOnEyD/G+woqHm448orWityd+aTwgIgiBYBcoyDdy/EA06UJ8cg7Vd8zkBQRAEw2aNMw0BWruvcH3qEgjeD6TvpwQAoBawok+NMw0BWruvcH3qUq1dAIDQsf+j7YlEwjBGQRCsIYWiAZmGqMAUDf3nciAYY0I0gKAORKYh8rBEQ6UokQDBOLAMVjRwBUQ5dyorCfDQ6WiZSOeqGqymMJL3pZs/rubQ8pz6Z9j+h7rYQh2Cq4VaCTXINEQRfNHgEuM/DIKghAGuWFW4Fw3c8vAOtY5BNxCbtc2vRDG7wwpHlbEEsr/CjuuhtvIrGsaVMw3mSyHp10iLy7mozVEpFoBoAKvAAFesKpxEgyjZEMih1v9BFqJBE58hGoKt6TfTMNW1PXl4hP32hKhchNoclWIBddHwq4OvmWR/qnlMAjVnOItXCrFosDLP1LGMUhJUiWKmWiVPK+qLrSCqQ+XPJUFI0WG3fXHNsoWKXUuMSyq48kdx93Hn0HEsXMvqMx+UHdEeFPkv6oudNFetFKa3/H903PM9DSJxANEQPtRFwy8bX/3m8tJf7n+V/YkMD4lEgo0Z5pKSl6i0EtVxrOahciCU96WbP67m0PKc+ieX4SxeKdyIhgQTGCQbKvFGUlmxC9ER31UrFbclTajgIW+o6I+H2eBGKceBeN6VKuOqWitXK8rVvgh1HToNufx/dNzzPQ0QDbWDumj4+cevDF1a8tTHr7A/qYQltlwlgDkG3UACZzXDdlCjqC0TjASUjyWcxSuFVDRYcHsAVYmC8mqioEi14kYCuc/y+OHoM9uRPB44eqjSe4In4BR7F8UzV/vUcVy1bcVdGx72ILcvD3tZ0kplpZWrlf+PjiPTEEGoi4YnPnip/+vnnvjgJfYnKn4kBMkGD8FSXkfFQlCeVC0AR4KJiIsGDxuiw6jbUKF4tPUWAl15q+68Nw8Ve3fUGSqT6XnGvI2raq3Ud59jK1Ff8nlWb+VXNCDTEBXIRUPduyvr3q2v27mybufKn71bf+bCs+Z23c76up31dTtXmtWo4MFGFEpJsCXcsMRtxVYQ1bG22TryjiTOuOqLa5YtVJ8HkXFJBVf+cIcZM9Fgjs46flHbkhK2guiY6FhN0pfEiNxDCmx3rhzmDpzbSmRK4o9jrFLvnZ0K0cBZm/KpSLjZ6dx5dttK5KGjA1wnRaMQ1VGcRnkrxfFW/o+OI9MQQchFw8Jty0/1L+ZwYPGp/sULt64wq0lEQ4IJJ+yGJCbJWyWcQpdKK8ewLW+ScArJjsFVvXf5hqgvV/6o7B3FcZGs7qKmlzFe7gSCmlAoGhQzDeZzlRVs7zJticpFqM1RKRaQi4bHU0vnp5Y9nlr6eGrZ/P9e1tzzzPzUUrNwfmrZ/NRSsxoZPCz4CUuioEiFRm6QlvcuaiUP22xUloxUblllFFwj3nqXKwmIBhAEq0mhaBjHGyEjAvV7Gn664blM1y9++tZ/sD+5CkKeRYOH0BWgaHD0x5uHir2rqCVHnz3PmLdxkQxn8UoB0QCC+lEoGvBGyKhAXTQ8+vtnPm57+tH1z7A/sYGN3ZaXiMIkt5XEiLwvCpKo7OgM5Y/EpqhQ7o+jJlDvnZ0K0cBZm/KpoHqXDCGcxSsFRAMI6scEMg1Rh7po+Je1T+8++fN/fuNp9idJtAPBcYgGEASNUcNnpkFyysWF5PhQm6NSLKAuGua9/uS81U/OW/0k+1PNYxKoOcNZvFK4FA2QFCBYBfrKNEA06AB8ewKsAgNcsaqAaABB/egr0xDg8aE2R6VYAKIBrAIDXLGqcCMaiDMT+p+8sxe6Yc0PxCAYFfrKNAR4fKjNUSkWgGgAq8AAV6wq/GUaSAGhvgGCoJzINEQegYgGANAOQYgGspCrFbjpBxAERUSmIfKAaADiCd/3NFBqAAkGEPTPADIN5ssf2ddFd2233gbp/CZpiAbPgGgA4gn3j1yKVAL5q7wQMgIE5fSbaZjq2p48PMJ+Y2LksKUVRg4nk4dHHI4PEA2eoS4afnXwNZPVcQwAfMH3expEdzmAIOiZAd3TIP0w1VTXdoiG8KAuGn7Z+Oo3l5f+cv+rcoPch2PZh2YdH6PVECH5LLep8shxNf1RtGC/3m9Q/6wGfIgGx4wCCILeGNA9DTLRMHLY6WtVBkSDD6iLhp9//MrQpSVPffyK3KAoKrDl+ogGdU9q5bM+c6UOViZyy8Pr3trEGyFBUBOGnGmY6tqucG3CgGjwAXXR8MQHL/V//dwTH7wkNyg6m4Ro8AN95kodEA0gCFIMMdMw1bVd7SZIw4Bo8AG5aKh7d2Xdu/V1O1fW7Vz5s3frz1x41tyu21lft7O+budKypqVi6YKKSWhkqlmE9rstvyqB5Ub59YROSMqkfjMdcnRH65Nbu+ifinf5DPGLXTlj2jmuV5x/+nYMBhANICgfrQdHgPMNIwcTiYVrkpYgGjwDLloWLht+an+xRwOLD7Vv3jh1hWUNSssUSXyDRYqrRQ3VEKXYx1XPsvtSKqpeyjp3dtsuPJHMfxDNIAgSFEoGhQzDebzlhWYQmHKetyyBNwIGR7kouHx1NL5qWWPp5Y+nlo2/7+XNfc8Mz+11Cycn1o2P7WUssY9c3Xc4IKKcIqWRXW4TpIlbkfh02eqlVsPRUa89S5XEhANIAgGRaFowBshowL1exp+uuG5TNcvfvrWf0isudIKkuDBjaPqfblqxVZTbCWCK38kvbsSDQZPsqj07tgXRAMIgkFRKBrwRsioQF00PPr7Zz5ue/rR9c+ITFEntdS2vIRrSnTizt2W11E0zu0rDJ8lHVGmKHC7tlqJXFLpyNEfkU35VFC9y4cQJCAaQFA/2g6PyDREEeqi4V/WPr375M//+Y2nq+AVFXer0CMQN0A0gKB+FIoGZBqiAnXRMO/1J+etfnLe6ier41i1T0yBmAGiAQT1o69Mw9jYdVeUHB8gGjyDLxpAMAYsA6IBBDWhr0wDRIMO4IgGAIgXIBpAUBMi0xB5QDQAsQdEAwhqQmQaIg+IBiD2gGgAQU2ITEPkAdEAxB4QDSCoCQPINOQakslkMpW9REmEfDZdeh9kqgWiITxANACxBykayo/kjBq8T2D7PBpyrVVTrGgojNhpCXbaq+OzqA65lgLvi3nfySj1T7nZmk+j2LESvGQa8tl0sqF3LNdIiYZcQ0Ur5LNp81fJQQGiwTPkomFB/e7n1zU1d1x8fl3Tgvrd1XUtVli7dm2tXVBCVPx0BSrT4P9ALzo0V/lIHV53wVpmrWkb0hQ9DHt+JL8GuHprN7El+LingRENVMoBoiE8qGQaFOVCDd76x/PBc0PSc+rtUj4HZUXitQTU23LrUyVuzUqciZ9ugGiorWWIhgD7iq1ocHdPA1809Dbg8kT4CFA0GNX/vkBAUPHW84hIxcAWGmpBWi4a3FqT++bWiP5wFA3crK9jEljURG5EMcNMVpC45+iwox2VcanMhnywcuOOdri/Kk6RqFXCDvWJZVs5VlCfH+54uf9UmSJX+706TFQh05BrSCLTEB4koqH9+OsmF9TvtrYpUk2sBUGuDP2h4q3nEYkCM1tBxQi3BKJBDhXRIDpS+z+gi+qomJW7KnHblR1v4/Lgszc7rvqS13Gc/GrOfHj7wnOrKlAoGoLINBAph1QLRENIkIiGY01v9EwUeiYKC+p3mxsUjzW9QTUh9CxdSFXwWYcLqoLIjshnygG2mrw7EeSigbpAYG1TVw2o7aCuLChe+4g6VC5PUBHFvip8HZq5AUbRbBVCV4Ahh5oxP73Lp8jbHpR3KnGV9cfbzDvOT7D7wkOrKpA8ZgaZacimkg054qbIhl6IhpAgEQ37973ZM1EYvXp7Qf3u0au3We7b/ybVxFwQtmXB5B4cN9i/3A0uqF+9tVIpUbRsuM80KEbxQCK9JVD8m9IZ6vc0uD22ehMNjl1EUTS40gpuBYF6HZWfVAYud8PPzLsaqbd94blVFSgUDYqZhlzptoUk9XRl5YYG3NMQMiSiYfv7f+6ZKHx77daC+t1j12bLvGVx+3t/oppwYzyhr/l1yGqGWDRQdriopmhQ8cfwJBoc6yi2csT9eXnCUMsrsCWig6BZh6zPLZT0JTErd4Ys5NYRVfDmgMpUcHuUlKjYcazDbcKtoBLVRD67reC4g+QjTdjhdvE4+lMTJkSiAW+EjAokouEP6S09E4UrEzcW1O++MnGD5e/TaaqJtSDYDZU6CaloUBkOVU2xucRJR8uOcHsjpAfR4DnG37eiIXKMtPMgaFEoGvBGyKhAIhpWbfjLqg07Vm3YsaB+9yvm9ls7Vr21g9wg6xN6ln+Pgkod8lfDHpvJX7mgKoj6ErXiNuT6puiPBeqWBa4CIG9lULyDQV7HMfCT9V01jByiLhqIlVZ7Z0DQD4WiAZmGqEDlkct/w2udfKP6kdjnBYs4IeqiAQRjQ2QaIo9g39MAaIJYxn7PgGgAQU2ITEPkgddIA7FHGKJBdL0gqF7Ckzhyy/G+DqIydraO/vtUMhz/HgZ7dQyZhsgDH6wCYo+QMg0BGqxtnKZ6D9UZ/RVJRCVCSD6E87+mBGQaIgmIBiD2gGhw1TtEg1Z2autD9UQDMg1RAUQDEHuoiAY2B0v+0/74jFITUStJNVEFRX+4h3vyL9eyyrgcZ4zd4DrpOBsq45LvDmqbWyjZFwYTJiUzJuo9vH2qblzRAQ8j9ckEMg1RB0QDEHs4igbywM3dYP9yN7ghx3GDbeXZDtuE8tlbXx5mTNRc3pfIZ7kRUe/eRurYStIk7H3qduZdWVYfux8KRYN6psF8KaTg2xO9DcnSO6QhGkICRAMQe6iLBtGhOUDRYAjOAkMKMNzTR7d9eZgx0gH1vhRFA2s5QUDiPNdtt/siKDs+RYMrO+z8uDUeFIWiQTHTkM+mkw29og9WZVPJhmxLCqIhTODpiagjTk9XhjQWrUSDSqtgA0wNRYPb+VEXDa46dTVSD6Kh+vvUrR3F2F9L0eD/K5elL2LnIRrCRYDvabCL2dqgOl3XdowkHL+E6cqCYX+5pGF/U6SklWKnojddOlr2iUDuaTCYYCZqwq3ALZd0R/0qqcDWpI74Eg9Z44qW5cOnTEkGojLPkq5FQ5P0KypkoTjMKu9Tx7Uq8ofrgKsdGggTPjMNItFQykCMXYdoCBvBvtzJWhDkyogldBigY7h1W8LdVoziHnqv2pcv8HInENSEQtHgM9NAff3S/FVyUIBo8AyJaGg//rrJBfW7rW2KVBOIhmqCmySQVHAsUU8qqFSDaABBkGJYmYYKkWkIGRLRcKzpjZ6JQs9EYUH9bnOD4rGmN6gmRC6LLqQq+KzDBVVBZIdqQv0V+cMWUuOlulMfBVvNcaQm2Hgvj77sF624n7mSt5LXYY079qWiNnwCogEENWFYmQaIhqpBIhr273uzZ6IwevX2gvrdo1dvs9y3/02qCTf6ut3gBnJ2gws2HstbKfbFjfSikUp697YhglvRoFjCtSwq9FPC9Vnkkh9ANICgJhSKBsVMA3UZIplq4V6kwOWJ8CARDdvf/3PPROHba7cW1O8euzZb5i2L29/7E9VEFG7Zc3SDibjkObrBC+TcE3eRA5K+2Cbsib5jc5UsguNI5ZbdigZuSkDSRFRClYctGiTlQcGtaChPfu2PsHLHuE4G5by2k1D9CXc7D3pOnSYuCUUD3ggZFUhEwx/SW3omClcmbiyo331l4gbL36fTVBPFcCvfEIkGleF4Ew0GE9c9jEKluSvLjgg8HyA3GG/RQP3q+Qgb9qFZxX5QPtQqzOjmvwc7mkRoDSkUDXgjZFQgEQ2rNvxl1YYdqzbsWFC/+xVz+60dq97aQW6Q9cnzY+pkmiqX1CF/NZhYLj//piqI+mJbGTy1wbUjsUz5L3JYpZrjSC1YGX7R3QOi+w9E1iS3HVAbjnkOxb5Y/x1H7RYQDXqOJSr+e7BTq6nTn7YDHTINUYTKI5f/htc6eYJK1PePMKJsrRDSWFRe7lRWacISQyHtTLUi/5lg4MqyyLjjQLi9cL1SmRCRHaqV3EluR9xJk/gs6T0QO0ycc46Fkt5FcyiqI5lDUcNAjLCF8o48MIFMQ9QR7HsaAAvEfz+gxvCTaZBsBGVHxTK3jmNfKnY8bwQyY9yfJLHWVV8qrVTm0DFqBjirfibT7awG26kihaIBmYaoAK+RBmKPoEQD9+RMxQ43ArmyXHPRQHkoCkvykYpcEg1E1FwxqqmHSdYfb6LBcX9x55CtwzaR1PE5q5LZUFzzrigUDcg0RAX4YBUQewSbafAQPxxFg7rZWokGlWGq+KwybzUUDSrz7NhRqPOs7pXirHrr3TOFogGZhqgAogGIPRQfubSiO3l2RZ0aejjJYw/W3LNAR8vUaZ/cjjzYsBCNlDt29a7dDkq+L+QN5XbkY3ecH/WBqKwfyibbkOuzt10sN+K4wlXG7ooJZBqiDogGIPao7cudEkwYq4kb1RxmXMeIOQxojCUg0xBJQDQAsUetRAN7ihb4eZtWjPfoMIdBDdD6j+kx02C+9pF+jXS+JVV5T2RjDqIhNEA0ALEHXiMNgprQb6ah9Als9tsTxCcnkGkIFRANQOwB0QCCmjCgexogGmoHV6Lhn/7y5D/95UlJBfsNOKpfa6w+KMe4TpIDEdWpLXx6SDV31cpVk5qAdNLD0xM+D4vUzWW1OjrHO9ENRpEB3dPAFQ24PFEVuBIND21dtK+r7qGti7i/csOwtgFG7lg13fbWV1AeerCj7T4VwVumwVu4DSpI62YHBANhaJkGkrnGZEMvRENIUBQND6TqTH75zfP7uuoeSNWxdUTn64H4GTggGjzb0XafigDRAIKaMLRMg429DakWiIaQoCIa/vGthfu66nqGn7O4r6vuH99aSFVTSfKThVQFbh22pshJuR2JS5675lZQGZrEGZWRqnjoajbkHVF/VXzmzobjuBR9Fo1dMhuK355gS8hCey8yO2QdrhGqXNRKxWGRffsxWmmw8pHK/QFBRdr+LweYacimKs9TlG6WhGgIB46i4e9/9/i+rrr2gcUktxx94u9/9zhVM8GLB+RxPNgNbkfkX3U7rE3HEq5BUR05HC2rtFL0kK2p0ouHWZXMhqRHbwtAvvAMr/c0OEZfz3ZULDt2J7FDBXt5HcmG3DIIeqBQNChmGsznLStItZC6gSoUHWgMiAYfcBQNP1r92JajTzR2PPWj1Y/9aPVjjR1PbTn6xI9WP8bWVBQNhvgOPrYO20Qf0SAaBVuN67DEssSgKw/ZcnYOVdwTNaEkgnw2HPegyLJoFKxxrikjINFgqJ1tO9rhWmAte+uImGFh79w63BJ5KxD0QNt/ZLwRMopwFA1/9/KPtxx94u9e/jG1zcIxrnjY4BqX9E7+Ve9CpTtJTHL0UO68yLKrVip2FMfONau4c9Xdk/QVSBdhiAZ5uaIdSXNJsPfssGPvVomrn0DQG4WiAW+EjApU7mn4P/9/nrVhbXNBnI7Q/+SW289gDGqDbMIaZ7s2BBGOjaZsp9yOuAPh+iOvIPJZ5KRjE0cPubNqCGZe3h01pY6WRbMhKZdX4E6OaFBcO4r3NLAVyEJ7Lw522FaSjkSWJX3JHTbLE3ZI2lLVVFpJJgEEJUyQ/5eRaYgi9Hy5U8IeJGroCVBNhLSv8XInENSEQtGATENUoKdoMBTOSoGYIbw9DtEAgpoQmYbIQ1vRAABBAaIBBDUhMg2RB0QDEHtANICgJkSmIfKAaABiD4gGENSEyDREHhANQOwB0QCCmhCZhsgDogGIPSAaQFATBpBpMF8Kyf/2RK6R/NCl5KAA0eAZEA1A7AHRAIKa0G+mofRdCd4Hq/LZtPVRbGQawoOiaPhjpveRZOPDy7c9kmxcvOXUoTOXquId4B21fVo1vN49WIZoAEFNGNA9DaxoyLekiO9QQDSEBxXRMO8/t/2/l/cdO3/Z/Ofh7kuPJBt3fP4VtzL3mM4+fy9/Ip99ZN/+lroaIyF4+6Qfa4EjQLNyU9z9UjXRoLIwIBpAUBMGdE8DKxpyjamGxvInq9LZPERDWHAUDYu3nHok2WhuX5m6ZW50fHXVKqQgOnaz5So12cAcP9EQBqrvlbd95NZPkSSVW4NoAEFNGEvMtfQAABD+SURBVFamIZ9NV250KGcdJIcSiAbPkIuG91ouJBZt/fqHGcMwHkk2bvi07+Hl21a8mzMM4+Hl27hNROd8HkSDZUq3wKy/aKg+vM1DILMH0QCCUWFYmYZ8Nm3/THY6m4doCAVy0VD/XscDv95mGMbiLacWbzllGMa8/5SJBm4clVxr4HbKDclcC+wGWU1UIrEmb8gtYUeq7qFK19xyUTU5HB3gzg+3F66H6p5Q/sgt+7cD0QCCmtB28Anynoax69lUsiFnbvc2INMQGhRFQ2LR1uEr0+ZGbuja1z/MKIoGMvaINiRGJJFJxTJ3Q2RT4pioxNEfx74kY/QwdXJIxuUoEeStgnLJ2wAdxwXRAIKaUCgaFDMN5vOWFdhufuy1fjTVg+SoAdHgGXLR8NpHZyzRYBjGtmMXzI2Hl2/LDV1j67Pnsn5EgzyA+dyQ+GzwYidbgbUmGrvEea4Rbh25P4rgDlPus2gg3Anx4A/3n/5FA+khRAMIakKhaMAbIaMCuWjY1/71w8u3XZ68se3YhYeXb/tjpveBX2974NfbjvSM/THTy9b3Gb9F5dzgFKBo4Lohr8yKBld9uRINrjxUgdvZUJQ1fjxxdEzdCFsC0QCCmlAoGvBGyKjA8emJNR+feeH9zhP935u3Q5p498SFbccuUDWpE1ZqW17CNWVVENUXVWMrcP/pWE1eYvBiHgtuLyKf5XUk/qhA0SvRoBxH6tYf0pTon+qDkpRDNICgJrT9Z0emIYpQeU/DnraR1z46Y94LuXjLqdc+OlMt79yBGzlq4kmwoGJqDT2JKCAaQFATCkUDMg1RQWxeIy0/h4464jSW6gOiAQQ1ITINkUdsRAMAiADRAIKaEJmGyAOiAYg9IBpAUBMi0xB5QDQAsQdEAwhqQmQaIg+IBiD2gGgAQU2ITEPkAdEAxB4QDSCoCQPINJgvhaReI51N2V8Umb0E0RASIBqA2AOiAQQ1od9MQz6bTjb0st+eyKYac+XtfDYN0RAeIBqA2AOiAQQ1YUD3NPA+WMUKCMlBAaLBMyAagNgDogEENWFA9zRIREO+JdXQi3sawgNEAxB7QDSAoCYMPdOQz6bLH8iGaAgFEA1A7AHRAIKaMPRMA3lzg+SgANHgGRANQOwB0QCCmjDkTANxbQKiISRANACxB0QDCGpCv5kG83lL4tnKFtG1CYiGkADRAMQeEA0gqAnxRsjIA6IBiD0gGkBQE+KNkJEHRAMQe0A0gKAmRKYh8oBoAGIPiAYQ1ITINEQeEA1A7AHRAIKaEJmGyAOiAYg9IBpAUBMi0xB5QDQAsQdEAwhqQmQaIg+IBiD2gGgAQU2ITEPkAdEAxB4QDSCoCZFpiDwgGoDYA6IBBDVhAJkG86WQ7GukKy+LxFcuwwREAxB7QDSAoCb0m2nIZ9PJhl722xOl8rJ6MF8mLTkoQDR4BkQDEHtANICgJgzrK5fkVyfy2bT5q+SgANHgGRANQOwB0QCCmjC8r1z2NjBfsZIcFCAaPAOiAYg9IBpAUBOGlWkYyzUSmYbGbB6iISxANACxB0QDCGrCsDINuYa0KRTIXyUHBYgGz4BoAGIPiAYQ1ITVuKcBoiFUQDQAsQdEAwhqQr+ZhspzlfbbF2z3NCQbc7inITRANACxB0QDCGpCvBEy8oBoAGIPiAYQ1IR4I2TkAdEAxB4QDSCoCZFpiDwgGoDYA6IBBDUhMg2RB0QDEHtANICgJkSmIfKAaABiD4gGENSEyDREHhANQOwB0QCCmhCZhsgDogGIPSAaQFATItMQeUA0ALEHRAMIakJkGiIPiAYg9oBoAEFNGECmwXwpJPOVS+JlkQ29EA3hAaIBiD0gGkBQE/rNNOSz6WRDL/crl9YrpXMNSXx7IjxANACxB0QDCGrCsL5yaftg1VhvQ6oFoiEkQDQAsQdEAwhqwrC+cklmGvLZtPnNKslBAaLBMyAagNgDogEENWFYmYayVih9+jKbgmgICxANQOwB0QCCmjC0TIONuDwRIiAagNgDogEENWGImQbyMQrz/gbJQQGiwTMgGoDYA6IBBDWh30xD5bnK8pWIyj0NSTxyWQ1ANACxB0QDCGpCvBEy8oBoAGIPiAYQ1IR4I2TkYYmGyYnLIBhLQjSAoCZEpiHysETD3NxdVw0nJy67bQLcn3inaXji+szM9fFA6GGhQjSAoCZEpiHyIC9PfDdZPHex2DV454ve2ZZzs5+fnT3WffNY983s6VtHum425WYPddw80HZj+Ls7hmFcvDRqNTnSdfNw7lb2tAse6boZBg/nbqkzJG/hg+VD9vStoW9vG4ax+cCFG9fHA6GHhQrRAIKaEJmGyIMUDecuFkev3vvqu3v9o8Xz38ydGymeHZrrHip2XZjLDRba8sXWvuLxs3ePds4YhtHz5YjVJJcvtA0UOwddMJcvhMG2gaI6Q/IWPlg+dA4Wj7RfNwzjdx/03ZiZDIQeFipEAwhqQmQaIg9SNHQN3vnqu3uD3xbPfz13dmiu68Jc52Bx4bPr2waKbX3F1r7iiXPF4913m8/cMAzj89NfWU1yg4VcvtA1OKfO3GAhFLqJamF5Cx/KPnQNzmU7pw3DeH1X/80bU4GQu1AXPru+JJV4CxWiAQQ1ITINkQcpGr7onzVP3bqHSmeWC59db/LY2TmTx8/ePX5mxjCMTOuAYRhf9M72j5ZPQEOLamExOG8nb9zj/q2mDzrMA2vZPN1fvavv1s2/BUJ2oVqr9MS5InehQjSAoCZEpiHyIEXDiXO3z40Uz47MdV2Yy+ULpGJo7i4e7S40dxebu4vmsfijY/2GYbScmz3/zVx7fq4tX2wfmHPBfChsyxfVGaC3kzfubTh4m/1bTR90mAfKh/aBOUs0zM7OBEJ2oZJrlbtQIRpAUBMi0xB5kKLh87Oz3UPF7q9sZ29Huwsmj3QXzQ3zWPxBts+AaIBoUBYNd27fCITUQjV57OyctWLZhQrRAIKaMIBMQzZVfhsk83VsvBGyCiBFQ/b0rc7BYtdg5fh7sq9wsq/w2dkSzcNx8+kbhmG819RnGMbnZ2fPjRRPDcy1DRRP9c254EAodHUDYIDeCkVDFX3QYR4oH071EaLhzmwgJBeqSXOVnuwrULrBWqgQDSCoCf1mGnINllbobUiWvjExNmb7NDa+PREqSNFwpOumdTXaOv5+ToiGz84WPusuHD09Y5RFw7Hum2eH5lr7iq0DRevYrcLWvmIoHHDBAL0ViYZq+qDDPFA+nOwrmDdCrt7VVyjcDoSGYRzO3aJ0T+tAJTdmLtSm7rtNnTOGYexq6oVoAEFNGOQ9Dfls2hINuYZ0Nl/+Kd+SauiFaAgJpGjIdNxq7atkrSvXifuLn/YUTGZO3z2Uu2kYxq6mXgOiAaLBhWi4EwjZhXpqoJIb4y5UiAYQ1IQB3tNQ+v41XzTg09ihgRQNjadunThXbO0rnuqba7WfvR3pKx46XzxwtvBJ191MrnQCZxhG9vStrgtzzeeLzX3F5nNueD4c9rlhoN5uOHi79LfP9reaPugwDzYfzhXNyB2saKAWKqluuQsVogEENWFAmYZ8S4q8NgHRUEWQomF/683m7uKJc8WTvYUT54snzhc/7yuYiuGz84VPewoHzhQaO+9k2iqi4VDHzda+4mdnC4d6ike6XdB2ySM4HuopqjMkb+GD5cOR7mKmfcYwjP96f2Bu7m4g5C7Uhc+uP9Y3J1qoEA0gqAkDyDTks+lkkpAI9vsYcHkibJCiYW/LzJHTd46eLRw/e/f42bvHzt452lPI9tz9rLvwaXfh4Ok7jZ13PsnNHmybNsr3NBxou3H87N3PugtN3Xet5yxU+Fk4bOq+q86QvIUPlg9HuwsHv5g2DGP9BwP37hUCoYeFCtEAgprQb6Yh15BMElclyNxDQ/lhCtwIGSpI0TD07e0j7dezndNHO2dMZjuns53Th3I3D+Vufpq7kWmfOfjF9IVvbxmG8UlL3jCM4e/uHO2cOXp6pqlzpvn0DXUePT0TBps6XTAkb+GD5UPz6Rvmatl8cCRA0eB2oUI0gKAm9JdpyLeUH7csP1xJXKGwHsXEI5ehwhINp/q/V2/1yReXJycuh+YUECvsbR0bn54NSjR4WKgQDSCoCfFGyMjDEg0T12f2toxuzlx4c8/g7z7oe/29/v/a1bt6V5/J19/rN/nbD/KbD46MT89OTlyenLj8/ffftp8f3tXUC4JcfvbFl+ZSCYoeFipEAwhqQrwRMvKwREMLAMQUlmjY/9F2EARrSGQaIg/yngYAiCWITAMAALUEMg2RB0QDEHvg8gQIakJkGiIPiAYg9qiNaJjMpFfuGNbHDghqQGQaIg+IBiD2qFWmYbIjE0iwD8pOVDmZyQ1HzbL+vdeIyDREHhANQOxhiYbJjnW/Wfm8yRc3ZybDPDhOdqxLd/RSQSK9ckmp95XrcpP8Vi8eaHWwI+7RNJ6JUSgaPrBEZUTDHbK9yc6quuVqjovrJ9lEcdEGtRLCWFHINEQeEA1A7EFkGloz1kF5eIdiMA6Mw5nc5KgxvCMzLDnLJDx0x97cgXBlUM1ozpisTmvGIZoKZtXZcm3HRVFxFwe1EkJZUcg0RB4QDUDsIREN5rlUuqM1t3lJ5ex/eId5gmWpCuuUyzrVY0u8hQrzjPM3K58vn2K2Zg5kcpuXuLNM5jAOtFruUeOyfE539BpGb27zkvTmdb9Z+bz5lxvAJjvWvXhgR2blEjeWOa3YOtw5ZGZDIbiWdxZpWXVWKcvMfudOCDVSzvoRtKIr8FYCWcK0KkVxWY6EWQkefVaww3pYyZQM73ixfCMOtZcDyDRYb35Mld8bbTLXQBdKDgoQDZ4B0QDEHjbRYB0KreAxmUnbDp0VYTHZsSM3OWoYvbkO6jyVLfEkGiYzmdLx1zqra80Qh2A3Z6LMeSE1rslMujyu4QPrzJxHuqPX9pdjtjVDHP1L/jhaZltx6jBzyJkNXmh3HLv6rNoss/udF0rpUbDrh9fKXGxEc/647GuDaWUOxzEXRc+GF59V7HA8rPg2fMBcAPReDuDbE2VZ0NtAvEY6n00nG3rHco0QDWEDogGIPfiZBk6MsY6nS6yT19JBfHgHfabIlihScHZbFjG2XIhP0UCOiwqWplDIDI9af4Wigb2g42iZl9Fh6ghn1SEfoDJ2xVmlgjS73+3kj4JaP457XFIu8q0yzHXplUsk9z2ws+HRZxU7HA9Z0UDv5SDvachn0+S3J8bGrkM0VAEQDUDs4U40cOq05qwz182lM2mmRJn2wPCi7SRylLw8LzzfVQycrBhiMg1KooG4dmBlGhwss614deg55MyGNOiSY99MPJWqPquCTIOQgrN2hwBMtuqQjosSMXSr0jCdUlBKmQa3ooGfaaA9tObZ2iP0Xg7wnobeBvZzlxAN4QOiAYg9qKcn2MvG7Klt+RmHcop1M3V9ly1R42QmvZK4kGw/u33xQKvtAooLy5VW5ui442LvaXhx847M5iUvbs7khHfmt2Y2r0sz9zRILXNa8eowc8iZDeLuBOkdHqWL61a2XGFWOZbp/S7siLo/QNE9cu2xvbP3c1CtzArmKb54edArwavPznYk43px5br05iXWMiPHFVCmId+Ssn/iEqKharBEAwjGmHgjpDeWb5pz95iJt1bg/cAAMg35bDqZTGfzvCcmIBrCx/WpSzX/hAkIVoEQDSBYc/rNNOQakkn2qgREQxVhJfFAMN5MAACgAazo4z7TkG8pP25ZgnWFwnzesoJUC0QDAAAAAMQGeCMkAAAAAABKwBshAQAAAABQAjINAAAAAAAo4X8B6VahRUTxQnEAAAAASUVORK5CYII=" alt="img"></p><p>　　serialVersionUID有两种生成方式：</p><p>　　采用<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAVCAIAAACMmjY4AAACV0lEQVRoge1av0vDQBTuv9SxotChQzN0MENpra3VYgoVkqFQKFbQQRddIoguzSBdCgq6ukkRREQd4iCCSMFZ/AviEAzhfry7nGmT4R0fx/V+vPfuvS8fbUnm53uKQMSOjIcN2wxaxn25RyBih4piZTt3TycL2GPP6z3PUyGWfx6B4EGRWInHjUgzBIq1drXtAxULERUQseqX/c8vo37RhxWLKWDMbUKpk98jqZrzl1jYV9riiZTDIHIeEwIIFKs67r1PN1fGPXoprFg86/S8zCWFhYklufMs7SyKnXjMwUeg+lxilUdd96NVHnXpJcIE0zoSK95bJItIxGIolj609KGpO5buWMtD8/Ft3R/rjqk7pu5YhGJ5f9pIeCXYxmQkHTrzFL2BtycY03tgR0AwkXwxzTIfRck88IwDGyLFw7zm/4mVpRWrdNaZuE0GXpsTt1k63WLWjFlFYADEDZ8SXk/mlLC08BFh2YQFkPcOD2T4qpYxBTthMBSraBua3S7aRtFua8ftm+eGZhv+pGa3Ndvwt4UVi35KFELnJY7JY+Ig7B1mCZxKwgjPF2xZ5hZMI2reYbbNh1hZ+DtW4ah1/bBaONyglyIFqkwshevFSCxhPGoRSnqXeaJkSJAIsQS/CvMHjfFdLb/foJd8xQpfnh7DM7xUMk8BRmBfRAMqJwyGiAewyZuE4xHyRt47nQrexWmbcCoI73ACucRa2q2d31YX92qRMoJACBQrt1PJDSq5QYVewn/eETAgYgEt8bgRaQa+3YCYFdQVK/E3frBPc69ILGzYhO0XUZDh8519YgEAAAAASUVORK5CYII=" alt="img">这种方式生成的serialVersionUID是1L，例如：</p><pre><code> private static final long serialVersionUID = 1L;</code></pre><p>　　采用<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANEAAAATCAIAAACBeH8HAAACK0lEQVRoge1VMUvDQBTO3yoodOjQDB3MUFpra7WYgEI6FArFCjrooktcdGkG6VJQ0NVNxEUElwqKICI4CP6HOhQ13L17eUnaS9H3ccPdy7v3fXn35WKMouPz45EHD2Tg/jFieI7BSAL2HEM32HMM3VB6bvl8czx0qmH8Byg9Vz3rvL7b1dNOyH4DqGAYhhCXI7OPKWnGaxrfmDhvPD3ECkEIESBfVag8aD+/rS0O2vEUy/HZ8RxdSVqaZ6dXdMi3DBgfIZ4r9lvDl0ax3wplUl11oZG0wJ6bBmJ6zuo1rZ5r+U3Lby703LunlfHc8l3Ldy2/CdKAv9FgkPK/kG9jeY7/soWLHcxRiVFFEM2gpFA9YE2QXcUraMM7BgYj6VF1HlQFLoH6wUXheP16WAfGQ/16WC8cbYA0QtNDJ4jc5BPKm4fmRNKM10HS6AoR9njdiKSH0g1Knd9HwUXes03PyXt23nPMQ+fyvmZ69jhoeo7p2TKN/N3EViw0nVJZlQOKlNtB50qoWdgVVaGqSDx23Ii6PRdE7qBxcbuU21+l0CT0HHgMdK5Iu+Q04i4VIulB2CN5bgQ5nsIeypWm57J7tcFNJbtbQziEKyc4xyNgKdW1Ac7xHGJxkGsamhEioZQAkPpnl0oShShUj6om3gqBHc5XvdL8duXkqjy3U0Fee1IQjk0DIyNFKA84s1XKdEuZbkmTDsKXzfgb4DNm6AZ7jqEb7DmGbrDnGLrxBTOIm3wX0K0ZAAAAAElFTkSuQmCC" alt="img">这种方式生成的serialVersionUID是根据类名，接口名，方法和属性等来生成的，例如：</p><pre><code>1 private static final long serialVersionUID = 4603642343377807741L;</code></pre><p>　　添加了之后就不会出现那个警告提示了，如下所示：</p><p>　　<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAj0AAABmCAIAAACvJbdLAAAQNUlEQVR4nO2dz2/bRhbHp39Az/1zmn9CZ/8Pg70Guunia7EXwgcjBwFZIIeiq2JZwDXkdLuFYmTdsFLsooqt1q1LyVZrIA7QTcs98Mf8fMOhLEsi9f3gHazh8M0bUn5fvuE4YQnN7NfXjqMAAADA6mGOY9AtAAAAmwZ0CwAAQJ2AbgEAAKgTS9WtuL/HWm3W6kWWg/Ow02atNmu1g1Pj4GmPtfbCWbXh/HCO+4CEnMnwMF7l6BVZwvVf13XOhl7GoOKWBUHAw/u4igLfOx7no1r7+/uhwqC+eu5xKxOHfNO/5KA5LL3eOu0RupUyDtaQ19Y0bhSwoLgSId+KX+q13N+lDBpLdygKGLufbt1n9OXidrysceOQB/RvPQDLpUS38vppNuCtNmu1WXecJEmaKVirzbu9rL3V5v15kuS6VfTvDNRfCjPF0M/phRO7KzNeR39z3GwKSvA2P+Isqp1C0S3xix0FchVW9E4ff3kY5w/CsuYV/Tk3TlE6pydzzrV2Gsv1z+rmbi9otXl/nn4sfrB9H5Srql+Z0552Uyj/VP8kSaJuepvGabT2zve6X2QGr3i/yDpG8mMOZI5O+YmNQt7tP+Q8jIpz9JEtsybm6wa6BVZJab112mOtPd5N08c87BSpZB52ivQh/ZzmETndlOgH0T4bcCk9RV1q+dGzv/ORfDbgYpWMmBf5M4213tLFTEkNacpIW6Ig7UfVASGXklAUCD+xOOL/NK1fn/wCjlNpEWU0+X2w+4n7e/KNKL4PlH+qf3bNO71wpt0vy6BJ0b/S/ZKfD4qbUvl+FT2NKx9FeYeQ6w8U1J2y6pmkkPJBu//0QSbrFusjG/6d86WBboFV4qdbIkeIlOHQLUkwvFKMpT3u7ykJ8bTnrrfK+lvGzauH1ESQ6aO9+ZBOtZPID6555lDajJIoCmzJSz5HqqvUPCFOlQ/ZHVqw6VZ3LNpV3bJ9H6x+RDGnXWrCP9k/cyWV+9Io9i9V5fslEPl6kfuVebCUNnYvRH9nuyFapH9NqbQvju7fPV+C1S+rgi3HS7esOuSnW34pply3yijrb60D8oSrJ98kkbKe9pxOtVtQHl0dbfLREpkp6qq16pb/c4ksNupEHLpl669+3zy/VPlAnvdLOS27T4veL1sdIxrM6qSabpmiRfvXHJTr1kJ1E+otsEq8dEukEn3dRlobtPx873VC9V2Fc8NbSX8qL+c/i87jQKu9xDO+tZ3GngPMNSL5DDNJKYlFcqkmnCiQ1wkfWLes3we7n7SoLVqKS035p/o7dUvaTyjue8X7pW7ck65h1ftVOCDX3+KQ36feUkSruO+k/3Sfn3Sue53QOV8a6BZYJZ71VvH2W05S4uX8IHtb3sne24diCS5/NjfenwtXtvfwin/P52Vrf3JcsS8j6GcnBqdKuxoP1U4hrdqYj8bmOoy+QKO+n7At2ljXhYrGICpclkkXtW+i1eb9QZCu1PXz15bU98Hz/ir7O2z+bf0TpWwa52uJ0nOJdIqsbRXul3b91WeCCvfLXGjT7wxjPAh4foDqT/rRD+SaZPWf7oNPP6rzIv0T8y0BugVWSdV1QrDl4PsAbODvt8AK8doHb93xDLYOZScLvg8AgPWAf+cJAABAnYBuAQAAqBPQLQAAAHUCugUAAKBOQLcAAADUCegWAACAOgHdAgAAUCegWwAAAOoEdAsAAECdgG4BAACoE9AtAAAAdQK6BQAAoE5AtwAAANQJ6BYAAIA6Ad0CAABQJ6BbAAAA6gR0CwAAQJ2AbgEAAKgT0C0AAAB1AroFAACgTkC3AAAA1AnoFgAAgDrBkiSZzm/Pf4qfvxj+82Dw/MXw/Kd4Or9NoFsAAAA2D3Z1/fvxd29Ozn68vLm9/ePPy5vbk7PJ8Xdvrq5/X71uTY8Gj4/uVjwoAACAGsFen18NRhfTd++n795P3/0Zv3s/ffd+MLp4ff7LynVrtr8zGqpN06PB/pmlK9UOAACg2bDPn7/67nJ+fvu/i9s/znOLLn/7/PmrFeuWVmwNn46GhT5dT/bzQ1Q7AACAbYA9+ezrby7f7v79H7J9c/n2yWdfr1a3jGLrbPTxzpepPdoZHFyXtQMAANgC2Kf9kxdvpq+nd6Pp3Wh693p2N5revXgz/bR/skrdsr7Zmh4NHu1ODnZ1caLaAQAANB723+8vj05+GN/cjW/e/XBzN765G9/c9U/GJ99frlC3LG+2kiQ52B0NkyS5njx+OvNpBwAA0HjY+S83z1+e/fvVD6MfZ5Pf3o5+mn79avz85dmbX25WplvYRggAAMATliTJ5Nf5cPzzF199++xf//niq29H458nv86T1f39lr3YAgAAAEzW/+9loNgCAADgz9p1a7aPPYEAAAC8WbtuAQAAABWAbgEAAKgT0C0AAAB1okS3rm7/qql9vPPl0k+XG93+qaOlUS0WtnbWRx9+8NGHH6z9FsBgMNhDWGN168rI5prqWI061+rBMSh1ujZKacwOJ47goVswGKzB1ijdcuR0SjMqFUaL6ZaPXFFuPQNGvQWDwbbHmqZb9zyl+FgqGJSGWXXLMXpVrYVuwWCwLbcG6pZnpaX1lD1cVdEts11z6xMJNYo7ZsondAsGgzXYNl23huHgk5e+na3S4i53Sn8oPno6r1SomT39VxQdBt2CwWANts3VraMnw6NCty4uPgnflp7i//pKO+TWLatEOWo4s6XqizHKieeiInQLBoM12DZXt65eDotc/Ghn8Oyi/BT/d0WaPFT6wfrRGoM5llu0HMP5DF0YdAsGgzXYNli3bv8ahoNHnYtnHS/Ruiqrt6haqrRP6VnWbv66RVVjPtKI91swGGzbbKN161lneHT719XFxd+eTH36O8Rm4QVD7VAhEgtUTj7riqVVnVUyoVswGGx7bKN1q6pVer9l7eBZb/mcaMob9YbMvapZOgWzD3QLBoM12JqjW567JDyPLl23PEXIR6VKz4JuwWCwBltjdatUJ9wLfYvpFvUOzPPdmDtgqqd5CnQLBoM12BqiW5WKLbdy+Htzr+lRurJwCeg/EegWDAZrsDVEt2CyQbdgMFiDDbrVQINuwWCwBht0q4EG3YLBYA02/H/HAAAA6gR0CwAAQJ2AbgEAAKgT0C0AAAB1ot66NT0aPD66W3cUAAAAVsem69b0aLB/Rh2c7e+MhquMBgAAwLrZXN0aPh0NC926nuwbdRWKLQAA2EI2V7eSs1HxTyg92hkcXGuHUWwBAMA2ssG6lSTTo8Gj3cnBrilaKLYAAGBL2WjdOtgdDZMkuZ48fjpTj6DYAgCALWWjdYsCxRYAAGwtddQtFFsAALC91E+3UGwBAMA2Uzvdmu1b9hYCAADYFmqnWwAAALYa6BYAAIA6Ad0CAABQJ6BbAAAA6gR0CwAAQJ2AbgEAAKgT0C0AAAB1AroFwD2ZBew4jNcdRTl1iROAEmqqW6c91toLZ+UdnczDTjs4XUpAS/FP91/OfJMkGQetNstNjLUE//OwY7hdZv8mEE84O2TskAXiUsfhMWOHjB3y8E7pwydri9OGEmc0YvJEio9K5LNAbmSHQfQQcUUBY8x0HQUsQxyLQ260qe089PFDjSu5UZ4OXP5tfqj+1vaiTRuaanfMyXp9FvBPzSsdV+kpQrHeRZKa6tZyGAcPmzSr+n/oeJKo22bd8QMOsHlT3kCiUSZRRUOglkHxhG+YaKWEfCQyixmkMS+lJZ7wB6j2Qs6CMOSW/GskwSgo0n0UiMNRIGQgDrmcVe1+iHGjoMjIUcC8/FN+rP2pdvlkn/Y45EVw8nWgrk9V/9S8snGjwFA4a1sJa9WtuL/HWm3W6kWzAU+LgCKrnvbyh/G8ROgM4iSxPqfnftqs1YvS7Cw+KhUG7881/0Txkbdngzopgpf9kP6rxkPXJeq4JaFqncWltvtPryHvj9OjIk4qfunofXVLCrXwT8cj7j7vDwLfAi4KpFKgqH6KWocdMiZydMi1OiPLv0UJouc2uf4wFCgOj7X+WkvI8/xeMR5qXmScSv/cfzzh7DAIRsa4s0CeSzzhgVKgl84rDo91YROH1Kd3+yO8GTzjYZzEqm7FIbeUNWpyjHWpk06N5Q8VxlX9WI9o+d3Hj/UiUO2UI01jig+qLpZfHx//iXte1XTLUqGlrL3eOu2x1h7vSpok8m+eIrtjYw3NyHezARcrXfOwY6ZUrY/NSZYEe+IZpFsqXfJY2rhlSdwjHvLQbMD1tN6zf/kl6HrLHHoedtq80wtnZpxU/O4pWDH6n/Z0jZf01YxHvl+ptnmMHofHQqtETaC+/olGsuTE4THnx2kS1/KvXi2pmEct/aORrDELx0PMixw35Idyf1XnMrkS2qMVWB7+o+BQ060lLhWKukHLj1HAg8BcsdPzsqJJ+XKV3Ej4IcdVzgz1FsO/048tHld77pFSS11WxKOBEjR5fSr4L7k+jdItkfuUVCinLQ1Lfoy6eR4/7clJXKrG2qxEJ0TxQZxiQSrvNG/2JF4lHvJQ3N9TBPW051MaVtWtvLNylI7fPQUren89QnErrfFUfFDIyeqYkfxbVRQl1lIpCsgXTsrqWdZid0L1F5IgacMi8djmRY1rVD+inJIVSIiNJGyJTYRKFdoh8AvUW8qbEalz6ornFTEXa19leVlZ63P4cQbpWFtU/Zf4MfqXtvvLllRvBX66XsF/ybyasE6YJLrGmLrlW39k52brhEUui/t7IreW1zdycqxGoV7uNFoxHvKQrlv+QVaqt7K5iKPO+N1TsFJNt4x4FtStbKyRvA4WBfZ0n2IRmwx19SxJQn4o9MB85WP0zxrZKJJXCBePR58XNa6uIpIsyc5FN3UuturN1G/n+7BlYT7vK9sWspyovMvxKJUoP9S42Smlautfx1D9iXbvRTwpQulD6fXx9C9YqN5yXQyJjdAtkarUdbmKupUkUTd9HyaSqZwHo65WH0hrj3kKTouJwrNxijUS+3BW/1XjIec7G3C5hVrKM67PPXXLGb/Vj5uK64R2Ha22Tqjk30wwErOAiEbSR6vYpKfp6TgMio+zwHylRKTvkB9zWfAWiIeYFzWuUm9FI+o9VqE98iJkHB4b1Z4ZktTyMJsycud6qlN2HhT5XSou1H0H6h4KdSudxQ8xrrxvgghG92/1Q/Uv8eNbbakNqmJYr09V/yWHKulWvkxo+t4I3epFxa4EqYaQ1t/U5OjYN6GqYJIk8j6CoJ+98LduwaC2SFjekyko+xTs8Sh+7heP7F/dalESp7Hvw+1fKh/H+dppeheI+A3/JeWgo788L0UjrfGIdct0C0+Zbik7FxRd0fZtZ/laWfRjQlo0P+ZmDa2d6i+8mXn/HvFIOY4cV3KlbMoo9nRkHUQdZlv89NoE/1CiVaxKqdnQvtNbLEZ6vO9x+LGMayx0aopG+LfGT/V3+akiK/JKnnKQuD5V/dvnpa0fZlPQW5XBiT9xSJKN0a2HHwc0n6X9lRsAYN1Qb/eSZEP2wStP1gBUQv4WbdufggGwlay93gIAAAAqAN0CAABQJ6BbAAAA6sT/Ab0Z9Kq9CdShAAAAAElFTkSuQmCC" alt="img"></p><p>　　扯了那么多，那么serialVersionUID(序列化版本号)到底有什么用呢，我们用如下的例子来说明一下serialVersionUID的作用，看下面的代码：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>File<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileInputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileNotFoundException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>FileOutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>IOException<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>ObjectInputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>ObjectOutputStream<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Serializable<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSerialversionUID</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>        <span class="token function">SerializeCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 序列化Customer对象</span>        Customer customer <span class="token operator">=</span> <span class="token function">DeserializeCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 反序列Customer对象</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * MethodName: SerializeCustomer      * Description: 序列化Customer对象     * @author xudp     * @throws FileNotFoundException     * @throws IOException     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">SerializeCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> FileNotFoundException<span class="token punctuation">,</span>            IOException <span class="token punctuation">{</span>        Customer customer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token string">"gacl"</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ObjectOutputStream 对象输出流</span>        ObjectOutputStream oo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>                <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:/Customer.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        oo<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Customer对象序列化成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        oo<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * MethodName: DeserializeCustomer      * Description: 反序列Customer对象     * @author xudp     * @return     * @throws Exception     * @throws IOException     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Customer <span class="token function">DeserializeCustomer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>        ObjectInputStream ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>                <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"E:/Customer.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Customer customer <span class="token operator">=</span> <span class="token punctuation">(</span>Customer<span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Customer对象反序列化成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> customer<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * &lt;p>ClassName: Customer&lt;p> * &lt;p>Description: Customer实现了Serializable接口，可以被序列化&lt;p> * @author xudp * @version 1.0 V * @createTime 2014-6-9 下午04:20:17 */</span><span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Customer类中没有定义serialVersionUID</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*     * @MethodName toString     * @Description 重写Object类的toString()方法     * @author xudp     * @return string     * @see java.lang.Object#toString()     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>运行结果：</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXkAAABkCAIAAADsXtebAAATRklEQVR4nO1d/3MTZ3rfn8k1f4exZzJ1yU0v9O4yN72hk8yUKTe9swvXwefzEQcoX+TUuEd6JgeJTZopnkvPiFOCzc1BxYCLTUlLpEAgdghOyNiAxBlyUJzEYAkLK5YtrbSStj8sXr96v+9q9cXr5zOfSVbvvu/zPs/zvu9n311LizITmQACgcBSU6m4B0AgcCUQtAYIBJaDuNbcujl82n8ECAQCnaVCqkzF9a+kdF+M7ovIEZrzeS6ZczHNlXzr5nDFc86ngg5Mxb0pNd0Xo/sicoTGfI4lsrFEdjKquZhGjLFEtvpFR5kBoVm2dF9EjtCYz5F49k8PtZXDSDxrsGoVR8GEpt/b1N/T2O9t6ve29vd3+Pu7/X6vf9DvHzzvP39p8NL44KXKO22D7luWaERn3/xzKivuZPlpzOepmDbxdWZlciqmTcW0KpQbQmt6Gsfjqq7r06qKUtf14EjYOB68dL/iflulu7XmTHd9OpPFGDr78gqUG2M+Tz7Sbk5mDG7sPLN65wifGzvPmPXdwclHWrVtcBRsEXp7mgytmbw+Fj64/7MNL4QP7p+8PqbrenAkNK2qkWUoN+4WmpnIxOmuvyC15s6FV8MrTG4Mobk7nRm7lza5esdHf9+yn8/VOz5Cm7iDd6czd6cz1SM3uNb0dDeNx9W8rocPHpja/lKi89Wp7S+FDx7I6fngcCiSVqPptMu05uDQjbUdA2u2etd2DDT1Dv/3tS8r7rDViPxvrEmlswZrmntT6aya1u5fPXTnwquhs60nX19TcYfLQ1NrPv0ibXL19osNL70xFtNYbHjpjdXbL6JNqpa7d7YYFBaarB65IbWmdTyuZvP6ZxtemH1+wzfP/2j2+Q2f/c3z2Xw+OBx6lE7PpNPTquontEZBYKF7or4NI0JytOa57d5nXzkVvD6l67qu6+c+/3Jtx8A7F+7wHXbKSdtGsIj+sP/ZhZS2kNJqmnuNgwVVS6ragqotqNrxA8/KhGPVbWfHCLNvr6GhNbenMlcmVJOrtwU2busei2nJtJZUtZSqJVUtmc4m1WxS1ZJqdtO2g7VbA2gTg2hyyLO2WYzN3TtbjIm6e2cLq4Tk7amqkBtca7r3tY7H1UwuN7Fh/VcNjfHNW75qaJzYsF7L54Mj4Vg68ziT8Z8XTBGrE9fB2UYlS2uaeofXdgwYQzU9mzQOPrkTXdsxYMNnmwPghNb0/frbiaSWSGo1zb3GQWJBSyxoxvHQoe/JOGDVE6eS4GAyDa0Jf5m+HFZN1ra+t3nnW2MxbUvnmX/85xN/t8X7143/tnb9a4lkZi6pJRa0zTvfWt36HtrkclhVFIV67BTt2TSVxRAX7COnYfjLdMXlBteafftax+Oqmss9vHl94s0Dn/3ohT++eeDhzevpXC44HIpnMt9kMv2u0Jr+S7eVHx++F0nour62Y+CtszfXbPVue/eqrutrtnpt+GxzAJzQmnc6vx1PaDXNvfGEFk9o23o+qGnuNT7OzmvBIz+UccA1WnP9fvrCjZTJ1VsGW17pGYtpjxOZx4lMLJF5jDA2l2l5pad2yxDa5MKNlKIoWImztG0f1RdUaIQNr9+vsNyQWrOr/9SHvx+4/IfBYf/ZK/6zVwbfv3buwtj5y9c/GAldvHLr0tUJ7+A4a9KgW2vzGNtvUz+Sd1JU41gTqh2yLVVrdvR/8kyrV9f1pt7hpt5hXdef225Ta6i+Ucs56ZKsQ43o8L/+5cxcZmYuU9PcaxzE5jIz32Ric+nYXGbk+GaZWKx6IjNGNkafGq9w9A0aWvP5XfX8WMpk7c9Pv/zL3xr7mi2dZ5r2+H/yT0dfbPrND37SvXb9a5HZ9Mv/8h+1LafQJufHUoqiYCVmuXkK9QSrQC3k2yfrsIjJze6dLTKtzo+lPr+rVlBucK3p6Ng1HlfnNW0+qyWy2uz0rfmsNp/NJrJacCScyGo9frrQCCcfa2az5jqnFflfau8m+Vqj/Pjwn6bnjIOrXzy6F0lY0hqZiJw6YEX0m73ficymI7PpmubeyGza3NdE4+mh9qeH2p+WicWqJzIjK6zDmjY25szMotaM3lHPXUuarP3ZiR2d3rGYNjWjfj2jfj2jTs2oU+ZBTN3xK2/dz06gTc5dSyqKgpWghTIHnFZkNU5zkqTWCJuYHL1TMbnBtWZXR8d4XE1lc6lsbnb61mhX/ez0rVQ2m8rmgsMhNZfr7r8qnLUyJVbnMXopo2oNdXLP0Famwb3+a6bW6LruDd42DtZs9V794pEga9xrPukYq46lhcSJ6N/3PPfgsfrgsVrT3GscPIilHzxWH8bUofan87lZjtywNILqrXBwZVphw+S41nw8oZ4ZTZqs3XzMs983FtPuR1OTEXUympqMqpMRdTJifFTb9r9Tt/kY2uTMaFJRFKwELeQcGMfYR2odzLIJsl+UrHsofiuUH09URm5wrWnd1WE8G1Yz6mhXvX73yGhXfSaXy+RzwZFwOp/r7r8knLUyJVa1hvxIXdLUEqrWnLpyb81W79TjeW/w9pqt3oNDN55p9T7T6v3fsa8PDt0QZI27r5mh3SkUc0ASf6Lf/ldfPVIN1jT3fvVINbYzBvO52fkH/8WSG5l+ZbTGkp2Sas3lcOrUlQWTdT/1tXf1tXf17ek62t7Vt6erb093X3tXX3vX0fYnB311P30HbXLqyoKiKOSxzIFMK7I+2ZxK/rNhGQsGL4dT5ZcbUmv2jcfVbD4/2lWvD683ONpVn83ngyNhLZ/f56VrDfV6hZWg5axqSiGo1ahaQ201Q1uZJjtPXtt1bPRi6KHxhNjAuxdve4O3WTGyFgMZBSs/HIdJ5yUjer3tu5MR1eRQ+9Na/BzGb+7sP737z4ReyYymcIw4Y8FpyAmZVQGraWjNhRupE8MLJte1DdRtOly36XDtpsPmQe3Gw3WbDtdtfPJxXdsA2sSg2RFZSFbADrCG1FbUOlh3GNG/cLNKJHnhRrnlBteaptZ943E1n9dHu+r18TaDo131+bweHA7n87qu6yy5qVpyvl/znx/f3eu/Zjwebuod3uu/xksWY/1UPKLXdn/3/6ZTJvtaVmmRoxjTd395fNu3Ku55SWlozftjyd9fmqdyXdtAXePbtY1v1/7D2+vaBljVqpbm1/aEhTJ8fyxZTrnBtaaxtdv4jcK9oy+OdtUbvHf0RV3XgyMh8+K/vOTG9b9R6Nz1vb07v//qru//9tc/PHHohf/53d/2tazqa1nV1/JUX8tT2r3X0ze39P3iqYq7XWoaWvPe58kjgQTKdW0DdY09dQ2Hnvy34VBdQ09tQ09dQ09dQ8+6tgGs/srh0KcLZZMbitbIsLvHX/GJJU/Xaw2HvqZV6ZtbfE2rKu5zGWhozdCnCxVfw8uIA58slOdXmrjWuJLui9GS1qwQoZlZ1JqBT0BrrPHkyPzJkflSyw1ozbKk+yJyhIbWnByZr/jqXY48/tF8STc4oDXLku6LyBEaWnP8I9Aamzz2YeLYh4kSvU4UtGZZ0n0ROUJDa459WPlFu6z57gdP6KzoKKet/9sLQGA1890PKr9cXUZHxkU57T9S8UiAQKDrCVoDBALLwSWtqfjNNhAIdDGZWlMN38S3GdKy9XyFsHp+6rEs6FS6SpdwSct0rSmFWyWdW+Rv+YSVHRlC23YkPSxdumynV6HBUioUxu88SxGyvUjJVk45ZtuO/JSWt+BU5llt8YEmtYacCo5kudRjI++2uTZsRMdStFJkqbKZZznDiZpaRzKuEgVrz2zFlcWSKcl5KKkIpQsT15rSKXpJw7DhefGzsNSZAa1xxG0blpev1vDLS5d5GSMFWsPZZZGF2DF2gLWifuRblumdU83GCAmdFMYlkx+ZVqSHaNcsU5wKlnqnjg56lpVDah3JQeGMskzsnI6EqeBnnp8xcozkK0hmXphSfhLKk3l+XE9KrO5ryPlEnZTYMEvaIWvaayUzBvKWLY2WMD+SvduLXWYS2LZsw0OZzEvm0NIwoaesWqbadGT22rYjE6Yk+S4Vk3mhZcvPaxQEnPo2tAY1bqN3+bGRtGwWypjFVjsnP5yBEcbOSpewL+GY2jiQHFOZ2DnDwYqdmjFWSouMixOppRG0l3lhSoVTnV/ZqczzLSsKTWv4eZdMH3Vh2MiyfO/8MRYmXXIshcfC/Ehmg2XK0lS2OqZVojWsviQT7nhcnEhtjKBVD4sZWZnkO5V5m1oj7MwsIRWOqjVYNdICVi7ZO7WVMN1UIxwnqdWEFVj5ERaS4A+nZF9kXNSghKND9ZaTDWryZSYu6TYrdmqPVM+pKeXHJT+IVH8k7fAzL5zVLMuc/Jci84KP8L1hYJlJrij+QnK2a2FJtbFEKSpD5kFrgCuUnJ1IxX1zE1lZBa0BAoHl4JLWVPy1I0Ag0MVc0hryH+50GRRFsXHKkfoyzdFCefs2PCnSeQDAHkBrdIWADWuYUlDB96RIrSmpPAEAxcM9WiOUDOEKZ9Vh2bfXo4wn9oSDr3cyxuWlFgCwCvdoDQaZle+IcMj7wNmDcCSPPGVJ8jh9sRIiExoAYBWu0hpyibKWovBqz1qiksKE1cRsymuNJVWiAjUlI0ygNYASAdeakG9xDnoC0YDHF+I3rzqYisA6hZVwwG/O6QirL9Qa6pqXjEJeaziOcTwBAJxCgdaEfIqyqC7RgEdZ+mQZlZIpbJWiK0dGF4osoZ7iaw1VVjhrHlNDYYCgNYAqAaI1jG0MKjrGrscTiJpnAx5zH+TxeAJLDRCgVpFziEmP54nhkHF+sYelXZaiGMYRI55AdLGrAr9ZV37O6tXlFq0QVIOWDviuWjLCKgStAVQEiNaEfKiIoChQIaRaNOAxj0M+TA4ouhXwIDoV8i3WX9xOGSaiptmQDxGRaMCD2jdlzzhGO5PUGnJ3QIoO1Q61hNoLtnT5i5zVilWTJW18t4WSCgCUCEVpTeHGo0BcKFpD7JsWLYV85obIF9JNCUNtk10wvOVsUoSrEduesKrJW5b3xHSbLxxUI0KtIfdcQrcBAMdReA+FbhwQsLUGwdI+Rded0hrOMx+u1uhcaUBLqCvW6s0IC5I7LE5N8qNQNVDZkjdrloAAAUoE/NkwtmcxFvvSvVI04EGe1yC3UNgdD3IKeeBcUN+UGJbW6HrAw1YbmtbwL9r8Kz9Wh7MdEBoUnrWtNVQdwfSR5bNV8QUAnAX+N2/0uW7hwxIDnkDApyzKTeFDYHzTQikvfGzsCyH1PAHzKbTx/8VHNmQX+M2VUSpc2+Ta41/5OcpFNciyI9PQktbwHRbKotB5AKAUcNV3+TgQLi3OJd3Spka4NZC0ViinTK2U6V2mBAAoNVaK1gAAgMoCtAYAAJQDoDUAAKAcWEFaY+NRbpFmizfOas55bu2sJ/BkB+AUQGvwp7CSq8tSE/5fu6jgu12k1pRUngAAKtyjNULJkPkDkPBPSPLiIoSMezJu2xMOvt7JGJfJAwBgwj1ag0FmMVvSAqoF+d6tNuHsQTj6SJ6yJHmcvljZkwkNANBdpjXkqmOtLuEF3JLWsJaoJRXDztrQGkuqxA9EUphAawDygHdlMUG1IFmf+pGzMjkSI1zh8iHLaw3HMY4nAAAH8K4s+inO0pWpLGmQ4yQnBPn9BSaFwmyA1gBKB3hXFmUBy9dkVVYkQLVp6YDvrSUjrELQGoBTgHdlLS11qpQITVldtBw7wjrCVkKH+TFyVAxkBVAk4F1ZlAei1GpUs5KLVsYNebfNrm2Io9Btcs8ldBsAkAG8K4uyCG1sVYqpTK0gH4jMZoSlGqhsyZs1S0CAAPKAd2VRFEenLT/q2qOuN0mpkjxrW2uoOoKJKUvRrCo1ACAEvCtL6gkFdsw3xVIlvnuSbrPskx/5DTleSVYDACzBVd/l40C4WjhXaXT1ytSR7124NZC0Vqi9TGGV6V2mBACwgZWiNQAAoLIArQEAAOUAaA0AACgHQGsAAEA5AFoDAADKAdAaAABQDoDWAACAcgC0BgAAlAOu0hrza8msH5FWD5AvYiOuRulf2wYAXABXaY2BaOHPrqoQyO/O0NeTUX6eCgC4BoW/81YUxePxkNdV5BdIBa+xsvKOK+IVWkgDxu+taP0SHnkCmLY4oDWsfiX8lIpXLzAJWgNYCSjc10SX3mZVuGJDocUlgPz22tY7rihALvOFvyNn9Eu+q9RprWHGS/XTarwFHfnQynAPBXAvCK1BFvTSiqX8Plu3+o4r5nW+8GUUBUrB75cBB7SG2i/LT6vxFvbCeWkGqA3ATZDRmoLX2iBVbL3jigRWX75fBorWGka/LD9tiQK5HaO4YWF/BABUOyS1puCORaA1/HdcUYAu1sX7MV6/zHd6mXUpi9jYfUi5xY6X7qfVePF3M5tA38cctWoUAKhuEM+GjQW59AarqF5wO+Dx+YwXWtl4xxUbSHWfr+Dd6US/T1rQHmyQNzPom0vxOxgOmP0y/LQWr+S/MwGbGoC7UHV/8y7RX6wL/gkHJ1D9f1kHAKoK1aI1pb2eO3dDAvsOAMAeqkVrAACAuwFaAwAAygHQGgAAUA6A1gAAgHIAtAYAAJQDoDUAAKAcAK0BAADlAGgNAAAoB/4fIS6pJWjD2E0AAAAASUVORK5CYII=" alt="img"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQIAAAA+CAIAAABP4oJlAAALoklEQVR4nO2dW2/aaBrH+SrzEUaay9Gu1BmttHPoanrRi5VyM6vRqGq304ymHbqdzDRRVCmV2p1t96JdtbvdTVr1lLRNCIUQAoSEMwkHEyCcScIhmLOxjbHNXjilYGzjHCYQeP/6q7JfP35N4fn5eV8bB0m+CO+5kGkyLNoZfjeFFVsttFe3vMvvg3RiMbwS7FOc800Wv4kvLC+4KZ9uMmuv9EHc3GEh1eI8v1vCWjsR2OtwlgAMfiMMjsYAg+PBwOdSAwMPuCV1IKCBlySXS/3yUAkMPMjew6DbNAIBdVMAAyAggAEQEMAACKgOMAACqgMMgIDqfBjAMBwIBEwmk8fjSSQSdrsdgiAIgkiSPOzxJOBOBVDPqQWDra2taDSqUqmuXr164cIFhUJRKpVIkoRhOBKJYBhmsVh0Op3Vaq1Wq+yOWsV7PIABUO9Jks3uNDBYWFhwu93hcNhoNMZisUgkwsJgdzdns4Vv3vz7xMStZDLJ7utdigMMgE6WWjB49OjRgwcP5ufnGQwSiYTD4fD5fE6nU6/X37//L6l05JNP/jA6evfKlfGRkRF2XxJJvS3R2/MekADUa2rB4MmTJzMzM/fu3RsbG5uamlIqlU6n8/bt28wYaXR09Ouvv/7oo4/u3Xv74483z58/z+6r04ioEfab/FeAgA6qFgyKxeLExMTExITZbJ6cnLx+/frY2NhPP42cPn16eHh4ZGTk4sUfvvnmh6++OnvmzJlr166x++KqBtxHBSQA9ZJaMKjX65lMRqvVjo6OXr58+datW48fP7506fLHH//+00//eObMn7/44vTZs2e///77p0+fBoNBdl+ikxtgANRTYmNQr9cJgshms+vr63fv3v3222/Hx29/+eWZzz77bGhoaGJiQqvV7uzsoCjK0ZeIKbLIACCg4xQHBowoiioWi36//8WLFzdv3pycnHQ4HNlsliAI7o54LpjyZTwgAah3xItBQyiK5nI5BEEoijq2lwUEdJzqjAEQUN9LAmfiAAOgAZcknQoBDIAGXJJo2AEwABpwSewWVdcfiAYG7q4l1/6XBO5XZ3YDwGIs+dt/E8D96q6n10kxwKCf3fX0OikGGPSzu55eJ8UAg3622CSQSDoGMDEdI0+oAQb9bPEYsMRqFw/MCTXAoJ8tkgGB1eYWPlr6wACDfrYYBgRO9qyM7wjMyTXAoJ/dkYHmBb60Zm3tp+wHGAyE95EH/Axw0tJnMAAM+tniGeAb9LcPigAGwCfMIgFob2xeEF7tD/fck5A0vWeKrlNUnaLqJFmvkXSNpInanqsEXSVonKCxKo1VaRSnUZyu4HQFoxGMQlCqjFKlClWqUEWEKiJUoUzly1S+ROVKVLZIZYskXCAzBTKTJ3fzZDpHpnNkKksms2QSJhNwbSdT287UtndrW+laPF2Lp2qxVC2arEWTtUiCCCeI8A4R2iGC20RgmwhsEZtbhD9O+OOEL0Z4Y1VvtLoRrW5Eqp5IFQpXoXDVHaq6QlVXsOoMVp0B3BHAHZv4+ia+5sfX/Ljdj9t9uM2H23y41YtbvbhlgzFm9mBmD2ZiDGFGCDNC2JFgIHArQHgUBDA4DgEMOmJgdIslQVQG8GPQDgPA4Jg0aBjYvLjVi1o9FZMbMXsQE4SY3BWzBxXGwCCOBJEYCN8QaJ8qdD1rAQb9g4Hdh1s9FZ0VVi7H5xfDcwvB+cXQ/GLwzUJApo4sGlJGN2KC0N8aA2CAQTcxsEJl5fLWG6Vv2RjxBzPbySKcq6QzSCiaNVhjM3PQa2VQY8ka3RWAAcCgPzGwesrK5diswuvd3EUx9p9+oih6J1lUaQMvZV61KWNwVYwQysbgUaKj42E7sBgDDLqAwfomqjElZ5U+fzBDUTTfW1EoYovLwRm5T2srGFwVoxvdLwYbrmVgMebA4IMhA2PhfO0YwwoQGS+AARPQEQMmjMGAWe41DMzu4pwqYHPu1MiWv4Am+fgx6z3ZhZHXco9ME9evlwyuyn4xsBoVwGIsYaV+I1lZLZwZ3NzeHsPZIWcPfBbAoDmMEwOWewoDvR2eX9xMZxAWA4wbLTRdp2ja5tielvvVltyqEzEwBUE0BgInHUYlOFLYDeVSgZhHVc6nD/+jXidU7GrAmbUCbAjQIsAV50sRrgacx2qvBo1NPVsNHJuY1pzSroaqxPucawDQTAJN12skFdspTMs3FIa0fq20yhSEw2Gw9OBPkObzX89/+PjG7yDN5//8+S+Q5vPxi399ODYUCoVwHD9QIp1sSYTzmwniO9Pzba2LIIcvkqb3FjgxaMwNODFgGhG0pSD02tzAsYktmVJGa/z9Z9BaBBqrFE1Xa1QKRt4ofbLlpNZWPDwGdntSKtVJpbpfz3+4+Pwft65+p5S7n/363ZJs4eHY0NOnT1Op1MGz6cRqf9WgPUxga0eW+OIZGJoxaLQLYLDHwLspci9joDYmDdYYx4fROjcgKRonyHQWmVvwz+kSGmt+xYkcEgOpVLtiiN84dyqNlG6cOwWjyI1zp7AacePcqXq9Pjw8HA6HuTOlr8WNwRFWA4EWvoOyMOg4DPtgyMA5N2gMij7opbmBYxNbMiWXVkLt8+P2EVEFr22nS2+UvlntzpIldyQYqOyONFJiDKNIEcewGkFSVL1eHx4eDoVC7BRpEufH1weStI9PRJ7IOUc4Al219ywmv8UPipr3alQD5oJpo71HMFi2Z2aV3myu8v5jaJsbUDSNE2QJJfxheEbulemSS5ac/igw0K1viMdAIuKnKnhz6xixEXMsgZj3GzhztHkTa08xGAi38PUmMEUWnhs0T5FZ7qlqYHAWZuTeNVeCouo0zT03qNaoMkpkCqjeHH0u88qWk0dVDTRrnjRS+vmXXxir1GqRGOxXJw+D9uznqwzN6jjOOUBw+6BoXxgwc4PGoKhRCnoKA+sGotDGX8uh6Fa+RlKMKZpmXCMprEqWUCJbwiF/+pXc81IRkunTRzU30Ng9B6sGjRbJu996lDT9zBdr4MQ5jhLehS+G1dguzkPzHY67B9a6yGrQERLxGLDaD3OlqP32WQ9i4Azgdl9lZS0/o9icU3pDsRxarVXwGlqtMQtllMiXcbiAQZu7MpXv2az3lXpLYYCP5EqRVKpdcjibqwFTEJitIquBpO1H7oTDOIPb/+VbOMCZntWtwIvc28RaFz90EW4XgwFnV8yIiG9uwOfmC6bNcwPGPXWlyBnA1/yo2V1aMqdfvvW9lm+sQ8lEBsmV8FwZz5bwTB6NJYpW586ccuP5rHdaFZXpkipz9kjuG0il2iU7dJhqUOfJfs7zusBefBi0n9rbX4DAS9pXy/tNYo5xnBqM7xRhdm/F4CwsmtIzysCzOff8ok9riKxaY6vWmNYQkan8L2Y9z+b9Lxeic7qEwgBrbPkjuYsslWo1Ft/BqoGYIsAZz7mXcDXg64RPR1wNuq5BwMARwNd8qMWDrDgKi+aMTLf1ShWeVgZfKoIv3u55eiH6Sr0l0yYUq7tL1pzeUWZ9p+jqo0RHt7+9UqlWt+Y/2AVTzsbmUbjwQJ+1yokB63B8fXJmDmuv9qNztuy1c/bYRQ0IBo5N3O5DzRCy6ihorLDKuCvXJ+X6pGw5IVtOyJaT87qkYjWtMsJaW17vKBvcFdYXrQ+MwaINYqqBSq0Wg8EgCGDQzYcwbV7UslExOIv6tbzGml2y5dRmWG2G1Zac2pLV2nLL9sKqCzG4OZ43uPqfREe3v71SqVZuWWNKQaZShivIisWs1ukmnzy+c/fu/fv34/F4+159L4BBl59Ftvsw6wZq9lSMbsTgKq86SquO0oqjvOpEDG7E6KqYIJTz6bODYVAsFrX6tX9PTV0fH7946dKFCxeuXLkyPj5+586dqakpk8lUKBSO/0PvugAGPfGXKWxezOrFrF7M7EHNHpR5Er+xcIQYkCQZjUbfvn07PT29sLBgMplcLlcgEIjFYul0ulwuD+Z3rf8Pf9qjflNRAbcAAAAASUVORK5CYII=" alt="img"></p><p>序列化和反序列化都成功了。</p><p>下面我们修改一下Customer类，添加多一个sex属性，如下：</p><p><a href="javascript:void(0);"><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200902193236.gif" alt="复制代码"></a></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//Customer类中没有定义serialVersionUID</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//新添加的sex属性</span>    <span class="token keyword">private</span> String sex<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span>String sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*     * @MethodName toString     * @Description 重写Object类的toString()方法     * @author xudp     * @return string     * @see java.lang.Object#toString()     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>然后执行反序列操作，此时就会抛出如下的异常信息：</p><pre><code>1 Exception in thread "main" java.io.InvalidClassException: Customer; 2 local class incompatible: 3 stream classdesc serialVersionUID = -88175599799432325, 4 local class serialVersionUID = -5182532647273106745</code></pre><p>　　意思就是说，文件流中的class和classpath中的class，也就是修改过后的class，不兼容了，处于安全机制考虑，程序抛出了错误，并且拒绝载入。那么如果我们真的有需求要在序列化后添加一个字段或者方法呢？应该怎么办？那就是自己去指定serialVersionUID。在TestSerialversionUID例子中，没有指定Customer类的serialVersionUID的，那么java编译器会自动给这个class进行一个摘要算法，类似于指纹算法，只要这个文件 多一个空格，得到的UID就会截然不同的，可以保证在这么多类中，这个编号是唯一的。所以，添加了一个字段后，由于没有显指定 serialVersionUID，编译器又为我们生成了一个UID，当然和前面保存在文件中的那个不会一样了，于是就出现了2个序列化版本号不一致的错误。因此，只要我们自己指定了serialVersionUID，就可以在序列化后，去添加一个字段，或者方法，而不会影响到后期的还原，还原后的对象照样可以使用，而且还多了方法或者属性可以用。</p><p>　　下面继续修改Customer类，给Customer指定一个serialVersionUID，修改后的代码如下：</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Customer类中定义的serialVersionUID(序列化版本号)     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>5182532647273106745L<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//新添加的sex属性</span>    <span class="token comment" spellcheck="true">//private String sex;</span>    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*public Customer(String name, int age,String sex) {        this.name = name;        this.age = age;        this.sex = sex;    }*/</span>    <span class="token comment" spellcheck="true">/*     * @MethodName toString     * @Description 重写Object类的toString()方法     * @author xudp     * @return string     * @see java.lang.Object#toString()     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><a href="javascript:void(0);"><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200902193236.gif" alt="复制代码"></a></p><p>重新执行序列化操作，将Customer对象序列化到本地硬盘的Customer.txt文件存储，然后修改Customer类，添加sex属性，修改后的Customer类代码如下：</p><p><a href="javascript:void(0);"><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200902193236.gif" alt="复制代码"></a></p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * Customer类中定义的serialVersionUID(序列化版本号)     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span>5182532647273106745L<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//新添加的sex属性</span>    <span class="token keyword">private</span> String sex<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token function">Customer</span><span class="token punctuation">(</span>String name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span>String sex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*     * @MethodName toString     * @Description 重写Object类的toString()方法     * @author xudp     * @return string     * @see java.lang.Object#toString()     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>执行反序列操作，这次就可以反序列成功了，如下所示：</p><p>　　<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAqCAIAAABNz0JcAAAEkUlEQVR4nO1bwXHsIAylZrrJ0EAOqYA6fEgL8aQH/wMBC5CEwF7iT/SGSbxYlgR6CHutNd9fn99fnx/vb+GgaMYYeFx/DD3wGF4I/9ZitYaiX2gdvQqeolqthHESFWsKUPPT7KyBBqXXVj0udFDN6KDeMrNxmuAJp03bvU0Jp21qU8Jpm9pKwn28v2nT9rpWEu5YHcaYgVNX1F5XTl0OO+X6Bzy56HymSgmX+gsItckvKQQKuqDg3b5IuJdylFS1GOGavGlGjpJBTfQ6M+aexO0x9vCklyiXzEMmvxjhCkgi2kUIVIPceu8lTDZiFkl9qov3jC1q9iRD+5Ffj3D11FNT3FzKXYSj4tRF5eLsAOG6qMkPRMjOGwi3uajb+t1bt8kVPgIp0tSpoocBqkEoj35kwsPwrBlm+ZDlhGMcYzxpKK8JtzljIsV2b835qRu/xdVi9uGMSOLNC1OhHetBT/GEQx1gAl+sh+ZszCUckdAg80L+s35PZ72NA7LWWn9eAAC1gnNApbU/irdwPlo4860xQTlQYv0eTWV+U8uaicohoyYVb1SyCVRn1wHvbZcSqvOVhNscZBJERkUgtnubjjdXcAIhr7eArJuL8jGxBhV7Urs5wKTdW6g/cT8cQ2NCwsHA139RoKp6I8foaco0r2o6zI+RoXIXt3Dl1wmXp6CMYQjhqgwaNW0upUa3HYnHUHdtgvCWSVfNWS5yDyOJGqIkhW7I3U6mB1ZI0+06+zbdFgLbUmEKAaAJB3BmrOO4i3DMfSBLuIMNOexBIzGQtK4IowLygUjSEkUdyF252tTTxUL8oaHIXiHi59a5ewvu4cCOWmyA4BR4EsnkE88owh2HtzTlMMLxK5Jf1oVMHQM0AOikC/kqPDtMOJRMxYqiaN27XCXAvxaBN/z5DVSA9d6ZyLn86aBMX0h//jzhNiBnfXo8Cf/jbVxtotxrQ28zZvWc1lNGMaw45lVR1OTdE7pN6a8/8hcyXgnFerHgF78MmlPGrFcYQomM3HozSQi15QuQXF0S65KeMfwtwil+HUo4xVQo4RRToYRTTIUSTjEVSjjFVCjhFFOhhFNMxYKESy8yqCqE5wC8ugGu7viLnjWwIOEC9vyV7QMB3lnDmlekvmElYNUixhhrbb3CwNvLrDayp3CyqssEFxDvajG7lUfWFwS7gXCUXYGfovEemcq/SrgjVjlGDsBSkC3OA6jgGCqcRAAWfF6NQtitS+HvJhw5XtTP3vFmhhwU/nNbKlxhsP4HqfI4egsnyRWf1zVldOHtEriBcKhdys/e8eZWmPqrxSgnJ1xWJgdEhgonaxTycrsELhOOsEv5OcSMOjEjbnRkyv8AXYTLNrAG4fjCSQQwYnF75uyShaJJFolkyEMit+jx4n72jrf8/UcC/M3H3qv08SAeGkJUzrLI/ch2B+tcqJIcKJykAcSdy36kU9n9uQK72an3NlgYX25oDEi7hJ994xX+qm2t9HY89muRF32pkf1g7A48/8uXp+FZhHvtyr5vf1o4A70azyKcYnko4RRToYRTTIUSTjEVSjjFVPwDOYdllNxtl40AAAAASUVORK5CYII=" alt="img"></p><h2 id="四、serialVersionUID的取值"><a href="#四、serialVersionUID的取值" class="headerlink" title="四、serialVersionUID的取值"></a>四、serialVersionUID的取值</h2><p>　　serialVersionUID的取值是Java运行时环境根据类的内部细节自动生成的。如果对类的源代码作了修改，再重新编译，新生成的类文件的serialVersionUID的取值有可能也会发生变化。<br>　　类的serialVersionUID的默认值完全依赖于Java编译器的实现，对于同一个类，用不同的Java编译器编译，有可能会导致不同的 serialVersionUID，也有可能相同。<strong>为了提高serialVersionUID的独立性和确定性，强烈建议在一个可序列化类中显示的定义serialVersionUID，为它赋予明确的值</strong>。</p><p>　　显式地定义serialVersionUID有两种用途：<br>　　　　1、 在某些场合，希望类的不同版本对序列化兼容，因此需要确保类的不同版本具有相同的serialVersionUID；<br>　　　　2、 在某些场合，不希望类的不同版本对序列化兼容，因此需要确保类的不同版本具有不同的serialVersionUID。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向接口编程</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/mian-xiang-jie-kou-bian-cheng/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/mian-xiang-jie-kou-bian-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="面向接口编程"><a href="#面向接口编程" class="headerlink" title="面向接口编程"></a>面向接口编程</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/%E6%8E%A5%E5%8F%A3-20200906100359964.png" alt="image-20200906100359964"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>注解Annotation</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/zhu-jie-annotation/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/zhu-jie-annotation/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-注解（Annotation"><a href="#Java-注解（Annotation" class="headerlink" title="Java 注解（Annotation)"></a>Java 注解（Annotation)</h1><p>参考文档:<a href="https://www.runoob.com/w3cnote/java-annotation.html" target="_blank" rel="noopener">https://www.runoob.com/w3cnote/java-annotation.html</a></p><h2 id="作用在代码的注解是"><a href="#作用在代码的注解是" class="headerlink" title="作用在代码的注解是"></a><strong>作用在代码的注解是</strong></h2><ul><li>@Override - 检查该方法是否是重写方法。如果发现其父类，或者是引用的接口中并没有该方法时，会报编译错误。</li><li>@Deprecated - 标记过时方法。如果使用该方法，会报编译警告。</li><li>@SuppressWarnings - 指示编译器去忽略注解中声明的警告。</li></ul><h2 id="作用在其他注解的注解-或者说-元注解-是"><a href="#作用在其他注解的注解-或者说-元注解-是" class="headerlink" title="作用在其他注解的注解(或者说 元注解)是:"></a>作用在其他注解的注解(或者说 元注解)是:</h2><ul><li>@Retention - 标识这个注解怎么保存，是只在代码中，还是编入class文件中，或者是在运行时可以通过反射访问。</li><li>@Documented - 标记这些注解是否包含在用户文档中。</li><li>@Target - 标记这个注解应该是哪种 Java 成员。</li><li>@Inherited - 标记这个注解是继承于哪个注解类(默认 注解并没有继承于任何子类)</li></ul><h2 id="从-Java-7-开始，额外添加了-3-个注解"><a href="#从-Java-7-开始，额外添加了-3-个注解" class="headerlink" title="从 Java 7 开始，额外添加了 3 个注解:"></a>从 Java 7 开始，额外添加了 3 个注解:</h2><ul><li>@SafeVarargs - Java 7 开始支持，忽略任何使用参数为泛型变量的方法或构造函数调用产生的警告。</li><li>@FunctionalInterface - Java 8 开始支持，标识一个匿名函数或函数式接口。</li><li>@Repeatable - Java 8 开始支持，标识某注解可以在同一个声明上使用多次。</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2019/08/28123151-d471f82eb2bc4812b46cc5ff3e9e6b82.jpg" alt="img"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>泛型</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/fan-xing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/fan-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h1><p>泛型可以在编译时检测出程序的安全隐患,使用泛型技术可以使程序更加健壮</p><ul><li>泛型只允许设置引用数据类型</li></ul><h2 id="定义泛型"><a href="#定义泛型" class="headerlink" title="定义泛型"></a>定义泛型</h2><h3 id="定义泛型类"><a href="#定义泛型类" class="headerlink" title="定义泛型类"></a>定义泛型类</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> demo1<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span>Test<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：泛型的使用 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token keyword">class</span> <span class="token class-name">Point2</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">private</span> T x<span class="token punctuation">;</span>    <span class="token keyword">private</span> T y<span class="token punctuation">;</span>    <span class="token keyword">public</span> T <span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setX</span><span class="token punctuation">(</span>T x<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> T <span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setY</span><span class="token punctuation">(</span>T y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> Object x<span class="token punctuation">;</span>    <span class="token keyword">private</span> Object y<span class="token punctuation">;</span>    <span class="token keyword">public</span> Object <span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setX</span><span class="token punctuation">(</span>Object x<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> Object <span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setY</span><span class="token punctuation">(</span>Object y<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo1</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Point point<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        point<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        point<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> x<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> point<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> y<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> point<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"x坐标："</span><span class="token operator">+</span>x<span class="token operator">+</span><span class="token string">" y坐标："</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">t2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Point point<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        point<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        point<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span><span class="token string">"北纬20度"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> x<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> point<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ClassCastException异常显示</span>        <span class="token keyword">int</span> y<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> point<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"x坐标："</span><span class="token operator">+</span>x<span class="token operator">+</span><span class="token string">" y坐标："</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">t3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        Point2<span class="token operator">&lt;</span>Integer<span class="token operator">></span> point2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        point2<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        point2<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer x <span class="token operator">=</span> point2<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Integer y <span class="token operator">=</span> point2<span class="token punctuation">.</span><span class="token function">getY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"x坐标："</span><span class="token operator">+</span>x<span class="token operator">+</span><span class="token string">" y坐标："</span><span class="token operator">+</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="定义泛型方法"><a href="#定义泛型方法" class="headerlink" title="定义泛型方法"></a>定义泛型方法</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ttest</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//定义泛型方法</span>    <span class="token keyword">public</span> <span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"输出任何类>>>"</span><span class="token operator">+</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//调用泛型方法</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Ttest t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ttest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token number">12.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="泛型通配符"><a href="#泛型通配符" class="headerlink" title="泛型通配符"></a>泛型通配符</h2><p>使用？接收数据</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> demo2<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：使用？接收数据 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">private</span> T content<span class="token punctuation">;</span>    <span class="token keyword">public</span> T <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> content<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContent</span><span class="token punctuation">(</span>T content<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo2</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Message<span class="token operator">&lt;</span>String<span class="token operator">></span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">"泛型 ？表示泛型类型只容许从对象中获取数据类型，而不容许修改数据"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">fun</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>        Message<span class="token operator">&lt;</span>Integer<span class="token operator">></span> message2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message2<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">fun</span><span class="token punctuation">(</span>message2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/**     * ? 只容许取出，不让修改     * @param msg     */</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span>Message<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">//        msg.setContent("");</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="设置泛型上限"><a href="#设置泛型上限" class="headerlink" title="设置泛型上限"></a>设置泛型上限</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> demo3<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：设置泛型上限 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span>T <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token operator">></span><span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//定义泛型上限为Number子类</span>    <span class="token keyword">private</span> T content<span class="token punctuation">;</span>    <span class="token keyword">public</span> T <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> content<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContent</span><span class="token punctuation">(</span>T content<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo3</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Message<span class="token operator">&lt;</span>Integer<span class="token operator">></span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//integer为Number子类</span>        msg<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//自动装箱</span>        <span class="token function">fun</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//传递引用</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span>Message<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token operator">></span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//获取数据</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="设置泛型下限"><a href="#设置泛型下限" class="headerlink" title="设置泛型下限"></a>设置泛型下限</h2><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> demo4<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 类：设置泛型下限 * 编写人：kujin * 创建时间：2020/9/6 * 修改时间：2020/9/6 */</span><span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">private</span> T content<span class="token punctuation">;</span>    <span class="token keyword">public</span> T <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> content<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContent</span><span class="token punctuation">(</span>T content<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo4</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Message<span class="token operator">&lt;</span>String<span class="token operator">></span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        msg<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">"泛型下限 Message&lt;? super String>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">fun</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fun</span><span class="token punctuation">(</span>Message<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> String<span class="token operator">></span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/zheng-ze-biao-da-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/zheng-ze-biao-da-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>参考地址: <a href="https://developer.ibm.com/zh/tutorials/java-language-constructs-2/" target="_blank" rel="noopener">https://developer.ibm.com/zh/tutorials/java-language-constructs-2/</a></p><p><em>正则表达式</em> 基本来讲是一种模式，描述一组具有该共同模式的字符串。如果您是 Perl 程序员，应该非常熟悉 Java 语言中的正则表达式 (regex) 模式语法。但是，如果您不习惯使用正则表达式语法，它可能看起来很怪异。本节指导您在 Java 程序中使用正则表达式。</p><p>Regular Expressions API 有 3 个您几乎总是在使用的核心类：</p><ul><li><code>Pattern</code> 描述一种字符串模式。</li><li><code>Matcher</code> 测试一个字符串，查看它是否与模式匹配。</li><li><code>PatternSyntaxException</code> 告诉您，无法接受您尝试定义的模式的某个方面。</li></ul><h3 id="regex-模式语法"><a href="#regex-模式语法" class="headerlink" title="regex 模式语法"></a>regex 模式语法</h3><p><em>regex 模式</em> 描述字符串的结构，表达式会尝试在输入字符串中查找该结构。这是正则表达式可能看起来有点奇怪的地方。但是，一旦您理解了该语法，就可以更轻松地解释它。表 1 列出了在模式字符串中使用的一些最常见的 regex 构造：</p><table><thead><tr><th align="left">Regex 构造</th><th align="left">符合匹配条件的内容</th></tr></thead><tbody><tr><td align="left">.</td><td align="left">任何字符</td></tr><tr><td align="left"><code>?</code></td><td align="left">前面的零 (0) 或一 (1) 个字符或数字</td></tr><tr><td align="left"><code>*</code></td><td align="left">前面的零 (0) 或更多个字符或数字</td></tr><tr><td align="left"><code>+</code></td><td align="left">前面的一 (1) 或更多个字符或数字</td></tr><tr><td align="left"><code>[]</code></td><td align="left">一个字符或数字范围</td></tr><tr><td align="left"><code>^</code></td><td align="left">后面的条件的否定（即”非 <em>后面的条件</em> ”）</td></tr><tr><td align="left"><code>\d</code></td><td align="left">任何数字（也可表示为 <code>[0-9]</code> ）</td></tr><tr><td align="left"><code>\D</code></td><td align="left">任何非数字（也可表示为 <code>[^0-9]</code> ）</td></tr><tr><td align="left"><code>\s</code></td><td align="left">任何空格字符（也可表示为 <code>[\n\t\f\r]</code> ）</td></tr><tr><td align="left"><code>\S</code></td><td align="left">任何非空格字符（也可表示为 <code>[^\n\t\f\r]</code> ）</td></tr><tr><td align="left"><code>\w</code></td><td align="left">任何单词字符（也可表示为 <code>[a-zA-Z_0-9]</code> ）</td></tr><tr><td align="left"><code>\W</code></td><td align="left">任何非单词字符（也可表示为 <code>[^\w]</code> ）</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>抽象类与接口</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/chou-xiang-lei-yu-jie-kou/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/chou-xiang-lei-yu-jie-kou/</url>
      
        <content type="html"><![CDATA[<h1 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h1><p>抽象类:为方法覆写提供类结构,使用abstract class</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/** * 定义抽象类 */</span><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Message</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> String type<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//编写抽象方法</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> String <span class="token function">agetConnectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> String <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> type<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setType</span><span class="token punctuation">(</span>String type<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/** * 编写子类 继承抽象类 */</span><span class="token keyword">class</span> <span class="token class-name">DatabaseMessage</span> <span class="token keyword">extends</span> <span class="token class-name">Message</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//必须覆写抽象方法</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> String <span class="token function">agetConnectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"数据库信息连接>>>>>>>"</span><span class="token operator">+</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo12</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//抽象类的对象 实例化 可以 利用 对象多态性 通过子类 向上转型</span>        Message message<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DatabaseMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        message<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">"JDBC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">agetConnectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Labama</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/labama/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/labama/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>java基础</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/java-ji-chu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/java-ji-chu/</url>
      
        <content type="html"><![CDATA[<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><p><strong>对象</strong>：对象是类的一个实例，有状态和行为。例如，一条狗是一个对象，它的状态有：颜色、名字、品种；行为有：摇尾巴、叫、吃等。</p><p><strong>类</strong>：类是一个模板，它描述一类对象的行为和状态。</p><p><strong>方法</strong>：方法就是行为，一个类可以有很多方法。逻辑运算、数据修改以及所有动作都是在方法中完成的。</p><p><strong>实例变量</strong>：每个对象都有独特的实例变量，对象的状态由这些实例变量的值决定。</p><h2 id="Java修饰符"><a href="#Java修饰符" class="headerlink" title="Java修饰符"></a>Java修饰符</h2><ul><li>访问控制修饰符 : default, public , protected, private</li><li>非访问控制修饰符 : final, abstract, static, synchronized</li></ul><h1 id="java类和对象"><a href="#java类和对象" class="headerlink" title="java类和对象"></a>java类和对象</h1><h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><h2 id="继承-extend"><a href="#继承-extend" class="headerlink" title="继承 extend"></a>继承 extend</h2><blockquote><p>继承就是子类继承父类的特征和行为，使得子类对象（实例）具有父类的实例域和方法，或子类从父类继承方法，使得子类具有父类相同的行为。</p></blockquote><ul><li>子类拥有父类非 private 的属性、方法。</li><li>子类可以拥有自己的属性和方法，即子类可以对父类进行扩展。</li><li>子类可以用自己的方式实现父类的方法。</li><li>Java 的继承是单继承，但是可以多重继承，单继承就是一个子类只能继承一个父类，多重继承就是，例如 A 类继承 B 类，B 类继承 C 类，所以按照关系就是 C 类是 B 类的父类，B 类是 A 类的父类，这是 Java 继承区别于 C++ 继承的一个特性。</li><li>提高了类之间的耦合性（继承的缺点，耦合度高就会造成代码之间的联系越紧密，代码独立性越差）。</li></ul><h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><h2 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h2><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h2 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h2><h1 id="Java-基本数据类型"><a href="#Java-基本数据类型" class="headerlink" title="Java 基本数据类型"></a>Java 基本数据类型</h1><table><thead><tr><th align="left"><strong>数据类型</strong></th><th align="left"><strong>默认值</strong></th></tr></thead><tbody><tr><td align="left">byte</td><td align="left">0</td></tr><tr><td align="left">short</td><td align="left">0</td></tr><tr><td align="left">int</td><td align="left">0</td></tr><tr><td align="left">long</td><td align="left">0L</td></tr><tr><td align="left">float</td><td align="left">0.0f</td></tr><tr><td align="left">double</td><td align="left">0.0d</td></tr><tr><td align="left">char</td><td align="left">‘u0000’</td></tr><tr><td align="left">String (or any object)</td><td align="left">null</td></tr><tr><td align="left">boolean</td><td align="left">false</td></tr></tbody></table><h1 id="java转义字符"><a href="#java转义字符" class="headerlink" title="java转义字符"></a>java转义字符</h1><table><thead><tr><th align="left">符号</th><th align="left">字符含义</th></tr></thead><tbody><tr><td align="left">\n</td><td align="left">换行 (0x0a)</td></tr><tr><td align="left">\r</td><td align="left">回车 (0x0d)</td></tr><tr><td align="left">\f</td><td align="left">换页符(0x0c)</td></tr><tr><td align="left">\b</td><td align="left">退格 (0x08)</td></tr><tr><td align="left">\0</td><td align="left">空字符 (0x0)</td></tr><tr><td align="left">\s</td><td align="left">空格 (0x20)</td></tr><tr><td align="left">\t</td><td align="left">制表符</td></tr><tr><td align="left">"</td><td align="left">双引号</td></tr><tr><td align="left">'</td><td align="left">单引号</td></tr><tr><td align="left">\</td><td align="left">反斜杠</td></tr><tr><td align="left">\ddd</td><td align="left">八进制字符 (ddd)</td></tr><tr><td align="left">\uxxxx</td><td align="left">16进制Unicode字符 (xxxx)</td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javac编译源码问题</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/javac-bian-yi-yuan-ma-wen-ti/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/javac-bian-yi-yuan-ma-wen-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="编译java文件"><a href="#编译java文件" class="headerlink" title="编译java文件"></a>编译java文件</h1><pre class=" language-bash"><code class="language-bash">javac xx.java</code></pre><p>运行时需要注意:</p><ul><li>当java文件没有package 时可以直接运行 java xx</li><li>当java文件存在package路径时 需要 返回到<strong>根目录</strong>, 也就是package的根目录<ul><li>windos <ul><li>java com.xxx.xx</li></ul></li><li>linux <ul><li>java com/xxx/xx</li></ul></li></ul></li></ul><p>具体jvm 不懂 向中级程序员迈进!!!</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>for循环</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/java-se/for-xun-huan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/java-se/for-xun-huan/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Java_SE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java_SE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设置名包排列显示</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/she-zhi-ming-bao-pai-lie-xian-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/she-zhi-ming-bao-pai-lie-xian-shi/</url>
      
        <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/idea-%E8%AE%BE%E7%BD%AE%E5%8C%85%E5%90%8D%E6%8E%92%E5%88%97%E6%98%BE%E7%A4%BA.png" alt="image-20200803113458454"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>插件使用</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/cha-jian-shi-yong/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/cha-jian-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="codota-代码提示插件"><a href="#codota-代码提示插件" class="headerlink" title="codota(代码提示插件)"></a>codota(代码提示插件)</h2><p>  智能提示（ctrl + shift + o）和寻找案例（ctrl + shift + Y）：</p><h3 id="代码完成"><a href="#代码完成" class="headerlink" title="代码完成"></a>代码完成</h3><p>当您编写代码时，Codota 会通过来自其 AI 的代码建议增强您的 IDE 自动完成。这些完成反映了从开放源代码中学到的常见编码模式，并省去主动搜索示例的需要。</p><p>触发代码完成</p><p>Codota 添加的建议可以通过左侧的 codota 图标识别 （<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/favicon-32x32.705c05b3cbd38dbfabd1e0f93344b8a4.png" alt="img">）</p><p>Codota 建议以两种方式显示：</p><p><strong>自动：</strong>当您编写代码时，它基于您键入的前缀显示。</p><p><strong>按需：</strong>它使用键盘快捷方式（Cmd+空格/Ctrl+空格）显示</p><p>查看操作中的代码完成：</p><h3 id="分配完成"><a href="#分配完成" class="headerlink" title="分配完成"></a>分配完成</h3><p>无论何时从特定类型分配变量，Codota 都会建议基于上下文和从开放源代码中学到的模型分配变量的方法。”等号 （”= “ ） 之后，您点击空格键后，Codota 建议将自动显示<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/assignment-completions_01.5629eb0f24b9659b29e92fdfae9ec90f.png" alt="img"></p><p>建议可能包括正式参数类型和名称（文件、字符串文件名）：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/assignment-completions_02.4c76662ebc91b3ce3aea6f3e3d317a02.png" alt="img"></p><p>如果选择了具有非基元参数的代码建议，这些参数将预加在上一行中（在选择”=新 FileReader（文件文件）”后添加文件）;<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/assignment-completions_03.51eb314d580dde5b41b4623dfe39825f.png" alt="img"></p><p>但是，如果 Codota 找到一个本地变量，该变量是一个很好的候选变量，它将将其绑定到建议（输入文件显示在建议中，并且未预报）：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/assignment-completions_04.8fc1eebbb0f265dc10c5d4d05af9321d.png" alt="img"></p><p>在某些情况下，代码建议依赖于另一个对象。如果上下文中不存在此类对象，则建议以”…”开头，并在选择时预报此对象（注意：要创建需要连接的准备状态）。选择后，将在上一行中添加新的连接：<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/assignment-completions_05.7573b25f8368e9f3ed1169cc05743b23.png" alt="img"></p><h3 id="新线路完成"><a href="#新线路完成" class="headerlink" title="新线路完成"></a>新线路完成</h3><p>新代码行通常以声明新的局部变量开头。在某些情况下，Codota 可以根据当前上下文预测要使用的下一个变量的类型。</p><p>在键入时，使用基本完成显示，按已键入的前缀进行筛选：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/new-line-completions_01.6c83e7c1961c42fb93d07e0295496c9a.png" alt="img"></p><p>或者，按需使用 Ctrl+空间：<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/new-line-completions_02.07cf8ed9ebb7decf97535ea1ea521474.png" alt="img"></p><h3 id="方法完成"><a href="#方法完成" class="headerlink" title="方法完成"></a>方法完成</h3><p>Codota 还可以帮助您预测给定对象中的下一个调用方法。最有可能的方法将由科多塔放在建议列表的顶部：<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/method-completions_01.f5aa338015bb98c3af362343487a086a.png" alt="img"></p><p>在某些情况下，Codota 预测在调用方法时将使用给定的局部变量。在这种情况下，将出现具有局部变量的方法建议，选择 Codota 的建议后，将用此方法粘贴参数。建议将突出显示一个黄色星形：<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/method-completions_02.6f43bfe1f52d9147a6388a569cab2313.png" alt="img"></p><h3 id="在-IDE-Java-搜索中"><a href="#在-IDE-Java-搜索中" class="headerlink" title="在 IDE Java 搜索中"></a>在 IDE Java 搜索中</h3><p>只需单击一下，您就会从 github 获得排名最高的代码段，这是堆栈流，并在编辑器旁边的 IDE 中查看它们。此过程使代码搜索更加方便。</p><p>编写良好的软件需要不断学习新的 API 或使用编程语言的不同元素。使用 Codota 在 IDE 中编写代码时搜索相关代码示例。只需单击一下，即可从 github 获得排名最高的代码段，该代码段是堆栈流，并在编辑器旁边的 IDE 中查看它们。此过程使代码搜索更加方便。</p><h3 id="如何搜索"><a href="#如何搜索" class="headerlink" title="如何搜索"></a>如何搜索</h3><p><strong>对于给定的类或方法：</strong>要获取代码中使用的任何开源类或方法的相关示例，只需选择类或方法，然后右键单击**- 获取**相关示例或使用键快捷方式（默认值：Ctrl+Shift+O））<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_01.744aa29f671017172e3c9d39263911a6.png" alt="img"><img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_03.c7f445650ae9ee8c6afa9b78ec56df0c.png" alt="img"></p><p>代码片段将显示在 Codota 窗格中：<img src="https://d3ftmdkezac6rp.cloudfront.net/plugins/assets/search_04.ae928872ebf259913520f3ba8e543e62.png" alt="img"></p><p>您还可以在使用键快捷方式 （Ctrl=Shift+O） 导航给定类的方法时触发搜索，并获取所选方法的最佳代码段：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_05.efa49d39678c3f178d2f2f81b514a90d.png" alt="img"></p><p><strong>使用 Codota 的自动完成从零开始搜索</strong>，您可以搜索任何开源类或方法的代码示例，即使它尚未在当前类中或当前类路径中不是事件。你可以去**”工具 + 科多塔搜索…”**或使用 Ctrl=Shift=Y 快捷方式：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_06.7c4f84689dc6759e6ec19403b18a73d6.png" alt="img"></p><p>将打开一个带搜索框的弹出窗口：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_07.1617b0baceaa44778ff1d527ded0fd0d.png" alt="img"></p><p>使用库多塔的自动完成机制键入搜索词：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_08.cc3816166c730ecb6f6e8a27ccc94365.png" alt="img"></p><p>选择术语时，相关示例将显示在侧面：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_09.93af76e45e1601443df91ae031ae19fb.png" alt="img"></p><h3 id="查看代码段"><a href="#查看代码段" class="headerlink" title="查看代码段"></a>查看代码段</h3><p>相关的代码片段显示在 codota 窗格中的”代码段”选项卡中。对于每个代码段，您可以查看它来自堆栈流后、github 存储库还是 maven 项目。单击源标题，了解有关代码段源的信息：<img src="images/%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8/search_10.80466706a44b4b8ae23706269ad9d3c5.png" alt="img"></p><p>或者查看帖子/源（如果您想要查看完整的源代码）。目前，每个搜索仅显示 20 个代码段，但在不久的将来，您将能够查看更多代码段或使用其他字词优化搜索。</p><h2 id="JRebel-pass"><a href="#JRebel-pass" class="headerlink" title="JRebel(pass)"></a>JRebel(pass)</h2><blockquote><p><a href="https://www.jrebel.com/" target="_blank" rel="noopener">JRebel</a>是一个生产力工具，允许开发人员立即重新加载代码更改。它跳过 Java 开发中常见的重建、重新启动和重新部署周期。JRebel 使开发人员能够在相同时间内完成更多工作，并在编码时保持流程。JRebel 支持大多数实际企业 java 堆栈，并且易于安装到现有开发环境中。</p><p><a href="https://www.jrebel.com/products/xrebel" target="_blank" rel="noopener">XRebel</a>是 Java 开发的性能工具，它为开发人员提供了实时性能洞察，帮助他们在开发阶段更快、更早地了解和解决潜在问题。</p></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200807124841539.png" alt="image-20200807124841539"></p><h2 id="Intellij-IDEA安装热部署插件JRebel"><a href="#Intellij-IDEA安装热部署插件JRebel" class="headerlink" title="Intellij IDEA安装热部署插件JRebel"></a><a href="https://www.cnblogs.com/Zlcode/p/12241846.html" target="_blank" rel="noopener">Intellij IDEA安装热部署插件JRebel</a></h2><p><strong>注：笔者使用版本为IntelliJ IDEA 2019.3.2 (Ultimate Edition)</strong></p><p><strong>IDEA安装JRebel</strong><br>1、在IDEA中点击 File-&gt;Settings-&gt;Plugins-&gt;Brows Repositories；<br>2、在搜索框搜索JRebel；<br>3、找到JRebel for intellij；<br>4、install；<br>5、安装好之后restart IDEA；</p><p><strong>IDEA激活JRebel</strong>（首先到github上去下载一个反向代理软件，<a href="https://github.com/ilanyu/ReverseProxy/releases/tag/v1.4" target="_blank" rel="noopener">下载地址</a>，64位下载后打开）</p><p>1、在IDEA中点击 Help-&gt;Jrebel-&gt;Activation打开激活页面；<br>2、选择JRebel activated中的 connect to online licensing service；<br>3、第一行输入 <a href="http://127.0.0.1:8888/UUID" target="_blank" rel="noopener">http://127.0.0.1:8888/UUID</a> code，第二行随便输入个邮箱；（ps:UUID code生成一个64位uuid替换掉）<br>4、点击以下change liense 按钮验证激活 ；<br>5、安装好之后在 Help-&gt;Jrebel-&gt;Configuration将Jrebel设置为离线（work offline）即可；</p><p><img src="https://img2018.cnblogs.com/i-beta/1157010/202001/1157010-20200129233635281-337566070.png" alt="img"></p><p><img src="https://img2018.cnblogs.com/i-beta/1157010/202001/1157010-20200129232149288-1492514281.png" alt="img"></p><p><strong><img src="https://img2018.cnblogs.com/i-beta/1157010/202001/1157010-20200129232757693-1496113919.png" alt="img"></strong></p><p><strong>本项目只做个人学习研究之用，不得用于商业用途！</strong></p><h2 id="Packges-Search-快速依赖查找"><a href="#Packges-Search-快速依赖查找" class="headerlink" title="Packges Search(快速依赖查找)"></a>Packges Search(快速依赖查找)</h2><p>Art+Insert(按键出现)</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/packge%20search.gif" alt="package_search"></p><h2 id="翻译TranslationPlugin"><a href="#翻译TranslationPlugin" class="headerlink" title="翻译TranslationPlugin"></a>翻译<strong>TranslationPlugin</strong></h2><p>地址:<a href="http://yiiguxing.github.io/TranslationPlugin/start.html" target="_blank" rel="noopener">http://yiiguxing.github.io/TranslationPlugin/start.html</a></p><p>show dialog </p><ul><li>Windows - Ctrl + Shift + O</li></ul><p>翻译</p><ul><li>Windows - Ctrl + Shift + Y</li></ul><h1 id="IDE-刷题工具-leetcode-editor"><a href="#IDE-刷题工具-leetcode-editor" class="headerlink" title="IDE 刷题工具 leetcode editor"></a>IDE 刷题工具 leetcode editor</h1><p>参考地址: <a href="https://zhuanlan.zhihu.com/p/60309695" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/60309695</a></p><h3 id="下载插件"><a href="#下载插件" class="headerlink" title="下载插件"></a>下载插件</h3><blockquote><p>settings plugin 搜索 leetcode editor 作者 shuzijun</p></blockquote><h3 id="配置登录-模板样式-可以本地测试"><a href="#配置登录-模板样式-可以本地测试" class="headerlink" title="配置登录 模板样式(可以本地测试)"></a>配置登录 模板样式(可以本地测试)</h3><p>详细描述: <a href="https://github.com/shuzijun/leetcode-editor/blob/master/AppData/Roaming/Typora/typora-user-images/image-20201001201507530.png)" target="_blank" rel="noopener">https://github.com/shuzijun/leetcode-editor/blob/master/doc/CustomCode_ZH.md![image-20201001201507530](../../../AppData/Roaming/Typora/typora-user-images/image-20201001201507530.png)</a></p><p>CodeFileName:</p><pre class=" language-java"><code class="language-java">$<span class="token operator">!</span>velocityTool<span class="token punctuation">.</span><span class="token function">camelCaseName</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>titleSlug<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>TemplateConstant:</p><pre class=" language-java"><code class="language-java">  $<span class="token punctuation">{</span>question<span class="token punctuation">.</span>content<span class="token punctuation">}</span>  <span class="token keyword">package</span> leetcode<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>en<span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">class</span> $<span class="token operator">!</span>velocityTool<span class="token punctuation">.</span><span class="token function">camelCaseName</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>titleSlug<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>           Solution solution <span class="token operator">=</span> <span class="token keyword">new</span> $<span class="token operator">!</span>velocityTool<span class="token punctuation">.</span><span class="token function">camelCaseName</span><span class="token punctuation">(</span>$<span class="token punctuation">{</span>question<span class="token punctuation">.</span>titleSlug<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      $<span class="token punctuation">{</span>question<span class="token punctuation">.</span>code<span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><ul><li><p><strong>Custom code template</strong>: 开启使用自定义模板，否则使用默认生成格式</p></li><li><p><strong>CodeFileName</strong>: 生成文件的名称，默认为题目标题</p></li><li><p><strong>CodeTemplate</strong>: 生成题目代码的内容，默认为题目描述和题目代码</p></li><li><p>TemplateConstant</p><p>： 模板常用变量</p><ul><li>**${question.title}**：题目标题，例如:两数之和</li><li>**${question.titleSlug}**：题目标记，例如:two-sum</li><li>**${question.frontendQuestionId}**：题目编号，例如:1</li><li>**${question.content}**：题目描述内容</li><li>**${question.code}**：题目代码部分</li><li>**$!velocityTool.camelCaseName(str)**：一个函数，用来将字符串转化为驼峰样式</li></ul></li></ul><h3 id="右键菜单描述"><a href="#右键菜单描述" class="headerlink" title="右键菜单描述"></a>右键菜单描述</h3><p><img src="../../../AppData/Roaming/Typora/typora-user-images/image-20201001201601655.png" alt="image-20201001201601655"></p><ul><li><strong><code>open question</code></strong>:打开题目,在题目上双击也可以打开</li><li><strong><code>open content</code></strong>:查看描述，包含图片(依赖 Markdown)</li><li><strong><code>Submit</code></strong>:提交题目</li><li><strong><code>Submissions</code></strong>:查看提交记录,在弹出的窗口上选择记录查看详情(<code>Show detail</code>)</li><li><strong><code>Run Code</code></strong>:运行代码,默认使用题目的测试用例</li><li><strong><code>Testcase</code></strong>:自定义测试用例</li><li><strong><code>favorite</code></strong>:添加或移除收藏</li><li><strong><code>Clear cache</code></strong>:清理当前题目</li><li><strong><code>Timer</code></strong>:计时器,开启后在右下角状态栏提示解题时间</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快捷键</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/kuai-jie-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/kuai-jie-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="格式化代码"><a href="#格式化代码" class="headerlink" title="格式化代码"></a>格式化代码</h1><pre><code>Ctrl+Alt+L</code></pre><h1 id="查看方法参数"><a href="#查看方法参数" class="headerlink" title="查看方法参数"></a>查看方法参数</h1><pre><code>Ctrl+P</code></pre><h1 id="查看类、方法、属性注释"><a href="#查看类、方法、属性注释" class="headerlink" title="查看类、方法、属性注释"></a>查看类、方法、属性注释</h1><pre><code>Ctrl+Q</code></pre><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p><h1 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h1><pre><code> Ctrl+Shift+↑/↓ (块移动) 或者 Alt+Shift+↑/↓（行移动）</code></pre><h1 id="批量修改变量名"><a href="#批量修改变量名" class="headerlink" title="批量修改变量名"></a>批量修改变量名</h1><pre><code>Shift+f6</code></pre><p>=======</p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>4a54e0bb7a2fa4b9efd486de9e7623ed98e692bd</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用IDEA明明导入了包却显示缺少保留相关类</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/li-yong-idea-ming-ming-dao-ru-liao-bao-que-xian-shi-que-shao-bao-liu-xiang-guan-lei/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/li-yong-idea-ming-ming-dao-ru-liao-bao-que-xian-shi-que-shao-bao-liu-xiang-guan-lei/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用IDEA学习编程语言</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/li-yong-idea-xue-xi-bian-cheng-yu-yan/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/li-yong-idea-xue-xi-bian-cheng-yu-yan/</url>
      
        <content type="html"><![CDATA[<h1 id="安装学习插件EduTools"><a href="#安装学习插件EduTools" class="headerlink" title="安装学习插件EduTools"></a>安装学习插件EduTools</h1><blockquote><p>借助 EduTools 插件，您可以学习和教授编程语言，如 Kotlin、Java、Python、JavaScript、Rust、C/C++ 和 Scala，其形式是编码任务和自定义验证测试，直接位于基于 JetBrains IntelliJ 平台的 IDU 内部。</p></blockquote><p><strong>工作原理</strong></p><p>安装 EduTools 插件：转到首选项 + 插件（或从欢迎屏幕配置 + 插件）并搜索 EduTools 插件。</p><blockquote><p><strong>作为一名教育家</strong>：</p><ul><li>使用自定义任务、检查、测试、提示等创建您自己的交互式课程。</li><li>在<a href="https://stepik.org/" target="_blank" rel="noopener">Stepik、</a>学习管理和 MOOC 平台上公开或私下与学生或同事分享您的课程。或者，您可以将课程保存为存档文件。</li><li>让学员在集成测试的协助下独立完成作业。</li></ul><p><a href="https://www.jetbrains.com/help/education/educator-start-guide.html" target="_blank" rel="noopener">阅读本教程了解更多详情</a></p><p><strong>作为学习者 ：</strong></p><ul><li>从列表中加入公共交互式编程课程，或从<a href="https://stepik.org/" target="_blank" rel="noopener">Stepik 选择课程</a>，为 Java 开发人员<a href="https://www.coursera.org/learn/kotlin-for-java-developers/" target="_blank" rel="noopener">解决 Kotlin</a>的编程作业和算法工具<a href="https://www.coursera.org/learn/algorithmic-toolbox" target="_blank" rel="noopener">箱课程，</a>完成<a href="https://hyperskill.org/" target="_blank" rel="noopener">JetBrains 学院项目</a>，解决<a href="https://checkio.org/" target="_blank" rel="noopener">CheckiO 的挑战</a>。</li><li>根据任务描述在练习代码中填写占位符开始学习。</li><li>使用智能开发工具验证任务、获得即时反馈和快速结果。</li></ul><p><a href="https://www.jetbrains.com/help/education/learner-start-guide.html" target="_blank" rel="noopener">阅读本教程了解更多详情</a></p></blockquote><p><strong>安装了这个插件相当于慕课网的网址编程作业一样</strong>，非常牛逼，可以自定义课程，我这里用来学习kotlin语言</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>创建代码块模板</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/chuang-jian-dai-ma-kuai-mo-ban/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/chuang-jian-dai-ma-kuai-mo-ban/</url>
      
        <content type="html"><![CDATA[<h1 id="建代码块模板"><a href="#建代码块模板" class="headerlink" title="建代码块模板"></a>建代码块模板</h1><p><img src="imgs/pv.png"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>idea报java版本错误解决方法</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/idea-bao-java-ban-ben-cuo-wu-jie-jue-fang-fa/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/idea-bao-java-ban-ben-cuo-wu-jie-jue-fang-fa/</url>
      
        <content type="html"><![CDATA[<div class="htmledit_views" id="content_views">                                            <p>&nbsp; &nbsp; &nbsp; &nbsp;在Intellij idea中新建了一个Maven项目，运行时报错如下：<span style="color:#f33b45;">Error : java 不支持发行版本5</span></p><p><img alt="" class="has" height="153" src="https://img-blog.csdn.net/20180904232438840?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIyMDc2MzQ1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="832"></p><p>&nbsp; &nbsp; &nbsp; &nbsp;本地运行用的是JDK9，测试Java的Stream操作，报错应该是项目编译配置使用的Java版本不对，需要检查一下项目及环境使用的Java编译版本配置。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;《1》在Intellij中点击“<span style="color:#3399ea;">File</span>” --&gt;“<span style="color:#3399ea;">Project Structure</span>”，看一下“Project”和“Module”栏目中Java版本是否与本地一致：</p><p><img alt="" class="has" height="387" src="https://img-blog.csdn.net/20180904233036107?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIyMDc2MzQ1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="709"></p><p>&nbsp;</p><p><img alt="" class="has" height="494" src="https://img-blog.csdn.net/20180904233152909?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIyMDc2MzQ1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="970"></p><p>如果不一致，改成本地使用的Java版本。</p><p>&nbsp; &nbsp; &nbsp; 《2》点击“<span style="color:#3399ea;">Settings</span>”--&gt;“<span style="color:#3399ea;">Bulid, Execution,Deployment</span>”--&gt;“<span style="color:#3399ea;">Java Compiler</span>”，<strong>Target bytecode version</strong>设为本地Java版本。（可以在<span style="color:#3399ea;">Default Settings</span>中把<strong>Project bytecode version </strong>一劳永逸地配置成本地Java版本）</p><p><img alt="" class="has" height="709" src="https://img-blog.csdn.net/201809042343056?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIyMDc2MzQ1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="1043"></p><p><span style="color:#3399ea;">Default Settings</span>：</p><p><img alt="" class="has" height="465" src="https://img-blog.csdn.net/20180904234401401?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIyMDc2MzQ1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="1017"></p><p>&nbsp; &nbsp; &nbsp; &nbsp;以上两步都配置好之后，重新运行应该就不会报上述错误了。</p>                                    </div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>idea工具的使用</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/idea-gong-ju-de-shi-yong/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/idea-gong-ju-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA中Tomcat日志乱码</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/idea/idea-zhong-tomcat-ri-zhi-luan-ma/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/idea/idea-zhong-tomcat-ri-zhi-luan-ma/</url>
      
        <content type="html"><![CDATA[<div id="cnblogs_post_body" class="blogpost-body ">    <p>&nbsp;</p><p>问题，在idea中出现乱码问题，以前没有的，好像在设置系统代码为utf8之后就出现了，于是尝试了一系列办法，希望这些办法对您有帮助。</p><p>先看一下乱码的样式。</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124093506839-714069128.png" alt=""></p><p>设置办法</p><p>1、在tomcat Server中设置 VM options , 值为&nbsp;-Dfile.encoding=UTF-8 ，可惜没生效</p><p>1<img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124093658943-1191924990.png" alt=""></p><p>&nbsp;</p><p>2、在setting中的 File encodings 中设置编码格式，后来发现这是设置页面编码格式的，所以也没生效，不过遇到相关问题的朋友也不防照此设置下。</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124094119079-1885159073.png" alt=""></p><p>3、在java Complier中设置Additional command line parameters的值，-encoding=UTF-8，很可惜还没生效</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124094405855-2002294699.png" alt=""></p><p>4、在bin中设置idea.exe.vmoptions和idea64.exe.vmoptions中的参数，同时增加-Dfile.encoding=UTF-8，据说有些人保存后重启就可以了，但到我这边还是没生效。</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124094613937-68757272.png" alt=""></p><p>5、在tomcat \bin目录下的catalina.bat文件中加入&nbsp;-Dfile.encoding=UTF-8，可是还不生效，有些抓狂了...</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124094827745-504540766.png" alt=""></p><p>6、在 tomcat / conf 目录下，设置&nbsp;logging.properties ，增加参数&nbsp;&nbsp;java.util.logging.ConsoleHandler.encoding = GBK，重启后终于可以了，总算松了口气。</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124094951059-25415614.png" alt=""></p><p>终于，正常显示了......</p><p><img src="https://img2018.cnblogs.com/blog/717943/201901/717943-20190124095057327-1632560035.png" alt=""></p><p>7、另外在服务器上tomcat还需要设置&nbsp;server.xml中的参数，以防页面出现乱码</p><p>&lt;Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000"&nbsp; redirectPort="8443"&nbsp; URIEncoding="UTF-8" /&gt;</p><p>&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" URIEncoding="UTF-8" /&gt;</p></div><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>错误统计</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/cuo-wu-tong-ji/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/cuo-wu-tong-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="git-commit-提交的时候报错husky-gt-pre-commit-hook-failed-add-–no-verify-to-bypass-（解决办法）"><a href="#git-commit-提交的时候报错husky-gt-pre-commit-hook-failed-add-–no-verify-to-bypass-（解决办法）" class="headerlink" title="git commit 提交的时候报错husky > pre-commit hook failed (add –no-verify to bypass)（解决办法）"></a>git commit 提交的时候报错husky &gt; pre-commit hook failed (add –no-verify to bypass)（解决办法）</h1><blockquote><p>这个问题是因为当你在终端输入git commit -m “XXX”,提交代码的时候,pre-commit(客户端)钩子，它会在Git键入提交信息前运行做代码风格检查。如果代码不符合相应规则，则报错，而它的检测规则就是根据.git/hooks/pre-commit文件里面的相关定义。查询了网上的解决办法，总结为以下三种解决方案，个人喜欢第三种：</p><ol><li><strong>卸载husky。只要把项目的package.json文件中devDependencies节点下的husky库删掉，然后重新npm i 一次即可。或者直接在项目根目录下执行npm uninstall husky –save也可以，再次提交，自动化测试功能就屏蔽掉</strong></li><li><strong>进入项目的.git文件夹(文件夹默认隐藏,可先设置显示或者命令ls查找),再进入hooks文件夹,删除pre-commit文件,重新git commit -m ‘xxx’ git push即可。</strong></li><li><strong>将git commit -m “XXX” 改为 git commit –no-verify -m “XXX”</strong></li></ol></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2创建分支</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/3-2-chuang-jian-fen-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/3-2-chuang-jian-fen-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h1><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td>git branch testing</td><td>创建分支</td></tr><tr><td>testing  git checkout testing</td><td>切换到新创建的 <code>testing</code> 分支</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2 添加</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/3-2-tian-jia/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/3-2-tian-jia/</url>
      
        <content type="html"><![CDATA[<h1 id="git-add-将文件内容添加到索引"><a href="#git-add-将文件内容添加到索引" class="headerlink" title="git-add - 将文件内容添加到索引"></a>git-add - 将文件内容添加到索引</h1><pre><code>git add [--verbose | -v] [--dry-run | -n] [--force | -f] [--interactive | -i] [--patch | -p]      [--edit | -e] [--[no-]all | --[no-]ignore-removal | [--update | -u]]      [--intent-to-add | -N] [--refresh] [--ignore-errors] [--ignore-missing] [--renormalize]      [--chmod=(+|-)x] [--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]]      [--] [&lt;pathspec&gt;…]</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1 关键命令</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/3-1-guan-jian-ming-ling/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/3-1-guan-jian-ming-ling/</url>
      
        <content type="html"><![CDATA[<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</p><h1 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h1><p>=======</p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>4a54e0bb7a2fa4b9efd486de9e7623ed98e692bd<br>| 命令                     | 解释                                                     |<br>| ———————— | ——————————————————– |<br>| git init                 | 进入一个空的目录，命令行 git init 进行初始化！           |<br>| git clone ***.git        | 克隆一个git地址 后面添加一个git地址，git会自动下载到本地 |<br>| git add .                | 添加需要提交的代码 可以是具体的文件名  . 代表全部        |<br>| git commit -m “提交描述” | 提交文件，但没有上传到服务器 添加  -m “提交描述”         |<br>| git push                 | 上传到服务器                                             |<br>| git pull                 | 下载到本地                                               |<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br>=======<br>| git branch testing       | 创建分支testing                                          |<br>| git checkout testing     | 切换到新创建的 <code>testing</code> 分支                            |<br>|                          |                                                          |<br>4a54e0bb7a2fa4b9efd486de9e7623ed98e692bd</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-2 Git获取和创建项目</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/2-2-git-huo-qu-he-chuang-jian-xiang-mu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/2-2-git-huo-qu-he-chuang-jian-xiang-mu/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h1 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h1><blockquote><p>创建一个空的 Git 存储库或重新初始化现有存储库</p></blockquote><pre class=" language-git"><code class="language-git">git init [-q | --quiet] [--bare] [--template=&lt;template_directory>]      [--separate-git-dir &lt;git dir>] [--object-format=&lt;format>]      [-b &lt;branch-name> | --initial-branch=&lt;branch-name>]      [--shared[=&lt;permissions>]] [directory]</code></pre><h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>-q</td><td>只打印错误和警告消息; 所有其他输出将被禁止</td></tr><tr><td><strong>-bare</strong></td><td>创建一个裸库。如果没有设置环境，则将其设置为当前的工作目录</td></tr><tr><td><strong>-b</strong></td><td>新创建的存储库中为初始分支使用指定的名称。如果没有指定，则退回到默认名称: master</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><h1 id="Git-Clone"><a href="#Git-Clone" class="headerlink" title="Git Clone"></a>Git Clone</h1><blockquote><p>将存储库克隆到一个新目录中</p></blockquote><pre><code>git clone [--template=&lt;template_directory&gt;]      [-l] [-s] [--no-hardlinks] [-q] [-n] [--bare] [--mirror]      [-o &lt;name&gt;] [-b &lt;name&gt;] [-u &lt;upload-pack&gt;] [--reference &lt;repository&gt;]      [--dissociate] [--separate-git-dir &lt;git dir&gt;]      [--depth &lt;depth&gt;] [--[no-]single-branch] [--no-tags]      [--recurse-submodules[=&lt;pathspec&gt;]] [--[no-]shallow-submodules]      [--[no-]remote-submodules] [--jobs &lt;n&gt;] [--sparse]      [--filter=&lt;filter&gt;] [--] &lt;repository&gt;      [&lt;directory&gt;]</code></pre><p>克隆一个存储库到一个新创建的目录中，为克隆的存储库中的每个分支创建远程跟踪分支(使用 git branch – remotes 可见) ，并创建和检出从克隆的存储库的当前活动分支中分支出来的初始分支。</p><h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td><strong>-b <name></name></strong> - b &lt; 姓名 &gt;</td><td>不要将新创建的 HEAD 指向克隆存储库的 HEAD 所指向的分支，而是指向 &lt; name &gt; branch。在非裸存储库中，这是要签出的分支。– branch 还可以获取标记，并在结果存储库中的那个提交处分离 HEAD。</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1 Git忽略文件</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/2-1-git-hu-lue-wen-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/2-1-git-hu-lue-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="1-忽略文件"><a href="#1-忽略文件" class="headerlink" title="1.忽略文件"></a>1.忽略文件</h1><p>git会一行行读取文件内容,被忽略的文件不会被上传</p><h2 id="固定文件名-gitignore"><a href="#固定文件名-gitignore" class="headerlink" title="固定文件名: .gitignore"></a>固定文件名: .gitignore</h2><pre><code>*.iml.gradle/locak.properties/build</code></pre><h1 id="2-查看修改内容"><a href="#2-查看修改内容" class="headerlink" title="2.查看修改内容"></a>2.查看修改内容</h1><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> status</code></pre><h1 id="3-查看提交记录"><a href="#3-查看提交记录" class="headerlink" title="3.查看提交记录"></a>3.查看提交记录</h1><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> log</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 Git 设置和配置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/git-xue-xi/1-1-git-she-zhi-he-pei-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/git-xue-xi/1-1-git-she-zhi-he-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>官方文档：<a href="https://git-scm.com/docs" target="_blank" rel="noopener">https://git-scm.com/docs</a></p><pre class=" language-shell"><code class="language-shell">git [--version] [--help] [-C <path>] [-c <name>=<value>]    [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]    [-p|--paginate|-P|--no-pager] [--no-replace-objects] [--bare]    [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]    [--super-prefix=<path>]    <command> [<args>]</code></pre><blockquote><p>Git 是一个快速的、可扩展的、具有异常丰富的命令集的分散式版本控制，它既提供了高级操作，也提供了对内部的完全访问。</p></blockquote><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><pre><code># linux系统sudo apt-get install gityum install git# windos 去官网下载安装包</code></pre><h1 id="配置git"><a href="#配置git" class="headerlink" title="配置git"></a>配置git</h1><ul><li>打开git终端,配置用户名和邮箱,必须</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"kujin"</span><span class="token function">git</span> config --global user.email <span class="token string">"kujin@qq.com"</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Git学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gihub+PicGo+Typora配置</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-tu-pian-di-zhi-cang-ku/gihub-picgo-typora-pei-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-tu-pian-di-zhi-cang-ku/gihub-picgo-typora-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><blockquote><p>免费的图片服务器,用存放图片,方便引用地址</p></blockquote><h1 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h1><blockquote><p>仓库存储代理,全球最大基友社区 ):</p></blockquote><h1 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h1><p>地址: <a href="https://typora.io/" target="_blank" rel="noopener">https://typora.io</a></p><h1 id="PicGo"><a href="#PicGo" class="headerlink" title="PicGo"></a>PicGo</h1><blockquote><p><strong>PicGo: 一个用于快速上传图片并获取图片URL链接的工具</strong></p></blockquote><p>官方中文手册(一定要看): <a href="https://picgo.github.io/PicGo-Doc/zh/guide/config.html" target="_blank" rel="noopener">https://picgo.github.io/PicGo-Doc/zh/guide/config.html</a></p><h2 id="入门配置"><a href="#入门配置" class="headerlink" title="入门配置"></a>入门配置</h2><h3 id="GitHub图床"><a href="#GitHub图床" class="headerlink" title="GitHub图床"></a>GitHub图床</h3><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"repo"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> // 仓库名，格式是username/reponame  <span class="token property">"token"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> // github token  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> // 自定义存储路径，比如img/  <span class="token property">"customUrl"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> // 自定义域名，注意要加http<span class="token operator">:</span>//或者https<span class="token operator">:</span>//  <span class="token property">"branch"</span><span class="token operator">:</span> <span class="token string">""</span> // 分支名，默认是master<span class="token punctuation">}</span></code></pre><p><strong>1.</strong> 首先你得有一个GitHub账号。注册GitHub就不用我多言。</p><p><strong>2.</strong> 新建一个仓库</p><p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/create_new_repo.png" alt="img"></p><p>记下你取的仓库名。</p><p><strong>3.</strong> 生成一个token用于PicGo操作你的仓库：</p><p>访问：<a href="https://github.com/settings/tokens" target="_blank" rel="noopener">https://github.com/settings/tokens</a></p><p>然后点击<code>Generate new token</code>。</p><p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/generate_new_token.png" alt="img"></p><p>把repo的勾打上即可。然后翻到页面最底部，点击<code>Generate token</code>的绿色按钮生成token。</p><p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/20180508210435.png" alt="img"></p><p><strong>注意：</strong>这个token生成后只会显示一次！你要把这个token复制一下存到其他地方以备以后要用。</p><p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/copy_token.png" alt="img"></p><p><strong>4.</strong> 配置PicGo</p><p><strong>注意：</strong>仓库名的格式是<code>用户名/仓库</code>，比如我创建了一个叫做<code>test</code>的仓库，在PicGo里我要设定的仓库名就是<code>Molunerfinn/test</code>。一般我们选择<code>master</code>分支即可。然后记得点击确定以生效，然后可以点击<code>设为默认图床</code>来确保上传的图床是GitHub。</p><p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/setup_github.png" alt="img"></p><p>至此配置完毕，已经可以使用了。当你上传的时候，你会发现你的仓库里也会增加新的图片了：</p><p><img src="https://raw.githubusercontent.com/Molunerfinn/test/master/picgo/success.png" alt="img"></p><h1 id="关于设置代理-不推荐-如果github不行-就用gitee"><a href="#关于设置代理-不推荐-如果github不行-就用gitee" class="headerlink" title="关于设置代理(不推荐,如果github不行,就用gitee)"></a>关于设置代理(不推荐,如果github不行,就用gitee)</h1><blockquote><p><strong>本地使用代理,上传连接失败(PicGo只支持简单的http代理),使用VPN可能会导致失败</strong></p></blockquote><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200807121243683.png" alt="image-20200807121243683"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200807121631.png" alt="image-20200807121326220"></p><h1 id="建议重命名文件"><a href="#建议重命名文件" class="headerlink" title="建议重命名文件"></a>建议重命名文件</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-%E6%96%87%E4%BB%B6%E9%87%8D%E5%91%BD%E5%90%8D.png" alt="image-20200807122409728"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200807122609628.png" alt="image-20200807122609628"></p><h1 id="上传失败总结"><a href="#上传失败总结" class="headerlink" title="上传失败总结"></a>上传失败总结</h1><ul><li>相同文件名重复提交失败,修改名称可提交成功</li><li>PicGo(2.3.0)中的相册无法删除github中的文件</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 简单使用</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-tu-pian-di-zhi-cang-ku/1-1-jian-dan-shi-yong/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-tu-pian-di-zhi-cang-ku/1-1-jian-dan-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h1><blockquote><p>免费的图片服务器,用存放图片,方便引用地址</p></blockquote><h1 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h1><ul><li>GitHub创建一个仓库</li><li>在设置里GitHub获取token</li><li>下载PicGo 设置图床</li></ul><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-%E5%9B%BE%E5%BA%8A%E6%88%AA%E5%9B%BE.png" alt="image-20200802180441861"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1前期搭建</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/jekyll/1-1-qian-qi-da-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/jekyll/1-1-qian-qi-da-jian/</url>
      
        <content type="html"><![CDATA[<blockquote><p>GitHub 上 结合 Jekyll 搭建的博客，Jekyll 是一个简单的博客形态的静态站点生产机器。它有一个模版目录，其中包含原始文本格式的文档，通过一个转换器（如 Markdown）和我们的 Liquid 渲染器转化成一个完整的可发布的静态网站，你可以发布在任何你喜爱的服务器上。Jekyll 也可以运行在 GitHub Page 上，也就是说，你可以使用 GitHub 的服务来搭建你的项目页面、博客或者网站，而且是完全免费的。</p></blockquote><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>这里准备工作做两件事：</p><ol><li><p>在 GitHub 上创建自己的网站仓库并 clone 到本地。</p><p><img src="https://raw.githubusercontent.com/kujin521/imgs/master/img/image-20200805133903694.png" alt="image-20200805133903694"></p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1 hexo与md文件格式的冲突</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/hexo/3-1-hexo-yu-md-wen-jian-ge-shi-de-chong-tu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/hexo/3-1-hexo-yu-md-wen-jian-ge-shi-de-chong-tu/</url>
      
        <content type="html"><![CDATA[<h1 id="将图片地址改为github引用-不然md原生格式无法预览需要标准编写格式"><a href="#将图片地址改为github引用-不然md原生格式无法预览需要标准编写格式" class="headerlink" title="将图片地址改为github引用,不然md原生格式无法预览需要标准编写格式"></a>将图片地址改为github引用,不然md原生格式无法预览需要标准编写格式</h1><pre><code></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1 配置主题</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/hexo/2-1-pei-zhi-zhu-ti/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/hexo/2-1-pei-zhi-zhu-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo-theme-matery"><a href="#hexo-theme-matery" class="headerlink" title="hexo-theme-matery"></a>hexo-theme-matery</h1><blockquote><p>这是一个采用 <code>Material Design</code> 和响应式设计的 Hexo 博客主题。</p></blockquote><p><img src="images/2-1%20%E9%85%8D%E7%BD%AE%E4%B8%BB%E9%A2%98/image-20200801181325409.png" alt="image-20200801181325409"></p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ul><li>简单漂亮，文章内容美观易读</li><li><a href="https://material.io/" target="_blank" rel="noopener">Material Design</a> 设计</li><li>响应式设计，博客在桌面端、平板、手机等设备上均能很好的展现</li><li>首页轮播文章及每天动态切换 <code>Banner</code> 图片</li><li>瀑布流式的博客文章列表（文章无特色图片时会有 <code>24</code> 张漂亮的图片代替）</li><li>时间轴式的归档页</li><li><strong>词云</strong>的标签页和<strong>雷达图</strong>的分类页</li><li>丰富的关于我页面（包括关于我、文章统计图、我的项目、我的技能、相册等）</li><li>可自定义的数据的友情链接页面</li><li>支持文章置顶和文章打赏</li><li>支持 <code>MathJax</code></li><li><code>TOC</code> 目录</li><li>可设置复制文章内容时追加版权信息</li><li>可设置阅读文章时做密码验证</li><li><a href="https://gitalk.github.io/" target="_blank" rel="noopener">Gitalk</a>、<a href="https://imsun.github.io/gitment/" target="_blank" rel="noopener">Gitment</a>、<a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a> 和 <a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a> 评论模块（推荐使用 <code>Gitalk</code>）</li><li>集成了<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">不蒜子统计</a>、谷歌分析（<code>Google Analytics</code>）和文章字数统计等功能</li><li>支持在首页的音乐播放和视频播放功能</li><li>支持<code>emoji</code>表情，用<code>markdown emoji</code>语法书写直接生成对应的能<strong>跳跃</strong>的表情。</li><li>支持 <a href="http://www.daovoice.io/" target="_blank" rel="noopener">DaoVoice</a>、<a href="https://www.tidio.com/" target="_blank" rel="noopener">Tidio</a> 在线聊天功能。</li></ul><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>当你看到这里的时候，应该已经有一个自己的 <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> 博客了。如果还没有的话，不妨使用 Hexo 和 <a href="https://www.appinn.com/markdown/" target="_blank" rel="noopener">Markdown</a> 来写博客和文章。</p><p>点击 <a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master" target="_blank" rel="noopener">这里</a> 下载 <code>master</code> 分支的最新稳定版的代码，解压缩后，将 <code>hexo-theme-matery</code> 的文件夹复制到你 Hexo 的 <code>themes</code> 文件夹中即可。</p><p>当然你也可以在你的 <code>themes</code> 文件夹下使用 <code>Git clone</code> 命令来下载:</p><pre><code>git clone https://github.com/blinkfox/hexo-theme-matery.git</code></pre><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="切换主题"><a href="#切换主题" class="headerlink" title="切换主题"></a>切换主题</h3><p>修改 Hexo 根目录下的 <code>_config.yml</code> 的 <code>theme</code> 的值：<code>theme: hexo-theme-matery</code></p><h4 id="config-yml-文件的其它修改建议"><a href="#config-yml-文件的其它修改建议" class="headerlink" title="_config.yml 文件的其它修改建议:"></a><code>_config.yml</code> 文件的其它修改建议:</h4><ul><li>请修改 <code>_config.yml</code> 的 <code>url</code> 的值为你的网站主 <code>URL</code>（如：<code>http://xxx.github.io</code>）。</li><li>建议修改两个 <code>per_page</code> 的分页条数值为 <code>6</code> 的倍数，如：<code>12</code>、<code>18</code> 等，这样文章列表在各个屏幕下都能较好的显示。</li><li>如果你是中文用户，则建议修改 <code>language</code> 的值为 <code>zh-CN</code>。</li></ul><h3 id="新建分类-categories-页"><a href="#新建分类-categories-页" class="headerlink" title="新建分类 categories 页"></a>新建分类 categories 页</h3><p><code>categories</code> 页是用来展示所有分类的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>categories/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre class=" language-hexo"><code class="language-hexo">hexo new page "categories"</code></pre><p>编辑你刚刚新建的页面文件 <code>/source/categories/index.md</code>，至少需要以下内容：</p><pre><code>---title: categoriesdate: 2018-09-30 17:25:30type: "categories"layout: "categories"---</code></pre><h3 id="新建标签-tags-页"><a href="#新建标签-tags-页" class="headerlink" title="新建标签 tags 页"></a>新建标签 tags 页</h3><p><code>tags</code> 页是用来展示所有标签的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>tags/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "tags"</code></pre><p>编辑你刚刚新建的页面文件 <code>/source/tags/index.md</code>，至少需要以下内容：</p><pre><code>---title: tagsdate: 2018-09-30 18:23:38type: "tags"layout: "tags"---</code></pre><h3 id="新建关于我-about-页"><a href="#新建关于我-about-页" class="headerlink" title="新建关于我 about 页"></a>新建关于我 about 页</h3><p><code>about</code> 页是用来展示<strong>关于我和我的博客</strong>信息的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>about/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "about"</code></pre><p>编辑你刚刚新建的页面文件 <code>/source/about/index.md</code>，至少需要以下内容：</p><pre><code>---title: aboutdate: 2018-09-30 17:25:30type: "about"layout: "about"---</code></pre><h3 id="新建留言板-contact-页（可选的）"><a href="#新建留言板-contact-页（可选的）" class="headerlink" title="新建留言板 contact 页（可选的）"></a>新建留言板 contact 页（可选的）</h3><p><code>contact</code> 页是用来展示<strong>留言板</strong>信息的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>contact/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "contact"</code></pre><p>编辑你刚刚新建的页面文件 <code>/source/contact/index.md</code>，至少需要以下内容：</p><pre><code>---title: contactdate: 2018-09-30 17:25:30type: "contact"layout: "contact"---</code></pre><blockquote><p><strong>注</strong>：本留言板功能依赖于第三方评论系统，请<strong>激活</strong>你的评论系统才有效果。并且在主题的 <code>_config.yml</code> 文件中，第 <code>19</code> 至 <code>21</code> 行的“<strong>菜单</strong>”配置，取消关于留言板的注释即可。</p></blockquote><h3 id="新建友情链接-friends-页（可选的）"><a href="#新建友情链接-friends-页（可选的）" class="headerlink" title="新建友情链接 friends 页（可选的）"></a>新建友情链接 friends 页（可选的）</h3><p><code>friends</code> 页是用来展示<strong>友情链接</strong>信息的页面，如果在你的博客 <code>source</code> 目录下还没有 <code>friends/index.md</code> 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "friends"</code></pre><p>编辑你刚刚新建的页面文件 <code>/source/friends/index.md</code>，至少需要以下内容：</p><pre><code>---title: friendsdate: 2018-12-12 21:25:30type: "friends"layout: "friends"---</code></pre><p>同时，在你的博客 <code>source</code> 目录下新建 <code>_data</code> 目录，在 <code>_data</code> 目录中新建 <code>friends.json</code> 文件，文件内容如下所示：</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"码酱"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"我不是大佬，只是在追寻大佬的脚步"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://luokangyuan.com/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/4027734.jpeg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"闪烁之狐"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"编程界大佬，技术牛，人还特别好，不懂的都可以请教大佬"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://blinkfox.github.io/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/avatar.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ja_rome"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"平凡的脚步也可以走出伟大的行程"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://me.csdn.net/jlh912008548"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"前去学习"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><h3 id="新建-404-页"><a href="#新建-404-页" class="headerlink" title="新建 404 页"></a>新建 404 页</h3><p>如果在你的博客 <code>source</code> 目录下还没有 <code>404.md</code> 文件，那么你就需要新建一个</p><p>编辑你刚刚新建的页面文件 <code>/source/404.md</code>，至少需要以下内容：</p><pre><code>---title: 404date: 2018-09-30 17:25:30type: "404"layout: "404"description: "Oops～，我崩溃了！找不到你想要的页面 :("---</code></pre><h3 id="菜单导航配置"><a href="#菜单导航配置" class="headerlink" title="菜单导航配置"></a>菜单导航配置</h3><h4 id="配置基本菜单导航的名称、路径url和图标icon"><a href="#配置基本菜单导航的名称、路径url和图标icon" class="headerlink" title="配置基本菜单导航的名称、路径url和图标icon."></a>配置基本菜单导航的名称、路径url和图标icon.</h4><p>1.菜单导航名称可以是中文也可以是英文(如：<code>Index</code>或<code>主页</code>) 2.图标icon 可以在<a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome</a> 中查找</p><pre><code>menu:  Index:    url: /    icon: fas fa-home  Tags:    url: /tags    icon: fas fa-tags  Categories:    url: /categories    icon: fas fa-bookmark  Archives:    url: /archives    icon: fas fa-archive  About:    url: /about    icon: fas fa-user-circle  Friends:    url: /friends    icon: fas fa-address-book</code></pre><h4 id="二级菜单配置方法"><a href="#二级菜单配置方法" class="headerlink" title="二级菜单配置方法"></a>二级菜单配置方法</h4><p>如果你需要二级菜单则可以在原基本菜单导航的基础上如下操作<br>1.在需要添加二级菜单的一级菜单下添加<code>children</code>关键字(如:<code>About</code>菜单下添加<code>children</code>)<br>2.在<code>children</code>下创建二级菜单的 名称name,路径url和图标icon.<br>3.注意每个二级菜单模块前要加 <code>-</code>.<br>4.注意缩进格式</p><pre><code>menu:  Index:    url: /    icon: fas fa-home  Tags:    url: /tags    icon: fas fa-tags  Categories:    url: /categories    icon: fas fa-bookmark  Archives:    url: /archives    icon: fas fa-archive  About:    url: /about    icon: fas fa-user-circle-o  Friends:    url: /friends    icon: fas fa-address-book  Medias:    icon: fas fa-list    children:      - name: Musics        url: /musics        icon: fas fa-music      - name: Movies        url: /movies        icon: fas fa-film      - name: Books        url: /books        icon: fas fa-book      - name: Galleries        url: /galleries        icon: fas fa-image</code></pre><p>执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成博客文件，然后就可以在文章中对应位置看到你用<code>emoji</code>语法写的表情了。</p><h3 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h3><p>由于 Hexo 自带的代码高亮主题显示不好看，所以主题中使用到了 <a href="https://github.com/ele828/hexo-prism-plugin" target="_blank" rel="noopener">hexo-prism-plugin</a> 的 Hexo 插件来做代码高亮，安装命令如下：</p><pre><code>npm i -S hexo-prism-plugin</code></pre><p>然后，修改 Hexo 根目录下 <code>_config.yml</code> 文件中 <code>highlight.enable</code> 的值为 <code>false</code>，并新增 <code>prism</code> 插件相关的配置，主要配置如下：</p><pre><code>highlight:  enable: falseprism_plugin:  mode: 'preprocess'    # realtime/preprocess  theme: 'tomorrow'  line_number: false    # default false  custom_css:</code></pre><h3 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h3><p>本主题中还使用到了 <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener">hexo-generator-search</a> 的 Hexo 插件来做内容搜索，安装命令如下：</p><pre><code>npm install hexo-generator-search --save</code></pre><p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p><pre><code>search:  path: search.xml  field: post</code></pre><h3 id="中文链接转拼音（建议安装）"><a href="#中文链接转拼音（建议安装）" class="headerlink" title="中文链接转拼音（建议安装）"></a>中文链接转拼音（建议安装）</h3><p>如果你的文章名称是中文的，那么 Hexo 默认生成的永久链接也会有中文，这样不利于 <code>SEO</code>，且 <code>gitment</code> 评论对中文链接也不支持。我们可以用 <a href="https://github.com/viko16/hexo-permalink-pinyin" target="_blank" rel="noopener">hexo-permalink-pinyin</a> Hexo 插件使在生成文章时生成中文拼音的永久链接。</p><p>安装命令如下：</p><pre><code>npm i hexo-permalink-pinyin --save</code></pre><p>在 Hexo 根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p><pre><code>permalink_pinyin:  enable: true  separator: '-' # default: '-'</code></pre><blockquote><p><strong>注</strong>：除了此插件外，<a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener">hexo-abbrlink</a> 插件也可以生成非中文的链接。</p></blockquote><h3 id="文章字数统计插件（建议安装）"><a href="#文章字数统计插件（建议安装）" class="headerlink" title="文章字数统计插件（建议安装）"></a>文章字数统计插件（建议安装）</h3><p>如果你想要在文章中显示文章字数、阅读时长信息，可以安装 <a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">hexo-wordcount</a>插件。</p><p>安装命令如下：</p><pre><code>npm i --save hexo-wordcount</code></pre><p>然后只需在本主题下的 <code>_config.yml</code> 文件中，将各个文章字数相关的配置激活即可：</p><pre><code>postInfo:  date: true  update: false  wordCount: false # 设置文章字数统计为 true.  totalCount: false # 设置站点文章总字数统计为 true.  min2read: false # 阅读时长.  readCount: false # 阅读次数.</code></pre><h3 id="添加-DaoVoice-在线聊天功能（可选的）"><a href="#添加-DaoVoice-在线聊天功能（可选的）" class="headerlink" title="添加 DaoVoice 在线聊天功能（可选的）"></a>添加 <a href="http://www.daovoice.io/" target="_blank" rel="noopener">DaoVoice</a> 在线聊天功能（可选的）</h3><p>前往 <a href="http://www.daovoice.io/" target="_blank" rel="noopener">DaoVoice</a> 官网注册并且获取 <code>app_id</code>，并将 <code>app_id</code> 填入主题的 <code>_config.yml</code> 文件中。</p><p>显示设置,解决与返回顶显示冲突</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-daovoice.png" alt="image-20200813135725804"></p><h3 id="添加-Tidio-在线聊天功能（可选的）"><a href="#添加-Tidio-在线聊天功能（可选的）" class="headerlink" title="添加 Tidio 在线聊天功能（可选的）"></a>添加 <a href="https://www.tidio.com/" target="_blank" rel="noopener">Tidio</a> 在线聊天功能（可选的）</h3><p>前往 <a href="https://www.tidio.com/" target="_blank" rel="noopener">Tidio</a> 官网注册并且获取 <code>Public Key</code>，并将 <code>Public Key</code> 填入主题的 <code>_config.yml</code> 文件中。</p><h3 id="修改页脚"><a href="#修改页脚" class="headerlink" title="修改页脚"></a>修改页脚</h3><p>页脚信息可能需要做定制化修改，而且它不便于做成配置信息，所以可能需要你自己去再修改和加工。修改的地方在主题文件的 <code>/layout/_partial/footer.ejs</code> 文件中，包括站点、使用的主题、访问量等。</p><h3 id="修改社交链接"><a href="#修改社交链接" class="headerlink" title="修改社交链接"></a>修改社交链接</h3><p>在主题的 <code>_config.yml</code> 文件中，默认支持 <code>QQ</code>、<code>GitHub</code> 和邮箱等的配置，你可以在主题文件的 <code>/layout/_partial/social-link.ejs</code> 文件中，新增、修改你需要的社交链接地址，增加链接可参考如下代码：</p><pre><code>&lt;% if (theme.socialLink.github) { %&gt;    &lt;a href="&lt;%= theme.socialLink.github %&gt;" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"&gt;        &lt;i class="fab fa-github"&gt;&lt;/i&gt;    &lt;/a&gt;&lt;% } %&gt;</code></pre><p>其中，社交图标（如：<code>fa-github</code>）你可以在 <a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome</a> 中搜索找到。以下是常用社交图标的标识，供你参考：</p><ul><li>Facebook: <code>fab fa-facebook</code></li><li>Twitter: <code>fab fa-twitter</code></li><li>Google-plus: <code>fab fa-google-plus</code></li><li>Linkedin: <code>fab fa-linkedin</code></li><li>Tumblr: <code>fab fa-tumblr</code></li><li>Medium: <code>fab fa-medium</code></li><li>Slack: <code>fab fa-slack</code></li><li>Sina Weibo: <code>fab fa-weibo</code></li><li>Wechat: <code>fab fa-weixin</code></li><li>QQ: <code>fab fa-qq</code></li><li>Zhihu: <code>fab fa-zhihu</code></li></ul><blockquote><p><strong>注意</strong>: 本主题中使用的 <code>Font Awesome</code> 版本为 <code>5.11.0</code>。</p></blockquote><h3 id="修改打赏的二维码图片"><a href="#修改打赏的二维码图片" class="headerlink" title="修改打赏的二维码图片"></a>修改打赏的二维码图片</h3><p>在主题文件的 <code>source/medias/reward</code> 文件中，你可以替换成你的的微信和支付宝的打赏二维码图片。</p><h3 id="配置音乐播放器（可选的）"><a href="#配置音乐播放器（可选的）" class="headerlink" title="配置音乐播放器（可选的）"></a>配置音乐播放器（可选的）</h3><p>要支持音乐播放，在主题的 <code>_config.yml</code> 配置文件中激活music配置即可：</p><pre><code># 是否在首页显示音乐music:  enable: true  title:             # 非吸底模式有效    enable: true    show: 听听音乐  server: netease   # require music platform: netease, tencent, kugou, xiami, baidu  type: playlist    # require song, playlist, album, search, artist  id: 503838841     # require song id / playlist id / album id / search keyword  fixed: false      # 开启吸底模式  autoplay: false   # 是否自动播放  theme: '#42b983'  loop: 'all'       # 音频循环播放, 可选值: 'all', 'one', 'none'  order: 'random'   # 音频循环顺序, 可选值: 'list', 'random'  preload: 'auto'   # 预加载，可选值: 'none', 'metadata', 'auto'  volume: 0.7       # 默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效  listFolded: true  # 列表默认折叠</code></pre><blockquote><p><code>server</code>可选<code>netease</code>（网易云音乐），<code>tencent</code>（QQ音乐），<code>kugou</code>（酷狗音乐），<code>xiami</code>（虾米音乐），</p><p><code>baidu</code>（百度音乐）。</p><p><code>type</code>可选<code>song</code>（歌曲），<code>playlist</code>（歌单），<code>album</code>（专辑），<code>search</code>（搜索关键字），<code>artist</code>（歌手）</p><pre><code>id`获取方法示例: 浏览器打开网易云音乐，点击我喜欢的音乐歌单，浏览器地址栏后面会有一串数字，`playlist`的`id</code></pre><p>即为这串数字。</p></blockquote><h2 id="编译部署"><a href="#编译部署" class="headerlink" title="编译部署"></a>编译部署</h2><p>在开始之前，您必须先在 <code>_config.yml</code> 中修改参数</p><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># Deployment</span><span class="token comment" spellcheck="true">## Docs: https://hexo.io/docs/deployment.html</span><span class="token key atrule">deploy</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 自动部署github</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> git  <span class="token key atrule">repository</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/kujin521/Blog.git  <span class="token key atrule">branch</span><span class="token punctuation">:</span> hexo</code></pre><p>使用 Hexo 生成静态文件快速而且简单。</p><pre><code>$ hexo generate</code></pre><h3 id="监视文件变动"><a href="#监视文件变动" class="headerlink" title="监视文件变动"></a>监视文件变动</h3><p>Hexo 能够监视文件变动并立即重新生成静态文件，在生成时会比对文件的 SHA1 checksum，只有变动的文件才会写入。</p><pre><code>$ hexo generate --watch</code></pre><h3 id="完成后部署"><a href="#完成后部署" class="headerlink" title="完成后部署"></a>完成后部署</h3><p>您可执行下列的其中一个命令，让 Hexo 在生成完毕后自动部署网站，两个命令的作用是相同的。</p><pre><code>$ hexo generate --deploy$ hexo deploy --generate</code></pre><blockquote><p>简写</p><p>本地运行测试    </p><p>hexo s</p><p>上面两个命令可以简写为<br>$ hexo g -d<br>$ hexo d -g</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/hexo/1-1-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/zhu-ti/hexo/1-1-jian-jie/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">中文文档</a></p><h1 id="什么是-Hexo？"><a href="#什么是-Hexo？" class="headerlink" title="什么是 Hexo？"></a>什么是 Hexo？</h1><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="noopener">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p></blockquote><h1 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h1><p>安装 Hexo 相当简单，只需要先安装下列应用程序即可：</p><ul><li><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> (Node.js 版本需不低于 10.13，建议使用 Node.js 12.0 及以上版本)</li><li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a></li></ul><h1 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h1><pre><code> npm install -g hexo-cli</code></pre><h1 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h1><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</p><pre><code>$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install</code></pre><p>新建完成后，指定文件夹的目录如下：</p><pre><code>.├── _config.yml├── package.json├── scaffolds├── source|   ├── _drafts|   └── _posts└── themes</code></pre><h3 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h3><p>网站的 <a href="https://hexo.io/zh-cn/docs/configuration" target="_blank" rel="noopener">配置</a> 信息，您可以在此配置大部分的参数。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>入门MkDos</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/mkdocs/ru-men-mkdos/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/mkdocs/ru-men-mkdos/</url>
      
        <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>MkDocs是<strong>一个快速，简单和彻头彻尾的华丽的静态网站生成器</strong>，旨在建设项目文档。文档源文件以 Markdown 格式写入，并配置了单个 YAML 配置文件。首先阅读下面的简介，然后查看用户指南了解更多信息。</p><h3 id="提供伟大的主题"><a href="#提供伟大的主题" class="headerlink" title="提供伟大的主题"></a>提供伟大的主题</h3><p>MkDocs 有一堆<a href="https://www.mkdocs.org/user-guide/styling-your-docs/" target="_blank" rel="noopener">好看</a>的主题。在内置主题之间选择<a href="https://www.mkdocs.org/user-guide/styling-your-docs/#mkdocs" target="_blank" rel="noopener">：mkdocs</a>和<a href="https://www.mkdocs.org/user-guide/styling-your-docs/#readthedocs" target="_blank" rel="noopener">readthedocs，</a>选择<a href="https://github.com/mkdocs/mkdocs/wiki/MkDocs-Themes" target="_blank" rel="noopener">在MkDocs主题维基页面上列出的第三方主题之</a>一，<a href="https://www.mkdocs.org/user-guide/custom-themes/" target="_blank" rel="noopener">或建立自己的</a>。</p><h3 id="易于定制"><a href="#易于定制" class="headerlink" title="易于定制"></a>易于定制</h3><p>通过自定义主题和/或安装一些插件，<a href="https://www.mkdocs.org/user-guide/configuration/#theme" target="_blank" rel="noopener">让项目文档</a>按您想要的方式<a href="https://www.mkdocs.org/user-guide/plugins/" target="_blank" rel="noopener">进行查找</a>。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="使用包管理器安装-前提需要安装python-配置好环境变量"><a href="#使用包管理器安装-前提需要安装python-配置好环境变量" class="headerlink" title="使用包管理器安装(前提需要安装python 配置好环境变量)"></a>使用包管理器安装(前提需要安装python 配置好环境变量)</h3><h4 id="安装-MkDocs"><a href="#安装-MkDocs" class="headerlink" title="安装 MkDocs"></a>安装 MkDocs</h4><p>使用 pip 安装包：<code>mkdocs</code></p><pre><code>pip install mkdocs</code></pre><p>现在，您应该在您的系统上安装该命令。运行以检查一切正常。<code>mkdocs``mkdocs --version</code></p><pre><code>$ mkdocs --versionmkdocs, version 0.15.3</code></pre><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>入门是超级容易。</p><pre><code>mkdocs new my-projectcd my-project</code></pre><p>请花一点时间查看已为你创建的初始项目。</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201004110059.png" alt="The initial MkDocs layout"></p><p>有一个名为 的配置文件，以及一个名为包含文档源文件的文件夹。现在，该文件夹仅包含一个名为 的文档页。<code>mkdocs.yml``docs``docs``index.md</code></p><p>MkDocs 附带一个内置的开发服务器，允许您在操作文档时预览文档。请确保您与配置文件在同一个目录中，然后通过运行命令启动服务器：<code>mkdocs.yml``mkdocs serve</code></p><pre><code>$ mkdocs serveINFO    -  Building documentation...INFO    -  Cleaning site directory[I 160402 15:50:43 server:271] Serving on http://127.0.0.1:8000[I 160402 15:50:43 handlers:58] Start watching changes[I 160402 15:50:43 handlers:60] Start detecting changes</code></pre><p>在浏览器中打开，你会看到默认主页显示：<code>http://127.0.0.1:8000/</code></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20201004110129.png" alt="The MkDocs live server"></p><h2 id="修改配置文件mkdocs-yml"><a href="#修改配置文件mkdocs-yml" class="headerlink" title="修改配置文件mkdocs.yml"></a>修改配置文件mkdocs.yml</h2><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">site_name</span><span class="token punctuation">:</span> 这是bolg 的标题<span class="token comment" spellcheck="true"># 导航</span><span class="token key atrule">nav</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">Home</span><span class="token punctuation">:</span> index.md    <span class="token comment" spellcheck="true"># 主页</span>    <span class="token punctuation">-</span> <span class="token key atrule">About</span><span class="token punctuation">:</span> about.md    <span class="token comment" spellcheck="true"># 关于</span><span class="token comment" spellcheck="true"># 主题</span><span class="token key atrule">theme</span><span class="token punctuation">:</span> readthedocs    </code></pre><p>MkDocs 使用<a href="https://www.mkdocs.org/img/favicon.ico" target="_blank" rel="noopener">MkDocs 图标</a>。若要使用其他图标，请创建一个子目录，然后将自定义文件复制到该目录。MkDocs 将自动检测并用作您的图标。<code>img``docs_dir``favicon.ico</code></p><h2 id="构建网站"><a href="#构建网站" class="headerlink" title="构建网站"></a>构建网站</h2><p>看起来不错您已准备好部署文档的第一个通道。首先生成文档：<code>MkLorum</code></p><pre><code>mkdocs build</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/github-pages/1-1-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/github-pages/1-1-jian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>地址:<a href="https://pages.github.com/" target="_blank" rel="noopener">https://pages.github.com/</a></p><p><img src="https://raw.githubusercontent.com/kujin521/test.github.io/master/img/image-20200804171657592.png" alt="image-20200804171657592"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-2 使用教程</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/gitbook-xue-xi/1-2-shi-yong-jiao-cheng/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/gitbook-xue-xi/1-2-shi-yong-jiao-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="GitBook-简介"><a href="#GitBook-简介" class="headerlink" title="GitBook 简介"></a>GitBook 简介</h2><p><a href="https://www.gitbook.com/" target="_blank" rel="noopener">GitBook 官网</a></p><p><a href="https://github.com/GitbookIO/gitbook" target="_blank" rel="noopener">GitBook 文档</a></p><h2 id="GitBook-准备工作"><a href="#GitBook-准备工作" class="headerlink" title="GitBook 准备工作"></a>GitBook 准备工作</h2><h3 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h3><p>GitBook 是一个基于 Node.js 的命令行工具，下载安装 <a href="https://nodejs.org/en" target="_blank" rel="noopener">Node.js</a>，安装完成之后，你可以使用下面的命令来检验是否安装成功。</p><pre><code>$ node -vv7.7.1</code></pre><h3 id="安装-GitBook"><a href="#安装-GitBook" class="headerlink" title="安装 GitBook"></a>安装 GitBook</h3><p>输入下面的命令来安装 GitBook。</p><pre><code>$ npm install gitbook-cli -g</code></pre><p>安装完成之后，你可以使用下面的命令来检验是否安装成功。</p><pre><code>$ gitbook -VCLI version: 2.3.2GitBook version: 3.2.3</code></pre><p>更多详情请参照 <a href="https://github.com/GitbookIO/gitbook/blob/master/docs/setup.md" target="_blank" rel="noopener">GitBook 安装文档</a> 来安装 GitBook。</p><h3 id="安装-GitBook-编辑器"><a href="#安装-GitBook-编辑器" class="headerlink" title="安装 GitBook 编辑器"></a>安装 GitBook 编辑器</h3><p>去 <a href="https://www.gitbook.com/" target="_blank" rel="noopener">GitBook 官网</a> 下载 GitBook 编辑器；如果是 Mac 用户且安装过 <code>brew cask</code> 的话可以使用 <code>brew cask install gitbook-editor</code> 命令行来安装 GitBook 编辑器。</p><h2 id="先睹为快"><a href="#先睹为快" class="headerlink" title="先睹为快"></a>先睹为快</h2><p>GitBook 准备工作做好之后，我们进入一个你要写书的目录，输入如下命令。</p><pre><code>$ gitbook initwarn: no summary file in this bookinfo: create README.mdinfo: create SUMMARY.mdinfo: initialization is finished</code></pre><p>可以看到他会创建 README.md 和 SUMMARY.md 这两个文件，README.md 应该不陌生，就是说明文档，而 SUMMARY.md 其实就是书的章节目录，其默认内容如下所示：</p><pre><code># Summary* [Introduction](README.md)</code></pre><p>接下来，我们输入 <code>$ gitbook serve</code> 命令，然后在浏览器地址栏中输入 <code>http://localhost:4000</code> 便可预览书籍。</p><p>效果如下所示：</p><p><img src="https://blankj.com/gitbook/gitbook/README/default_book.png" alt="img"></p><p>运行该命令后会在书籍的文件夹中生成一个 <code>_book</code> 文件夹, 里面的内容即为生成的 html 文件，我们可以使用下面命令来生成网页而不开启服务器。</p><pre><code>gitbook build</code></pre><p>下面我们来详细介绍下 GitBook 目录结构及相关文件。</p><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><p>GitBook 基本的目录结构如下所示：</p><pre><code>.├── book.json├── README.md├── SUMMARY.md├── chapter-1/|   ├── README.md|   └── something.md└── chapter-2/    ├── README.md    └── something.md</code></pre><p>下面我们主要来讲讲 book.json 和 SUMMARY.md 文件。</p><h3 id="book-json"><a href="#book-json" class="headerlink" title="book.json"></a>book.json</h3><p>该文件主要用来存放配置信息，我先放出我的配置文件。</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Blankj's Glory"</span><span class="token punctuation">,</span>    <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Blankj"</span><span class="token punctuation">,</span>    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"select * from learn"</span><span class="token punctuation">,</span>    <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"zh-hans"</span><span class="token punctuation">,</span>    <span class="token property">"gitbook"</span><span class="token operator">:</span> <span class="token string">"3.2.3"</span><span class="token punctuation">,</span>    <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"website"</span><span class="token operator">:</span> <span class="token string">"/styles/website.css"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"structure"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"readme"</span><span class="token operator">:</span> <span class="token string">"README.md"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"sidebar"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"我的狗窝"</span><span class="token operator">:</span> <span class="token string">"https://blankj.com"</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"-sharing"</span><span class="token punctuation">,</span>        <span class="token string">"splitter"</span><span class="token punctuation">,</span>        <span class="token string">"expandable-chapters-small"</span><span class="token punctuation">,</span>        <span class="token string">"anchors"</span><span class="token punctuation">,</span>        <span class="token string">"github"</span><span class="token punctuation">,</span>        <span class="token string">"github-buttons"</span><span class="token punctuation">,</span>        <span class="token string">"donate"</span><span class="token punctuation">,</span>        <span class="token string">"sharing-plus"</span><span class="token punctuation">,</span>        <span class="token string">"anchor-navigation-ex"</span><span class="token punctuation">,</span>        <span class="token string">"favicon"</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token property">"pluginsConfig"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"github"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/Blankj"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"github-buttons"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"buttons"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>                <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"Blankj"</span><span class="token punctuation">,</span>                <span class="token property">"repo"</span><span class="token operator">:</span> <span class="token string">"glory"</span><span class="token punctuation">,</span>                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"star"</span><span class="token punctuation">,</span>                <span class="token property">"size"</span><span class="token operator">:</span> <span class="token string">"small"</span><span class="token punctuation">,</span>                <span class="token property">"count"</span><span class="token operator">:</span> <span class="token boolean">true</span>                <span class="token punctuation">}</span>            <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"donate"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alipay"</span><span class="token operator">:</span> <span class="token string">"https://blankj.com/gitbook/source/images/donate.png"</span><span class="token punctuation">,</span>            <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>            <span class="token property">"button"</span><span class="token operator">:</span> <span class="token string">"赞赏"</span><span class="token punctuation">,</span>            <span class="token property">"alipayText"</span><span class="token operator">:</span> <span class="token string">" "</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"sharing"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"douban"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"facebook"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"google"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"hatenaBookmark"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"instapaper"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"line"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"linkedin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"messenger"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"pocket"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"qq"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"qzone"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"stumbleupon"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"twitter"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"viber"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"vk"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"weibo"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"whatsapp"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"all"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"google"</span><span class="token punctuation">,</span> <span class="token string">"facebook"</span><span class="token punctuation">,</span> <span class="token string">"weibo"</span><span class="token punctuation">,</span> <span class="token string">"twitter"</span><span class="token punctuation">,</span>                <span class="token string">"qq"</span><span class="token punctuation">,</span> <span class="token string">"qzone"</span><span class="token punctuation">,</span> <span class="token string">"linkedin"</span><span class="token punctuation">,</span> <span class="token string">"pocket"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"anchor-navigation-ex"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"showLevel"</span><span class="token operator">:</span> <span class="token boolean">false</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"favicon"</span><span class="token operator">:</span><span class="token punctuation">{</span>            <span class="token property">"shortcut"</span><span class="token operator">:</span> <span class="token string">"./source/images/favicon-32x32.webp"</span><span class="token punctuation">,</span>            <span class="token property">"bookmark"</span><span class="token operator">:</span> <span class="token string">"./source/images/favicon-32x32.webp"</span><span class="token punctuation">,</span>            <span class="token property">"appleTouch"</span><span class="token operator">:</span> <span class="token string">"./source/images/apple-touch-icon.webp"</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>相信很多节点自己也能猜到是什么意思，我还是简单介绍下吧。</p><h4 id="title"><a href="#title" class="headerlink" title="title"></a>title</h4><p>本书标题</p><h4 id="author"><a href="#author" class="headerlink" title="author"></a>author</h4><p>本书作者</p><h4 id="description"><a href="#description" class="headerlink" title="description"></a>description</h4><p>本书描述</p><h4 id="language"><a href="#language" class="headerlink" title="language"></a>language</h4><p>本书语言，中文设置 “zh-hans” 即可</p><h4 id="gitbook"><a href="#gitbook" class="headerlink" title="gitbook"></a>gitbook</h4><p>指定使用的 GitBook 版本</p><h4 id="styles"><a href="#styles" class="headerlink" title="styles"></a>styles</h4><p>自定义页面样式</p><h4 id="structure"><a href="#structure" class="headerlink" title="structure"></a>structure</h4><p>指定 Readme、Summary、Glossary 和 Languages 对应的文件名</p><h4 id="links"><a href="#links" class="headerlink" title="links"></a>links</h4><p>在左侧导航栏添加链接信息</p><h4 id="plugins"><a href="#plugins" class="headerlink" title="plugins"></a>plugins</h4><p>配置使用的插件</p><h4 id="pluginsConfig"><a href="#pluginsConfig" class="headerlink" title="pluginsConfig"></a>pluginsConfig</h4><p>配置插件的属性</p><h3 id="SUMMARY-md"><a href="#SUMMARY-md" class="headerlink" title="SUMMARY.md"></a>SUMMARY.md</h3><p>这个文件主要决定 GitBook 的章节目录，它通过 Markdown 中的列表语法来表示文件的父子关系，下面是一个简单的示例：</p><pre><code># Summary* [Introduction](README.md)* [Part I](part1/README.md)    * [Writing is nice](part1/writing.md)    * [GitBook is nice](part1/gitbook.md)* [Part II](part2/README.md)    * [We love feedback](part2/feedback_please.md)    * [Better tools for authors](part2/better_tools.md)</code></pre><p>这个配置对应的目录结构如下所示:</p><p><img src="https://blankj.com/gitbook/gitbook/README/summary.png" alt="img"></p><p>我们通过使用 <code>标题</code> 或者 <code>水平分割线</code> 将 GitBook 分为几个不同的部分，如下所示：</p><pre><code># Summary### Part I* [Introduction](README.md)* [Writing is nice](part1/writing.md)* [GitBook is nice](part1/gitbook.md)### Part II* [We love feedback](part2/feedback_please.md)* [Better tools for authors](part2/better_tools.md)---* [Last part without title](part3/title.md)</code></pre><p>这个配置对应的目录结构如下所示:</p><p><img src="https://blankj.com/gitbook/gitbook/README/summary_part.png" alt="img"></p><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>GitBook 有 <a href="https://plugins.gitbook.com/" target="_blank" rel="noopener">插件官网</a>，默认带有 5 个插件，highlight、search、sharing、font-settings、livereload，如果要去除自带的插件， 可以在插件名称前面加 <code>-</code>，比如：</p><pre><code>"plugins": [    "-search"]</code></pre><p>如果要配置使用的插件可以在 book.json 文件中加入即可，比如我们添加 <a href="https://plugins.gitbook.com/plugin/github" target="_blank" rel="noopener">plugin-github</a>，我们在 book.json 中加入配置如下即可：</p><pre><code>{    "plugins": [ "github" ],    "pluginsConfig": {        "github": {            "url": "https://github.com/your/repo"        }    }}</code></pre><p>然后在终端输入 <code>gitbook install ./</code> 即可。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/gitbook-xue-xi/1-1-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/gitbook-xue-xi/1-1-jian-jie/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-2 批量修改md文件</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/2-2-pi-liang-xiu-gai-md-wen-jian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/2-2-pi-liang-xiu-gai-md-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>​        </p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1 博客文件开头模板</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/2-1-bo-ke-wen-jian-kai-tou-mo-ban/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/2-1-bo-ke-wen-jian-kai-tou-mo-ban/</url>
      
        <content type="html"><![CDATA[<pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> Untitled <span class="token comment" spellcheck="true"># 标题=文件名</span><span class="token key atrule">auther</span><span class="token punctuation">:</span> ku jin <span class="token comment" spellcheck="true"># 作者</span><span class="token key atrule">categories</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># 分类=根文件夹名</span> <span class="token punctuation">-</span> GitHub学习<span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># 标签=目标文件夹</span> <span class="token punctuation">-</span> Untitled <span class="token punctuation">---</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/1-1-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/chuang-jian-ge-ren-bo-ke/1-1-jian-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="github-pages-Hexo-创建个人博客"><a href="#github-pages-Hexo-创建个人博客" class="headerlink" title="github pages + Hexo 创建个人博客"></a>github pages + Hexo 创建个人博客</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>连接git</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/github-xiang-guan-zhi-shi/lian-jie-git/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/github-xiang-guan-zhi-shi/lian-jie-git/</url>
      
        <content type="html"><![CDATA[<h1 id="Git-远程仓库-Github"><a href="#Git-远程仓库-Github" class="headerlink" title="Git 远程仓库(Github)"></a>Git 远程仓库(Github)</h1><p>Git 并不像 SVN 那样有个中心服务器。</p><p>目前我们使用到的 Git 命令都是在本地执行，如果你想通过 Git 分享你的代码或者与其他开发人员合作。 你就需要将数据放到一台其他开发人员能够连接的服务器上。</p><p>本例使用了 Github 作为远程仓库，你可以先阅读我们的 <a href="https://www.runoob.com/w3cnote/git-guide.html" target="_blank" rel="noopener">Github 简明教程。</a></p><hr><h2 id="添加远程库"><a href="#添加远程库" class="headerlink" title="添加远程库"></a>添加远程库</h2><p>要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用,命令格式如下：</p><pre><code>git remote add [shortname] [url]</code></pre><p>本例以 Github 为例作为远程仓库，如果你没有 Github 可以在官网 <a href="https://github.com/%E6%B3%A8%E5%86%8C%E3%80%82" target="_blank" rel="noopener">https://github.com/注册。</a></p><p>由于你的本地 Git 仓库和 GitHub 仓库之间的传输是通过SSH加密的，所以我们需要配置验证信息：</p><p>使用以下命令生成 SSH Key：</p><pre><code>$ ssh-keygen -t rsa -C "youremail@example.com"</code></pre><p>后面的 <strong><a href="mailto:your_email@youremail.com">your_email@youremail.com</a></strong> 改为你在 Github 上注册的邮箱，之后会要求确认路径和输入密码，我们这使用默认的一路回车就行。成功的话会在 ~/ 下生成 .ssh 文件夹，进去，打开 <strong>id_rsa.pub</strong>，复制里面的 <strong>key</strong>。</p><p>回到 github 上，进入 Account =&gt; Settings（账户配置）。</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/48840BF0-992F-4CCC-A388-15CB74819D88.jpg" alt="img"></p><p>左边选择 <strong>SSH and GPG keys</strong>，然后点击 <strong>New SSH key</strong> 按钮,title 设置标题，可以随便填，粘贴在你电脑上生成的 key。</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/106AD534-A38A-47F3-88A3-B7BE3F2FEEF1.jpg" alt="img"></p><p>添加成功后界面如下所示</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/EC8F8872-091A-4CAB-90F2-616F34F350A9.jpg" alt="img"></p><p>为了验证是否成功，输入以下命令：</p><pre><code>$ ssh -T git@github.comHi tianqixin! You've successfully authenticated, but GitHub does not provide shell access.</code></pre><p>以下命令说明我们已成功连上 Github。</p><p>之后登录后点击” New repository “ 如下图所示：</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/github1.jpg" alt="img"></p><p>之后在在Repository name 填入 runoob-git-test(远程仓库名) ，其他保持默认设置，点击”Create repository”按钮，就成功地创建了一个新的Git仓库：</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/299CF000-7B6E-4BEC-B8C2-D9AEB053307B.jpg" alt="img"></p><p>创建成功后，显示如下信息：</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/1BCB4379-1A25-4C77-BB82-92B3E7185435.jpg" alt="img"></p><p>以上信息告诉我们可以从这个仓库克隆出新的仓库，也可以把本地仓库的内容推送到GitHub仓库。</p><p>现在，我们根据 GitHub 的提示，在本地的仓库下运行命令：</p><pre><code>$ mkdir runoob-git-test                     # 创建测试目录$ cd runoob-git-test/                       # 进入测试目录$ echo "# 菜鸟教程 Git 测试" &gt;&gt; README.md     # 创建 README.md 文件并写入内容$ ls                                        # 查看目录下的文件README$ git init                                  # 初始化$ git add README.md                         # 添加文件$ git commit -m "添加 README.md 文件"        # 提交并备注信息[master (root-commit) 0205aab] 添加 README.md 文件 1 file changed, 1 insertion(+) create mode 100644 README.md# 提交到 Github$ git remote add origin git@github.com:tianqixin/runoob-git-test.git$ git push -u origin master</code></pre><p>以下命令请根据你在Github成功创建新仓库的地方复制，而不是根据我提供的命令，因为我们的Github用户名不一样，仓库名也不一样。</p><p>接下来我们返回 Github 创建的仓库，就可以看到文件已上传到 Github上：</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/53CA927D-F36F-4A00-AFB2-5EAED05B535E.jpg" alt="img"></p><hr><h2 id="查看当前的远程库"><a href="#查看当前的远程库" class="headerlink" title="查看当前的远程库"></a>查看当前的远程库</h2><p>要查看当前配置有哪些远程仓库，可以用命令：</p><pre><code>git remote</code></pre><h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><pre><code>$ git remoteorigin$ git remote -vorigin    git@github.com:tianqixin/runoob-git-test.git (fetch)origin    git@github.com:tianqixin/runoob-git-test.git (push)</code></pre><p>执行时加上 -v 参数，你还可以看到每个别名的实际链接地址。</p><hr><h2 id="提取远程仓库"><a href="#提取远程仓库" class="headerlink" title="提取远程仓库"></a>提取远程仓库</h2><p>Git 有两个命令用来提取远程仓库的更新。</p><p>1、从远程仓库下载新分支与数据：</p><pre><code>git fetch</code></pre><p>该命令执行完后需要执行git merge 远程分支到你所在的分支。</p><p>2、从远端仓库提取数据并尝试合并到当前分支：</p><pre><code>git merge</code></pre><p>该命令就是在执行 git fetch 之后紧接着执行 git merge 远程分支到你所在的任意分支。</p><p>假设你配置好了一个远程仓库，并且你想要提取更新的数据，你可以首先执行 <strong>git fetch [alias]</strong> 告诉 Git 去获取它有你没有的数据，然后你可以执行 <strong>git merge [alias]/[branch]</strong> 以将服务器上的任何更新（假设有人这时候推送到服务器了）合并到你的当前分支。</p><p>接下来我们在 Github 上点击” README.md” 并在线修改它:</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/C5A6670F-202D-4F2C-8A63-07CEA37BB67A.jpg" alt="img"></p><p>然后我们在本地更新修改。</p><pre><code>$ git fetch originremote: Counting objects: 3, done.remote: Compressing objects: 100% (2/2), done.remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0Unpacking objects: 100% (3/3), done.From github.com:tianqixin/runoob-git-test   0205aab..febd8ed  master     -&gt; origin/master</code></pre><p>以上信息”0205aab..febd8ed master -&gt; origin/master” 说明 master 分支已被更新，我们可以使用以下命令将更新同步到本地：</p><pre><code>$ git merge origin/masterUpdating 0205aab..febd8edFast-forward README.md | 1 + 1 file changed, 1 insertion(+)</code></pre><p>查看 README.md 文件内容：</p><pre><code>$ cat README.md # 菜鸟教程 Git 测试## 第一次修改内容</code></pre><hr><h2 id="推送到远程仓库"><a href="#推送到远程仓库" class="headerlink" title="推送到远程仓库"></a>推送到远程仓库</h2><p>推送你的新分支与数据到某个远端仓库命令:</p><pre><code>git push [alias] [branch]</code></pre><p>以上命令将你的 [branch] 分支推送成为 [alias] 远程仓库上的 [branch] 分支，实例如下。</p><pre><code>$ touch runoob-test.txt      # 添加文件$ git add runoob-test.txt $ git commit -m "添加到远程"master 69e702d] 添加到远程 1 file changed, 0 insertions(+), 0 deletions(-) create mode 100644 runoob-test.txt$ git push origin master    # 推送到 Github</code></pre><p>重新回到我们的 Github 仓库，可以看到文件已经提交上来了：</p><p><img src="https://www.runoob.com/wp-content/uploads/2015/03/79A84530-7DC0-4D25-9F83-8776433A4C32.jpg" alt="img"></p><hr><h2 id="删除远程仓库"><a href="#删除远程仓库" class="headerlink" title="删除远程仓库"></a>删除远程仓库</h2><p>删除远程仓库你可以使用命令：</p><pre><code>git remote rm [别名]</code></pre><h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><pre><code>$ git remote -vorigin    git@github.com:tianqixin/runoob-git-test.git (fetch)origin    git@github.com:tianqixin/runoob-git-test.git (push)# 添加仓库 origin2$ git remote add origin2 git@github.com:tianqixin/runoob-git-test.git$ git remote -vorigin    git@github.com:tianqixin/runoob-git-test.git (fetch)origin    git@github.com:tianqixin/runoob-git-test.git (push)origin2    git@github.com:tianqixin/runoob-git-test.git (fetch)origin2    git@github.com:tianqixin/runoob-git-test.git (push)# 删除仓库 origin2$ git remote rm origin2$ git remote -vorigin    git@github.com:tianqixin/runoob-git-test.git (fetch)origin    git@github.com:tianqixin/runoob-git-test.git (push)</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在ghithub上搜索信息</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/github-xiang-guan-zhi-shi/zai-ghithub-shang-sou-suo-xin-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/github-xiang-guan-zhi-shi/zai-ghithub-shang-sou-suo-xin-xi/</url>
      
        <content type="html"><![CDATA[<p>官方文档: <a href="https://docs.github.com/cn/github/searching-for-information-on-github" target="_blank" rel="noopener">https://docs.github.com/cn/github/searching-for-information-on-github</a></p><p>了解语法: <a href="https://docs.github.com/cn/github/searching-for-information-on-github/understanding-the-search-syntax" target="_blank" rel="noopener">https://docs.github.com/cn/github/searching-for-information-on-github/understanding-the-search-syntax</a></p><p><strong><a href="https://github.com/search?utf8=%E2%9C%93&amp;q=cats+stars:%3E1000&amp;type=Repositories" target="_blank" rel="noopener"> cats stars:&gt;1000</a></strong> 匹配含有 “cats” 字样、星标超过 1000 个的仓库。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github入门</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/github-xue-xi/github-xiang-guan-zhi-shi/github-ru-men/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/github-xue-xi/github-xiang-guan-zhi-shi/github-ru-men/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是Github"><a href="#什么是Github" class="headerlink" title="什么是Github?"></a>什么是Github?</h2><p>官方帮助文档: <a href="https://docs.github.com/cn/github" target="_blank" rel="noopener">https://docs.github.com/cn/github</a></p><p>通过用户帐户的 GitHub Free，可与无限的协作者合作处理功能完全的无限公共仓库，或者是功能有限的无限私有仓库，</p><h2 id="怎么用Github"><a href="#怎么用Github" class="headerlink" title="怎么用Github?"></a>怎么用Github?</h2><h3 id="设置git"><a href="#设置git" class="headerlink" title="设置git"></a>设置git</h3><p>下载安装git</p><ol><li><p>打开 Git Bash。</p></li><li><p>设置 Git 用户名和邮箱：</p><pre class=" language-shell"><code class="language-shell">$ git config --global user.name "Mona Lisa"$ git config --global user.email "email@example.com"</code></pre></li></ol><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p><a href="https://docs.github.com/cn/github/getting-started-with-github/create-a-repo" target="_blank" rel="noopener">https://docs.github.com/cn/github/getting-started-with-github/create-a-repo</a></p><h1 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> GitHub学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/docker-xue-xi/docker-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/docker-xue-xi/docker-jian-jie/</url>
      
        <content type="html"><![CDATA[<h3 id="1-1-什么是容器"><a href="#1-1-什么是容器" class="headerlink" title="1.1 什么是容器?"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_11-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%B9%E5%99%A8" target="_blank" rel="noopener">1.1 什么是容器?</a></h3><p><strong>一句话概括容器：容器就是将软件打包成标准化单元，以用于开发、交付和部署。</strong></p><ul><li><strong>容器镜像是轻量的、可执行的独立软件包</strong> ，包含软件运行所需的所有内容：代码、运行时环境、系统工具、系统库和设置。</li><li><strong>容器化软件适用于基于 Linux 和 Windows 的应用，在任何环境中都能够始终如一地运行。</strong></li><li><strong>容器赋予了软件独立性</strong>　，使其免受外在环境差异（例如，开发和预演环境的差异）的影响，从而有助于减少团队间在相同基础设施上运行不同软件时的冲突。</li></ul><h3 id="为什么要用-Docker"><a href="#为什么要用-Docker" class="headerlink" title="为什么要用 Docker ?"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_24-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8-docker-" target="_blank" rel="noopener">为什么要用 Docker ?</a></h3><ul><li><strong>Docker 的镜像提供了除内核外完整的运行时环境，确保了应用运行环境一致性，从而不会再出现 “这段代码在我机器上没问题啊” 这类问题；——一致的运行环境</strong></li><li><strong>可以做到秒级、甚至毫秒级的启动时间。大大的节约了开发、测试、部署的时间。——更快速的启动时间</strong></li><li><strong>避免公用的服务器，资源会容易受到其他用户的影响。——隔离性</strong></li><li><strong>善于处理集中爆发的服务器使用压力；——弹性伸缩，快速扩展</strong></li><li><strong>可以很轻易的将在一个平台上运行的应用，迁移到另一个平台上，而不用担心运行环境的变化导致应用无法正常运行的情况。——迁移方便</strong></li><li><strong>使用 Docker 可以通过定制应用镜像来实现持续集成、持续交付、部署。——持续交付和部署</strong></li></ul><h2 id="Docker-基本概念"><a href="#Docker-基本概念" class="headerlink" title="Docker 基本概念"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=%E5%9B%9B-docker-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5" target="_blank" rel="noopener">Docker 基本概念</a></h2><p><strong>Docker 中有非常重要的三个基本概念，理解了这三个概念，就理解了 Docker 的整个生命周期。</strong></p><ul><li><strong>镜像（Image）</strong><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_41-%E9%95%9C%E5%83%8Fimage%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener">一个特殊的文件系统</a></li><li><strong>容器（Container）</strong><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_42-%E5%AE%B9%E5%99%A8container%E9%95%9C%E5%83%8F%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%AE%9E%E4%BD%93" target="_blank" rel="noopener">镜像运行时的实体</a></li><li><strong>仓库（Repository）</strong><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_43-%E4%BB%93%E5%BA%93repository%E9%9B%86%E4%B8%AD%E5%AD%98%E6%94%BE%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6%E7%9A%84%E5%9C%B0%E6%96%B9" target="_blank" rel="noopener">集中存放镜像文件的地方</a></li></ul><h2 id="五-常见命令"><a href="#五-常见命令" class="headerlink" title="五 常见命令"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=%E4%BA%94-%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4" target="_blank" rel="noopener">五 常见命令</a></h2><h3 id="5-1-基本命令"><a href="#5-1-基本命令" class="headerlink" title="5.1 基本命令"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_51-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4" target="_blank" rel="noopener">5.1 基本命令</a></h3><pre class=" language-bash"><code class="language-bash">docker version <span class="token comment" spellcheck="true"># 查看docker版本</span>docker images <span class="token comment" spellcheck="true"># 查看所有已下载镜像，等价于：docker image ls 命令</span>docker container <span class="token function">ls</span> <span class="token comment" spellcheck="true">#    查看所有容器</span>docker <span class="token function">ps</span> <span class="token comment" spellcheck="true">#查看正在运行的容器</span>docker image prune <span class="token comment" spellcheck="true"># 清理临时的、没有被使用的镜像文件。-a, --all: 删除所有没有用的镜像，而不仅仅是临时文件；</span></code></pre><h3 id="5-2-拉取镜像"><a href="#5-2-拉取镜像" class="headerlink" title="5.2 拉取镜像"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_52-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F" target="_blank" rel="noopener">5.2 拉取镜像</a></h3><pre class=" language-bash"><code class="language-bash">docker search mysql <span class="token comment" spellcheck="true"># 查看mysql相关镜像</span>docker pull mysql:5.7 <span class="token comment" spellcheck="true"># 拉取mysql镜像</span>docker image <span class="token function">ls</span> <span class="token comment" spellcheck="true"># 查看所有已下载镜像Copy to clipboardErrorCopied</span></code></pre><h3 id="5-3-删除镜像"><a href="#5-3-删除镜像" class="headerlink" title="5.3 删除镜像"></a><a href="https://snailclimb.gitee.io/javaguide/#/docs/tools/Docker?id=_53-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F" target="_blank" rel="noopener">5.3 删除镜像</a></h3><p>比如我们要删除我们下载的 mysql 镜像。</p><p>通过 <code>docker rmi [image]</code> （等价于<code>docker image rm [image]</code>）删除镜像之前首先要确保这个镜像没有被容器引用（可以通过标签名称或者镜像 ID删除）。通过我们前面讲的<code> docker ps</code>命令即可查看。</p><pre class=" language-shell"><code class="language-shell">➜  ~ docker psCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                               NAMESc4cd691d9f80        mysql:5.7           "docker-entrypoint.s…"   7 weeks ago         Up 12 days          0.0.0.0:3306->3306/tcp, 33060/tcp   mysqlCopy to clipboardErrorCopied</code></pre><p>可以看到 mysql 正在被 id 为 c4cd691d9f80 的容器引用，我们需要首先通过 <code>docker stop c4cd691d9f80</code> 或者 <code>docker stop mysql</code>暂停这个容器。</p><p>然后查看 mysql 镜像的 id</p><pre class=" language-shell"><code class="language-shell">➜  ~ docker imagesREPOSITORY              TAG                 IMAGE ID            CREATED             SIZEmysql                   5.7                 f6509bac4980        3 months ago        373MBCopy to clipboardErrorCopied</code></pre><p>通过 IMAGE ID 或者 REPOSITORY 名字即可删除</p><pre class=" language-shell"><code class="language-shell">docker rmi f6509bac4980 #  或者 docker rmim mysql </code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Docker学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-2-常用操作</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/docker-xue-xi/1-2-chang-yong-cao-zuo/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/docker-xue-xi/1-2-chang-yong-cao-zuo/</url>
      
        <content type="html"><![CDATA[<h2 id="启动docker"><a href="#启动docker" class="headerlink" title="启动docker"></a>启动docker</h2><h2 id="查看容器"><a href="#查看容器" class="headerlink" title="查看容器"></a>查看容器</h2><h6 id="查看当前运行的容器"><a href="#查看当前运行的容器" class="headerlink" title="查看当前运行的容器"></a>查看当前运行的容器</h6><pre class=" language-shell"><code class="language-shell">docker ps</code></pre><h6 id="查看所有容器"><a href="#查看所有容器" class="headerlink" title="查看所有容器"></a>查看所有容器</h6><pre class=" language-dockerfile"><code class="language-dockerfile">docker ps -a</code></pre><p>在查看容器时，涉及到几个查看参数，含义分别如下：</p><ul><li>CONTAINER ID:CONTAINER ID是指容器的id，是一个唯一标识符,这是一个64位的十六进制整数，在不会混淆的情况下可以只采用id的前几位进行标识一个容器。</li><li>IMAGE:IMAGE表示创建容器时使用的镜像。</li><li>COMMAND:COMMAND表示容器最后运行的命令。</li><li>CREATED:创建容器的时间。</li><li>STATUS:容器的状态，这里可能显示一个容器启动时间，也能显示容器关闭时间。具体显示哪个要看容器当前的状态。</li><li>PORTS:容器对外开放的端口。</li><li>NAMES:容器的名字，如果不设置，会有一个默认的名字。</li></ul><h6 id="查看最新创建的容器"><a href="#查看最新创建的容器" class="headerlink" title="查看最新创建的容器"></a>查看最新创建的容器</h6><pre class=" language-shell"><code class="language-shell">docker ps -l</code></pre><p>查看最新创建的n个容器</p><pre class=" language-docer"><code class="language-docer">docker ps -n=xxx</code></pre><h2 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h2><p>容器创建</p><pre class=" language-shell"><code class="language-shell">docker create nginx</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Docker学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1-安装</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/docker-xue-xi/1-1-an-zhuang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/docker-xue-xi/1-1-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="Docker入门安装"><a href="#Docker入门安装" class="headerlink" title="Docker入门安装"></a>Docker入门安装</h1><p>简介：作用和虚拟机相似，可以一键部署linux mysql nginx。。。</p><table><thead><tr><th align="left">docker</th><th align="left">虚拟机</th><th></th></tr></thead><tbody><tr><td align="left">相同点</td><td align="left">1. 都可在不同的主机之间迁移 2. 都具备 root 权限 3. 都可以远程控制 4. 都有备份、回滚操作</td><td></td></tr><tr><td align="left">操作系统</td><td align="left">在性能上有优势，可以轻易的运行多个操作系统</td><td>可以安装任何系统，但是性能不及容器</td></tr><tr><td align="left">原理</td><td align="left">和宿主机共享内核，所有容器运行在容器引擎之上，容器并非一个完整的操作系统，所有容器共享操作系统，在进程级进行隔离</td><td>每一个虚拟机都建立在虚拟的硬件之上，提供指令级的虚拟，具备一个完整的操作系统</td></tr><tr><td align="left">优点</td><td align="left">高效、集中。一个硬件节点可以运行数以百计的的容器，非常节省资源，QoS 会尽量满足，但不保证一定满足。内核由提供者升级，服务由服务提供者管理</td><td>对操作系统具有绝对权限，对系统版本和系统升级具有完全的管理权限。具有一整套的的资源：CPU、RAM 和磁盘。QoS 是有保证的，每一个虚拟机就像一个真实的物理机一样，可以实现不同的操作系统运行在同一物理节点上。</td></tr><tr><td align="left">资源管理</td><td align="left">弹性资源分配：资源可以在没有关闭容器的情况下添加，数据卷也无需重新分配大小</td><td>虚拟机需要重启，虚拟机里边的操作系统需要处理新加入的资源，如磁盘等，都需要重新分区。</td></tr><tr><td align="left">远程管理</td><td align="left">根据操作系统的不同，可以通过 shell 或者远程桌面进行</td><td>远程控制由虚拟化平台提供，可以在虚拟机启动之前连接</td></tr><tr><td align="left">缺点</td><td align="left">对内核没有控制权限，只有容器的提供者具备升级权限。只有一个内核运行在物理节点上，几乎不能实现不同的操作系统混合。容器提供者一般仅提供少数的几个操作系统</td><td>每一台虚拟机都具有更大的负载，耗费更多的资源，用户需要全权维护和管理。一台物理机上能够运行的虚拟机非常有限</td></tr><tr><td align="left">配置</td><td align="left">快速，基本上是一键配置</td><td>配置时间长</td></tr><tr><td align="left">启动时间</td><td align="left">秒级</td><td>分钟级</td></tr><tr><td align="left">硬盘使用</td><td align="left">MB</td><td>GB</td></tr><tr><td align="left">性能</td><td align="left">接近原生态</td><td>弱于原生态</td></tr><tr><td align="left">系统支持数量</td><td align="left">单机支持上千个</td><td>一般不多于几十个</td></tr></tbody></table><h2 id="核心组件"><a href="#核心组件" class="headerlink" title="核心组件"></a>核心组件</h2><ul><li><p>镜像 images</p><p>静态模板，保存保存容器需要的环境，和应用执行代码，可以将镜像看作容器的代码，当代码运行起来就成了容器</p></li><li><p>容器 </p><p>一个运行的环境，镜像的运行状态，</p></li><li><p>库</p><p>特定用户存储镜像的目录，一个用户可以建立多个用户来保存自己的镜像</p></li></ul><h1 id="安装命令"><a href="#安装命令" class="headerlink" title="安装命令"></a>安装命令</h1><pre class=" language-shell"><code class="language-shell"># 首先安装 Dockeryum -y install docker# 然后启动 Docker 服务service docker start# 测试安装是否成功docker -v</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200707220336806.png" alt="image-20200707220336806"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Docker学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/jian-jie/</url>
      
        <content type="html"><![CDATA[<blockquote><p>BitNami 提供wordpress、joomla、drupal、bbpress等开源程序的傻瓜式安装包下载，所有的安装包内置了服务器环境，就是说，不需要在本地电脑上另外搭建服务器，就可以一次性傻瓜式安装完毕。BitNami开源PHP程序傻瓜集成安装包可选环境，包括WAMP，LAMP，MAMP和SAMP。</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Bitnami虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bitnami虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-1文档学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/2-1-wen-dang-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/2-1-wen-dang-xue-xi/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><p>官方文档地址:<a href="https://docs.bitnami.com/virtual-machine/get-started-virtualbox/" target="_blank" rel="noopener">https://docs.bitnami.com/virtual-machine/get-started-virtualbox/</a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote><p>如果您曾经尝试过安装服务器应用程序（如 WordPress）或开发环境（如 Apache/PHP/MySQL 环境），您已经知道它比乍看起来要困难得多。有文件要下载和复制，配置设置要调整，和各种其他箍跳转之前，你可以真正得到一些富有成效的工作。</p></blockquote><p><strong>Bitnami 虚拟机</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Bitnami虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bitnami虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-3 安装桌面</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/1-3-an-zhuang-zhuo-mian/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/1-3-an-zhuang-zhuo-mian/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="启用桌面访问"><a href="#启用桌面访问" class="headerlink" title="启用桌面访问"></a>启用桌面访问</h1><p>文件下载很慢,(不推荐)</p><p>若要允许位纳米用户的<em>桌面访问，</em>请按照以下步骤操作：</p><h3 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h3><ul><li><p>安装<em>侏儒核心</em>包：</p><pre><code>sudo apt-get updatesudo apt-get install gnome-core</code></pre></li><li><p>重新启动计算机。</p></li><li><p>现在，您应该能够以<em>bitnami 用户位登录到桌面</em>。</p></li></ul><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><ul><li><p>安装<em>ubuntu 桌面</em>包：</p><pre><code>sudo apt-get updatesudo apt-get install ubuntu-desktop</code></pre></li><li><p>创建一个名为*/usr/共享/光德姆/光德姆.conf.d/60-bitnami.conf 的新文件*，并添加如下行：</p><pre><code>[SeatDefaults]default-user=bitnamigreeter-show-manual-login=true</code></pre></li></ul><p>您可以通过执行以下命令来创建该文件：</p><pre><code>sudo sh -c 'echo "[SeatDefaults]\ndefault-user=bitnami\ngreeter-show-manual-login=true" &gt; /usr/share/lightdm/lightdm.conf.d/50-bitnami.conf'</code></pre><ul><li>重新启动虚拟机。</li><li>现在，您应该能够以<em>bitnami 用户位登录到桌面</em>。</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Bitnami虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bitnami虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-2 连接SSH</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/1-2-lian-jie-ssh/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/1-2-lian-jie-ssh/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="1-首先修改密码"><a href="#1-首先修改密码" class="headerlink" title="1.首先修改密码"></a>1.首先修改密码</h1><p><strong>修改虚拟机的默认登录密码</strong></p><p>虚拟机控制台的默认登录密码在启动时显示，如下所示：</p><p><a href="https://docs.bitnami.com/images/img/platforms/virtual-machine/server-credentials.png" target="_blank" rel="noopener"><img src="https://docs.bitnami.com/images/img/platforms/virtual-machine/server-credentials.png" alt="Server credentials"></a></p><p>首次登录时，系统会自动提示您更改此更改。若要以后更改它，请执行下面的命令在控制台：</p><pre><code>passwd</code></pre><h1 id="2-启用-SSH-服务器"><a href="#2-启用-SSH-服务器" class="headerlink" title="2.启用 SSH 服务器"></a>2.启用 SSH 服务器</h1><blockquote><p>默认情况下，在 Bitnami 虚拟机中禁用 SSH 服务器。但是，某些应用程序（如 GitLab）需要 SSH 访问导入代码存储库。</p></blockquote><h4 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h4><pre><code>sudo rm -f /etc/ssh/sshd_not_to_be_runsudo systemctl enable sshsudo systemctl start ssh</code></pre><h4 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><pre><code>sudo mv /etc/init/ssh.conf.back /etc/init/ssh.confsudo start ssh</code></pre><h3 id="禁用-SSH-服务器"><a href="#禁用-SSH-服务器" class="headerlink" title="禁用 SSH 服务器"></a>禁用 SSH 服务器</h3><p>默认情况下，在 Bitnami 虚拟机中禁用 SSH 服务器。如果已<a href="https://docs.bitnami.com/virtual-machine/faq/get-started/enable-ssh/" target="_blank" rel="noopener">按照此处所述启用它</a>，则可以按照相反的步骤禁用它：</p><h4 id="Debian-1"><a href="#Debian-1" class="headerlink" title="Debian"></a>Debian</h4><pre><code>sudo systemctl stop sshsudo systemctl disable ssh</code></pre><h4 id="Ubuntu-1"><a href="#Ubuntu-1" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><pre><code>sudo stop sshsudo mv /etc/init/ssh.conf /etc/init/ssh.conf.back</code></pre><h1 id="3-连接成功"><a href="#3-连接成功" class="headerlink" title="3.连接成功"></a>3.连接成功</h1><p><img src="images/1-2%20%E8%BF%9E%E6%8E%A5SSH/image-20200731114408221.png" alt="image-20200731114408221"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Bitnami虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bitnami虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-1 安装bitnami虚拟机</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/1-1-an-zhuang-bitnami-xu-ni-ji/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/bitnami-xu-ni-ji/1-1-an-zhuang-bitnami-xu-ni-ji/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="第-1-步：启动-Bitnami-WordPress-虚拟机"><a href="#第-1-步：启动-Bitnami-WordPress-虚拟机" class="headerlink" title="第 1 步：启动 Bitnami WordPress 虚拟机"></a>第 1 步：启动 Bitnami WordPress 虚拟机</h1><ul><li><p>下载连接:<a href="https://bitnami.com/stack/wordpress/virtual-machine" target="_blank" rel="noopener">https://bitnami.com/stack/wordpress/virtual-machine</a></p></li><li><p>使用虚拟机打开连接</p></li></ul><p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730114146505.png" alt="image-20200730114146505"></p><p>现在，您可以通过启动 Web 浏览器并浏览虚拟机的 IP 地址来访问 WordPress。您应该会看到博客的头版，并包含一个示例帖子，如下所示：</p><p><a href="http://192.168.2.139/" target="_blank" rel="noopener">http://192.168.2.139/</a></p><p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730114615539.png" alt="image-20200730114615539"></p><h1 id="第-2-步：登录并使用-WordPress-开始"><a href="#第-2-步：登录并使用-WordPress-开始" class="headerlink" title="第 2 步：登录并使用 WordPress 开始"></a>第 2 步：登录并使用 WordPress 开始</h1><p>要登录到 WordPress 仪表板，请按照以下步骤操作：</p><ul><li><p>浏览到 WordPress 仪表板，通常在 URL <em><a href="http://192.168.2.139/wp-admin%E3%80%82" target="_blank" rel="noopener">http://192.168.2.139/wp-admin。</a></em></p></li><li><p>查看用户名和密码</p></li><li><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cat</span> /home/bitnami/bitnami_credentials</code></pre><p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730120745221.png" alt="image-20200730120745221"></p></li></ul><h2 id="设置中文显示"><a href="#设置中文显示" class="headerlink" title="设置中文显示"></a>设置中文显示</h2><p><img src="images/1-1%20%E5%AE%89%E8%A3%85bitnami%E8%99%9A%E6%8B%9F%E6%9C%BA/image-20200730120842595.png" alt="image-20200730120842595"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Bitnami虚拟机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bitnami虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>4. asp.net内置对象</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/4.asp.net-nei-zhi-dui-xiang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/4.asp.net-nei-zhi-dui-xiang/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>asp.net的内置对象使我们更加方便的传送消息。</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/20200902161254.png" alt="img"></p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><ul><li><h2 id="Response-对象"><a href="#Response-对象" class="headerlink" title="Response 对象"></a>Response 对象</h2></li></ul><p>​    概述：继承于 System.Web.HttpRespone类，用来发送信息到客户端，并对发送 过程进行控制。例如，在浏览器中动态创建 Web 页面显示内容，改变 HTTP标题头，重新将客户端定向到指定页面中，设置缓冲信息等。</p><p>​    基本语法：Response [.属性|方法][变量]；属性和方法这两个参数只能选择一个。变量是一些字符串变量，用来作为方法的参数。</p><p>相关属性：</p><p><img src="https://img-blog.csdnimg.cn/2019020115023138.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hkeTE0,size_16,color_FFFFFF,t_70" alt="img"></p><p>示例： </p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--前端添加一个按钮--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form1<span class="token punctuation">"</span></span> <span class="token attr-name">runat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>server<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">asp:</span>Button</span> <span class="token attr-name">ID</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Button1<span class="token punctuation">"</span></span> <span class="token attr-name">runat</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>server<span class="token punctuation">"</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Winni的博客<span class="token punctuation">"</span></span> <span class="token attr-name">OnClick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Button1_Click<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span> //.cs添加代码：用于向浏览器传递消息和重定向打开另一个网页 public partial class responseTest : System.Web.UI.Page    {        protected void Page_Load(object sender, EventArgs e)        {            Response.Write("现在的时间是：" + DateTime.Now);        }        protected void Button1_Click(object sender, EventArgs e)        {            Response.Redirect("https://blog.csdn.net/hdy14/article/details/86658127");        }    }</code></pre><p> 运行效果：</p><p><img src="https://img-blog.csdnimg.cn/20190201150606782.gif" alt="img"></p><p>在这个例子中，利用Response向浏览器传递消息：当前时间。而且重定向打开了新的网页。</p><ul><li><h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2></li></ul><p>Request对象的功能是从客户端得到数据，个人感觉是Response对象的相反。</p><p>Request对象的相关属性如下：</p><p><img src="https://img-blog.csdnimg.cn/20190201151458604.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hkeTE0,size_16,color_FFFFFF,t_70" alt="img"></p><p>示例：</p><p>获得浏览器输入的值，文本框的数据，赋给数据库（或者实体）。</p><p> <img src="https://img-blog.csdnimg.cn/20190106105738342.png" alt="img"></p><ul><li><h2 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h2></li></ul><p>Server对象提供对服务器上访问的方法和属性，大多数方法和属性是作为实用程序的功能提供的。Server对象常用的属性如下：</p><p><img src="https://img-blog.csdnimg.cn/20190201152437759.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hkeTE0,size_16,color_FFFFFF,t_70" alt="img"></p><p>示例：</p><p>使用Server对象的Map Path方法，获得当前文件的路径。并使用Response输出：</p><pre class=" language-cs"><code class="language-cs"> protected void Page_Load(object sender, EventArgs e)        {            Response.Write("现在的时间是：" + DateTime.Now);            Response.Write("当前文件所在的物理路径为"+Server.MapPath("."));        }</code></pre><p>运行效果： </p><p><img src="https://img-blog.csdnimg.cn/20190201152840325.png" alt="img"></p><ul><li><h2 id="Application对象、"><a href="#Application对象、" class="headerlink" title="Application对象、"></a>Application对象、</h2></li></ul><p>Application对象提供对所有会话的应用程序范围的<strong>方法和事件的访问</strong>，还提供对可用于存储信息的应用程序范围的缓存的访问。应用程序状态是可供 ASP.NET 应用程序中的所有类使用的数据储存库。它存储在服务器的内存中，因此与在数据库中存储和检索信息相比，它的执行速度更快。与特定和单个用户会话的会话状态不同，应用程序状态应用于所有的用户和会话。因此，应用程序状态非常适合存储那些数量少、不随用户的变化而变化的常用数据。</p><p>关键特性有：</p><p>存储于服务器内存中，与用户无关即多用户共享，在应用程序的整个生存期存在，而不会被主动丢弃，不被序列化，不发生服务器和客户端之间的数据传输。</p><p>使用格式如下：</p><p>Appliacation[“变量”]=“变量内容”；</p><p>属性如下：</p><p><img src="https://static.dingtalk.com/media/lADPDgQ9qeocaV3NAt_NA4g_904_735.jpg_620x10000q90g.jpg" alt="img"></p><p>事件如下：</p><p><img src="https://static.dingtalk.com/media/lADPDgQ9qeocaVbNAR3NA4A_896_285.jpg_620x10000q90g.jpg" alt="img"></p><p> 示例：</p><pre class=" language-cpp"><code class="language-cpp">  <span class="token operator">&lt;</span>div<span class="token operator">></span>             <span class="token operator">&lt;</span>asp<span class="token operator">:</span>Label ID<span class="token operator">=</span><span class="token string">"Label1"</span> runat<span class="token operator">=</span><span class="token string">"server"</span> Text<span class="token operator">=</span><span class="token string">"Label"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>asp<span class="token operator">:</span>Label<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>Application<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Application<span class="token punctuation">[</span><span class="token string">"usercount"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span>Application<span class="token punctuation">[</span><span class="token string">"usercount"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Application<span class="token punctuation">.</span><span class="token function">UnLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Label1<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"您是第"</span> <span class="token operator">+</span> Application<span class="token punctuation">[</span><span class="token string">"usercount"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"位访客"</span><span class="token punctuation">;</span></code></pre><p>运行效果：</p><p><img src="https://img-blog.csdnimg.cn/20190201160420754.gif" alt="img"></p><ul><li><h2 id="Session对象"><a href="#Session对象" class="headerlink" title="Session对象"></a>Session对象</h2></li></ul><p>Session对象用于存储在多个页面调用之间特定用户的信息。Session对象只针对单一网站使用者，不同的客户端无法相互访问。Session对象中止于联机机器离线时，也就是当网站使用者关掉浏览器或超过设定Session对象的有效时间时，Session对象变量就会关闭。</p><p>Session对象是与特定用户相联系的。所以Session是单用户操作。各个Session对象对象是完全独立的，不会相互影响。也就是说，一个用户对应一个Session对象，每个人都自己独自的id，保存在Session对象中的用户信息，其他用户是看不到的。</p><ul><li><h2 id="Cookie对象"><a href="#Cookie对象" class="headerlink" title="Cookie对象"></a>Cookie对象</h2></li></ul><p>用户在web中存储用户特定信息。Cookie相关属性如下：</p><p><img src="https://img-blog.csdnimg.cn/20190201165425357.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hkeTE0,size_16,color_FFFFFF,t_70" alt="img"></p><h2 id="Application、Session、Cookie对象的区别"><a href="#Application、Session、Cookie对象的区别" class="headerlink" title="Application、Session、Cookie对象的区别"></a>Application、Session、Cookie对象的区别</h2><p>Application对象被整个应用程序共享，即多个用户共享一个Application对象；</p><p>Session对象被每一个用户所独享，且每一个用户都具有唯一的Session标识，常常用户存储用户信息；</p><p>Cookie对象用户保护客户浏览器请求信息。</p><p>其中Application和Session是把信息保存到服务器端，而Cookie则是把信息保存在客户端。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ASP.NET学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASP.NET学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3. asp-page类</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/3.asp-page-lei/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/3.asp-page-lei/</url>
      
        <content type="html"><![CDATA[<h1 id="Page类"><a href="#Page类" class="headerlink" title="Page类"></a>Page类</h1><table><thead><tr><th>属性或事件</th><th>说明</th></tr></thead><tbody><tr><td>Application</td><td>为当前web请求获取HtttpApplicationState对象</td></tr><tr><td>IsPostBack</td><td>是否首次加载和访问</td></tr><tr><td>IsValid</td><td>指示页验证是否成功</td></tr><tr><td>Request</td><td>获取HttpRequest对象</td></tr><tr><td>Response</td><td>获取与该page有关联的HttpServerUtility</td></tr><tr><td>Server</td><td>获取Server对象,它是HttpServerUtility的实例</td></tr><tr><td>Session</td><td>获取Session对象</td></tr><tr><td>Validators</td><td>获取请求页所有验证控件的集合</td></tr><tr><td>ViewState</td><td>获取状态信息字典</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><pre class=" language-c#"><code class="language-c#">using System;using System.Collections.Generic;using System.Linq;using System.Web;using System.Web.DynamicData;using System.Web.UI;using System.Web.UI.WebControls;namespace 例1_1.测试web窗口{    public partial class 例2_2 : System.Web.UI.Page    {        protected void Page_InitComplete(object sender, EventArgs e)        {            Label1.Text += "<br> Page_InitComplete";        }        protected void Page_PreInit(object sender, EventArgs e)        {            Label1.Text += "<br> Page_PreInit";        }        protected void Page_Init(object sender, EventArgs e)        {            Label1.Text += "<br> Page_Init";        }        protected void Page_PreLoad(object sender, EventArgs e)        {            Label1.Text += "<br> Page_PreLoad";        }        protected void Page_Load(object sender, EventArgs e)        {            Label1.Text += "<br> Page_PreInit";        }        protected void Page_PreRender(object sender, EventArgs e)        {            Label1.Text += "<br> Page_PreRender";        }        protected void Page_LoadComplete(object sender, EventArgs e)        {            Label1.Text += "<br> Page_LoadComplete";        }        protected void Button1_Click(object sender, EventArgs e)        {            Label1.Text = "<br>按钮的点击事件处理程序";        }    }}</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902160243123.png" alt="image-20200902160243123"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ASP.NET学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASP.NET学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2. ASP.NET基础知识</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/2.asp.net-ji-chu-zhi-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/2.asp.net-ji-chu-zhi-shi/</url>
      
        <content type="html"><![CDATA[<p>ASP.NET的文件后缀名：</p><p>​                 <img src="https://img-blog.csdnimg.cn/20181201205048176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dqZjE5OTc=,size_16,color_FFFFFF,t_70" alt="img"></p><p>ASP.NET的文件夹说明：</p><p>​                 <img src="https://img-blog.csdnimg.cn/2018120208235056.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dqZjE5OTc=,size_16,color_FFFFFF,t_70" alt="img"></p><p>注释：</p><p><img src="https://img-blog.csdnimg.cn/20181201210602989.png" alt="img"></p><p> 我们在aspx文件中使用 &lt;%– 注释 –%&gt; ，但是不能卸载Script的代码中。</p><p><img src="https://img-blog.csdnimg.cn/20181201210619730.png" alt="img"></p><p> 我们在CS文件中使用 //来填写注释。</p><p>服务器控件：</p><p> <img src="https://img-blog.csdnimg.cn/20181201211003572.png" alt="img"></p><p>  标志性的代码： runat=“server” 表示这是一个服务器控件，可以被服务器访问。</p><p>代码块语法：</p><p> &lt;% 内嵌语句 %&gt;</p><p><img src="https://img-blog.csdnimg.cn/20181201212241862.png" alt="img"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ASP.NET学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASP.NET学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1. 安装软件.创建和发布项目</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/1.an-zhuang-ruan-jian.chuang-jian-he-fa-bu-xiang-mu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/asp.net-xue-xi/1.an-zhuang-ruan-jian.chuang-jian-he-fa-bu-xiang-mu/</url>
      
        <content type="html"><![CDATA[<h1 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h1><ul><li>windos系统</li><li>添加程序,IIS服务功能,在系统程序添加查找<ul><li>添加ASP.NET <ul><li>internet infomation services—万维网服务–应用程序开发功能</li></ul></li></ul></li><li>后期可能需要数据库服务端</li></ul><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200909134326734.png" alt="image-20200909134326734"></p><h1 id="工具下载安装"><a href="#工具下载安装" class="headerlink" title="工具下载安装"></a>工具下载安装</h1><p>VS2019下载地址:<a href="https://visualstudio.microsoft.com/zh-hans/" target="_blank" rel="noopener">https://visualstudio.microsoft.com/zh-hans/</a></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902143558645.png" alt="image-20200902143558645"></p><p>选择需要的功能,安装后,也可以修改添加功能</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902143949078.png" alt="image-20200902143949078"></p><h1 id="创建web项目"><a href="#创建web项目" class="headerlink" title="创建web项目"></a>创建web项目</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902144104080.png" alt="image-20200902144104080"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902144151640.png" alt="chuangjian xinxiangmu 01"></p><p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20200902144504545.png" alt="image-20200902144504545"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902144559020.png" alt="image-20200902144559020"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902144820687.png" alt="image-20200902144820687"></p><p>添加新项</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902145111823.png" alt="image-20200902145111823"></p><p>这里比如我添加一个web 窗体</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902145318993.png" alt="image-20200902145318993"></p><p>按f5启动web浏览器,运行,如果有错误底部有提示</p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200902145504964.png" alt="image-20200902145504964"></p><h1 id="发布项目到IIS服务器"><a href="#发布项目到IIS服务器" class="headerlink" title="发布项目到IIS服务器"></a>发布项目到IIS服务器</h1><ol><li>点击项目解决资源管理 右键 选择 发布</li><li>设置目标文件位置(项目所在位置)</li><li>下一步 文件发布选项 选择 在发布期预编译</li><li>点击发布,没有错误即发布完成</li><li>配置IIS 添加网站 选择应用程序池 .NET .V4.5</li></ol><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200909135600345.png" alt="image-20200909135600345"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200909140613203.png" alt="image-20200909140613203"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ASP.NET学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ASP.NET学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-4 开源网络封装库Retofit</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-4-kai-yuan-wang-luo-feng-zhuang-ku-retofit/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-4-kai-yuan-wang-luo-feng-zhuang-ku-retofit/</url>
      
        <content type="html"><![CDATA[<h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><h1 id="2-Retrofit基本用法"><a href="#2-Retrofit基本用法" class="headerlink" title="2.Retrofit基本用法"></a>2.Retrofit基本用法</h1><h3 id="2-1添加依赖"><a href="#2-1添加依赖" class="headerlink" title="2.1添加依赖"></a>2.1添加依赖</h3><pre class=" language-groovy"><code class="language-groovy">    implementation <span class="token string">'com.squareup.retrofit2:retrofit:2.6.1'</span>    implementation <span class="token string">'com.squareup.retrofit2:converter-gson:2.6.1'</span></code></pre><h2 id="2-2-编写gson实体类"><a href="#2-2-编写gson实体类" class="headerlink" title="2.2.编写gson实体类"></a>2.2.编写gson实体类</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> version<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre><h2 id="2-3创建接口"><a href="#2-3创建接口" class="headerlink" title="2.3创建接口"></a>2.3创建接口</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> AppService <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 使用get请求,参数是请求相对地址     * 返回类型是 对应的实体类     */</span>    <span class="token annotation builtin">@GET</span><span class="token punctuation">(</span><span class="token string">"get_data.json"</span><span class="token punctuation">)</span>    <span class="token keyword">fun</span> <span class="token function">getAppData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Call<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">}</span></code></pre><h2 id="2-4Activity界面编辑"><a href="#2-4Activity界面编辑" class="headerlink" title="2.4Activity界面编辑"></a>2.4Activity界面编辑</h2><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/getAppDataBtn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Get App Data<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-3 封装网络请求</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-3-feng-zhuang-wang-luo-qing-qiu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-3-feng-zhuang-wang-luo-qing-qiu/</url>
      
        <content type="html"><![CDATA[<h1 id="1-HttpURLConnection网络封装"><a href="#1-HttpURLConnection网络封装" class="headerlink" title="1.HttpURLConnection网络封装"></a>1.HttpURLConnection网络封装</h1><ol><li><p>定义接口</p></li><li><p>编写工具类</p></li><li><p>测试应用</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/** * 创建http回调接口 */</span><span class="token keyword">interface</span> HttpCallbackListener <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//服务器成功响应</span>    <span class="token keyword">fun</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//服务器响应失败</span>    <span class="token keyword">fun</span> <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> HttpUtil <span class="token punctuation">{</span>    <span class="token keyword">fun</span> <span class="token function">sendHttpRequest</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">,</span> listener<span class="token operator">:</span> HttpCallbackListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">var</span> connection<span class="token operator">:</span> HttpURLConnection<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span>                connection <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HttpURLConnection                connection<span class="token punctuation">.</span>connectTimeout <span class="token operator">=</span> <span class="token number">8000</span>                connection<span class="token punctuation">.</span>readTimeout <span class="token operator">=</span> <span class="token number">8000</span>                <span class="token keyword">val</span> input <span class="token operator">=</span> connection<span class="token punctuation">.</span>inputStream                <span class="token keyword">val</span> reader <span class="token operator">=</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span><span class="token function">InputStreamReader</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span>                reader<span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{</span>                    reader<span class="token punctuation">.</span><span class="token function">forEachLine</span> <span class="token punctuation">{</span>                        response<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// 回调onFinish()方法</span>                listener<span class="token punctuation">.</span><span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 回调onError()方法</span>                listener<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                connection<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ol><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//创建一个新的协程运行</span>    runBlocking <span class="token punctuation">{</span>        <span class="token function">getBaiduResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>suspend <span class="token keyword">fun</span> <span class="token function">getBaiduResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com/"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// 得到服务器返回的具体内容</span>        <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 在这里对异常情况进行处理</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>suspend <span class="token keyword">fun</span> <span class="token function">request</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>    <span class="token keyword">return</span> suspendCoroutine <span class="token punctuation">{</span> continuation <span class="token operator">-></span>        HttpUtil<span class="token punctuation">.</span><span class="token function">sendHttpRequest</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span>            HttpCallbackListener <span class="token punctuation">{</span>            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>                continuation<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>            <span class="token punctuation">}</span>            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                continuation<span class="token punctuation">.</span><span class="token function">resumeWithException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="2-Okhttp网络封装"><a href="#2-Okhttp网络封装" class="headerlink" title="2.Okhttp网络封装"></a>2.Okhttp网络封装</h1><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * callback: okhttp3.Callback: okhttp自带的回调接口     */</span>    <span class="token keyword">fun</span> <span class="token function">sendOkHttpRequest</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">,</span> callback<span class="token operator">:</span> okhttp3<span class="token punctuation">.</span>Callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin">HttpUtil<span class="token punctuation">.</span><span class="token function">sendOkHttpRequest</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span><span class="token keyword">object</span> <span class="token operator">:</span>Callback<span class="token punctuation">{</span>        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>call<span class="token operator">:</span> Call<span class="token punctuation">,</span> e<span class="token operator">:</span> IOException<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//处理异常数据</span>        <span class="token punctuation">}</span>        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResponse</span><span class="token punctuation">(</span>call<span class="token operator">:</span> Call<span class="token punctuation">,</span> response<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//得到服务器返回的具体内容</span>            <span class="token keyword">val</span> reponseData<span class="token operator">=</span>response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2网络访问-数据格式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-2-wang-luo-fang-wen-shu-ju-ge-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-2-wang-luo-fang-wen-shu-ju-ge-shi/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="1-创建一个本地简单的服务器"><a href="#1-创建一个本地简单的服务器" class="headerlink" title="1.创建一个本地简单的服务器"></a>1.创建一个本地简单的服务器</h1><p>apache服务器: <a href="https://www.apachehaus.com/cgi-bin/download.plx#APACHELEVC14" target="_blank" rel="noopener">https://www.apachehaus.com/cgi-bin/download.plx#APACHELEVC14</a></p><h1 id="2-解析XML格式数据"><a href="#2-解析XML格式数据" class="headerlink" title="2.解析XML格式数据"></a>2.解析XML格式数据</h1><ol><li>在桌面编写一个get_data.xml文件</li><li>请求网络代码</li><li>解析xml</li><li>由于android9开始不支持http请求,默认是https,需要配置,创建res/xml/network_config.xml</li><li>声明权限</li></ol><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apps</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Maps<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Chrom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Play<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apps</span><span class="token punctuation">></span></span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithOkHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//1. 获取okhttp实例</span>                <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//2. 设置请求参数</span>                <span class="token comment" spellcheck="true">//post请求(可选)</span>                <span class="token keyword">val</span> requestBody<span class="token operator">=</span>FormBody<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//.url("https://www.baidu.com")</span>                        <span class="token comment" spellcheck="true">//读取本地服务器文件</span>                    <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://192.168.2.228/get_data.xml"</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//.post(requestBody)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//3. 获取服务器返回的数据</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> responseData <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>responseData <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//showResponse(responseData)</span>                    <span class="token comment" spellcheck="true">//解析xml数据</span>                    <span class="token function">parseXMLWithPull</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * 解析xml数据格式     * Pull方式     */</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseXMLWithPull</span><span class="token punctuation">(</span>xmlData<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1. 创建XmlPullParserFactory实例,获取XmlPullParser对象</span>            <span class="token keyword">val</span> factory <span class="token operator">=</span> XmlPullParserFactory<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">val</span> xmlPullParser <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newPullParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//2. 将服务器返回的XML设置进去,开始解析</span>            xmlPullParser<span class="token punctuation">.</span><span class="token function">setInput</span><span class="token punctuation">(</span><span class="token function">StringReader</span><span class="token punctuation">(</span>xmlData<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//3. 得到当前解析事件</span>            <span class="token keyword">var</span> eventType <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span>eventType            <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token string">""</span>            <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">""</span>            <span class="token keyword">var</span> version <span class="token operator">=</span> <span class="token string">""</span>            <span class="token comment" spellcheck="true">//4. 遍历解析事件</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>eventType <span class="token operator">!=</span> XmlPullParser<span class="token punctuation">.</span>END_DOCUMENT<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> nodeName <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span>name                <span class="token keyword">when</span> <span class="token punctuation">(</span>eventType<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//4.1 开始解析某个节点</span>                    XmlPullParser<span class="token punctuation">.</span>START_TAG <span class="token operator">-></span> <span class="token punctuation">{</span>                        <span class="token keyword">when</span> <span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            <span class="token comment" spellcheck="true">//如果节点名等于id name version 就调用nextText()获取节点内容</span>                            <span class="token string">"id"</span> <span class="token operator">-></span> id <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token string">"name"</span> <span class="token operator">-></span> name <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token string">"version"</span> <span class="token operator">-></span> version <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                    <span class="token comment" spellcheck="true">//4.2 完成解析某个节点,打印节点内容</span>                    XmlPullParser<span class="token punctuation">.</span>END_TAG <span class="token operator">-></span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"app"</span> <span class="token operator">==</span> nodeName<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation variable">$id</span>"</span><span class="token punctuation">)</span>                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation variable">$name</span>"</span><span class="token punctuation">)</span>                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation variable">$version</span>"</span><span class="token punctuation">)</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                eventType <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>network-security-config</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-config</span> <span class="token attr-name">cleartextTrafficPermitted</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trust-anchors</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificates</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>system<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trust-anchors</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-config</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>network-security-config</span><span class="token punctuation">></span></span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.networktest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--    声明网络权限--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>        <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>roundIcon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>supportsRtl</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@style/AppTheme<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>networkSecurityConfig</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@xml/network_config<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--        设置http请求--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span></code></pre><p><img src="images/3-2%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/image-20200729223542261.png" alt="image-20200729223542261"></p><h1 id="3-解析JSON格式数据"><a href="#3-解析JSON格式数据" class="headerlink" title="3.解析JSON格式数据"></a>3.解析JSON格式数据</h1><ol><li>在htdocs目录下创建一个get_data.json文件</li><li>编写解析代码</li></ol><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"5.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash of Clans"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"7.0"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Boom Beach"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"3.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash Royale"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * 使用官方提供的JsonObject     */</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseJSONWithJSONObject</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1. 获取jsonarray,进行循环解析</span>            <span class="token keyword">val</span> jsonArray <span class="token operator">=</span> <span class="token function">JSONArray</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//2. 如果循环中不要最后一个范围区间的值可以使用 until 函数:</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until jsonArray<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> jsonObject <span class="token operator">=</span> jsonArray<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">val</span> id <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> name <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> version <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"version"</span><span class="token punctuation">)</span>                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation variable">$id</span>"</span><span class="token punctuation">)</span>                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation variable">$name</span>"</span><span class="token punctuation">)</span>                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation variable">$version</span>"</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h1 id="4-优化解析-使用GSON开源库"><a href="#4-优化解析-使用GSON开源库" class="headerlink" title="4.优化解析,使用GSON开源库"></a>4.优化解析,使用GSON开源库</h1><h2 id="1-导入gson依赖"><a href="#1-导入gson依赖" class="headerlink" title="1.导入gson依赖"></a>1.导入gson依赖</h2><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'com.google.code.gson:gson:2.8.5'</span></code></pre><p>一段json数据</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token property">"age"</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> gson<span class="token operator">=</span><span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">val</span> person<span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span>Person<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span></code></pre><p>解析json数组</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"5.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash of Clans"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"7.0"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Boom Beach"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"3.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash Royale"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> typeOf <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> TypeToken<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span>type        <span class="token keyword">val</span> appList <span class="token operator">=</span> gson<span class="token punctuation">.</span>fromJson<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> typeOf<span class="token punctuation">)</span></code></pre><h2 id="2-根据gson格式-编写实体类"><a href="#2-根据gson格式-编写实体类" class="headerlink" title="2.根据gson格式,编写实体类,"></a>2.根据gson格式,编写实体类,</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> version<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * 利用Gson解析json数据     */</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseJSONWithGSON</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//1. 获取gson实例</span>        <span class="token keyword">val</span> gson <span class="token operator">=</span> <span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2. 设置gson数据格式</span>        <span class="token keyword">val</span> typeOf <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> TypeToken<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span>type        <span class="token keyword">val</span> appList <span class="token operator">=</span> gson<span class="token punctuation">.</span>fromJson<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> typeOf<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3. 循环遍历jsonarray数据</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>app <span class="token keyword">in</span> appList<span class="token punctuation">)</span> <span class="token punctuation">{</span>            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation"><span class="token delimiter variable">${</span>app<span class="token punctuation">.</span>id<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation"><span class="token delimiter variable">${</span>app<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation"><span class="token delimiter variable">${</span>app<span class="token punctuation">.</span>version<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2-1安装Apache服务器</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-2-1-an-zhuang-apache-fu-wu-qi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-2-1-an-zhuang-apache-fu-wu-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="打开Apache文件夹："><a href="#打开Apache文件夹：" class="headerlink" title="打开Apache文件夹："></a>打开Apache文件夹：</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116191738802-1520378758.png" alt="img"></p><h1 id="打开conf文件夹下的：httpd-conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置："><a href="#打开conf文件夹下的：httpd-conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置：" class="headerlink" title="打开conf文件夹下的：httpd.conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置："></a>打开conf文件夹下的：httpd.conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置：</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116192340009-252139911.png" alt="img"></p><h1 id="在cmd命令下输入：netstat-a，查看80端口是否被占用，如果被占用，将：httpd-conf文件中的80端口改为其他端口后保存"><a href="#在cmd命令下输入：netstat-a，查看80端口是否被占用，如果被占用，将：httpd-conf文件中的80端口改为其他端口后保存" class="headerlink" title="在cmd命令下输入：netstat -a，查看80端口是否被占用，如果被占用，将：httpd.conf文件中的80端口改为其他端口后保存"></a>在cmd命令下输入：netstat -a，查看80端口是否被占用，如果被占用，将：httpd.conf文件中的80端口改为其他端口后保存</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116192853889-223879327.png" alt="img"></p><h1 id="配置安装Apache的主服务，在cmd中输入：”E-Apache-2-4-37-Apache-bin-httpd-exe”-k-install-n-apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os-5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了："><a href="#配置安装Apache的主服务，在cmd中输入：”E-Apache-2-4-37-Apache-bin-httpd-exe”-k-install-n-apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os-5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了：" class="headerlink" title="配置安装Apache的主服务，在cmd中输入：”E:\Apache-2.4.37\Apache\bin\httpd.exe” -k install -n apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os 5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了："></a>配置安装Apache的主服务，在cmd中输入：”E:\Apache-2.4.37\Apache\bin\httpd.exe” -k install -n apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os 5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了：</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116193655296-284734092.png" alt="img"></p><h1 id="启动Apache服务：双击bin目录下的：ApacheMonitor-exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。"><a href="#启动Apache服务：双击bin目录下的：ApacheMonitor-exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。" class="headerlink" title="启动Apache服务：双击bin目录下的：ApacheMonitor.exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。"></a>启动Apache服务：双击bin目录下的：ApacheMonitor.exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。</h1><p>　　注意：关闭Apache服务点击stop来关闭，当然也可以Windows系统来关闭</p><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116193905150-1782682408.png" alt="img"> </p><p> <img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116194605315-1293110702.png" alt="img"></p><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116194636633-1358003770.png" alt="img"></p><h1 id="打开浏览器，在网址栏输入：127-0-0-1-或者：http-localhost-，出现如下界面就表示配置成功了"><a href="#打开浏览器，在网址栏输入：127-0-0-1-或者：http-localhost-，出现如下界面就表示配置成功了" class="headerlink" title="打开浏览器，在网址栏输入：127.0.0.1(或者：http://localhost)，出现如下界面就表示配置成功了"></a>打开浏览器，在网址栏输入：127.0.0.1(或者：<a href="http://localhost),出现如下界面就表示配置成功了/" target="_blank" rel="noopener">http://localhost)，出现如下界面就表示配置成功了</a></h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116195213945-320211796.png" alt="img"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1网络访问</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-1-wang-luo-fang-wen/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/di-san-fang-yi-lai/wang-luo/3-1-wang-luo-fang-wen/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="1-WebView的用法"><a href="#1-WebView的用法" class="headerlink" title="1.WebView的用法"></a>1.WebView的用法</h1><blockquote><p>WevView是andorid控件,可以显示简单的网页</p></blockquote><ol><li>编写main.xml界面</li><li>关键代码</li><li>添加AndroidMainifest.xml权限</li></ol><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WebView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/webView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//设置一些浏览器属性,支持JavaScript脚本</span>        webView<span class="token punctuation">.</span>settings<span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//获取实例,设置url</span>        webView<span class="token punctuation">.</span>webViewClient <span class="token operator">=</span> <span class="token function">WebViewClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200729175044618.png" alt="image-20200729175044618"></p><h1 id="2-使用HttpURLConnection"><a href="#2-使用HttpURLConnection" class="headerlink" title="2.使用HttpURLConnection"></a>2.使用HttpURLConnection</h1><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithHttpURLConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 开启线程来发起网络请求</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">var</span> connection<span class="token operator">:</span> HttpURLConnection<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//1. 创建url,获取HttpURLConnection实例</span>                <span class="token keyword">val</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>                connection <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HttpURLConnection                <span class="token comment" spellcheck="true">//2. 设置请求方式,连接超时,读取时间</span>                connection<span class="token punctuation">.</span>requestMethod<span class="token operator">=</span><span class="token string">"GET"</span>                connection<span class="token punctuation">.</span>connectTimeout <span class="token operator">=</span> <span class="token number">8000</span>                connection<span class="token punctuation">.</span>readTimeout <span class="token operator">=</span> <span class="token number">8000</span>                <span class="token comment" spellcheck="true">//3. 获取服务器返回的输入流</span>                <span class="token keyword">val</span> input <span class="token operator">=</span> connection<span class="token punctuation">.</span>inputStream                <span class="token comment" spellcheck="true">// 下面对获取到的输入流进行读取</span>                <span class="token keyword">val</span> reader <span class="token operator">=</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span><span class="token function">InputStreamReader</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span>                reader<span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{</span>                    reader<span class="token punctuation">.</span><span class="token function">forEachLine</span> <span class="token punctuation">{</span>                        response<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token function">showResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                connection<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">showResponse</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        runOnUiThread <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 在这里进行UI操作，将结果显示到界面上</span>            responseText<span class="token punctuation">.</span>text <span class="token operator">=</span> response        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="post请求设置"><a href="#post请求设置" class="headerlink" title="post请求设置"></a>post请求设置</h2><pre class=" language-kotlin"><code class="language-kotlin">connection<span class="token punctuation">.</span>requestMethod<span class="token operator">=</span><span class="token string">"POST"</span>                <span class="token keyword">val</span> output<span class="token operator">=</span><span class="token function">DataOutputStream</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span>outputStream<span class="token punctuation">)</span>                output<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span>                output<span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token string">"username=admin&amp;password=123456"</span><span class="token punctuation">)</span></code></pre><h1 id="3-使用OkHttp-推荐"><a href="#3-使用OkHttp-推荐" class="headerlink" title="3.使用OkHttp(推荐)"></a>3.使用OkHttp(推荐)</h1><p>首选的android开源网络通信库 github:<a href="https://square.github.io/okhttp/" target="_blank" rel="noopener">https://square.github.io/okhttp/</a></p><ol><li>添加依赖</li><li>关键代码</li><li>添加权限</li></ol><pre class=" language-groovy"><code class="language-groovy"><span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string">"com.squareup.okhttp3:okhttp:4.8.0"</span><span class="token punctuation">)</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithOkHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//1. 获取okhttp实例</span>                <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//2. 设置请求参数</span>                <span class="token comment" spellcheck="true">//post请求(可选)</span>                <span class="token keyword">val</span> requestBody<span class="token operator">=</span>FormBody<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//.post(requestBody)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//3. 获取服务器返回的数据</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> responseData <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>responseData <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">showResponse</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">showResponse</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        runOnUiThread <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 在这里进行UI操作，将结果显示到界面上</span>            responseText<span class="token punctuation">.</span>text <span class="token operator">=</span> response        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>程序基本结构</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/cheng-xu-ji-ben-jie-gou/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/cheng-xu-ji-ben-jie-gou/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是函数"><a href="#什么是函数" class="headerlink" title="什么是函数"></a>什么是函数</h2><p> 以特定功能组织起来的代码块<br> fun[函数名](参数列表）：[返回值类（[函数体]}<br> fun[函数名I（[参数列表）=[表达式<br> ◆举例</p><pre class=" language-kotlin"><code class="language-kotlin"> <span class="token keyword">fun</span> say <span class="token function">Hi</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String <span class="token function">println</span><span class="token punctuation">(</span>"Hi<span class="token punctuation">,</span> Sname <span class="token punctuation">)</span> <span class="token keyword">fun</span> <span class="token function">sayhi</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">println</span><span class="token punctuation">(</span>Hi<span class="token punctuation">,</span> Sname"<span class="token punctuation">)</span></code></pre><h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p> 无名氏一直是神一样的存在<br> fun（[参数列表])<br> 举例</p><pre class=" language-kotlin"><code class="language-kotlin"> <span class="token keyword">val</span> sayhi<span class="token operator">=</span> <span class="token keyword">fun</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">=</span> <span class="token function">println</span><span class="token punctuation">(</span>Hi<span class="token punctuation">,</span> Sname"<span class="token punctuation">)</span></code></pre><h2 id="编写函数的注意事项"><a href="#编写函数的注意事项" class="headerlink" title="编写函数的注意事项"></a>编写函数的注意事项</h2><p> ◆功能要单<br> 函数名要做到顾名思义<br> 参数个数不要太多</p><h2 id="什么是-Lambda表达式"><a href="#什么是-Lambda表达式" class="headerlink" title="什么是 Lambda表达式"></a>什么是 Lambda表达式</h2><p> 匿名函数<br> ◆写法：[参数列表]→[函数体，最后一行是返回值I<br> 举例</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> sum<span class="token operator">=</span><span class="token punctuation">{</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int <span class="token operator">-></span>a<span class="token operator">+</span> b<span class="token punctuation">}</span></code></pre><h2 id="Lambda的类型表示举例"><a href="#Lambda的类型表示举例" class="headerlink" title="Lambda的类型表示举例"></a>Lambda的类型表示举例</h2><p> ◆0)-&gt;Unit<br> 无参，返回值为Unit<br> ◆(nt)-&gt;Int<br> 传入整型，返回一个整型<br> （String,(String)-&gt; String)-&gt;Boolean<br> 传入字符串、 Lambda表达式，返回 Boolean</p><h2 id="Lambda表达式的调用"><a href="#Lambda表达式的调用" class="headerlink" title="Lambda表达式的调用"></a>Lambda表达式的调用</h2><p> 用（) 进行调用<br> ◆等价于 invoke(<br> 举例</p><pre class=" language-kotlin"><code class="language-kotlin"> <span class="token keyword">val</span> sum<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token operator">-></span> a br <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token function">suminvoke</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></code></pre><h2 id="Lambda2表达式的简化"><a href="#Lambda2表达式的简化" class="headerlink" title="Lambda2表达式的简化"></a>Lambda2表达式的简化</h2><p> 函数参数调用时最后ー个 Lambda可以移出去<br> 函数参数只有ー个 Lambda，调用时小括号可省略<br> Lambda只有ー个参数可默认为t<br> 入参、返回值与形参一致的函数可以用函数引用的<br> 方式作为实参传入</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据类型</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/shu-ju-lei-xing/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/shu-ju-lei-xing/</url>
      
        <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>入门简介</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/ru-men-jian-jie/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/ru-men-jian-jie/</url>
      
        <content type="html"><![CDATA[<p>[Toc]</p><p>官方网站：<a href="https://kotlinlang.org/https://kotlinlang.org/" target="_blank" rel="noopener">https://kotlinlang.org/https://kotlinlang.org/</a></p><p>标语：*<strong>一种让开发人员***<br>*</strong>更快乐的现代编程语言。***<br><strong><em>永远开源<a href="https://github.com/JetBrains/kotlin" target="_blank" rel="noopener">github</a></em></strong></p><blockquote><p>Kotlin的由来，就是因为java语言的缺点null 空指针，在学习android时经常发生空指针异常的情况，这是编译器无法在编写代码时给出提示，而Kotlin解决了这一问题。</p><p>我之前一直以为kotlin是Android团队开发的，不过现在才知道JetBrains公司才是大佬！</p></blockquote><blockquote><p>编程语言大致分为<strong>编译语言</strong>和<strong>解释型语言</strong></p><p>编译语言：将编写的源代码一次性编译成二进制文件，然后由系统直接执行，如C语言</p><p>解释性语言：需要一个解释器，在程序执行时解释器会一行行的读取我们的源代码，然后实时地将其解释为二进制数据再执行，如JAVAY</p></blockquote><blockquote><p>官方推荐的 学习方式：使用idea 的插件 Edu Tools，不过里边都是英文的教程，可以用翻译插件</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>入门基础学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/ru-men-ji-chu-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/ru-men-ji-chu-xue-xi/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="1-编程的基础知识"><a href="#1-编程的基础知识" class="headerlink" title="1. 编程的基础知识"></a>1. 编程的基础知识</h1><h2 id="1-1-Hello-World"><a href="#1-1-Hello-World" class="headerlink" title="1.1 Hello World"></a>1.1 Hello World</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p><code>println()</code>需要单个参数，即 。通过将字符放在引号内来定义 。显示光标的参数后，将光标移动到新行，因此后续输出将显示在下一行</p><h2 id="1-2-常量值定义var-amp-val"><a href="#1-2-常量值定义var-amp-val" class="headerlink" title="1.2 常量值定义var &amp; val"></a>1.2 常量值定义var &amp; val</h2><p>var: 可变的值</p><p>val:只能初始化，不能被重新分配</p><h2 id="1-3-函数-fun"><a href="#1-3-函数-fun" class="headerlink" title="1.3 函数 fun"></a>1.3 函数 fun</h2><p>函数结合了一组活动，是组织程序和重新使用代码的最基本方法。</p><p>将信息传递到函数中，该函数使用该信息来计算和生成结果。函数的基本形式是：</p><p>fun 方法名（参数：类型，参数：类型）：返回类型{</p><p>​    代码</p><p>​    retrun 结果</p><p>}</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">functionName</span><span class="token punctuation">(</span>p1<span class="token operator">:</span> Type1<span class="token punctuation">,</span> p2<span class="token operator">:</span> Type2<span class="token punctuation">,</span> <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">:</span> ReturnType <span class="token punctuation">{</span>  lines of code  <span class="token keyword">return</span> result<span class="token punctuation">}</span></code></pre><h2 id="1-4-if表达式"><a href="#1-4-if表达式" class="headerlink" title="1.4 if表达式"></a>1.4 if表达式</h2><p>关键字测试表达式以查看它是否是 或 以及根据结果执行操作。真假的表达叫做布尔</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"It's true!"</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"10 &lt; 11"</span><span class="token punctuation">)</span>    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ten is less than eleven"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:It's true!10 &lt; 11ten is less than eleven*/</span></code></pre><h2 id="1-5-字符串模板"><a href="#1-5-字符串模板" class="headerlink" title="1.5 字符串模板"></a>1.5 字符串模板</h2><p>模板会将该标识符的内容插入到 ：<code>$``String``String</code></p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">val</span> answer <span class="token operator">=</span> <span class="token number">42</span>  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Found <span class="token interpolation variable">$answer</span>!"</span><span class="token punctuation">)</span>     <span class="token comment" spellcheck="true">// [1]</span>  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"printing a <span class="token interpolation variable">$1</span>"</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// [2]</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:Found 42!printing a $1*/</span></code></pre><p>将表达式放在内部将对其进行计算。返回值转换为 ，并插入到生成的 ：<code>${}``String``String</code></p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">val</span> condition <span class="token operator">=</span> <span class="token boolean">true</span>  <span class="token function">println</span><span class="token punctuation">(</span>    <span class="token string">"<span class="token interpolation"><span class="token delimiter variable">${</span><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token string">'a'</span> <span class="token keyword">else</span> <span class="token string">'b'</span><span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// [1]</span>  <span class="token keyword">val</span> x <span class="token operator">=</span> <span class="token number">11</span>  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"<span class="token interpolation variable">$x</span> + 4 = <span class="token interpolation"><span class="token delimiter variable">${</span>x <span class="token operator">+</span> <span class="token number">4</span><span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:a11 + 4 = 15*/</span></code></pre><p>1.6 数字类型</p><p>数字的基本数学运算符是大多数编程语言中可用的运算符：加法（）、减法（）、除法（）、乘法（）和模量（），它们从整数除法生成剩余数：<code>+``-``/``*``%</code></p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">val</span> numerator<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">19</span>  <span class="token keyword">val</span> denominator<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">10</span>  <span class="token function">println</span><span class="token punctuation">(</span>numerator <span class="token operator">%</span> denominator<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:9*/</span></code></pre><p>计算<em>身体质量指数</em>（BMI），即重量（以公斤为单位）除以高度的平方（米）。如果你的体重指数低于 ，你体重不足。和 之间是正常的权重。体重指数越高，体重超标</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">bmiMetric</span><span class="token punctuation">(</span>  weight<span class="token operator">:</span> Double<span class="token punctuation">,</span>  height<span class="token operator">:</span> Double<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>  <span class="token keyword">val</span> bmi <span class="token operator">=</span> weight <span class="token operator">/</span> <span class="token punctuation">(</span>height <span class="token operator">*</span> height<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// [1]</span>  <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bmi <span class="token operator">&lt;</span> <span class="token number">18.5</span><span class="token punctuation">)</span> <span class="token string">"体重不足"</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bmi <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token string">"体重正常"</span>    <span class="token keyword">else</span> <span class="token string">"体重超重"</span><span class="token punctuation">}</span><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">val</span> weight <span class="token operator">=</span> <span class="token number">72.57</span> <span class="token comment" spellcheck="true">// 160 lbs</span>  <span class="token keyword">val</span> height <span class="token operator">=</span> <span class="token number">1.727</span> <span class="token comment" spellcheck="true">// 68 inches</span>  <span class="token keyword">val</span> status <span class="token operator">=</span> <span class="token function">bmiMetric</span><span class="token punctuation">(</span>weight<span class="token punctuation">,</span> height<span class="token punctuation">)</span>  <span class="token function">println</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h2 id="1-6-boolean"><a href="#1-6-boolean" class="headerlink" title="1.6 boolean"></a>1.6 boolean</h2><ul><li><code>&amp;&amp;</code>（和）： 仅在运算符左侧的表达式和右侧的表达式都是 时生成 。<code>true``Boolean``true</code></li><li><code>||</code>（或）： 如果运算符的左侧或右侧的表达式为 ，或者两者都是 ，则生成 。<code>true``true``true</code></li></ul><h2 id="1-7-while"><a href="#1-7-while" class="headerlink" title="1.7 while"></a>1.7 while</h2><p>最基本的重复形式使用关键字。只要控制布尔表达式为 ： <code>while``true</code></p><pre><code>while (Boolean-expression) {  // Code to be repeated}</code></pre><p>还有一种方法使用 ，与 关键字一起使用：<code>while``do</code></p><pre><code>do {  // Code to be repeated} while (Boolean-expression)</code></pre><h2 id="1-8-循环和范围"><a href="#1-8-循环和范围" class="headerlink" title="1.8 循环和范围"></a>1.8 循环和范围</h2><p>值集可以是整数的范围,关键字指示您正在单步执行值：<code>String``in</code></p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">for</span><span class="token punctuation">(</span>v <span class="token keyword">in</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* ... */</span> <span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">..</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hey <span class="token interpolation variable">$i</span>!"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:Hey 1!Hey 2!Hey 3!*/</span></code></pre><h2 id="1-9-关键字in"><a href="#1-9-关键字in" class="headerlink" title="1.9 关键字in"></a>1.9 关键字<code>in</code></h2><p>关键字测试值是否在一个范围内。<code>in</code></p><pre class=" language-kotlin"><code class="language-kotlin">un <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">val</span> percent <span class="token operator">=</span> <span class="token number">35</span>  <span class="token function">println</span><span class="token punctuation">(</span>percent <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">..</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:true*/</span></code></pre><h3 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h3><blockquote><p>三引号字符串不仅对多行字符串有用，而且对于创建正则表达式模式也很有用，因为您不需要用反斜杠转义反斜杠。</p><p>以下模式匹配的日期格式为<u>13.06.1992</u>(两个数字，一个点，两个数字，一个点，四个数字):</p><p>fun getPattern() = “””\d{2}.\d{2}.\d{4}”””</p><p>使用month变量重写此模式，使其匹配1992年6月13日格式的日期(两个数字、一个空格、一个月的缩写、一个空格、四个数字)。</p></blockquote><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> month <span class="token operator">=</span> <span class="token string">"(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)"</span><span class="token keyword">fun</span> <span class="token function">getPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token operator">=</span> <span class="token raw-string string">"""\d{2} <span class="token interpolation variable">$month</span> \d{4}"""</span></code></pre><h2 id="1-10-可空类型"><a href="#1-10-可空类型" class="headerlink" title="1.10 可空类型?"></a>1.10 可空类型?</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><blockquote><p>学习零安全和安全调用的Kotlin和重写以下Java代码，使它只有一个if表达式:</p></blockquote><h3 id="java写法"><a href="#java写法" class="headerlink" title="java写法"></a>java写法</h3><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendMessageToClient</span><span class="token punctuation">(</span>    <span class="token annotation punctuation">@Nullable</span> Client client<span class="token punctuation">,</span>    <span class="token annotation punctuation">@Nullable</span> String message<span class="token punctuation">,</span>    <span class="token annotation punctuation">@NotNull</span> Mailer mailer<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>client <span class="token operator">==</span> null <span class="token operator">||</span> message <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    PersonalInfo personalInfo <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">getPersonalInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>personalInfo <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    String email <span class="token operator">=</span> personalInfo<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>email <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    mailer<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="Kotlin写法"><a href="#Kotlin写法" class="headerlink" title="Kotlin写法"></a>Kotlin写法</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">sendMessageToClient</span><span class="token punctuation">(</span>        client<span class="token operator">:</span> Client<span class="token operator">?</span><span class="token punctuation">,</span> message<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span> mailer<span class="token operator">:</span> Mailer<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">val</span> email<span class="token operator">=</span>client<span class="token operator">?</span><span class="token punctuation">.</span>personalInfo<span class="token operator">?</span><span class="token punctuation">.</span>email    <span class="token keyword">if</span> <span class="token punctuation">(</span>email<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span>message<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>        mailer<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span>message<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h2 id="1-11-类对象-class"><a href="#1-11-类对象-class" class="headerlink" title="1.11 类对象(class)"></a>1.11 类对象(class)</h2><p><em>对象使用属性(val 和 var)存储数据，并使用函数对此数据执行操作。</em></p><ul><li>类: 为本质上是新数据类型的东西定义属性和函数。类也称为用户定义类型。</li><li>成员: 类的属性或函数。</li><li>成员函数: 仅用于特定对象类的函数。</li><li>创建对象: 创建类的 val 或 var。也称为创建该类的实例。</li></ul><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">val</span> r1 <span class="token operator">=</span> <span class="token function">IntRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token keyword">val</span> r2 <span class="token operator">=</span> <span class="token function">IntRange</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>  <span class="token function">println</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span>  <span class="token function">println</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">/* Output:0..105..7*/</span></code></pre><h3 id="面向对象-class"><a href="#面向对象-class" class="headerlink" title="面向对象(class)"></a>面向对象(class)</h3><h4 id="1-11-1-函数可见性"><a href="#1-11-1-函数可见性" class="headerlink" title="1.11.1 函数可见性"></a>1.11.1 函数可见性</h4><table><thead><tr><th>修饰符</th><th>kotlin</th><th>java</th></tr></thead><tbody><tr><td>private</td><td>当前类内部可见</td><td>当前类内部可见</td></tr><tr><td>public</td><td>(默认值)，所有类可见</td><td>所有类可见</td></tr><tr><td>protected</td><td>只对当前类,子类可见</td><td>只对当前类,子类可见，同一包下可见</td></tr><tr><td>internal</td><td>对同一模块的类可见</td><td>无</td></tr></tbody></table><h4 id="1-11-2-创建类"><a href="#1-11-2-创建类" class="headerlink" title="1.11.2 创建类"></a>1.11.2 创建类</h4><p>面向对象便需要创建类对象，类就是对事物的一种封装，类名通常是名词，类中可以拥有自己的字段和函数，字段是名称，函数是行为动词，面向对象还有继承，多态，等</p><ol><li><p>创建类</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Person<span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre></li><li><p>加入字段及函数</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Person<span class="token punctuation">{</span>    <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">""</span>    <span class="token keyword">var</span> age<span class="token operator">=</span><span class="token number">0</span>    <span class="token keyword">fun</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">println</span><span class="token punctuation">(</span>name<span class="token operator">+</span>age<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>类实例化</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> p<span class="token operator">=</span><span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li><li><p>类实例化操作</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> man<span class="token punctuation">{</span>    <span class="token keyword">val</span> p<span class="token operator">=</span><span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    p<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"kotlin"</span>    p<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">19</span>    p<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre></li></ol><h5 id="（1）继承"><a href="#（1）继承" class="headerlink" title="（1）继承"></a>（1）继承</h5><ol><li><p>kotlin默认所有非抽象类都是不可以被继承的，想要被继承需要 open 关键字</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">open</span> <span class="token keyword">class</span> Person<span class="token punctuation">{</span>    <span class="token operator">..</span><span class="token punctuation">.</span><span class="token punctuation">}</span></code></pre></li><li><p>Kotlin继承用 ：替代extends，（）表示构造函数</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Student<span class="token operator">:</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> name<span class="token operator">=</span><span class="token string">""</span>    <span class="token keyword">var</span> grade<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span></code></pre></li></ol><h5 id="（2）接口（interface）"><a href="#（2）接口（interface）" class="headerlink" title="（2）接口（interface）"></a>（2）接口（interface）</h5><p>基本和java一样 interface</p><p>接口是”独立和往往不相关的系统相遇和操作或相互通信的地方。因此，接口是系统不同部分之间的通信手段。</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> Study<span class="token punctuation">{</span>    <span class="token keyword">fun</span> <span class="token function">readBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//默认自动实现逻辑</span>    <span class="token keyword">fun</span> <span class="token function">doHomeworks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"do homework default implementation."</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h5 id="（3）构造函数"><a href="#（3）构造函数" class="headerlink" title="（3）构造函数"></a>（3）构造函数</h5><p>构造函数是创建新对象的特殊函数，默认都会有一个空的构造函数</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token keyword">val</span> sno<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">val</span> grade<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">val</span> student<span class="token operator">=</span><span class="token function">Student</span><span class="token punctuation">(</span><span class="token string">"a123"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span></code></pre><h6 id="主构造函数"><a href="#主构造函数" class="headerlink" title="主构造函数"></a>主构造函数</h6><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">init</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h6 id="次构造函数"><a href="#次构造函数" class="headerlink" title="次构造函数"></a>次构造函数</h6><p>当没有主构造函数时，this 改为 super</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span>String<span class="token punctuation">,</span>age<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><h4 id="特定的class"><a href="#特定的class" class="headerlink" title="特定的class"></a>特定的class</h4><h5 id="Data-class-数据类"><a href="#Data-class-数据类" class="headerlink" title="Data class 数据类"></a>Data class 数据类</h5><h5 id="object-单例类"><a href="#object-单例类" class="headerlink" title="object 单例类"></a>object 单例类</h5><p>java写法</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//禁用外部创建实例</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//单例模式</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>instance<span class="token operator">==</span>null<span class="token punctuation">)</span><span class="token punctuation">{</span>            instance<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//测试方法</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">singletonTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"singletonTest is called."</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>main<span class="token punctuation">{</span>    Singleton singleton<span class="token operator">=</span>Singleton<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    singleton<span class="token punctuation">.</span><span class="token function">singletonTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>kotlin写法</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> Singleton<span class="token punctuation">{</span>    <span class="token keyword">fun</span> <span class="token function">singletonTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"singletonTest is called."</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>main<span class="token punctuation">{</span>    Singleton<span class="token punctuation">.</span><span class="token function">singletonTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h5 id="sealed类-密封类（只有同一文件内才可使用）"><a href="#sealed类-密封类（只有同一文件内才可使用）" class="headerlink" title="sealed类 密封类（只有同一文件内才可使用）"></a>sealed类 密封类（只有同一文件内才可使用）</h5><h5 id="嵌套类-内部类-匿名类"><a href="#嵌套类-内部类-匿名类" class="headerlink" title="嵌套类 内部类 匿名类"></a>嵌套类 内部类 匿名类</h5><p>类可以嵌套在其他类中：</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> Outer <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">val</span> bar<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">class</span> Nested <span class="token punctuation">{</span>        <span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">val</span> demo <span class="token operator">=</span> Outer<span class="token punctuation">.</span><span class="token function">Nested</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// == 2</span></code></pre><h4 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h4><p>标记为内部的嵌套<em>类</em>可以访问其外部类的成员。内部类包含对外部类对象的引用：</p><pre class=" language-kot"><code class="language-kot">class Outer {    private val bar: Int = 1    inner class Inner {        fun foo() = bar    }}val demo = Outer().Inner().foo() // == 1</code></pre><h4 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h4><p>使用对象表达式创建匿名内部<a href="https://kotlinlang.org/docs/reference/object-declarations.html#object-expressions" target="_blank" rel="noopener">类实例</a>：</p><pre class=" language-kotlin"><code class="language-kotlin">window<span class="token punctuation">.</span><span class="token function">addMouseListener</span><span class="token punctuation">(</span><span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">MouseAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">mouseClicked</span><span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">mouseEntered</span><span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="1-12-Lambda-编程"><a href="#1-12-Lambda-编程" class="headerlink" title="1.12 Lambda 编程"></a>1.12 Lambda 编程</h2><p>核心思想（简化编程）,集合的函数式API是学习Lambda编程的绝佳示例</p><p>接口 List  实现类  ArraList    </p><p>​        Set                HasSet</p><p>​        Map            HasMap</p><ol><li>集合创建与遍历</li></ol><ol start="2"><li><p>集合函数式API </p></li><li><p>Java </p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kotlin常用关键字</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/kotlin-chang-yong-guan-jian-zi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/kotlin-chang-yong-guan-jian-zi/</url>
      
        <content type="html"><![CDATA[<p>官方地址:<a href="https://www.kotlincn.net/docs/reference/keyword-reference.html" target="_blank" rel="noopener">https://www.kotlincn.net/docs/reference/keyword-reference.html</a></p><h2 id="硬关键字"><a href="#硬关键字" class="headerlink" title="硬关键字"></a>硬关键字</h2><p>以下符号会始终解释为关键字，不能用作标识符：</p><ul><li><pre><code>as</code></pre><ul><li>用于<a href="https://www.kotlincn.net/docs/reference/typecasts.html#%E4%B8%8D%E5%AE%89%E5%85%A8%E7%9A%84%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener">类型转换</a></li><li>为<a href="https://www.kotlincn.net/docs/reference/packages.html#%E5%AF%BC%E5%85%A5" target="_blank" rel="noopener">导入指定一个别名</a></li></ul></li><li><p><code>as?</code> 用于<a href="https://www.kotlincn.net/docs/reference/typecasts.html#%E5%AE%89%E5%85%A8%E7%9A%84%E5%8F%AF%E7%A9%BA%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener">安全类型转换</a></p></li><li><p><code>break</code> <a href="https://www.kotlincn.net/docs/reference/returns.html" target="_blank" rel="noopener">终止循环的执行</a></p></li><li><p><code>class</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/classes.html" target="_blank" rel="noopener">类</a></p></li><li><p><code>continue</code> <a href="https://www.kotlincn.net/docs/reference/returns.html" target="_blank" rel="noopener">继续最近层循环的下一步</a></p></li><li><p><code>do</code> 开始一个 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#while-%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener">do/while 循环</a>（后置条件的循环）</p></li><li><p><code>else</code> 定义一个 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#if-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">if 表达式</a>条件为 false 时执行的分支</p></li><li><p><code>false</code> 指定<a href="https://www.kotlincn.net/docs/reference/basic-types.html#%E5%B8%83%E5%B0%94" target="_blank" rel="noopener">布尔类型</a>的“假”值</p></li><li><p><code>for</code> 开始一个 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#for-%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener">for 循环</a></p></li><li><p><code>fun</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/functions.html" target="_blank" rel="noopener">函数</a></p></li><li><p><code>if</code> 开始一个 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#if-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">if 表达式</a></p></li><li><pre><code>in</code></pre><ul><li>指定在 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#for-%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener">for 循环</a>中迭代的对象</li><li>用作中缀操作符以检测一个值属于<a href="https://www.kotlincn.net/docs/reference/ranges.html" target="_blank" rel="noopener">一个区间</a>、 一个集合或者其他<a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#in" target="_blank" rel="noopener">定义“contains”方法</a>的实体</li><li>在 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">when 表达式中</a>用于上述目的</li><li>将一个类型参数标记为<a href="https://www.kotlincn.net/docs/reference/generics.html#%E5%A3%B0%E6%98%8E%E5%A4%84%E5%9E%8B%E5%8F%98" target="_blank" rel="noopener">逆变</a></li></ul></li><li><pre><code>!in</code></pre><ul><li>用作中缀操作符以检测一个值<strong>不</strong>属于<a href="https://www.kotlincn.net/docs/reference/ranges.html" target="_blank" rel="noopener">一个区间</a>、 一个集合或者其他<a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#in" target="_blank" rel="noopener">定义“contains”方法</a>的实体</li><li>在 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">when 表达式中</a>用于上述目的</li></ul></li><li><p><code>interface</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/interfaces.html" target="_blank" rel="noopener">接口</a></p></li><li><pre><code>is</code></pre><ul><li>检测<a href="https://www.kotlincn.net/docs/reference/typecasts.html#is-%E4%B8%8E-is-%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener">一个值具有指定类型</a></li><li>在 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">when 表达式中</a>用于上述目的</li></ul></li><li><pre><code>!is</code></pre><ul><li>检测<a href="https://www.kotlincn.net/docs/reference/typecasts.html#is-%E4%B8%8E-is-%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener">一个值<strong>不</strong>具有指定类型</a></li><li>在 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">when 表达式中</a>用于上述目的</li></ul></li><li><p><code>null</code> 是表示不指向任何对象的对象引用的常量</p></li><li><p><code>object</code> 同时声明<a href="https://www.kotlincn.net/docs/reference/object-declarations.html" target="_blank" rel="noopener">一个类及其实例</a></p></li><li><p><code>package</code> 指定<a href="https://www.kotlincn.net/docs/reference/packages.html" target="_blank" rel="noopener">当前文件的包</a></p></li><li><p><code>return</code> <a href="https://www.kotlincn.net/docs/reference/returns.html" target="_blank" rel="noopener">从最近层的函数或匿名函数返回</a></p></li><li><pre><code>super</code></pre><ul><li><a href="https://www.kotlincn.net/docs/reference/classes.html#%E8%B0%83%E7%94%A8%E8%B6%85%E7%B1%BB%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener">引用一个方法或属性的超类实现</a></li><li><a href="https://www.kotlincn.net/docs/reference/classes.html#%E7%BB%A7%E6%89%BF" target="_blank" rel="noopener">在次构造函数中调用超类构造函数</a></li></ul></li><li><pre><code>this</code></pre><ul><li>引用<a href="https://www.kotlincn.net/docs/reference/this-expressions.html" target="_blank" rel="noopener">当前接收者</a></li><li><a href="https://www.kotlincn.net/docs/reference/classes.html#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">在次构造函数中调用同一个类的另一个构造函数</a></li></ul></li><li><p><code>throw</code> <a href="https://www.kotlincn.net/docs/reference/exceptions.html" target="_blank" rel="noopener">抛出一个异常</a></p></li><li><p><code>true</code> 指定<a href="https://www.kotlincn.net/docs/reference/basic-types.html#%E5%B8%83%E5%B0%94" target="_blank" rel="noopener">布尔类型</a>的“真”值</p></li><li><p><code>try</code> <a href="https://www.kotlincn.net/docs/reference/exceptions.html" target="_blank" rel="noopener">开始一个异常处理块</a></p></li><li><p><code>typealias</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/type-aliases.html" target="_blank" rel="noopener">类型别名</a></p></li><li><p><code>typeof</code> 保留以供未来使用</p></li><li><p><code>val</code> 声明一个只读<a href="https://www.kotlincn.net/docs/reference/properties.html" target="_blank" rel="noopener">属性</a>或<a href="https://www.kotlincn.net/docs/reference/basic-syntax.html#defining-variables" target="_blank" rel="noopener">局部变量</a></p></li><li><p><code>var</code> 声明一个可变<a href="https://www.kotlincn.net/docs/reference/properties.html" target="_blank" rel="noopener">属性</a>或<a href="https://www.kotlincn.net/docs/reference/basic-syntax.html#defining-variables" target="_blank" rel="noopener">局部变量</a></p></li><li><p><code>when</code> 开始一个 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">when 表达式</a>（执行其中一个给定分支）</p></li><li><p><code>while</code> 开始一个 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#while-%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener">while 循环</a>（前置条件的循环）</p></li></ul><h2 id="软关键字"><a href="#软关键字" class="headerlink" title="软关键字"></a>软关键字</h2><p>以下符号在适用的上下文中充当关键字，而在其他上下文中可用作标识符：</p><ul><li><pre><code>by</code></pre><ul><li><a href="https://www.kotlincn.net/docs/reference/delegation.html" target="_blank" rel="noopener">将接口的实现委托给另一个对象</a></li><li><a href="https://www.kotlincn.net/docs/reference/delegated-properties.html" target="_blank" rel="noopener">将属性访问器的实现委托给另一个对象</a></li></ul></li><li><p><code>catch</code> 开始一个<a href="https://www.kotlincn.net/docs/reference/exceptions.html" target="_blank" rel="noopener">处理指定异常类型</a>的块</p></li><li><p><code>constructor</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/classes.html#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">主构造函数或次构造函数</a></p></li><li><p><code>delegate</code> 用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><p><code>dynamic</code> 引用一个 Kotlin/JS 代码中的<a href="https://www.kotlincn.net/docs/reference/dynamic-type.html" target="_blank" rel="noopener">动态类型</a></p></li><li><p><code>field</code> 用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><p><code>file</code> 用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><p><code>finally</code> 开始一个<a href="https://www.kotlincn.net/docs/reference/exceptions.html" target="_blank" rel="noopener">当 try 块退出时总会执行的块</a></p></li><li><pre><code>get</code></pre><ul><li>声明<a href="https://www.kotlincn.net/docs/reference/properties.html#getters-%E4%B8%8E-setters" target="_blank" rel="noopener">属性的 getter</a></li><li>用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></li></ul></li><li><p><code>import</code> <a href="https://www.kotlincn.net/docs/reference/packages.html" target="_blank" rel="noopener">将另一个包中的声明导入当前文件</a></p></li><li><p><code>init</code> 开始一个<a href="https://www.kotlincn.net/docs/reference/classes.html#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">初始化块</a></p></li><li><p><code>param</code> 用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><p><code>property</code> 用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><p><code>receiver</code>用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><pre><code>set</code></pre><ul><li>声明<a href="https://www.kotlincn.net/docs/reference/properties.html#getters-%E4%B8%8E-setters" target="_blank" rel="noopener">属性的 setter</a></li><li>用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></li></ul></li><li><p><code>setparam</code> 用作<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E6%B3%A8%E8%A7%A3%E4%BD%BF%E7%94%A8%E5%A4%84%E7%9B%AE%E6%A0%87" target="_blank" rel="noopener">注解使用处目标</a></p></li><li><p><code>where</code> 指定<a href="https://www.kotlincn.net/docs/reference/generics.html#%E4%B8%8A%E7%95%8C" target="_blank" rel="noopener">泛型类型参数的约束</a></p></li></ul><h2 id="修饰符关键字"><a href="#修饰符关键字" class="headerlink" title="修饰符关键字"></a>修饰符关键字</h2><p>以下符号作为声明中修饰符列表中的关键字，并可用作其他上下文中的标识符：</p><ul><li><code>actual</code> 表示<a href="https://www.kotlincn.net/docs/reference/multiplatform.html" target="_blank" rel="noopener">多平台项目</a>中的一个平台相关实现</li><li><code>abstract</code> 将一个类或成员标记为<a href="https://www.kotlincn.net/docs/reference/classes.html#%E6%8A%BD%E8%B1%A1%E7%B1%BB" target="_blank" rel="noopener">抽象</a></li><li><code>annotation</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/annotations.html" target="_blank" rel="noopener">注解类</a></li><li><code>companion</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/object-declarations.html#%E4%BC%B4%E7%94%9F%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener">伴生对象</a></li><li><code>const</code> 将属性标记为<a href="https://www.kotlincn.net/docs/reference/properties.html#%E7%BC%96%E8%AF%91%E6%9C%9F%E5%B8%B8%E9%87%8F" target="_blank" rel="noopener">编译期常量</a></li><li><code>crossinline</code> 禁止<a href="https://www.kotlincn.net/docs/reference/inline-functions.html#%E9%9D%9E%E5%B1%80%E9%83%A8%E8%BF%94%E5%9B%9E" target="_blank" rel="noopener">传递给内联函数的 lambda 中的非局部返回</a></li><li><code>data</code> 指示编译器<a href="https://www.kotlincn.net/docs/reference/data-classes.html" target="_blank" rel="noopener">为类生成典型成员</a></li><li><code>enum</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/enum-classes.html" target="_blank" rel="noopener">枚举</a></li><li><code>expect</code> 将一个声明标记为<a href="https://www.kotlincn.net/docs/reference/multiplatform.html" target="_blank" rel="noopener">平台相关</a>，并期待在平台模块中实现。</li><li><code>external</code> 将一个声明标记为不是在 Kotlin 中实现（通过 <a href="https://www.kotlincn.net/docs/reference/java-interop.html#%E5%9C%A8-kotlin-%E4%B8%AD%E4%BD%BF%E7%94%A8-jni" target="_blank" rel="noopener">JNI</a> 访问或者在 <a href="https://www.kotlincn.net/docs/reference/js-interop.html#external-%E4%BF%AE%E9%A5%B0%E7%AC%A6" target="_blank" rel="noopener">JavaScript</a> 中实现）</li><li><code>final</code> 禁止<a href="https://www.kotlincn.net/docs/reference/classes.html#%E8%A6%86%E7%9B%96%E6%96%B9%E6%B3%95" target="_blank" rel="noopener">成员覆盖</a></li><li><code>infix</code> 允许以<a href="https://www.kotlincn.net/docs/reference/functions.html#%E4%B8%AD%E7%BC%80%E8%A1%A8%E7%A4%BA%E6%B3%95" target="_blank" rel="noopener">中缀表示法</a>调用函数</li><li><code>inline</code> 告诉编译器<a href="https://www.kotlincn.net/docs/reference/inline-functions.html" target="_blank" rel="noopener">在调用处内联传给它的函数和 lambda 表达式</a></li><li><code>inner</code> 允许在<a href="https://www.kotlincn.net/docs/reference/nested-classes.html" target="_blank" rel="noopener">嵌套类</a>中引用外部类实例</li><li><code>internal</code> 将一个声明标记为<a href="https://www.kotlincn.net/docs/reference/visibility-modifiers.html" target="_blank" rel="noopener">在当前模块中可见</a></li><li><code>lateinit</code> 允许<a href="https://www.kotlincn.net/docs/reference/properties.html#%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B1%9E%E6%80%A7%E4%B8%8E%E5%8F%98%E9%87%8F" target="_blank" rel="noopener">在构造函数之外初始化非空属性</a></li><li><code>noinline</code> 关闭<a href="https://www.kotlincn.net/docs/reference/inline-functions.html#%E7%A6%81%E7%94%A8%E5%86%85%E8%81%94" target="_blank" rel="noopener">传给内联函数的 lambda 表达式的内联</a></li><li><code>open</code> 允许<a href="https://www.kotlincn.net/docs/reference/classes.html#%E7%BB%A7%E6%89%BF" target="_blank" rel="noopener">一个类子类化或覆盖成员</a></li><li><code>operator</code> 将一个函数标记为<a href="https://www.kotlincn.net/docs/reference/operator-overloading.html" target="_blank" rel="noopener">重载一个操作符或者实现一个约定</a></li><li><code>out</code> 将类型参数标记为<a href="https://www.kotlincn.net/docs/reference/generics.html#%E5%A3%B0%E6%98%8E%E5%A4%84%E5%9E%8B%E5%8F%98" target="_blank" rel="noopener">协变</a></li><li><code>override</code> 将一个成员标记为<a href="https://www.kotlincn.net/docs/reference/classes.html#%E8%A6%86%E7%9B%96%E6%96%B9%E6%B3%95" target="_blank" rel="noopener">超类成员的覆盖</a></li><li><code>private</code> 将一个声明标记为<a href="https://www.kotlincn.net/docs/reference/visibility-modifiers.html" target="_blank" rel="noopener">在当前类或文件中可见</a></li><li><code>protected</code> 将一个声明标记为<a href="https://www.kotlincn.net/docs/reference/visibility-modifiers.html" target="_blank" rel="noopener">在当前类及其子类中可见</a></li><li><code>public</code> 将一个声明标记为<a href="https://www.kotlincn.net/docs/reference/visibility-modifiers.html" target="_blank" rel="noopener">在任何地方可见</a></li><li><code>reified</code> 将内联函数的类型参数标记为<a href="https://www.kotlincn.net/docs/reference/inline-functions.html#%E5%85%B7%E4%BD%93%E5%8C%96%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0" target="_blank" rel="noopener">在运行时可访问</a></li><li><code>sealed</code> 声明一个<a href="https://www.kotlincn.net/docs/reference/sealed-classes.html" target="_blank" rel="noopener">密封类</a>（限制子类化的类）</li><li><code>suspend</code> 将一个函数或 lambda 表达式标记为挂起式（可用做<a href="https://www.kotlincn.net/docs/reference/coroutines.html" target="_blank" rel="noopener">协程</a>）</li><li><code>tailrec</code> 将一个函数标记为<a href="https://www.kotlincn.net/docs/reference/functions.html#%E5%B0%BE%E9%80%92%E5%BD%92%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">尾递归</a>（允许编译器将递归替换为迭代）</li><li><code>vararg</code> 允许<a href="https://www.kotlincn.net/docs/reference/functions.html#%E5%8F%AF%E5%8F%98%E6%95%B0%E9%87%8F%E7%9A%84%E5%8F%82%E6%95%B0varargs" target="_blank" rel="noopener">一个参数传入可变数量的参数</a></li></ul><h2 id="特殊标识符"><a href="#特殊标识符" class="headerlink" title="特殊标识符"></a>特殊标识符</h2><p>以下标识符由编译器在指定上下文中定义，并且可以用作其他上下文中的常规标识符：</p><ul><li><code>field</code> 用在属性访问器内部来引用该<a href="https://www.kotlincn.net/docs/reference/properties.html#%E5%B9%95%E5%90%8E%E5%AD%97%E6%AE%B5" target="_blank" rel="noopener">属性的幕后字段</a></li><li><code>it</code> 用在 lambda 表达式内部来<a href="https://www.kotlincn.net/docs/reference/lambdas.html#it%E5%8D%95%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E9%9A%90%E5%BC%8F%E5%90%8D%E7%A7%B0" target="_blank" rel="noopener">隐式引用其参数</a></li></ul><h2 id="操作符和特殊符号"><a href="#操作符和特殊符号" class="headerlink" title="操作符和特殊符号"></a>操作符和特殊符号</h2><p>Kotlin 支持以下操作符和特殊符号：</p><ul><li><pre><code>+ - * / %</code></pre><p>—— 数学操作符</p><ul><li><code>*</code> 也用于<a href="https://www.kotlincn.net/docs/reference/functions.html#%E5%8F%AF%E5%8F%98%E6%95%B0%E9%87%8F%E7%9A%84%E5%8F%82%E6%95%B0varargs" target="_blank" rel="noopener">将数组传递给 vararg 参数</a></li></ul></li><li><pre><code>=</code></pre><ul><li>赋值操作符</li><li>也用于指定<a href="https://www.kotlincn.net/docs/reference/functions.html#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0" target="_blank" rel="noopener">参数的默认值</a></li></ul></li><li><p><code>+=</code>、 <code>-=</code>、 <code>*=</code>、 <code>/=</code>、 <code>%=</code> —— <a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#assignments" target="_blank" rel="noopener">广义赋值操作符</a></p></li><li><p><code>++</code>、 <code>--</code> —— <a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#%E9%80%92%E5%A2%9E%E4%B8%8E%E9%80%92%E5%87%8F" target="_blank" rel="noopener">递增与递减操作符</a></p></li><li><p><code>&amp;&amp;</code>、 <code>||</code>、 <code>!</code> —— 逻辑“与”、“或”、“非”操作符（对于位运算，请使用相应的<a href="https://www.kotlincn.net/docs/reference/basic-types.html#%E8%BF%90%E7%AE%97" target="_blank" rel="noopener">中缀函数</a>）</p></li><li><p><code>==</code>、 <code>!=</code> —— <a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#equals" target="_blank" rel="noopener">相等操作符</a>（对于非原生类型会翻译为调用 <code>equals()</code>）</p></li><li><p><code>===</code>、 <code>!==</code> —— <a href="https://www.kotlincn.net/docs/reference/equality.html#%E5%BC%95%E7%94%A8%E7%9B%B8%E7%AD%89" target="_blank" rel="noopener">引用相等操作符</a></p></li><li><p><code>&lt;</code>、 <code>&gt;</code>、 <code>&lt;=</code>、 <code>&gt;=</code> —— <a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#comparison" target="_blank" rel="noopener">比较操作符</a>（对于非原生类型会翻译为调用 <code>compareTo()</code>）</p></li><li><p><code>[</code>、 <code>]</code> —— <a href="https://www.kotlincn.net/docs/reference/operator-overloading.html#indexed" target="_blank" rel="noopener">索引访问操作符</a>（会翻译为调用 <code>get</code> 与 <code>set</code>）</p></li><li><p><code>!!</code> <a href="https://www.kotlincn.net/docs/reference/null-safety.html#-%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener">断言一个表达式非空</a></p></li><li><p><code>?.</code> 执行<a href="https://www.kotlincn.net/docs/reference/null-safety.html#%E5%AE%89%E5%85%A8%E7%9A%84%E8%B0%83%E7%94%A8" target="_blank" rel="noopener">安全调用</a>（如果接收者非空，就调用一个方法或访问一个属性）</p></li><li><p><code>?:</code> 如果左侧的值为空，就取右侧的值（<a href="https://www.kotlincn.net/docs/reference/null-safety.html#elvis-%E6%93%8D%E4%BD%9C%E7%AC%A6" target="_blank" rel="noopener">elvis 操作符</a>）</p></li><li><p><code>::</code> 创建一个<a href="https://www.kotlincn.net/docs/reference/reflection.html#%E5%87%BD%E6%95%B0%E5%BC%95%E7%94%A8" target="_blank" rel="noopener">成员引用</a>或者一个<a href="https://www.kotlincn.net/docs/reference/reflection.html#%E7%B1%BB%E5%BC%95%E7%94%A8" target="_blank" rel="noopener">类引用</a></p></li><li><p><code>..</code> 创建一个<a href="https://www.kotlincn.net/docs/reference/ranges.html" target="_blank" rel="noopener">区间</a></p></li><li><p><code>:</code> 分隔声明中的名称与类型</p></li><li><p><code>?</code> 将类型标记为<a href="https://www.kotlincn.net/docs/reference/null-safety.html#%E5%8F%AF%E7%A9%BA%E7%B1%BB%E5%9E%8B%E4%B8%8E%E9%9D%9E%E7%A9%BA%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener">可空</a></p></li><li><pre><code>-&gt;</code></pre><ul><li>分隔 <a href="https://www.kotlincn.net/docs/reference/lambdas.html#lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E6%B3%95" target="_blank" rel="noopener">lambda 表达式</a>的参数与主体</li><li>分隔在<a href="https://www.kotlincn.net/docs/reference/lambdas.html#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B" target="_blank" rel="noopener">函数类型</a>中的参数类型与返回类型声明</li><li>分隔 <a href="https://www.kotlincn.net/docs/reference/control-flow.html#when-%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">when 表达式</a>分支的条件与代码体</li></ul></li><li><pre><code>@</code></pre><ul><li>引入一个<a href="https://www.kotlincn.net/docs/reference/annotations.html#%E7%94%A8%E6%B3%95" target="_blank" rel="noopener">注解</a></li><li>引入或引用一个<a href="https://www.kotlincn.net/docs/reference/returns.html#break-%E4%B8%8E-continue-%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">循环标签</a></li><li>引入或引用一个 <a href="https://www.kotlincn.net/docs/reference/returns.html#%E8%BF%94%E5%9B%9E%E5%88%B0%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">lambda 表达式标签</a></li><li>引用一个来自外部作用域的 <a href="https://www.kotlincn.net/docs/reference/this-expressions.html#%E9%99%90%E5%AE%9A%E7%9A%84-this" target="_blank" rel="noopener">“this”表达式</a></li><li>引用一个<a href="https://www.kotlincn.net/docs/reference/classes.html#%E8%B0%83%E7%94%A8%E8%B6%85%E7%B1%BB%E5%AE%9E%E7%8E%B0" target="_blank" rel="noopener">外部超类</a></li></ul></li><li><p><code>;</code> 分隔位于同一行的多个语句</p></li><li><p><code>$</code> 在<a href="https://www.kotlincn.net/docs/reference/basic-types.html#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A8%A1%E6%9D%BF" target="_blank" rel="noopener">字符串模版</a>中引用变量或者表达式</p></li><li><pre><code>_</code></pre><ul><li>在 <a href="https://www.kotlincn.net/docs/reference/lambdas.html#%E4%B8%8B%E5%88%92%E7%BA%BF%E7%94%A8%E4%BA%8E%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%E8%87%AA-11-%E8%B5%B7" target="_blank" rel="noopener">lambda 表达式</a>中代替未使用的参数</li><li>在<a href="https://www.kotlincn.net/docs/reference/multi-declarations.html#%E4%B8%8B%E5%88%92%E7%BA%BF%E7%94%A8%E4%BA%8E%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F%E8%87%AA-11-%E8%B5%B7" target="_blank" rel="noopener">解构声明</a>中代替未使用的参数</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1.学习网址</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/1.xue-xi-wang-zhi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/kotlin-xue-xi/1.xue-xi-wang-zhi/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="官方网址"><a href="#官方网址" class="headerlink" title="官方网址"></a>官方网址</h1><h2 id="关键字查看"><a href="#关键字查看" class="headerlink" title="关键字查看"></a><a href="https://kotlinlang.org/docs/reference/keyword-reference.html#soft-keywords" target="_blank" rel="noopener">关键字查看</a></h2><p><img src="images/1.%E5%AD%A6%E4%B9%A0%E7%BD%91%E5%9D%80/image-20200729173322076.png" alt="image-20200729173322076"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>视图导航</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/shi-tu-dao-hang/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/shi-tu-dao-hang/</url>
      
        <content type="html"><![CDATA[<p>[TOC]</p><h1 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h1><p>官方文档：<a href="https://developer.android.com/guide/navigation/" target="_blank" rel="noopener">https://developer.android.com/guide/navigation/</a></p><p>youtube教程视频：<a href="https://developer.android.com/guide/navigation/" target="_blank" rel="noopener">https://developer.android.com/guide/navigation/</a></p><p>关键三部分</p><table><thead><tr><th>Navigation graph</th><th align="left">: 一个 XML 资源，其中包含一个集中位置中的所有与导航相关的信息。这包括应用内的所有单个内容区域（<em>称为目标</em>）以及用户可以通过应用可走的路径。</th></tr></thead><tbody><tr><td>NavHost Fragment</td><td align="left">显示导航图中的目的地的空容器。导航组件包含一个默认实现，<a href="https://developer.android.com/reference/androidx/navigation/fragment/NavHostFragment" target="_blank" rel="noopener"><code>即导航帧，</code></a>显示片段目标。</td></tr><tr><td>NavController</td><td align="left">管理中应用导航的对象。当用户在整个应用中移动时，协调中的目标内容的交换</td></tr></tbody></table><h2 id="开始使用Navigation"><a href="#开始使用Navigation" class="headerlink" title="开始使用Navigation"></a>开始使用Navigation</h2><ol><li><h3 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h3><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> nav_version <span class="token operator">=</span> <span class="token string">"2.3.0"</span><span class="token comment" spellcheck="true">// Kotlin</span>  implementation <span class="token string">"androidx.navigation:navigation-fragment-ktx:$nav_version"</span>  implementation <span class="token string">"androidx.navigation:navigation-ui-ktx:$nav_version"</span></code></pre><p>创建几个BlankFragment 用于页面跳转</p></li><li><h3 id="创建导航图-activity-main-xml"><a href="#创建导航图-activity-main-xml" class="headerlink" title="创建导航图 activity_main.xml"></a>创建导航图 activity_main.xml</h3><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.constraintlayout.widget.ConstraintLayout</span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    &lt;fragment        android:id="@+id/nav_host_fragment"              <span class="token comment" spellcheck="true">&lt;!-- 关键代码 start--></span>        android:name="androidx.navigation.fragment.NavHostFragment"        app:defaultNavHost="true"        app:navGraph="@navigation/nav_graph"     <span class="token comment" spellcheck="true">&lt;!-- 关键代码 end--></span>        android:layout_width="0dp"        android:layout_height="0dp"        app:layout_constraintLeft_toLeftOf="parent"        app:layout_constraintRight_toRightOf="parent"        app:layout_constraintTop_toTopOf="parent"        app:layout_constraintBottom_toBottomOf="parent" /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>androidx.constraintlayout.widget.ConstraintLayout</span><span class="token punctuation">></span></span></code></pre></li><li><h3 id="导航编辑器"><a href="#导航编辑器" class="headerlink" title="导航编辑器"></a>导航编辑器</h3><p><img src="images/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/image-20200721082952691.png" alt="image-20200721082952691"></p><p><img src="images/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/image-20200721082851327.png" alt="image-20200721082851327"></p><p><img src="images/%E8%A7%86%E5%9B%BE%E5%AF%BC%E8%88%AA/image-20200721083022645.png" alt="image-20200721083022645"></p></li><li></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础学习</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/ji-chu-xue-xi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/ji-chu-xue-xi/</url>
      
        <content type="html"><![CDATA[<p>安卓科特林基础知识包括以下课程：</p><h2 id="第-1-课：构建第一个应用"><a href="#第-1-课：构建第一个应用" class="headerlink" title="第 1 课：构建第一个应用"></a>第 1 课：构建第一个应用</h2><ul><li>官方Android开发者文档<a href="http://developer.android.com/index.html" target="_blank" rel="noopener">developer.android.com。</a></li><li><em>材料设计</em>是一种概念设计理念，它概述了应用在移动设备上的外观和功能。材料设计不仅仅适用于 Android 应用程序。材料设计指南<a href="https://material.io/" target="_blank" rel="noopener">material.io。</a></li><li>Android Studio 为常见和推荐的应用程序和活动设计提供模板。这些模板为常见用例提供工作代码。</li><li>创建项目时，可以为第一个活动选择模板。</li><li>在开发应用时，可以从内置模板创建活动和其他应用组件。</li><li><a href="https://github.com/googlesamples" target="_blank" rel="noopener">Google 示例</a>包含您可以学习、复制和合并到项目中的代码示例。</li></ul><h3 id="活动"><a href="#活动" class="headerlink" title="活动"></a><strong>活动</strong></h3><ul><li><code>MainActivity</code>是 的子类，而子类又是 。是负责绘制 Android 应用 UI 和接收输入事件的核心 Android 类。<code>AppCompatActivity``Activity``Activity</code></li><li>所有活动都有一个关联的布局文件，该文件是应用资源中的 XML 文件。布局文件为活动命名，例如 。<code>activity_main.xml</code></li><li>中的 方法将布局与活动关联，并在创建活动时膨胀该布局。<code>setContentView()``MainActivity</code></li><li>布局膨胀是将 XML 布局文件中定义的视图转换为（或”膨胀”成）Kotlin 在内存中的视图的过程。一旦布局膨胀发生，可以绘制这些对象到屏幕上，并动态修改它们。<code>Activity</code></li></ul><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a><strong>视图</strong></h3><ul><li>应用布局中的所有 UI 元素都是 View 类的子<a href="http://developer.android.com/reference/android/view/View.html" target="_blank" rel="noopener"><code>类</code></a>，称为<em>视图</em>。 和意见的例子。<code>TextView``Button</code></li><li><code>View</code>元素可以分组在视图<a href="https://developer.android.com/reference/android/view/ViewGroup.html" target="_blank" rel="noopener"><code>组中</code></a>。视图组充当视图或其他视图组的容器。 是线性排列其视图的视图组的示例。<code>LinearLayout</code></li></ul><h3 id="查看属性"><a href="#查看属性" class="headerlink" title="查看属性"></a><strong>查看属性</strong></h3><ul><li>和 属性指示视图的宽度和高度。该值将视图拉伸到其父视图的宽度或高度。该值将缩小视图以适合视图的内容。<code>android:layout_width``android:layout_height``match_parent``wrap_content</code></li><li>属性指示视图应显示的文本（如果该视图显示文本）。对于按钮，是按钮标签。<code>android:text``android:text</code></li><li>视图组中的属性排列它包含的视图元素。从左到右排列视图的值。从上到下排列视图的值。<code>android:orientation``LinearLayout``horizontal``vertical</code></li><li>属性确定视图的位置以及该视图的所有子元素。<code>android:layout_gravity</code></li><li>该属性定义文本视图中文本的大小。文本大小以 sp 单位（可伸<em>缩像素）指定</em>。通过使用 sp 单位，您可以独立于设备的显示质量调整文本的大小。<code>android:textSize</code></li></ul><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a><strong>字符串</strong></h3><ul><li>在布局中硬编码字符串，最好使用字符串资源。</li><li>文件中包含字符串资源。<code>values/res/string.xml</code></li><li>要提取字符串，请使用 （在 Mac 上）。选择<strong>从弹出式菜单</strong>中提取字符串资源。<code>Alt+Enter``Option+Enter</code></li></ul><h3 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a><strong>使用视图</strong></h3><ul><li>若要将 Kotlin 代码连接到布局中定义的视图，需要在视图膨胀后获取对视图对象的引用。将 ID （） 分配给布局中的视图，然后使用<a href="https://developer.android.com/reference/android/view/View#findViewById(int)" target="_blank" rel="noopener"><code>findViewById（）</code></a>方法获取关联的视图对象。<code>android:id</code></li><li>当您在 XML 布局文件中为视图创建 ID 时，Android Studio 会在生成的类中使用该 ID 的名称创建整数常量。然后可以在 方法中使用该引用。<code>R``R.id``findViewById()</code></li><li>您可以直接按属性名称在 Kotlin 代码中设置视图对象的属性。例如，文本视图中的文本由 XML 中的属性定义，并且由 Kotlin 中的属性定义。<code>android:text``text</code></li><li><em>单击处理程序</em>是当用户单击或点击 UI 元素时调用的方法。若要将单击处理程序方法附加到视图（如按钮），请使用 方法。<code>setOnClickListener()</code></li></ul><h3 id="使用烤面包"><a href="#使用烤面包" class="headerlink" title="使用烤面包"></a><strong>使用烤面包</strong></h3><p>Toast 是一种视图，在一个小的弹出窗口中向用户显示一条简单的消息。</p><p>若要创建 Toast，请使用[<code>三个参数在</code>](<a href="https://developer.android.com/reference/android/widget/Toast.html#makeText" target="_blank" rel="noopener">https://developer.android.com/reference/android/widget/Toast.html#makeText</a>(android.content.Context, int, int))Toast 类上调用<a href="https://developer.android.com/reference/android/widget/Toast.html" target="_blank" rel="noopener"><code>makeText（）</code></a>工厂方法：</p><ul><li><a href="https://developer.android.com/reference/android/content/Context.html" target="_blank" rel="noopener">应用</a>的上下文<code>Activity</code></li><li>要显示的消息，例如字符串资源</li><li>持续时间，例如<a href="https://developer.android.com/reference/android/widget/Toast.html#LENGTH_SHORT" target="_blank" rel="noopener"><code>Toast.LENGTH_SHORT</code></a></li></ul><p>要显示 Toast，请调用 。<code>show()</code></p><h2 id="第-2-课：布局"><a href="#第-2-课：布局" class="headerlink" title="第 2 课：布局"></a>第 2 课：布局</h2><p>Android 开发人员文档：</p><ul><li><a href="https://developer.android.com/guide/topics/ui/declaring-layout" target="_blank" rel="noopener">布局</a></li><li><a href="https://developer.android.com/reference/android/view/ViewGroup" target="_blank" rel="noopener"><code>ViewGroup</code></a></li><li><a href="https://developer.android.com/reference/android/view/View" target="_blank" rel="noopener"><code>View</code></a></li><li><a href="https://developer.android.com/guide/topics/ui/layout/linear" target="_blank" rel="noopener">线性布局</a></li><li><a href="https://developer.android.com/reference/android/widget/ScrollView" target="_blank" rel="noopener"><code>ScrollView</code></a></li><li><a href="https://developer.android.com/training/multiscreen/screendensities" target="_blank" rel="noopener">支持不同的像素密度</a>（dp）</li><li><a href="https://developer.android.com/studio/write/layout-editor.html" target="_blank" rel="noopener">使用布局编辑器构建 UI</a></li><li><a href="http://developer.android.com/tools/studio/index.html" target="_blank" rel="noopener">安卓工作室文档</a></li><li><a href="https://developer.android.com/guide/topics/ui/look-and-feel/themes" target="_blank" rel="noopener">样式和主题</a></li></ul><h3 id="1-输入框及事件监听"><a href="#1-输入框及事件监听" class="headerlink" title="1. 输入框及事件监听"></a>1. 输入框及事件监听</h3><ul><li>Android<a href="https://developer.android.com/studio/write/layout-editor" target="_blank" rel="noopener">工作室中的</a>布局编辑器工具是一个可视化设计编辑器。您可以使用布局编辑器通过将 UI 元素拖动到布局中来构建应用的布局。</li><li><a href="https://developer.android.com/reference/android/widget/EditText" target="_blank" rel="noopener"><code>EditText</code></a>是允许用户输入和修改文本的 UI 元素。</li><li><a href="https://developer.android.com/reference/android/widget/Button" target="_blank" rel="noopener"><code>按钮</code></a>是用户可以点击执行操作的 UI 元素。按钮可以由文本、图标或文本和图标组成。</li></ul><p>单击侦听器</p><ul><li>您可以通过向点击侦听器添加单击侦听器来对被点击做出任何响应。<code>View</code></li><li>定义单击侦听器的函数接收被单击的 。<code>View</code></li></ul><p>可以通过两种方式之一将单击侦听器函数附加到 ：<code>View</code></p><ul><li>在 XML 布局中，将<a href="https://developer.android.com/reference/android/R.attr.html#onClick" target="_blank" rel="noopener"><code>android：onClick</code></a>属性添加到*<code>View</code>*元素。<code>&lt;``&gt;</code></li><li>以编程方式，在相应的 中使用<a href="https://developer.android.com/reference/android/view/View.html#setOnClickListener(android.view.View.OnClickListener)" target="_blank" rel="noopener"><code>setOnClickListener（View.OnClickListener）</code></a>函数。<code>Activity</code></li></ul><h3 id="2-使用布局编辑器约束布局-ConstraintLayout"><a href="#2-使用布局编辑器约束布局-ConstraintLayout" class="headerlink" title="2. 使用布局编辑器约束布局 ConstraintLayout"></a>2. 使用布局编辑器约束布局 ConstraintLayout</h3><p>官方教程：<a href="https://codelabs.developers.google.com/codelabs/kotlin-android-training-constraint-layout/index.html#3" target="_blank" rel="noopener">https://codelabs.developers.google.com/codelabs/kotlin-android-training-constraint-layout/index.html#3</a></p><h3 id="3-数据绑定基础知识"><a href="#3-数据绑定基础知识" class="headerlink" title="3. 数据绑定基础知识"></a>3. 数据绑定基础知识</h3><h3 id="Android-studio-4-0实现了自动绑定-id-可以直接使用id"><a href="#Android-studio-4-0实现了自动绑定-id-可以直接使用id" class="headerlink" title="Android studio 4.0实现了自动绑定 id 可以直接使用id"></a>Android studio 4.0实现了自动绑定 id 可以直接使用id</h3><pre><code>apply plugin: 'kotlin-android-extensions'</code></pre><p>使用数据绑定替换对 的调用的步骤：<code>findViewById()</code></p><ol><li><p>在文件的 Android 部分启用数据绑定：<code>build.gradle</code><br><code>dataBinding { enabled = true }</code></p></li><li><p>用作 XML 布局中的根视图。<code>&lt;layout&gt;</code></p></li><li><p>定义绑定变量：<br><code>private lateinit var binding: ActivityMainBinding</code></p></li><li><p>在 中创建绑定对象，替换 ：<code>MainActivity``setContentView</code><br><code>binding = DataBindingUtil.setContentView(this, R.layout.activity_main)</code></p></li><li><h1 id="将-的调用替换为对绑定对象中视图的引用。例如："><a href="#将-的调用替换为对绑定对象中视图的引用。例如：" class="headerlink" title="将 的调用替换为对绑定对象中视图的引用。例如："></a>将 的调用替换为对绑定对象中视图的引用。例如：</h1><p>（在示例中，视图的名称从 XML 中的视图生成骆驼大小写。<code>findViewById()``findViewById&lt;Button&gt;(R.id.done_button)``binding.doneButton``id</code></p></li></ol><p>将视图绑定到数据的步骤：</p><ol><li>为数据创建数据类。</li><li>在标记内添加块。<code>&lt;data&gt;``&lt;layout&gt;</code></li><li>定义 具有名称的类型，以及作为数据类的类型。<code>&lt;variable&gt;</code></li></ol><pre><code>&lt;data&gt;   &lt;variable       name="myName"       type="com.example.android.aboutme.MyName" /&gt;&lt;/data&gt;</code></pre><ol><li><p>在 中，使用数据类的实例创建一个变量。例如：<code>MainActivity</code><br><code>private val myName: MyName = MyName("Aleks Haecky")</code></p></li><li><p>在绑定对象中，将变量设置为刚刚创建的变量：<br><code>binding.myName = myName</code></p></li><li><p>在 XML 中，将视图的内容设置为在块中定义的变量。使用点符号访问数据类内的数据。<code>&lt;data&gt;</code><br><code>android:text="@={myName.name}"</code></p></li></ol><h2 id="第-3-课：导航"><a href="#第-3-课：导航" class="headerlink" title="第 3 课：导航"></a>第 3 课：导航</h2><h3 id="1-创建片段-Fragment"><a href="#1-创建片段-Fragment" class="headerlink" title="1. 创建片段(Fragment)"></a>1. 创建片段(Fragment)</h3><p><img src="https://developer.android.com/images/fragment_lifecycle.png" alt="img">fragment生命周期</p><h3 id="2-定义导航路径"><a href="#2-定义导航路径" class="headerlink" title="2. 定义导航路径"></a>2. 定义导航路径</h3><h3 id="3-启动外部活动"><a href="#3-启动外部活动" class="headerlink" title="3. 启动外部活动"></a>3. 启动外部活动</h3><h2 id="第-4-课：活动和片段生命周期"><a href="#第-4-课：活动和片段生命周期" class="headerlink" title="第 4 课：活动和片段生命周期"></a>第 4 课：活动和片段生命周期</h2><h3 id="4-1生命周期和日志记录"><a href="#4-1生命周期和日志记录" class="headerlink" title="4.1生命周期和日志记录"></a>4.1生命周期和日志记录</h3><p><img src="images/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image-20200721131037492.png" alt="image-20200721131037492"></p><p><img src="images/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/image-20200721131000138.png" alt="image-20200721130945421"></p><p>AS快捷键ctrl+o（选择方法，重写）</p><table><thead><tr><th>生命周期函数</th><th>说明</th><th>注意</th></tr></thead><tbody><tr><td>onCreate()</td><td>活动执行任何一次初始化</td><td>该方法是重写，因此在它里面，必须立即调用 。其他生命周期方法也是如此。<code>onCreate()``super.onCreate()</code></td></tr><tr><td>onStart（）</td><td>生命周期方法在 刚刚调用。运行后，您的活动在屏幕上可见。与 不同，在活动的生命周期中，可以多次调用（仅调用一次以初始化活动）</td><td>注意，它与相应的生命周期方法配对。如果用户启动应用，然后返回到设备主屏幕，则活动将停止，并且不再在屏幕上可见。<code>onStart()``onStop()</code></td></tr><tr><td>onResume()</td><td>为活动提供焦点，并准备好让用户与其进行交互。</td><td></td></tr><tr><td>onPause()</td><td>应用不再在屏幕上可见</td><td></td></tr><tr><td>onRestart()</td><td>活动返回到前台</td><td></td></tr><tr><td>onStop()</td><td>停止活动</td><td></td></tr><tr><td>onDestroy()</td><td>应用销毁</td><td></td></tr></tbody></table><h4 id="片段的整个启动生命周期，包括这些回调："><a href="#片段的整个启动生命周期，包括这些回调：" class="headerlink" title="片段的整个启动生命周期，包括这些回调："></a>片段的整个启动生命周期，包括这些回调：</h4><ul><li><code>onAttach()</code>：当片段与其所有者活动关联时调用。</li><li><code>onCreate()</code>：与活动类似，对于片段，调用执行初始片段创建（布局除外）。<code>onCreate()``onCreate()</code></li><li><code>onCreateView()</code>：调用以膨胀片段的布局。</li><li><code>onActivityCreated()</code>：当所有者活动完成时调用。在调用此方法之前，您的片段将无法访问该活动。<code>onCreate()</code></li><li><code>onStart()</code>：当片段变为可见时调用;与活动的平行。<code>onStart()</code></li><li><code>onResume()</code>：当片段获得用户焦点时调用;与活动的平行。<code>onResume()</code></li></ul><h4 id="Log-类将消息写入日志猫。"><a href="#Log-类将消息写入日志猫。" class="headerlink" title="Log 类将消息写入日志猫。"></a><a href="https://developer.android.com/reference/kotlin/android/util/Log" target="_blank" rel="noopener"><code>Log 类</code></a>将消息写入日志猫。</h4><p>此命令有三个部分：</p><ul><li><em>日志消息</em>的严重性，即消息的重要程度。在这种情况下[<code>，Log.i（） 方法</code>](<a href="https://developer.android.com/reference/kotlin/android/util/Log#i" target="_blank" rel="noopener">https://developer.android.com/reference/kotlin/android/util/Log#i</a>(kotlin.String, kotlin.String))写入信息消息。类中的其他方法包括[<code>用于错误的 Log.e（）</code>](<a href="https://developer.android.com/reference/kotlin/android/util/Log#e" target="_blank" rel="noopener">https://developer.android.com/reference/kotlin/android/util/Log#e</a>(kotlin.String, kotlin.String))或用于[<code>警告的 Log.w（）。</code> ](<a href="https://developer.android.com/reference/kotlin/android/util/Log#w" target="_blank" rel="noopener">https://developer.android.com/reference/kotlin/android/util/Log#w</a>(kotlin.String, kotlin.String))<code>Log</code></li><li>日志<em>标记</em>，在这种情况下。标记是一个字符串，可让您更轻松地在 Logcat 中查找日志消息。标记通常是类的名称。<code>"MainActivity"</code></li><li>实际日志<em>消息，</em>一个短字符串，在这种情况下是 。<code>"onCreate called"</code></li></ul><ol><li><p>编译并运行甜品点击器应用程序。点击甜点时，不会看到应用程序中的任何行为差异。在 Android 工作室中， 在屏幕底部， 单击<strong>Logcat</strong>选项卡</p><p><img src="https://codelabs.developers.google.com/codelabs/kotlin-android-training-lifecycles-logging/img/ff9c50376701877f.png" alt="img"></p><p>。日志猫是记录消息的控制台。此处将显示来自 Android 的有关应用的消息，包括您用方法或其他类方法显式发送到日志的消息。<code>Log.i()``Log</code></p></li><li><p>在**”日志猫**”窗格中，键入搜索字段。</p><p><img src="https://codelabs.developers.google.com/codelabs/kotlin-android-training-lifecycles-logging/img/f5c091e2b480edf8.png" alt="img">Logcat<br>可以包含许多消息，其中大多数对您没有用。</p><p>您可以通过多种方式筛选 Logcat 条目，但搜索是最容易的。由于您将用作代码中的日志标记，因此可以使用该标记筛选日志。在开始添加意味着这是一个信息性消息，由 创建。<br>日志消息包括日期和时间、包 （）、日志标记（在开始时使用）和实际<br>消息。由于此消息出现在日志中，因此您知道已执行。<code>I/MainActivity``MainActivity``I/``Log.i()``com.example.android.dessertclicker``I/``onCreate()</code></p><h4 id="使用第三方库，显示时间日志"><a href="#使用第三方库，显示时间日志" class="headerlink" title="使用第三方库，显示时间日志"></a>使用第三方库，显示时间日志</h4><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'com.jakewharton.timber:timber:4.7.1'</span></code></pre><p>简介：Timber<code>使用 类，因为整个应用将使用此日志记录库，并且在设置其他所有内容之前，需要先初始化一次库。在这种情况下，您可以对类进行子类，并使用您自己的自定义实现重写默认值。</code>Application``Application</p><h5 id="在全局类里初始化"><a href="#在全局类里初始化" class="headerlink" title="在全局类里初始化"></a>在全局类里初始化</h5><pre class=" language-kotlin"><code class="language-kotlin">Timber<span class="token punctuation">.</span><span class="token function">plant</span><span class="token punctuation">(</span>Timber<span class="token punctuation">.</span><span class="token function">DebugTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><pre class=" language-kotlin"><code class="language-kotlin">Timber<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"onCreate called"</span><span class="token punctuation">)</span></code></pre></li></ol><h3 id="4-2复杂的生命周期情况"><a href="#4-2复杂的生命周期情况" class="headerlink" title="4.2复杂的生命周期情况"></a>4.2复杂的生命周期情况</h3><h4 id="生命周期提示"><a href="#生命周期提示" class="headerlink" title="生命周期提示"></a><strong>生命周期提示</strong></h4><ul><li>如果在生命周期回调中设置或启动某项内容，请停止或删除相应回调中的东西。通过停止它，你确保它不会继续运行时，它不再需要。例如，如果在 中设置计时器，则需要在 中暂停或停止计时器。<code>onStart()``onStop()</code></li><li>仅用于初始化应用首次启动时运行一次的应用部分。用于启动应用在应用启动时和每次应用返回前台时运行的应用部分。<code>onCreate()``onStart()</code></li></ul><h4 id="生命周期库"><a href="#生命周期库" class="headerlink" title="生命周期库"></a><strong>生命周期库</strong></h4><ul><li>使用 Android 生命周期库将生命周期控制从活动或片段转移到需要生命周期感知的实际组件。</li><li>生命周期<em>所有者</em>是具有（因此具有”拥有”）生命周期（包括 和 ）的组件。生命周期所有者实现接口。<code>Activity``Fragment``LifecycleOwner</code></li><li>生命周期<em>观察者</em>会关注当前生命周期状态，并在生命周期更改时执行任务。生命周期观察者实现接口。<code>LifecycleObserver</code></li><li><code>Lifecycle</code>对象包含实际的生命周期状态，并在生命周期更改时触发事件。</li></ul><p>要创建生命周期感知类，请：</p><ul><li><p>在需要生命周期感知的类中实现接口。<code>LifecycleObserver</code></p></li><li><p>使用活动或片段中的生命周期对象初始化生命周期观察者类。</p></li><li><p>在生命周期观察者类中，注释生命周期感知方法，并注明它们感兴趣的生命周期状态更改。</p><p>例如，注释指示该方法正在监视生命周期事件。<code>@OnLifecycleEvent(Lifecycle.Event.ON_START)``onStart</code></p></li></ul><h4 id="进程关闭和保存活动状态"><a href="#进程关闭和保存活动状态" class="headerlink" title="进程关闭和保存活动状态"></a><strong>进程关闭和保存活动状态</strong></h4><ul><li>Android 可调节在后台运行的应用，以便前台应用可以毫无问题地运行。此法规包括限制后台应用可以执行的处理量，有时甚至会关闭整个应用过程。</li><li>用户无法判断系统是否在后台关闭了应用。应用仍显示在”最近”屏幕中，并且应以用户离开时的状态重新启动。</li><li>Android 调试桥 （） 是一个命令行工具，允许您向连接到计算机的模拟器和设备发送指令。您可以使用 模拟应用中的进程关闭。<code>adb``adb</code></li><li>当 Android 关闭应用进程时，不会调用生命周期方法。应用程序刚刚停止。<code>onDestroy()</code></li></ul><h4 id="保留活动和片段状态"><a href="#保留活动和片段状态" class="headerlink" title="保留活动和片段状态"></a><strong>保留活动和片段状态</strong></h4><ul><li>当你的应用进入后台时，在调用后，应用数据将保存到捆绑包中。某些应用数据（如 的内容）会自动保存。<code>onStop()``EditText</code></li><li>捆绑包是 的实例，它是键和值的集合。键始终为字符串。<code>Bundle</code></li><li>使用回调将其他数据保存到要保留的捆绑包，即使应用已自动关闭。若要将数据放入捆绑包中，请使用 以 开始的捆绑方法，例如 。<code>onSaveInstanceState()``put``putInt()</code></li><li>可以从方法中的捆绑包中恢复数据，或者更常见地在 中获取数据。该方法具有保存捆绑包的参数。<code>onRestoreInstanceState()``onCreate()``onCreate()``savedInstanceState</code></li><li>如果变量包含 ，则活动在没有状态包的情况下启动，并且没有要检索的状态数据。<code>savedInstanceState``null</code></li><li>若要使用键从捆绑包中检索数据，请使用 以 开始的方法，如 。<code>Bundle``get``getInt()</code></li></ul><h4 id="配置更改"><a href="#配置更改" class="headerlink" title="配置更改"></a><strong>配置更改</strong></h4><ul><li><em>当设备</em>的状态发生如此急剧的变化，系统解决更改的最简单方法是关闭和重建活动时，就会发生配置更改。</li><li>配置更改的最常见示例是当用户将设备从纵向旋转到横向模式或从横向模式旋转到纵向模式时。当设备语言更改或插入硬件键盘时，也可能发生配置更改。</li><li>当发生配置更改时，Android 会调用所有活动生命周期的关闭回调。然后 Android 从头开始重新启动活动，运行所有生命周期启动回调。</li><li>当 Android 由于配置更改而关闭应用时，它将使用 可用的状态捆绑包重新启动活动。<code>onCreate()</code></li><li>与进程关闭一样，将应用的状态保存到 中的捆绑包。<code>onSaveInstanceState()</code></li></ul><h2 id="第-5-课：体系结构组件"><a href="#第-5-课：体系结构组件" class="headerlink" title="第 5 课：体系结构组件"></a>第 5 课：体系结构组件</h2><h2 id="第-6-课：房间数据库和密码"><a href="#第-6-课：房间数据库和密码" class="headerlink" title="第 6 课：房间数据库和密码"></a>第 6 课：房间数据库和密码</h2><h2 id="第-7-课：回收器视图"><a href="#第-7-课：回收器视图" class="headerlink" title="第 7 课：回收器视图"></a>第 7 课：回收器视图</h2><h2 id="第8课：连接到互联网"><a href="#第8课：连接到互联网" class="headerlink" title="第8课：连接到互联网"></a>第8课：连接到互联网</h2><h2 id="第-9-课：存储库"><a href="#第-9-课：存储库" class="headerlink" title="第 9 课：存储库"></a>第 9 课：存储库</h2><h2 id="第-10-课：为每个人设计"><a href="#第-10-课：为每个人设计" class="headerlink" title="第 10 课：为每个人设计"></a>第 10 课：为每个人设计</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 ViewModel 处理配置更改</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/shi-yong-viewmodel-chu-li-pei-zhi-geng-gai/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/shi-yong-viewmodel-chu-li-pei-zhi-geng-gai/</url>
      
        <content type="html"><![CDATA[<h2 id="使用-ViewModel-处理配置更改"><a href="#使用-ViewModel-处理配置更改" class="headerlink" title="使用 ViewModel 处理配置更改"></a>使用 ViewModel 处理配置更改</h2><p>ViewModel 非常适合在用户积极使用应用程序时存储和管理与 UI 相关的数据。它允许快速访问 UI 数据，并帮助您避免通过旋转、窗口调整和其他常见发生的配置更改从网络或磁盘重新提取数据。若要了解如何实现视图模型，请参阅<a href="https://developer.android.com/topic/libraries/architecture/viewmodel.html" target="_blank" rel="noopener">视图模型指南</a>。</p><p>ViewModel 将数据保留在内存中，这意味着检索比从磁盘或网络中检索数据更便宜。ViewModel 与活动（或其他一些生命周期所有者）关联 - 它在配置更改期间保留在内存中，系统会自动将 ViewModel 与配置更改导致的新活动实例关联。</p><p>当用户退出活动或片段时，或者当您调用 finish（）时，ViewModels 会自动被系统销毁，这意味着状态将按用户在这些方案中的期望进行清除。</p><p>与保存的实例状态不同，ViewModels 在系统启动的进程死亡期间被销毁。这就是为什么您应该将 ViewModel 对象与 onSaveInstanceState（或其他一些磁盘持久性）结合使用，将标识符隐藏到保存的 InstanceState 中，以帮助查看模型在系统死亡后重新加载数据。</p><p>如果您已经拥有用于跨配置更改存储 UI 状态的内存中解决方案，则可能不需要使用 ViewModel。</p><h3 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h3><ul><li><a href="https://medium.com/androiddevelopers/viewmodels-a-simple-example-ed5ac416317e" target="_blank" rel="noopener">视图模型 ：一个简单的示例</a></li><li><a href="https://medium.com/androiddevelopers/viewmodels-persistence-onsaveinstancestate-restoring-ui-state-and-loaders-fc7cc4a6c090" target="_blank" rel="noopener">视图模型：持久性、在保存状态（）、还原 UI 状态和加载器</a></li><li><a href="https://codelabs.developers.google.com/codelabs/android-lifecycles/" target="_blank" rel="noopener">Android 生命周期感知组件代码实验室</a></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jetpack</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/jetpack/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/jetpack/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="Jetpack简介"><a href="#Jetpack简介" class="headerlink" title="Jetpack简介"></a>Jetpack简介</h1><p>Jetpack是一个开发组件工具集，官网：<a href="https://developer.android.google.cn/jetpack" target="_blank" rel="noopener">https://developer.android.google.cn/jetpack</a></p><p>Jetpack 是一套库，可帮助开发人员遵循最佳实践，减少样板代码，并编写跨 Android 版本和设备一致工作的代码，以便开发人员可以专注于他们关心的代码。</p><p>Jetpack 库可以单独使用，也可以组合使用，以满足应用的不同需求。</p><ul><li><a href="https://developer.android.google.cn/topic/libraries/architecture/workmanager" target="_blank" rel="noopener">WorkManager</a> - 满足您的后台调度需求。</li><li><a href="https://developer.android.google.cn/topic/libraries/architecture/room" target="_blank" rel="noopener">Room</a> - 实现数据存储持久性。</li><li><a href="https://developer.android.google.cn/guide/navigation/navigation-getting-started" target="_blank" rel="noopener">Navigation</a> - 管理应用导航流程。</li><li><a href="https://developer.android.google.cn/training/camerax" target="_blank" rel="noopener">CameraX</a> - 满足相机应用需求。</li><li>请参阅所有 Jetpack 库的<a href="https://developer.android.google.cn/jetpack/androidx/versions#version-table" target="_blank" rel="noopener">概览</a>。</li></ul><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200721153616389.png" alt="image-20200721153616389"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200722131636968.png" alt="image-20200722131636968"><br><img src="images/Jetpack/image-20200721153616389.png" alt="image-20200721153616389"></p><p><img src="images/Jetpack/image-20200722131636968.png" alt="image-20200722131636968"></p><h2 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>ViewModel是Jetpack组件之一，在传统Activity中需要负责逻辑处理，又要控制UI展示，甚至还得处理网络回调，现在ViewModel将负责Activity的数据部分</p><p>当手机旋转时Activity会被重新创建，但ViewModel生命周期是Activtity创建到销毁全过程，所以旋转不会导致数据丢失</p><p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/image-20200721154242410.png" alt="image-20200721154242410"><br>=======<br><img src="images/Jetpack/image-20200721154242410.png" alt="image-20200721154242410"></p><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>4a54e0bb7a2fa4b9efd486de9e7623ed98e692bd</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote><h3 id="简单的计时器"><a href="#简单的计时器" class="headerlink" title="简单的计时器"></a>简单的计时器</h3><ol><li><h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h4><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> lifecycle_version <span class="token operator">=</span> <span class="token string">"2.2.0"</span>    implementation <span class="token string">"androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version"</span></code></pre><p>​    </p></li><li><h4 id="创建ViewModel"><a href="#创建ViewModel" class="headerlink" title="创建ViewModel"></a>创建ViewModel</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel<span class="token keyword">class</span> MainModel<span class="token operator">:</span><span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> counter<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span></code></pre></li><li><h4 id="编写Activity"><a href="#编写Activity" class="headerlink" title="编写Activity"></a>编写Activity</h4><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre></li></ol><pre><code>   &lt;TextView       android:id="@+id/infoText"       android:layout_width="wrap_content"       android:layout_height="wrap_content"       android:layout_gravity="center_horizontal"       android:text="@string/jishi" /&gt;   &lt;Button       android:id="@+id/plusOnBtn"       android:layout_gravity="center_vertical"       android:layout_width="match_parent"       android:layout_height="wrap_content"       android:text="@string/pulus_one" /&gt;</code></pre>      ```<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">package</span> com<span class="token punctuation">.</span>kj<span class="token punctuation">.</span>scoreviewmodel<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProviders<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//定义viewmodel</span>    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> viewModel<span class="token operator">:</span> MainModel    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//初始化viewmodel</span>        viewModel<span class="token operator">=</span> ViewModelProviders<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MainModel<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//button点击事件</span>        plusOnBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            viewModel<span class="token punctuation">.</span>counter<span class="token operator">++</span>            <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//更新视图</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        infoText<span class="token punctuation">.</span>text<span class="token operator">=</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="向ViewModel传递参数"><a href="#向ViewModel传递参数" class="headerlink" title="向ViewModel传递参数"></a>向ViewModel传递参数</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel<span class="token comment" spellcheck="true">//添加构造参数</span><span class="token keyword">class</span> <span class="token function">MainModel2</span><span class="token punctuation">(</span>counter<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> counter<span class="token operator">=</span>counter<span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProvider<span class="token comment" spellcheck="true">//利用ViewModelProvider.Factory 接口 实现构造函数</span><span class="token keyword">class</span> <span class="token function">MainViewModelFactory</span><span class="token punctuation">(</span><span class="token keyword">private</span> <span class="token keyword">val</span> counter<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">:</span> ViewModelProvider<span class="token punctuation">.</span><span class="token function">Factory</span> <span class="token punctuation">{</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T <span class="token operator">:</span> ViewModel<span class="token operator">?</span><span class="token operator">></span> <span class="token function">create</span><span class="token punctuation">(</span>modelClass<span class="token operator">:</span> Class<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">MainModel2</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span> <span class="token keyword">as</span> T    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Context<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>SharedPreferences<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModelProviders<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span><span class="token keyword">class</span> MainActivity2 <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> viewModel<span class="token operator">:</span>MainModel2    <span class="token keyword">lateinit</span> <span class="token keyword">var</span> sp<span class="token operator">:</span> SharedPreferences    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>        sp<span class="token operator">=</span><span class="token function">getPreferences</span><span class="token punctuation">(</span>Context<span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span>        <span class="token keyword">val</span> countReserved<span class="token operator">=</span>sp<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"count_reserved"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//初始化viewmodel（修改点）</span>        viewModel<span class="token operator">=</span> ViewModelProviders<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token function">MainViewModelFactory</span><span class="token punctuation">(</span>countReserved<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>MainModel2<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//button点击事件</span>        plusOnBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            viewModel<span class="token punctuation">.</span>counter<span class="token operator">++</span>            <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        sp<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putInt</span><span class="token punctuation">(</span><span class="token string">"count_reserved"</span><span class="token punctuation">,</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//更新视图</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">refreshCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        infoText<span class="token punctuation">.</span>text<span class="token operator">=</span>viewModel<span class="token punctuation">.</span>counter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="更正由于ViewModel-设计理念是不依赖与Activity"><a href="#更正由于ViewModel-设计理念是不依赖与Activity" class="headerlink" title="更正由于ViewModel 设计理念是不依赖与Activity"></a>更正由于ViewModel 设计理念是不依赖与Activity</h3><h3 id="使用google推荐的写法"><a href="#使用google推荐的写法" class="headerlink" title="使用google推荐的写法"></a>使用google推荐的写法</h3><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> UserProfileViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">val</span> userId <span class="token operator">:</span> String <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token keyword">val</span> user <span class="token operator">:</span> User <span class="token operator">=</span> <span class="token function">TODO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">val</span> viewModel<span class="token operator">:</span> UserProfileViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h3 id="遇到的错误"><a href="#遇到的错误" class="headerlink" title="遇到的错误"></a>遇到的错误</h3><pre><code>Cannot inline bytecode built with JVM target 1.8 into bytecode that is being built with JVM target//解决android {    ...    compileOptions {        sourceCompatibility = 1.8        targetCompatibility = 1.8    }    kotlinOptions {        jvmTarget = "1.8"    }}</code></pre><p><img src="images/Jetpack/image-20200722134519104.png" alt="image-20200722134519104"></p><h2 id="Lifecycles"><a href="#Lifecycles" class="headerlink" title="Lifecycles"></a>Lifecycles</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>在网络请求中，由于网络响应延迟，页面关闭情况，我们要对activity生命周期进行逻辑处理</p><h3 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h3><pre><code>import android.util.Logimport androidx.lifecycle.Lifecycleimport androidx.lifecycle.LifecycleObserverimport androidx.lifecycle.OnLifecycleEventclass MyObserver(val lifecycle: Lifecycle) : LifecycleObserver {    @OnLifecycleEvent(Lifecycle.Event.ON_START)    fun activityStart(){        Log.d("MyObserver", "activityStart: ")    }    @OnLifecycleEvent(Lifecycle.Event.ON_STOP)    fun activityStop(){        Log.d("MyObserver", "activityStop: ")    }}</code></pre><pre><code>//activity监听生命周期        MyObserver(lifecycle)        val currentState = lifecycle.currentState        Toast.makeText(this, ""+currentState, Toast.LENGTH_SHORT).show()</code></pre><h2 id="LiveData"><a href="#LiveData" class="headerlink" title="LiveData"></a>LiveData</h2><p><a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData" target="_blank" rel="noopener"><code>LiveData</code></a> 是一种可观察的数据存储器类。与常规的可观察类不同，LiveData 具有生命周期感知能力，意指它遵循其他应用组件（如 Activity、Fragment 或 Service）的生命周期。这种感知能力可确保 LiveData 仅更新处于活跃生命周期状态的应用组件观察者。</p><p>您可以注册与实现 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner" target="_blank" rel="noopener"><code>LifecycleOwner</code></a> 接口的对象配对的观察者。有了这种关系，当相应的 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle" target="_blank" rel="noopener"><code>Lifecycle</code></a> 对象的状态变为 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Lifecycle.State#DESTROYED" target="_blank" rel="noopener"><code>DESTROYED</code></a> 时，便可移除此观察者。 这对于 Activity 和 Fragment 特别有用，因为它们可以放心地观察 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData" target="_blank" rel="noopener"><code>LiveData</code></a> 对象而不必担心泄露（当 Activity 和 Fragment 的生命周期被销毁时，系统会立即退订它们）。</p><ul><li>确保界面符合数据状态</li><li>不会发生内存泄漏</li><li>不会因Activity停止导致崩溃</li><li>不需要手动处理生命周期</li><li>数据保持最新状态</li><li>适当的配置更改</li><li>共享资源</li></ul><h3 id="1-使用LiveData对象"><a href="#1-使用LiveData对象" class="headerlink" title="1.使用LiveData对象"></a>1.使用LiveData对象</h3><ol><li><p>创建 <code>LiveData</code> 实例以存储某种类型的数据。这通常在 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/ViewModel" target="_blank" rel="noopener"><code>ViewModel</code></a> 类中完成。</p></li><li><p>创建可定义 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Observer#onChanged(T)" target="_blank" rel="noopener"><code>onChanged()</code></a> 方法的 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/Observer" target="_blank" rel="noopener"><code>Observer</code></a> 对象，该方法可以控制当 <code>LiveData</code> 对象存储的数据更改时会发生什么。通常情况下，您可以在界面控制器（如 Activity 或 Fragment）中创建 <code>Observer</code> 对象。</p></li><li><p>使用 [<code>observe()</code>](<a href="https://developer.android.google.cn/reference/androidx/lifecycle/LiveData#observe" target="_blank" rel="noopener">https://developer.android.google.cn/reference/androidx/lifecycle/LiveData#observe</a>(android.arch.lifecycle.LifecycleOwner, android.arch.lifecycle.Observer)) 方法将 <code>Observer</code> 对象附加到 <code>LiveData</code> 对象。<code>observe()</code> 方法会采用 <a href="https://developer.android.google.cn/reference/androidx/lifecycle/LifecycleOwner" target="_blank" rel="noopener"><code>LifecycleOwner</code></a> 对象。这样会使 <code>Observer</code> 对象订阅 <code>LiveData</code> 对象，以使其收到有关更改的通知。通常情况下，您可以在界面控制器（如 Activity 或 Fragment）中附加 <code>Observer</code> 对象。</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>MutableLiveData<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>lifecycle<span class="token punctuation">.</span>ViewModel<span class="token keyword">class</span> NameViewModel <span class="token operator">:</span> <span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 用字符串创建一个LiveData</span>    <span class="token keyword">val</span> currentName<span class="token operator">:</span> MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token keyword">by</span> lazy <span class="token punctuation">{</span>        MutableLiveData<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// ViewModel的其余部分…</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> NameActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 使用'by viewModels()' Kotlin属性委托</span>    <span class="token comment" spellcheck="true">// 来自activity-ktx工件</span>    <span class="token keyword">private</span> <span class="token keyword">val</span> model<span class="token operator">:</span> NameViewModel <span class="token keyword">by</span> <span class="token function">viewModels</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_name<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// 创建用于更新UI的观察者。</span>        <span class="token keyword">val</span> nameObserver <span class="token operator">=</span> Observer<span class="token operator">&lt;</span>String<span class="token operator">></span> <span class="token punctuation">{</span> newName <span class="token operator">-></span>            <span class="token comment" spellcheck="true">// 更新UI，这里是TextView。</span>            nameTextView<span class="token punctuation">.</span>text <span class="token operator">=</span> newName        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// 观察LiveData，将此活动作为LifecycleOwner和observer传递进来。</span>        model<span class="token punctuation">.</span>currentName<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> nameObserver<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// 修改参数</span>        button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            model<span class="token punctuation">.</span>currentName<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//model.currentName.postValue(edText.text.toString())</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ol><h3 id="2-map和switchMap的使用"><a href="#2-map和switchMap的使用" class="headerlink" title="2.map和switchMap的使用"></a>2.map和switchMap的使用</h3><ol><li><p>定义一个User类</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token keyword">var</span> fistName<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> lastName<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> age<span class="token operator">:</span>Int<span class="token punctuation">)</span></code></pre></li></ol><ol start="2"><li><p>编写ViewModel</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">MainViewModel</span><span class="token punctuation">(</span>countReserved<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ViewModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">val</span> userLiveData<span class="token operator">=</span>MytableLiveData<span class="token operator">&lt;</span>User<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">val</span> userName<span class="token operator">:</span>LiveData<span class="token operator">&lt;</span>String<span class="token operator">>=</span>Transformations<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userLiveData<span class="token punctuation">)</span><span class="token punctuation">{</span>user<span class="token operator">-></span>        <span class="token string">"<span class="token interpolation"><span class="token delimiter variable">${</span>user<span class="token punctuation">.</span>firstName<span class="token delimiter variable">}</span></span> <span class="token interpolation"><span class="token delimiter variable">${</span>user<span class="token punctuation">.</span>lastName<span class="token delimiter variable">}</span></span>"</span>                                                                <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ol><ol start="3"><li><h2 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h2></li></ol><p><a href="https://developer.android.google.cn/training/data-storage/room" target="_blank" rel="noopener">Room</a> 持久性库在 SQLite 的基础上提供了一个抽象层，让用户能够在充分利用 SQLite 的强大功能的同时，获享更强健的数据库访问机制。</p><p>Room 包含 3 个主要组件：</p><ul><li><p><a href="https://developer.android.google.cn/reference/androidx/room/Database" target="_blank" rel="noopener"><strong>数据库</strong></a>：包含数据库持有者，并作为应用已保留的持久关系型数据的底层连接的主要接入点。</p><p>使用 <a href="https://developer.android.google.cn/reference/androidx/room/Database" target="_blank" rel="noopener"><code>@Database</code></a> 注释的类应满足以下条件：</p><ul><li>是扩展 <a href="https://developer.android.google.cn/reference/androidx/room/RoomDatabase" target="_blank" rel="noopener"><code>RoomDatabase</code></a> 的抽象类。</li><li>在注释中添加与数据库关联的实体列表。</li><li>包含具有 0 个参数且返回使用 <a href="https://developer.android.google.cn/reference/androidx/room/Dao" target="_blank" rel="noopener"><code>@Dao</code></a> 注释的类的抽象方法。</li></ul><p>在运行时，您可以通过调用 [<code>Room.databaseBuilder()</code>](<a href="https://developer.android.google.cn/reference/androidx/room/Room#databaseBuilder" target="_blank" rel="noopener">https://developer.android.google.cn/reference/androidx/room/Room#databaseBuilder</a>(android.content.Context, java.lang.Class, java.lang.String)) 或 [<code>Room.inMemoryDatabaseBuilder()</code>](<a href="https://developer.android.google.cn/reference/androidx/room/Room#inMemoryDatabaseBuilder" target="_blank" rel="noopener">https://developer.android.google.cn/reference/androidx/room/Room#inMemoryDatabaseBuilder</a>(android.content.Context, java.lang.Class)) 获取 <a href="https://developer.android.google.cn/reference/androidx/room/Database" target="_blank" rel="noopener"><code>Database</code></a> 的实例。</p></li></ul><ul><li><p><a href="https://developer.android.google.cn/training/data-storage/room/defining-data" target="_blank" rel="noopener"><strong>Entity</strong></a>：表示数据库中的表。</p></li><li><p><a href="https://developer.android.google.cn/training/data-storage/room/accessing-data" target="_blank" rel="noopener"><strong>DAO</strong></a>：包含用于访问数据库的方法。</p></li></ul><p>应用使用 Room 数据库来获取与该数据库关联的数据访问对象 (DAO)。然后，应用使用每个 DAO 从数据库中获取实体，然后再将对这些实体的所有更改保存回数据库中。 最后，应用使用实体来获取和设置与数据库中的表列相对应的值。</p><p><img src="images/Jetpack/image-20200722181709403.png" alt="image-20200722181709403"></p><h3 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h3><p>导入依赖</p><pre class=" language-kotlin"><code class="language-kotlin">def room_version <span class="token operator">=</span> <span class="token string">"2.2.5"</span>    implementation <span class="token string">"androidx.room:room-runtime:<span class="token interpolation variable">$room_version</span>"</span>    <span class="token comment" spellcheck="true">//annotationProcessor "androidx.room:room-compiler:$room_version" // 对于Kotlin来说，使用kapt而不是annotationProcessor</span>    kapt <span class="token string">"androidx.room:room-compiler:<span class="token interpolation variable">$room_version</span>"</span> <span class="token comment" spellcheck="true">// 对于Kotlin来说，使用kapt而不是annotationProcessor</span><span class="token comment" spellcheck="true">// 可选- Kotlin扩展和协同程序支持空间</span>implementation <span class="token string">"androidx.room:room-ktx:<span class="token interpolation variable">$room_version</span>"</span><span class="token comment" spellcheck="true">// 可选- RxJava支持房间</span>implementation <span class="token string">"androidx.room:room-rxjava2:<span class="token interpolation variable">$room_version</span>"</span><span class="token comment" spellcheck="true">// 可选-番石榴支持房间，包括可选和ListenableFuture</span>implementation <span class="token string">"androidx.room:room-guava:<span class="token interpolation variable">$room_version</span>"</span><span class="token comment" spellcheck="true">// 测试助手</span>testImplementation <span class="token string">"androidx.room:room-testing:<span class="token interpolation variable">$room_version</span>"</span></code></pre><p>User</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//数据库的表</span><span class="token annotation builtin">@Entity</span><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">User</span><span class="token punctuation">(</span>    <span class="token annotation builtin">@ColumnInfo</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"first_name"</span><span class="token punctuation">)</span> <span class="token keyword">val</span> firstName<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">,</span>    <span class="token annotation builtin">@ColumnInfo</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"last_name"</span><span class="token punctuation">)</span> <span class="token keyword">val</span> lastName<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token annotation builtin">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token keyword">var</span> uid<span class="token operator">:</span> Long<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span>   </code></pre><p>UserDao</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//数据访问对象</span><span class="token annotation builtin">@Dao</span><span class="token keyword">interface</span> UserDao <span class="token punctuation">{</span>    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user"</span><span class="token punctuation">)</span>    <span class="token keyword">fun</span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span>    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user WHERE uid IN (:userIds)"</span><span class="token punctuation">)</span>    <span class="token keyword">fun</span> <span class="token function">loadAllByIds</span><span class="token punctuation">(</span>userIds<span class="token operator">:</span> IntArray<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>User<span class="token operator">></span>    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM user WHERE first_name LIKE :first AND "</span> <span class="token operator">+</span>            <span class="token string">"last_name LIKE :last LIMIT 1"</span><span class="token punctuation">)</span>    <span class="token keyword">fun</span> <span class="token function">findByName</span><span class="token punctuation">(</span>first<span class="token operator">:</span> String<span class="token punctuation">,</span> last<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> User    <span class="token annotation builtin">@Insert</span>    <span class="token keyword">fun</span> <span class="token function">insertUser</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span><span class="token operator">:</span>Long    <span class="token annotation builtin">@Delete</span>    <span class="token keyword">fun</span> <span class="token function">delete</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><p>AppDatabase</p><pre class=" language-kotlin"><code class="language-kotlin">    <span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao    <span class="token punctuation">}</span></code></pre><p>创建上述文件后，您可以使用以下代码获取已创建的数据库的实例：</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//定义数据库对象，数据库版本，包含的实体类</span><span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>entities <span class="token operator">=</span> <span class="token punctuation">[</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao    <span class="token keyword">companion</span> <span class="token keyword">object</span><span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">var</span> instance<span class="token operator">:</span> AppDatabase<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>        <span class="token annotation builtin">@Synchronized</span>        <span class="token keyword">fun</span> <span class="token function">getDatabase</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> AppDatabase <span class="token punctuation">{</span>            instance<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> it            <span class="token punctuation">}</span>            <span class="token keyword">return</span> Room<span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span>                AppDatabase<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">,</span><span class="token string">"app_database"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//Room默认不容许在主线程中进行数据库操作，加入这个方法可以在主线程进行数据库操作</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>                    instance <span class="token operator">=</span><span class="token keyword">this</span>                <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> </code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.room.RoomActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/edText<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name 用空格隔开<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>autofillHints</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>姓名<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/addBtn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/add<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/queryBtn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/query_data<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/updateBtn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/update<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/deleteBtn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/delete<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ScrollView</span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>                <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/textView<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>fontFamily</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@font/aldrich<span class="token punctuation">"</span></span>                <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>20sp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ScrollView</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> RoomActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//获取数据库实例</span>    <span class="token keyword">val</span> userDao<span class="token operator">=</span> AppDatabase<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_room<span class="token punctuation">)</span>        addBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            userDao<span class="token punctuation">.</span><span class="token function">insertUser</span><span class="token punctuation">(</span><span class="token function">User</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        updateBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            userDao<span class="token punctuation">.</span><span class="token function">upDateUser</span><span class="token punctuation">(</span><span class="token function">User</span><span class="token punctuation">(</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>edText<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        deleteBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            userDao<span class="token punctuation">.</span><span class="token function">deleteUserByLastName</span><span class="token punctuation">(</span>textView<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        queryBtn<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            <span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">""</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>user <span class="token keyword">in</span> userDao<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                str<span class="token operator">+=</span>user<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span>            <span class="token punctuation">}</span>            textView<span class="token punctuation">.</span>text<span class="token operator">=</span>str        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="Room的数据库升级"><a href="#Room的数据库升级" class="headerlink" title="Room的数据库升级"></a>Room的数据库升级</h3><p>添加数据库表Book</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Entity</span><span class="token keyword">data</span> <span class="token keyword">class</span> <span class="token function">Book</span><span class="token punctuation">(</span><span class="token keyword">var</span> name<span class="token operator">:</span>String<span class="token punctuation">,</span><span class="token keyword">var</span> pages<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation builtin">@PrimaryKey</span><span class="token punctuation">(</span>autoGenerate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token keyword">var</span> id<span class="token operator">:</span>Long<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">}</span></code></pre><p>BookDao</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token annotation builtin">@Dao</span><span class="token keyword">interface</span> BookDao <span class="token punctuation">{</span>    <span class="token annotation builtin">@Insert</span>    <span class="token keyword">fun</span> <span class="token function">insertBook</span><span class="token punctuation">(</span>book<span class="token operator">:</span> Book<span class="token punctuation">)</span><span class="token operator">:</span>Long    <span class="token annotation builtin">@Query</span><span class="token punctuation">(</span><span class="token string">"select * from Book"</span><span class="token punctuation">)</span>    <span class="token keyword">fun</span> <span class="token function">loadAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>Book<span class="token operator">></span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//定义数据库对象，数据库版本，包含的实体类</span><span class="token comment" spellcheck="true">//版本变成2 添加Book class</span><span class="token annotation builtin">@Database</span><span class="token punctuation">(</span>version <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> entities <span class="token operator">=</span> <span class="token punctuation">[</span>User<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>Book<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">abstract</span> <span class="token keyword">class</span> AppDatabase <span class="token operator">:</span> <span class="token function">RoomDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> UserDao    <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">bookDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> BookDao    <span class="token keyword">companion</span> <span class="token keyword">object</span><span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">var</span> instance<span class="token operator">:</span> AppDatabase<span class="token operator">?</span><span class="token operator">=</span><span class="token keyword">null</span>        <span class="token keyword">val</span> MIGRATION_1_2<span class="token operator">=</span><span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">Migration</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">migrate</span><span class="token punctuation">(</span>database<span class="token operator">:</span> SupportSQLiteDatabase<span class="token punctuation">)</span> <span class="token punctuation">{</span>                database<span class="token punctuation">.</span><span class="token function">execSQL</span><span class="token punctuation">(</span><span class="token string">"create table Book ("</span> <span class="token operator">+</span>                        <span class="token string">"id integer primary key autoincrement not null,"</span> <span class="token operator">+</span>                        <span class="token string">"name text not null,"</span> <span class="token operator">+</span>                        <span class="token string">"pages integer not null)"</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token annotation builtin">@Synchronized</span>        <span class="token keyword">fun</span> <span class="token function">getDatabase</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">)</span><span class="token operator">:</span> AppDatabase <span class="token punctuation">{</span>            instance<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> it            <span class="token punctuation">}</span>            <span class="token keyword">return</span> Room<span class="token punctuation">.</span><span class="token function">databaseBuilder</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>applicationContext<span class="token punctuation">,</span>                AppDatabase<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">,</span><span class="token string">"app_database"</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">allowMainThreadQueries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//Room默认不容许在主线程中进行数据库操作，加入这个方法可以在主线程进行数据库操作</span>                <span class="token punctuation">.</span><span class="token function">addMigrations</span><span class="token punctuation">(</span>MIGRATION_1_2<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//添加数据表</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{</span>                    instance <span class="token operator">=</span><span class="token keyword">this</span>                <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="WorkManager-调度任务"><a href="#WorkManager-调度任务" class="headerlink" title="WorkManager 调度任务"></a>WorkManager 调度任务</h2><p>使用 WorkManager API 可以轻松地调度即使在应用退出或设备重启时仍应运行的可延迟异步任务。</p><p><strong>主要功能</strong>：</p><ul><li>最高向后兼容到 API 14<ul><li>在运行 API 23 及以上级别的设备上使用 JobScheduler</li><li>在运行 API 14-22 的设备上结合使用 BroadcastReceiver 和 AlarmManager</li></ul></li><li>添加网络可用性或充电状态等工作约束</li><li>调度一次性或周期性异步任务</li><li>监控和管理计划任务</li><li>将任务链接起来</li><li>确保任务执行，即使应用或设备重启也同样执行任务</li><li>遵循低电耗模式等省电功能</li></ul><p>WorkManager 旨在用于<strong>可延迟</strong>运行（即不需要立即运行）并且在应用退出或设备重启时必须能够<strong>可靠运行</strong>的任务。例如：</p><ul><li>向后端服务发送日志或分析数据</li><li>定期将应用数据与服务器同步</li></ul><p>WorkManager 不适用于应用进程结束时能够安全终止的运行中后台工作，也不适用于需要立即执行的任务。请查看<a href="https://developer.android.google.cn/guide/background" target="_blank" rel="noopener">后台处理指南</a>，了解哪种解决方案符合您的需求。</p><h3 id="WorkManger基本用法"><a href="#WorkManger基本用法" class="headerlink" title="WorkManger基本用法"></a>WorkManger基本用法</h3><h4 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h4><pre class=" language-groovy"><code class="language-groovy"><span class="token keyword">def</span> work_version <span class="token operator">=</span> <span class="token string">"2.3.4"</span>        <span class="token comment" spellcheck="true">// (Java only)</span>        implementation <span class="token string">"androidx.work:work-runtime:$work_version"</span>        <span class="token comment" spellcheck="true">// Kotlin + coroutines</span>        implementation <span class="token string">"androidx.work:work-runtime-ktx:$work_version"</span>        <span class="token comment" spellcheck="true">// optional - RxJava2 support</span>        implementation <span class="token string">"androidx.work:work-rxjava2:$work_version"</span>        <span class="token comment" spellcheck="true">// optional - GCMNetworkManager support</span>        implementation <span class="token string">"androidx.work:work-gcm:$work_version"</span>        <span class="token comment" spellcheck="true">// optional - Test helpers</span>        androidTestImplementation <span class="token string">"androidx.work:work-testing:$work_version"</span></code></pre><h4 id="创建后台任务"><a href="#创建后台任务" class="headerlink" title="创建后台任务"></a>创建后台任务</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">SimpleWorker</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token punctuation">,</span>params<span class="token operator">:</span> WorkerParameters<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">Worker</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">doWork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Result <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//耗时操作</span>        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"SimpleWorker"</span><span class="token punctuation">,</span> <span class="token string">"doWork: do work in SimpleWorker"</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> Result<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin">button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span>            <span class="token keyword">val</span> request<span class="token operator">=</span>OneTimeWorkRequest<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span>SimpleWorker<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setInitialDelay</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span>TimeUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//设置5分钟后运行</span>                <span class="token punctuation">.</span><span class="token function">addTag</span><span class="token punctuation">(</span><span class="token string">"simple"</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//添加请求标签，</span>                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            WorkManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>        <span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BottomNavigationView控件学习md</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/bottomnavigationview-kong-jian-xue-xi-md/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/bottomnavigationview-kong-jian-xue-xi-md/</url>
      
        <content type="html"><![CDATA[<h1 id="as可直接生成底部导航"><a href="#as可直接生成底部导航" class="headerlink" title="as可直接生成底部导航"></a>as可直接生成底部导航</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/%E5%BA%95%E9%83%A8%E5%AF%BC%E8%88%AA.png" alt="1"></p><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/2.PNG" alt="2"></p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><pre><code>menu-&gt;item-&gt;id 要和 navigation-&gt;fragment-&gt;id 保持一致&lt;br&gt;startDestination:启动页面</code></pre><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/3.PNG" alt="3"></p><p><img src="https://raw.githubusercontent.com/kujin521/Typora_images/master/img/4.PNG" alt="4"></p><h3 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h3><pre><code> private void setNav() {    states = new int[][] {            new int[] { android.R.attr.state_selected}, // 选中状态            new int[] { android.R.attr.state_enabled}  // 未选中状态    };    colors = new int[] {            Color.BLUE,            Color.GRAY    };    ColorStateList myList = new ColorStateList(states, colors);    BottomNavigationView navView = findViewById(R.id.nav_view);    navView.setItemTextColor(myList);//设置item文字颜色    navView.setItemIconTintList(myList);//设置item图片颜色    NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment);    NavigationUI.setupWithNavController(navView, navController);}</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android Studio使用技巧</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/android-studio-shi-yong-ji-qiao/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/android-studio-shi-yong-ji-qiao/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="IDE技巧"><a href="#IDE技巧" class="headerlink" title="IDE技巧"></a>IDE技巧</h1><h2 id="1-提取样式"><a href="#1-提取样式" class="headerlink" title="1. 提取样式"></a>1. 提取样式</h2><p><img src="images/Android%20Studio%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20200718112705738.png" alt="image-20200718112705738"></p><p><img src="images/Android%20Studio%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/image-20200718112818773.png" alt="image-20200718112818773"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-4 开源网络封装库Retofit</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-4-kai-yuan-wang-luo-feng-zhuang-ku-retofit/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-4-kai-yuan-wang-luo-feng-zhuang-ku-retofit/</url>
      
        <content type="html"><![CDATA[<h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h1><h1 id="2-Retrofit基本用法"><a href="#2-Retrofit基本用法" class="headerlink" title="2.Retrofit基本用法"></a>2.Retrofit基本用法</h1><h3 id="2-1添加依赖"><a href="#2-1添加依赖" class="headerlink" title="2.1添加依赖"></a>2.1添加依赖</h3><pre class=" language-groovy"><code class="language-groovy">    implementation <span class="token string">'com.squareup.retrofit2:retrofit:2.6.1'</span>    implementation <span class="token string">'com.squareup.retrofit2:converter-gson:2.6.1'</span></code></pre><h2 id="2-2-编写gson实体类"><a href="#2-2-编写gson实体类" class="headerlink" title="2.2.编写gson实体类"></a>2.2.编写gson实体类</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> version<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre><h2 id="2-3创建接口"><a href="#2-3创建接口" class="headerlink" title="2.3创建接口"></a>2.3创建接口</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> AppService <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/**     * 使用get请求,参数是请求相对地址     * 返回类型是 对应的实体类     */</span>    <span class="token annotation builtin">@GET</span><span class="token punctuation">(</span><span class="token string">"get_data.json"</span><span class="token punctuation">)</span>    <span class="token keyword">fun</span> <span class="token function">getAppData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Call<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">}</span></code></pre><h2 id="2-4Activity界面编辑"><a href="#2-4Activity界面编辑" class="headerlink" title="2.4Activity界面编辑"></a>2.4Activity界面编辑</h2><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/getAppDataBtn<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Get App Data<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-3 封装网络请求</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-3-feng-zhuang-wang-luo-qing-qiu/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-3-feng-zhuang-wang-luo-qing-qiu/</url>
      
        <content type="html"><![CDATA[<h1 id="1-HttpURLConnection网络封装"><a href="#1-HttpURLConnection网络封装" class="headerlink" title="1.HttpURLConnection网络封装"></a>1.HttpURLConnection网络封装</h1><ol><li><p>定义接口</p></li><li><p>编写工具类</p></li><li><p>测试应用</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/** * 创建http回调接口 */</span><span class="token keyword">interface</span> HttpCallbackListener <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//服务器成功响应</span>    <span class="token keyword">fun</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//服务器响应失败</span>    <span class="token keyword">fun</span> <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">object</span> HttpUtil <span class="token punctuation">{</span>    <span class="token keyword">fun</span> <span class="token function">sendHttpRequest</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">,</span> listener<span class="token operator">:</span> HttpCallbackListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">var</span> connection<span class="token operator">:</span> HttpURLConnection<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span>                connection <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HttpURLConnection                connection<span class="token punctuation">.</span>connectTimeout <span class="token operator">=</span> <span class="token number">8000</span>                connection<span class="token punctuation">.</span>readTimeout <span class="token operator">=</span> <span class="token number">8000</span>                <span class="token keyword">val</span> input <span class="token operator">=</span> connection<span class="token punctuation">.</span>inputStream                <span class="token keyword">val</span> reader <span class="token operator">=</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span><span class="token function">InputStreamReader</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span>                reader<span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{</span>                    reader<span class="token punctuation">.</span><span class="token function">forEachLine</span> <span class="token punctuation">{</span>                        response<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token comment" spellcheck="true">// 回调onFinish()方法</span>                listener<span class="token punctuation">.</span><span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">// 回调onError()方法</span>                listener<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                connection<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ol><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//创建一个新的协程运行</span>    runBlocking <span class="token punctuation">{</span>        <span class="token function">getBaiduResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>suspend <span class="token keyword">fun</span> <span class="token function">getBaiduResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com/"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// 得到服务器返回的具体内容</span>        <span class="token function">println</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 在这里对异常情况进行处理</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>suspend <span class="token keyword">fun</span> <span class="token function">request</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span>    <span class="token keyword">return</span> suspendCoroutine <span class="token punctuation">{</span> continuation <span class="token operator">-></span>        HttpUtil<span class="token punctuation">.</span><span class="token function">sendHttpRequest</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span> <span class="token keyword">object</span> <span class="token operator">:</span>            HttpCallbackListener <span class="token punctuation">{</span>            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>                continuation<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>            <span class="token punctuation">}</span>            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onError</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                continuation<span class="token punctuation">.</span><span class="token function">resumeWithException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="2-Okhttp网络封装"><a href="#2-Okhttp网络封装" class="headerlink" title="2.Okhttp网络封装"></a>2.Okhttp网络封装</h1><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * callback: okhttp3.Callback: okhttp自带的回调接口     */</span>    <span class="token keyword">fun</span> <span class="token function">sendOkHttpRequest</span><span class="token punctuation">(</span>address<span class="token operator">:</span> String<span class="token punctuation">,</span> callback<span class="token operator">:</span> okhttp3<span class="token punctuation">.</span>Callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin">HttpUtil<span class="token punctuation">.</span><span class="token function">sendOkHttpRequest</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span><span class="token keyword">object</span> <span class="token operator">:</span>Callback<span class="token punctuation">{</span>        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onFailure</span><span class="token punctuation">(</span>call<span class="token operator">:</span> Call<span class="token punctuation">,</span> e<span class="token operator">:</span> IOException<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//处理异常数据</span>        <span class="token punctuation">}</span>        <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResponse</span><span class="token punctuation">(</span>call<span class="token operator">:</span> Call<span class="token punctuation">,</span> response<span class="token operator">:</span> Response<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//得到服务器返回的具体内容</span>            <span class="token keyword">val</span> reponseData<span class="token operator">=</span>response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2网络访问-数据格式</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-2-wang-luo-fang-wen-shu-ju-ge-shi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-2-wang-luo-fang-wen-shu-ju-ge-shi/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="1-创建一个本地简单的服务器"><a href="#1-创建一个本地简单的服务器" class="headerlink" title="1.创建一个本地简单的服务器"></a>1.创建一个本地简单的服务器</h1><p>apache服务器: <a href="https://www.apachehaus.com/cgi-bin/download.plx#APACHELEVC14" target="_blank" rel="noopener">https://www.apachehaus.com/cgi-bin/download.plx#APACHELEVC14</a></p><h1 id="2-解析XML格式数据"><a href="#2-解析XML格式数据" class="headerlink" title="2.解析XML格式数据"></a>2.解析XML格式数据</h1><ol><li>在桌面编写一个get_data.xml文件</li><li>请求网络代码</li><li>解析xml</li><li>由于android9开始不支持http请求,默认是https,需要配置,创建res/xml/network_config.xml</li><li>声明权限</li></ol><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apps</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Maps<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Chrom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Play<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apps</span><span class="token punctuation">></span></span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithOkHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//1. 获取okhttp实例</span>                <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//2. 设置请求参数</span>                <span class="token comment" spellcheck="true">//post请求(可选)</span>                <span class="token keyword">val</span> requestBody<span class="token operator">=</span>FormBody<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//.url("https://www.baidu.com")</span>                        <span class="token comment" spellcheck="true">//读取本地服务器文件</span>                    <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://192.168.2.228/get_data.xml"</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//.post(requestBody)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//3. 获取服务器返回的数据</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> responseData <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>responseData <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//showResponse(responseData)</span>                    <span class="token comment" spellcheck="true">//解析xml数据</span>                    <span class="token function">parseXMLWithPull</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * 解析xml数据格式     * Pull方式     */</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseXMLWithPull</span><span class="token punctuation">(</span>xmlData<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1. 创建XmlPullParserFactory实例,获取XmlPullParser对象</span>            <span class="token keyword">val</span> factory <span class="token operator">=</span> XmlPullParserFactory<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">val</span> xmlPullParser <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newPullParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//2. 将服务器返回的XML设置进去,开始解析</span>            xmlPullParser<span class="token punctuation">.</span><span class="token function">setInput</span><span class="token punctuation">(</span><span class="token function">StringReader</span><span class="token punctuation">(</span>xmlData<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//3. 得到当前解析事件</span>            <span class="token keyword">var</span> eventType <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span>eventType            <span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token string">""</span>            <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">""</span>            <span class="token keyword">var</span> version <span class="token operator">=</span> <span class="token string">""</span>            <span class="token comment" spellcheck="true">//4. 遍历解析事件</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>eventType <span class="token operator">!=</span> XmlPullParser<span class="token punctuation">.</span>END_DOCUMENT<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> nodeName <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span>name                <span class="token keyword">when</span> <span class="token punctuation">(</span>eventType<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment" spellcheck="true">//4.1 开始解析某个节点</span>                    XmlPullParser<span class="token punctuation">.</span>START_TAG <span class="token operator">-></span> <span class="token punctuation">{</span>                        <span class="token keyword">when</span> <span class="token punctuation">(</span>nodeName<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            <span class="token comment" spellcheck="true">//如果节点名等于id name version 就调用nextText()获取节点内容</span>                            <span class="token string">"id"</span> <span class="token operator">-></span> id <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token string">"name"</span> <span class="token operator">-></span> name <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                            <span class="token string">"version"</span> <span class="token operator">-></span> version <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">nextText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                    <span class="token comment" spellcheck="true">//4.2 完成解析某个节点,打印节点内容</span>                    XmlPullParser<span class="token punctuation">.</span>END_TAG <span class="token operator">-></span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"app"</span> <span class="token operator">==</span> nodeName<span class="token punctuation">)</span> <span class="token punctuation">{</span>                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation variable">$id</span>"</span><span class="token punctuation">)</span>                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation variable">$name</span>"</span><span class="token punctuation">)</span>                            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation variable">$version</span>"</span><span class="token punctuation">)</span>                        <span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                eventType <span class="token operator">=</span> xmlPullParser<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>network-security-config</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-config</span> <span class="token attr-name">cleartextTrafficPermitted</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trust-anchors</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificates</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>system<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trust-anchors</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-config</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>network-security-config</span><span class="token punctuation">></span></span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.example.networktest<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!--    声明网络权限--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>        <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>icon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@string/app_name<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>roundIcon</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@mipmap/ic_launcher_round<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>supportsRtl</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@style/AppTheme<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>networkSecurityConfig</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@xml/network_config<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!--        设置http请求--></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span></code></pre><p><img src="images/3-2%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE-%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F/image-20200729223542261.png" alt="image-20200729223542261"></p><h1 id="3-解析JSON格式数据"><a href="#3-解析JSON格式数据" class="headerlink" title="3.解析JSON格式数据"></a>3.解析JSON格式数据</h1><ol><li>在htdocs目录下创建一个get_data.json文件</li><li>编写解析代码</li></ol><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"5.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash of Clans"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"7.0"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Boom Beach"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"3.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash Royale"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * 使用官方提供的JsonObject     */</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseJSONWithJSONObject</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//1. 获取jsonarray,进行循环解析</span>            <span class="token keyword">val</span> jsonArray <span class="token operator">=</span> <span class="token function">JSONArray</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//2. 如果循环中不要最后一个范围区间的值可以使用 until 函数:</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until jsonArray<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> jsonObject <span class="token operator">=</span> jsonArray<span class="token punctuation">.</span><span class="token function">getJSONObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>                <span class="token keyword">val</span> id <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> name <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> version <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"version"</span><span class="token punctuation">)</span>                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation variable">$id</span>"</span><span class="token punctuation">)</span>                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation variable">$name</span>"</span><span class="token punctuation">)</span>                Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation variable">$version</span>"</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h1 id="4-优化解析-使用GSON开源库"><a href="#4-优化解析-使用GSON开源库" class="headerlink" title="4.优化解析,使用GSON开源库"></a>4.优化解析,使用GSON开源库</h1><h2 id="1-导入gson依赖"><a href="#1-导入gson依赖" class="headerlink" title="1.导入gson依赖"></a>1.导入gson依赖</h2><pre class=" language-groovy"><code class="language-groovy">implementation <span class="token string">'com.google.code.gson:gson:2.8.5'</span></code></pre><p>一段json数据</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Tom"</span><span class="token punctuation">,</span><span class="token property">"age"</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> gson<span class="token operator">=</span><span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">val</span> person<span class="token operator">=</span>gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span>Person<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">.</span>java<span class="token punctuation">)</span></code></pre><p>解析json数组</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"5.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash of Clans"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"6"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"7.0"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Boom Beach"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"7"</span><span class="token punctuation">,</span><span class="token property">"version"</span><span class="token operator">:</span><span class="token string">"3.5"</span><span class="token punctuation">,</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"Clash Royale"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">val</span> typeOf <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> TypeToken<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span>type        <span class="token keyword">val</span> appList <span class="token operator">=</span> gson<span class="token punctuation">.</span>fromJson<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> typeOf<span class="token punctuation">)</span></code></pre><h2 id="2-根据gson格式-编写实体类"><a href="#2-根据gson格式-编写实体类" class="headerlink" title="2.根据gson格式,编写实体类,"></a>2.根据gson格式,编写实体类,</h2><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token keyword">val</span> id<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">val</span> version<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/**     * 利用Gson解析json数据     */</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">parseJSONWithGSON</span><span class="token punctuation">(</span>jsonData<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//1. 获取gson实例</span>        <span class="token keyword">val</span> gson <span class="token operator">=</span> <span class="token function">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2. 设置gson数据格式</span>        <span class="token keyword">val</span> typeOf <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> TypeToken<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span>type        <span class="token keyword">val</span> appList <span class="token operator">=</span> gson<span class="token punctuation">.</span>fromJson<span class="token operator">&lt;</span>List<span class="token operator">&lt;</span>App<span class="token operator">></span><span class="token operator">></span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> typeOf<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3. 循环遍历jsonarray数据</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>app <span class="token keyword">in</span> appList<span class="token punctuation">)</span> <span class="token punctuation">{</span>            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"id is <span class="token interpolation"><span class="token delimiter variable">${</span>app<span class="token punctuation">.</span>id<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"name is <span class="token interpolation"><span class="token delimiter variable">${</span>app<span class="token punctuation">.</span>name<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>            Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"MainActivity"</span><span class="token punctuation">,</span> <span class="token string">"version is <span class="token interpolation"><span class="token delimiter variable">${</span>app<span class="token punctuation">.</span>version<span class="token delimiter variable">}</span></span>"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-2-1安装Apache服务器</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-2-1-an-zhuang-apache-fu-wu-qi/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-2-1-an-zhuang-apache-fu-wu-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="打开Apache文件夹："><a href="#打开Apache文件夹：" class="headerlink" title="打开Apache文件夹："></a>打开Apache文件夹：</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116191738802-1520378758.png" alt="img"></p><h1 id="打开conf文件夹下的：httpd-conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置："><a href="#打开conf文件夹下的：httpd-conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置：" class="headerlink" title="打开conf文件夹下的：httpd.conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置："></a>打开conf文件夹下的：httpd.conf文件，将Apache的目录位置修改为当前你Apache安装存放的位置：</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116192340009-252139911.png" alt="img"></p><h1 id="在cmd命令下输入：netstat-a，查看80端口是否被占用，如果被占用，将：httpd-conf文件中的80端口改为其他端口后保存"><a href="#在cmd命令下输入：netstat-a，查看80端口是否被占用，如果被占用，将：httpd-conf文件中的80端口改为其他端口后保存" class="headerlink" title="在cmd命令下输入：netstat -a，查看80端口是否被占用，如果被占用，将：httpd.conf文件中的80端口改为其他端口后保存"></a>在cmd命令下输入：netstat -a，查看80端口是否被占用，如果被占用，将：httpd.conf文件中的80端口改为其他端口后保存</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116192853889-223879327.png" alt="img"></p><h1 id="配置安装Apache的主服务，在cmd中输入：”E-Apache-2-4-37-Apache-bin-httpd-exe”-k-install-n-apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os-5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了："><a href="#配置安装Apache的主服务，在cmd中输入：”E-Apache-2-4-37-Apache-bin-httpd-exe”-k-install-n-apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os-5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了：" class="headerlink" title="配置安装Apache的主服务，在cmd中输入：”E:\Apache-2.4.37\Apache\bin\httpd.exe” -k install -n apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os 5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了："></a>配置安装Apache的主服务，在cmd中输入：”E:\Apache-2.4.37\Apache\bin\httpd.exe” -k install -n apache，注意一定要加引号，然后回车，如果出现如下信息，说明配置成功了，如果出现：“os 5拒绝访问”的错误，说明是你的管理权限限制，这个时候关闭cmd，然后重新以管理员身份运行cmd，再进行上一步操作，问题就能解决了：</h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116193655296-284734092.png" alt="img"></p><h1 id="启动Apache服务：双击bin目录下的：ApacheMonitor-exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。"><a href="#启动Apache服务：双击bin目录下的：ApacheMonitor-exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。" class="headerlink" title="启动Apache服务：双击bin目录下的：ApacheMonitor.exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。"></a>启动Apache服务：双击bin目录下的：ApacheMonitor.exe，然后会在电脑右下角出现它的显示符号，双击这个符号，在弹出的窗口中点击start就行了。</h1><p>　　注意：关闭Apache服务点击stop来关闭，当然也可以Windows系统来关闭</p><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116193905150-1782682408.png" alt="img"> </p><p> <img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116194605315-1293110702.png" alt="img"></p><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116194636633-1358003770.png" alt="img"></p><h1 id="打开浏览器，在网址栏输入：127-0-0-1-或者：http-localhost-，出现如下界面就表示配置成功了"><a href="#打开浏览器，在网址栏输入：127-0-0-1-或者：http-localhost-，出现如下界面就表示配置成功了" class="headerlink" title="打开浏览器，在网址栏输入：127.0.0.1(或者：http://localhost)，出现如下界面就表示配置成功了"></a>打开浏览器，在网址栏输入：127.0.0.1(或者：<a href="http://localhost),出现如下界面就表示配置成功了/" target="_blank" rel="noopener">http://localhost)，出现如下界面就表示配置成功了</a></h1><p><img src="https://img2018.cnblogs.com/blog/1505274/201901/1505274-20190116195213945-320211796.png" alt="img"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-1网络访问</title>
      <link href="/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-1-wang-luo-fang-wen/"/>
      <url>/Blog/2020/10/05/sui-xin-ji/android-xue-xi/3-1-wang-luo-fang-wen/</url>
      
        <content type="html"><![CDATA[<p>[toc]</p><h1 id="1-WebView的用法"><a href="#1-WebView的用法" class="headerlink" title="1.WebView的用法"></a>1.WebView的用法</h1><blockquote><p>WevView是andorid控件,可以显示简单的网页</p></blockquote><ol><li>编写main.xml界面</li><li>关键代码</li><li>添加AndroidMainifest.xml权限</li></ol><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WebView</span>        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/webView<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//设置一些浏览器属性,支持JavaScript脚本</span>        webView<span class="token punctuation">.</span>settings<span class="token punctuation">.</span><span class="token function">setJavaScriptEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//获取实例,设置url</span>        webView<span class="token punctuation">.</span>webViewClient <span class="token operator">=</span> <span class="token function">WebViewClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p><img src="images/3-1%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE/image-20200729175044618.png" alt="image-20200729175044618"></p><h1 id="2-使用HttpURLConnection"><a href="#2-使用HttpURLConnection" class="headerlink" title="2.使用HttpURLConnection"></a>2.使用HttpURLConnection</h1><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithHttpURLConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 开启线程来发起网络请求</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">var</span> connection<span class="token operator">:</span> HttpURLConnection<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> <span class="token function">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//1. 创建url,获取HttpURLConnection实例</span>                <span class="token keyword">val</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>                connection <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HttpURLConnection                <span class="token comment" spellcheck="true">//2. 设置请求方式,连接超时,读取时间</span>                connection<span class="token punctuation">.</span>requestMethod<span class="token operator">=</span><span class="token string">"GET"</span>                connection<span class="token punctuation">.</span>connectTimeout <span class="token operator">=</span> <span class="token number">8000</span>                connection<span class="token punctuation">.</span>readTimeout <span class="token operator">=</span> <span class="token number">8000</span>                <span class="token comment" spellcheck="true">//3. 获取服务器返回的输入流</span>                <span class="token keyword">val</span> input <span class="token operator">=</span> connection<span class="token punctuation">.</span>inputStream                <span class="token comment" spellcheck="true">// 下面对获取到的输入流进行读取</span>                <span class="token keyword">val</span> reader <span class="token operator">=</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span><span class="token function">InputStreamReader</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span>                reader<span class="token punctuation">.</span><span class="token function">use</span> <span class="token punctuation">{</span>                    reader<span class="token punctuation">.</span><span class="token function">forEachLine</span> <span class="token punctuation">{</span>                        response<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token function">showResponse</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>                connection<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">showResponse</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        runOnUiThread <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 在这里进行UI操作，将结果显示到界面上</span>            responseText<span class="token punctuation">.</span>text <span class="token operator">=</span> response        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h2 id="post请求设置"><a href="#post请求设置" class="headerlink" title="post请求设置"></a>post请求设置</h2><pre class=" language-kotlin"><code class="language-kotlin">connection<span class="token punctuation">.</span>requestMethod<span class="token operator">=</span><span class="token string">"POST"</span>                <span class="token keyword">val</span> output<span class="token operator">=</span><span class="token function">DataOutputStream</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span>outputStream<span class="token punctuation">)</span>                output<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span>                output<span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span><span class="token string">"username=admin&amp;password=123456"</span><span class="token punctuation">)</span></code></pre><h1 id="3-使用OkHttp-推荐"><a href="#3-使用OkHttp-推荐" class="headerlink" title="3.使用OkHttp(推荐)"></a>3.使用OkHttp(推荐)</h1><p>首选的android开源网络通信库 github:<a href="https://square.github.io/okhttp/" target="_blank" rel="noopener">https://square.github.io/okhttp/</a></p><ol><li>添加依赖</li><li>关键代码</li><li>添加权限</li></ol><pre class=" language-groovy"><code class="language-groovy"><span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string">"com.squareup.okhttp3:okhttp:4.8.0"</span><span class="token punctuation">)</span></code></pre><pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">sendRequestWithOkHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        thread <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//1. 获取okhttp实例</span>                <span class="token keyword">val</span> client <span class="token operator">=</span> <span class="token function">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//2. 设置请求参数</span>                <span class="token comment" spellcheck="true">//post请求(可选)</span>                <span class="token keyword">val</span> requestBody<span class="token operator">=</span>FormBody<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span><span class="token string">"admin"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span><span class="token string">"123456"</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> request <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//.post(requestBody)</span>                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//3. 获取服务器返回的数据</span>                <span class="token keyword">val</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">val</span> responseData <span class="token operator">=</span> response<span class="token punctuation">.</span>body<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>responseData <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">showResponse</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">showResponse</span><span class="token punctuation">(</span>response<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span>        runOnUiThread <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 在这里进行UI操作，将结果显示到界面上</span>            responseText<span class="token punctuation">.</span>text <span class="token operator">=</span> response        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Android学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android学习 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
